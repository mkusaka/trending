<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom">
  <title>GitHub TypeScript Daily Trending</title>
  <id>http://mshibanami.github.io/GitHubTrendingRSS</id>
  <updated>2023-07-26T01:45:44Z</updated>
  <subtitle>Daily Trending of TypeScript in GitHub</subtitle>
  <link href="http://mshibanami.github.io/GitHubTrendingRSS"></link>
  <entry>
    <title>adobe/spectrum-web-components</title>
    <updated>2023-07-26T01:45:44Z</updated>
    <id>tag:github.com,2023-07-26:/adobe/spectrum-web-components</id>
    <link href="https://github.com/adobe/spectrum-web-components" rel="alternate"></link>
    <summary type="html">&lt;p&gt;Spectrum Web Components&lt;/p&gt;&lt;hr&gt;&lt;h1&gt;Who are we?&lt;/h1&gt; &#xA;&lt;p&gt;Spectrum Web Components is a future-looking project to develop Adobe Spectrum design language based around web components, ES-Modules, and modern browser standards.&lt;/p&gt; &#xA;&lt;p&gt;To this end, Spectrum Web Components only targets &lt;em&gt;modern&lt;/em&gt;, evergreen browsers that fully implement the Custom Elements V1 specification, e.g. Chrome, Firefox, Safari. Polyfills will be avoided as much as possible but documented if necessary.&lt;/p&gt; &#xA;&lt;h1&gt;Requirements&lt;/h1&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;NodeJS &amp;gt;= 14.15.3&lt;/li&gt; &#xA; &lt;li&gt;Typescript&lt;/li&gt; &#xA; &lt;li&gt;Browsers with Custom Elements V1 and Shadow DOM support, e.g. Chrome, Firefox, Safari, Edge (79+) &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;Or appropriate &lt;a href=&#34;https://github.com/webcomponents/webcomponentsjs&#34;&gt;polyfills&lt;/a&gt; in older browsers.&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h1&gt;Getting started&lt;/h1&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;git clone https://github.com/adobe/spectrum-web-components.git&#xA;cd spectrum-web-components&#xA;yarn&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;The call to &lt;code&gt;yarn&lt;/code&gt; will install and setup everything you need for developing and running the packages in this library.&lt;/p&gt; &#xA;&lt;p&gt;Typical development will involve running &lt;code&gt;yarn storybook&lt;/code&gt;, &lt;code&gt;yarn test&lt;/code&gt;, and &lt;code&gt;yarn docs:start&lt;/code&gt; if you&#39;re making documentation changes (see below for additional details).&lt;/p&gt; &#xA;&lt;h2&gt;Building a new component&lt;/h2&gt; &#xA;&lt;p&gt;Creating a new component from the command line can be done by running the following:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ yarn new-package&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;This will scaffold your component&#39;s required architecture by prompting you for 2 data points - the desired name for your package and the name of the Spectrum CSS asset from which you will be building.&lt;/p&gt; &#xA;&lt;p&gt;? &lt;strong&gt;SWC package name (i.e. color-area)&lt;/strong&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;em&gt;Note&lt;/em&gt; that your component name should be provided in kebab case and should relate as closely as possible to the Spectrum core naming.&lt;/p&gt; &#xA;&lt;p&gt;? &lt;strong&gt;Spectrum CSS package name (i.e. colorarea)&lt;/strong&gt;&lt;/p&gt; &#xA;&lt;p&gt;You can find this information in the &lt;a href=&#34;https://github.com/adobe/spectrum-css&#34;&gt;Spectrum CSS GitHub project&lt;/a&gt; by finding the component package.json (i.e., &lt;code&gt;components/accordion/package.json&lt;/code&gt;)&lt;/p&gt; &#xA;&lt;p&gt;For additional information, please see the &lt;a href=&#34;https://opensource.adobe.com/spectrum-web-components/guides/generating-components&#34;&gt;generating components documentation&lt;/a&gt; and capturing the value of the package name: &lt;code&gt;&#34;name&#34;: &#34;@spectrum-css/accordion&#34;&lt;/code&gt;. In this example, that name is &lt;code&gt;accordion&lt;/code&gt;. &lt;em&gt;Note&lt;/em&gt; that the project scope &lt;code&gt;@spectrum-css&lt;/code&gt; is stripped out of the response.&lt;/p&gt; &#xA;&lt;h1&gt;Storybook&lt;/h1&gt; &#xA;&lt;p&gt;Testing &amp;amp; reviewing changes can be done using the Storybook instance. Running &lt;code&gt;yarn storybook&lt;/code&gt; will spin up a local instance of Storybook, triggering the browser to open at completion. From there you can make changes to your code and the browser will automatically refresh.&lt;/p&gt; &#xA;&lt;p&gt;You can run &lt;a href=&#34;https://storybook.js.org&#34;&gt;Storybook&lt;/a&gt; through the command:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;yarn storybook&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;By default, the resulting site will be available at &lt;a href=&#34;http://localhost:8000&#34;&gt;http://localhost:8000&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;h1&gt;Documentation&lt;/h1&gt; &#xA;&lt;p&gt;The Spectrum Web Components documentation site is available via the following command:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;yarn docs:start&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;By default, the resulting site will be available at &lt;a href=&#34;http://localhost:8080&#34;&gt;http://localhost:8080&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;p&gt;In the case that you&#39;d like to serve and test a static build of the documentation from the root directory (&lt;code&gt;localhost&lt;/code&gt; or otherwise), use:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;yarn docs:build&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h1&gt;Updating Spectrum CSS&lt;/h1&gt; &#xA;&lt;p&gt;There are two mechanisms for broadly updating SWC&#39;s Spectrum CSS dependencies:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;code&gt;yarn update:spectrum-css&lt;/code&gt; brings all Spectrum CSS dependencies to &#39;latest&#39;&lt;/li&gt; &#xA; &lt;li&gt;&lt;code&gt;yarn update:spectrum-css:nonbreaking&lt;/code&gt; brings them to the latest minor or patch version&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;We aim to keep Spectrum CSS as current as possible, to track the Spectrum design system closely. The &lt;code&gt;:nonbreaking&lt;/code&gt; variant lets us release patch updates quickly in cases where more work is required to be compatible with &#39;latest.&#39;&lt;/p&gt; &#xA;&lt;h1&gt;Advanced development&lt;/h1&gt; &#xA;&lt;p&gt;There are several commands that can be useful in specific scenarios:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;code&gt;yarn build:clear-cache&lt;/code&gt; to remove previously created artifacts of the &lt;code&gt;tsc build&lt;/code&gt; process.&lt;/li&gt; &#xA; &lt;li&gt;&lt;code&gt;yarn spectrum-vars&lt;/code&gt; to ensure that theme files are up-to-date.&lt;/li&gt; &#xA; &lt;li&gt;&lt;code&gt;yarn process-icons&lt;/code&gt; to make sure that the most recent icons are included.&lt;/li&gt; &#xA; &lt;li&gt;&lt;code&gt;yarn process-spectrum&lt;/code&gt; to process the spectrum CSS style sources into the individual packages.&lt;/li&gt; &#xA; &lt;li&gt;&lt;code&gt;yarn build&lt;/code&gt; to make sure the available JS has been built from the current TS source.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;Linting&lt;/h2&gt; &#xA;&lt;p&gt;The project will be linted on a pre-commit hook, but you can also run the lint suite with &lt;code&gt;yarn lint&lt;/code&gt;. It uses ESLint to lint the JS / TS files, and StyleLint to lint the CSS files.&lt;/p&gt; &#xA;&lt;h3&gt;Dependency linting&lt;/h3&gt; &#xA;&lt;p&gt;There are downstream issues that can arise from multiple packages in this mono-repo using dependencies with mismatching version strings. This is particularly an issue for dependencies below &lt;code&gt;1.0.0&lt;/code&gt; but can be exacerbated in that context and others by more strict settings that can be applied in various package managers. By default, Lerna will bump version numbers of internal dependencies when the various packages are published and the depended version is pointing to the latest release, which can help to mitigate this issue. This can be further mitigated by using &lt;code&gt;^0.0.0&lt;/code&gt; structured dependency versions, the &lt;code&gt;^&lt;/code&gt; allowing for the highest amount of upward flexibility in satisfying the dependency. When using these version strings, &lt;code&gt;yarn lint:versions&lt;/code&gt; which ensure that all instances of those strings for the same dependency match across the repo.&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;yarn list:versions --fix&lt;/code&gt; will reach into the &lt;code&gt;package.json&lt;/code&gt; files and update all dependencies to the latest version available in the library, &lt;em&gt;a possibly dangerous operation&lt;/em&gt;. If you know this is what you want to do when there are mismatched versions found by &lt;code&gt;yarn lint:versions&lt;/code&gt;, this can make greatly shorten the amount of work to catch the versions up to each other.&lt;/p&gt; &#xA;&lt;h2&gt;Testing&lt;/h2&gt; &#xA;&lt;h3&gt;Unit tests&lt;/h3&gt; &#xA;&lt;p&gt;Unit tests are run with &lt;a href=&#34;https://modern-web.dev/docs/test-runner/overview/&#34;&gt;Web Test Runner&lt;/a&gt; in Playwright using the Chai, Mocha and Sinon helper libraries. These tests can be executed with:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;yarn test&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;During development you may wish to use &lt;code&gt;yarn test:watch&lt;/code&gt; to automatically build and re-run the test suites.&lt;/p&gt; &#xA;&lt;h3&gt;Screenshot testing&lt;/h3&gt; &#xA;&lt;p&gt;Note: visual regression is done automatically on pull requests via CircleCI; however, the following outlines how you can run these tests local to your machine.&lt;/p&gt; &#xA;&lt;p&gt;Visual regressions are tracked via screenshot testing powered by &lt;a href=&#34;https://github.com/modernweb-dev/web/tree/master/packages/test-runner-visual-regression&#34;&gt;&lt;code&gt;@web/test-runner-visual-regression&lt;/code&gt;&lt;/a&gt;. Due to the font metrics not being identical, it is difficult to rely on screenshot-based testing across operating systems. Because of this, the library manages its golden image cache internal to CircleCI, rather than as a part of the git repository. Neither the &lt;code&gt;screenshots-baseline&lt;/code&gt; nor &lt;code&gt;screenshots-actual&lt;/code&gt; directory should be added to git. When working with visual regression tests locally to manage changes you are making, be sure to create a baseline locally before you begin development (alternatively, you can pull down the main branch to generate the baselines for your in-progress work).&lt;/p&gt; &#xA;&lt;p&gt;To create a local baseline for comparing your changes to later in the development cycle, use the following:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;yarn test:visual:clean # start with a clean slate&#xA;# yarn test:visual:clean:baseline # removes only baseline images&#xA;# yarn test:visual:clean:current # removes only images updated in the most recent test pass&#xA;&#xA;# To enable comparison, it is generally recommended to generate baselines on the main branch.&#xA;yarn test:visual vrt-${component name} --update-visual-baseline&#xA;eg: yarn test:visual vrt-accordion --update-visual-baseline&#xA;&#xA;# Running the tests on the local branch&#xA;yarn test:visual vrt-${component name}&#xA;eg: yarn test:visual vrt-accordion&#xA;&#xA;# Running the tests of light medium ltr&#xA;yarn test:visual vrt-${component name}-single&#xA;eg: yarn test:visual vrt-accordion-single&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h4&gt;Screenshot coverage&lt;/h4&gt; &#xA;&lt;p&gt;Visual regression testing is done against screens derived from the exports of the &lt;code&gt;*.stories.js&lt;/code&gt; files in each package. As you add packages or story files to existing packages, they will automatically be added to the visual regression suite and will require updating the cache key (outlined below).&lt;/p&gt; &#xA;&lt;h4&gt;Keeping CI assets updated&lt;/h4&gt; &#xA;&lt;p&gt;If you find the &lt;code&gt;visual-*&lt;/code&gt; jobs failing on CircleCI for reasons that you expect (you&#39;ve updated the Spectrum CSS dependencies, you&#39;ve added new tests, etc.) then you will need to update the golden images cache key before your build will pass. You can review and share the diffs for a test pass via a URL shaped like &lt;code&gt;vrt--spectrum-web-components.netlify.app/${branchName}&lt;/code&gt;. Before updating the cache key, be sure that the updated caches are both complete (there are times when process errors prevent images from being correctly created or when certain test passes take longer than others) and appear as expected. If you agree with the updated cache content, update the golden images cache key as follows.&lt;/p&gt; &#xA;&lt;p&gt;Your failing branch will have created a new cache with a key of &lt;code&gt;v1-golden-images-{{ .Revision }}-&amp;lt;&amp;lt; parameters.regression_color &amp;gt;&amp;gt;-&amp;lt;&amp;lt; parameters.regression_scale &amp;gt;&amp;gt;-&amp;lt;&amp;lt; parameters.dir &amp;gt;&amp;gt;-{{ epoch }}&lt;/code&gt;. Here &lt;code&gt;{{ .Revision }}&lt;/code&gt; outlines the git commit hash of the current CI pass. In &lt;code&gt;.circleci/config.yml&lt;/code&gt;, you will use that to update the cache that is requested at the beginning of the &lt;code&gt;run-regressions&lt;/code&gt; job. As part of the review site, the git commit hash will be listed in the side navigation UI for easy access, use this number to update the &lt;code&gt;current_golden_images_hash&lt;/code&gt; paramater that appears as follows:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;parameters:&#xA;    current_golden_images_hash:&#xA;        type: string&#xA;        default: ${UPDATE_REVISION_NUMBER_HERE}&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;This will ensure that tests on this branch point to this cache key for at least the next 30 days (keep-alive time of caches on CircleCI). Once the branch is merged to &lt;code&gt;main&lt;/code&gt;, a cache key of &lt;code&gt;v2-golden-images-main-&amp;lt;&amp;lt; parameters.regression_color &amp;gt;&amp;gt;-&amp;lt;&amp;lt; parameters.regression_scale &amp;gt;&amp;gt;-&amp;lt;&amp;lt; parameters.regression_dir &amp;gt;&amp;gt;-{{ epoch }}&lt;/code&gt; will be created on each successful build of &lt;code&gt;main&lt;/code&gt; that will be long-lived and act as the &#34;fallback&#34; once the revision keyed cache has expired.&lt;/p&gt; &#xA;&lt;h2&gt;Benchmarking&lt;/h2&gt; &#xA;&lt;p&gt;You can acquire current runtimes for the individual elements with:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;yarn build:tests&#xA;yarn test:bench&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;This will run the defined &lt;a href=&#34;https://www.npmjs.com/package/tachometer&#34;&gt;Tachometer&lt;/a&gt; tests and report the current runtime cost of each individual element. When not making changes to the benchmarks on your local machine, you can skip &lt;code&gt;yarn build:tests&lt;/code&gt; for later passes.&lt;/p&gt; &#xA;&lt;h2&gt;Anatomy of a component&lt;/h2&gt; &#xA;&lt;p&gt;There is extended documentation on adding a new component to the library in the &lt;a href=&#34;https://opensource.adobe.com/spectrum-web-components/guides/generating-components&#34;&gt;documentation site&lt;/a&gt;. However, at a high level, you will be building the following structure:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;packages &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;new-component-name &#xA;    &lt;ul&gt; &#xA;     &lt;li&gt;src &#xA;      &lt;ul&gt; &#xA;       &lt;li&gt;index.ts&lt;/li&gt; &#xA;       &lt;li&gt;new-component-name.css&lt;/li&gt; &#xA;       &lt;li&gt;new-component-name.ts&lt;/li&gt; &#xA;       &lt;li&gt;spectrum-config.js&lt;/li&gt; &#xA;       &lt;li&gt;spectrum-new-component-name.css&lt;/li&gt; &#xA;      &lt;/ul&gt; &lt;/li&gt; &#xA;     &lt;li&gt;stories &#xA;      &lt;ul&gt; &#xA;       &lt;li&gt;new-component-name.stories.ts&lt;/li&gt; &#xA;      &lt;/ul&gt; &lt;/li&gt; &#xA;     &lt;li&gt;test &#xA;      &lt;ul&gt; &#xA;       &lt;li&gt;benchmark &#xA;        &lt;ul&gt; &#xA;         &lt;li&gt;test-basic.ts&lt;/li&gt; &#xA;        &lt;/ul&gt; &lt;/li&gt; &#xA;       &lt;li&gt;new-component-name.test.ts&lt;/li&gt; &#xA;      &lt;/ul&gt; &lt;/li&gt; &#xA;     &lt;li&gt;package.json&lt;/li&gt; &#xA;     &lt;li&gt;README.md&lt;/li&gt; &#xA;     &lt;li&gt;tsconfig.json&lt;/li&gt; &#xA;    &lt;/ul&gt; &lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;For a list of component waiting to be implemented, visit our &lt;a href=&#34;https://github.com/adobe/spectrum-web-components/labels/missing%20components&#34;&gt;&lt;code&gt;missing components&lt;/code&gt;&lt;/a&gt; tag.&lt;/p&gt; &#xA;&lt;h2&gt;IDE Notes&lt;/h2&gt; &#xA;&lt;p&gt;The build process compiles &lt;code&gt;.css&lt;/code&gt; files using PostCSS and wraps them in the &lt;code&gt;lit-html&lt;/code&gt; &lt;code&gt;css&lt;/code&gt; template tag and writes out a &lt;code&gt;.css.ts&lt;/code&gt; file for easy import into TypeScript files. This file should not be edited, and is ignored by &lt;code&gt;.gitignore&lt;/code&gt;, but you may also wish to hide the files in your IDE.&lt;/p&gt; &#xA;&lt;h1&gt;Contributing&lt;/h1&gt; &#xA;&lt;p&gt;We&#39;d be very grateful if you contributed to the project! Check out our &lt;a href=&#34;https://raw.githubusercontent.com/adobe/spectrum-web-components/main/CONTRIBUTING.md&#34;&gt;contribution guidelines&lt;/a&gt; for more information.&lt;/p&gt; &#xA;&lt;p&gt;&lt;a name=&#34;patches&#34;&gt;&lt;/a&gt;&lt;/p&gt; &#xA;&lt;details&gt;&#xA; &lt;summary&gt;&lt;strong&gt;Active patches&lt;/strong&gt;&lt;/summary&gt; &#xA; &lt;h3&gt;lru-cache&lt;/h3&gt; &#xA; &lt;p&gt;The &lt;code&gt;lru-cache&lt;/code&gt; leveraged by &lt;code&gt;@web/dev-server&lt;/code&gt; can interact negatively with ARM based macOS machines causing a critical hang in the cache of transpiled file responses. This only effects development time operations and specifically effects the local test passes. To avoid this &lt;code&gt;lru-cache@6.0&lt;/code&gt; has been patched to make its &lt;code&gt;set&lt;/code&gt; method a noop, avoiding the caching process all together.&lt;/p&gt; &#xA;&lt;/details&gt;</summary>
  </entry>
</feed>