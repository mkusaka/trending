<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom">
  <title>GitHub Dart Daily Trending</title>
  <id>http://mshibanami.github.io/GitHubTrendingRSS</id>
  <updated>2023-04-15T02:44:03Z</updated>
  <subtitle>Daily Trending of Dart in GitHub</subtitle>
  <link href="http://mshibanami.github.io/GitHubTrendingRSS"></link>
  <entry>
    <title>google/flutter-stager</title>
    <updated>2023-04-15T02:44:03Z</updated>
    <id>tag:github.com,2023-04-15:/google/flutter-stager</id>
    <link href="https://github.com/google/flutter-stager" rel="alternate"></link>
    <summary type="html">&lt;p&gt;&lt;/p&gt;&lt;hr&gt;&lt;h1&gt;Stager&lt;/h1&gt; &#xA;&lt;p&gt;Stager is a Flutter development tool that allows you to run small portions of your app as independent Flutter apps. This lets you:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Focus your development on a single widget or flow – no more clicking through multiple screens or setting external feature flags to reach the page you&#39;re working on.&lt;/li&gt; &#xA; &lt;li&gt;Ensure your UI works in wide number of cases, including: &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;Light and Dark mode&lt;/li&gt; &#xA;   &lt;li&gt;Small or large text sizes&lt;/li&gt; &#xA;   &lt;li&gt;Different viewport sizes&lt;/li&gt; &#xA;   &lt;li&gt;Different device types&lt;/li&gt; &#xA;   &lt;li&gt;Loading, empty, error, and normal states&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA; &lt;li&gt;Show all of this to your designers to make sure your app is pixel-perfect.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;Demo&lt;/h2&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://user-images.githubusercontent.com/581764/219502623-bfe44091-a582-460e-b97d-e786bc614a8c.gif&#34; alt=&#34;example app demo&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;The example included in this repo demonstrates how Stager can be used in the context of a simple Twitter-like app that displays a feed of posts and includes detail pages for posts and users.&lt;/p&gt; &#xA;&lt;p&gt;Stager uses Scenes (see the &lt;a href=&#34;https://raw.githubusercontent.com/google/flutter-stager/main/#concepts&#34;&gt;Concepts&lt;/a&gt; section below) that you define to generate small Flutter apps. To run the Stager apps included in the example, start by moving to the &lt;code&gt;example&lt;/code&gt; directory and fetching the app&#39;s dependencies:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;cd example&#xA;flutter pub get&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;NOTE: The Stager &lt;code&gt;main&lt;/code&gt; files for the example have already been generated. To generate a Stager &lt;code&gt;main&lt;/code&gt; file from files containins Scenes, run &lt;code&gt;flutter run build_runner&lt;/code&gt; from your app&#39;s home folder.&lt;/p&gt; &#xA;&lt;p&gt;You can then run the indivdual Stager apps with the following commands:&lt;/p&gt; &#xA;&lt;p&gt;&lt;strong&gt;Posts List&lt;/strong&gt;&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;flutter run -t lib/pages/posts_list/posts_list_page_scenes.stager_app.g.dart&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;&lt;strong&gt;User Detail&lt;/strong&gt;&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;flutter run -t lib/pages/user_detail/user_detail_page_scenes.stager_app.g.dart&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;&lt;strong&gt;Post Detail&lt;/strong&gt;&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;flutter run -t lib/pages/post_detail/post_detail_page_scenes.stager_app.g.dart&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;To get an idea of how these Scenes fit together, you can also run the main app by executing &lt;code&gt;flutter run&lt;/code&gt; from the &lt;code&gt;example&lt;/code&gt; directory, which runs the default &lt;code&gt;main.dart&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;h2&gt;Concepts&lt;/h2&gt; &#xA;&lt;h3&gt;Scene&lt;/h3&gt; &#xA;&lt;p&gt;A Scene is a simple, self-contained unit of UI, and is the most important idea in Stager. Scenes make it easy to focus on a single widget or page to greatly increase development velocity by isolating it from the rest of your app. This isolation makes it much easier to provide your UI with a wide variety of inputs and to swap out dependencies with mocks or alternate implementations.&lt;/p&gt; &#xA;&lt;p&gt;To create your own Scene, simply create a &lt;code&gt;Scene&lt;/code&gt; subclass and implement &lt;code&gt;title&lt;/code&gt;, the name of your Scene, and &lt;code&gt;build()&lt;/code&gt;, which constructs body of the Scene.&lt;/p&gt; &#xA;&lt;p&gt;You can also override the following methods and properties:&lt;/p&gt; &#xA;&lt;h4&gt;&lt;code&gt;setUp&lt;/code&gt;&lt;/h4&gt; &#xA;&lt;p&gt;A function that is called once before the Scene is displayed. This will generally be where you configure your widget&#39;s dependencies.&lt;/p&gt; &#xA;&lt;h4&gt;&lt;code&gt;environmentControls&lt;/code&gt;&lt;/h4&gt; &#xA;&lt;p&gt;An optional list of &lt;code&gt;EnvironmentControl&lt;/code&gt;s that allow you to add custom widgets to the Stager control panel. An &lt;code&gt;EnvironmentControl&lt;/code&gt; provides a widget that allows the user to change values used when presenting a Scene. State is preserved when the same controls are used in multiple scenes. Stager includes several of these controls that allow the user to toggle dark mode, change text scale, etc.&lt;/p&gt; &#xA;&lt;p&gt;These are useful if you want to manipulate things specific to your app, including:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Data displayed by your widget&lt;/li&gt; &#xA; &lt;li&gt;Properties on mocked dependenices&lt;/li&gt; &#xA; &lt;li&gt;Feature flags&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h3&gt;StagerApp&lt;/h3&gt; &#xA;&lt;p&gt;A StagerApp displays a list of Scenes, allow the user to select from all available Scenes. Because Scenes can contain their own Navigators, the StagerApp overlays a back button on top of the Scenes.&lt;/p&gt; &#xA;&lt;p&gt;You will generally not need to interact with this class directly – Stager will generate this for you. Once you&#39;ve written your Scene classes, simply run &lt;code&gt;flutter run build_runner&lt;/code&gt; from your project root to generate a file containing a &lt;code&gt;main()&lt;/code&gt; entrypoint that creates a StagerApp with your Scenes.&lt;/p&gt; &#xA;&lt;h2&gt;Use&lt;/h2&gt; &#xA;&lt;p&gt;Imagine you have the following widget buried deep in your application:&lt;/p&gt; &#xA;&lt;!--?code-excerpt &#34;shared/posts_list/posts_list.dart (PostsList)&#34;?--&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-dart&#34;&gt;/// A [ListView] of [PostCard]s&#xA;class PostsList extends StatefulWidget {&#xA;  /// Creates a [PostsList] displaying [posts].&#xA;  ///&#xA;  /// [postsFuture] will be set to the value of [posts].&#xA;  PostsList({&#xA;    Key? key,&#xA;    required List&amp;lt;Post&amp;gt; posts,&#xA;  }) : this.fromFuture(key: key, Future&amp;lt;List&amp;lt;Post&amp;gt;&amp;gt;.value(posts));&#xA;&#xA;  /// Creates a [PostsList] with a Future that resolves to a list of [Post]s.&#xA;  const PostsList.fromFuture(this.postsFuture, {super.key});&#xA;&#xA;  /// The Future that resolves to the list of [Post]s this widget will display.&#xA;  final Future&amp;lt;List&amp;lt;Post&amp;gt;&amp;gt; postsFuture;&#xA;&#xA;  @override&#xA;  State&amp;lt;PostsList&amp;gt; createState() =&amp;gt; _PostsListState();&#xA;}&#xA;&#xA;class _PostsListState extends State&amp;lt;PostsList&amp;gt; {&#xA;  @override&#xA;  Widget build(BuildContext context) {&#xA;    return FutureBuilder&amp;lt;List&amp;lt;Post&amp;gt;&amp;gt;(&#xA;      future: widget.postsFuture,&#xA;      builder: (BuildContext context, AsyncSnapshot&amp;lt;List&amp;lt;Post&amp;gt;&amp;gt; snapshot) {&#xA;        if (snapshot.connectionState == ConnectionState.waiting) {&#xA;          return const Center(&#xA;            child: CircularProgressIndicator(),&#xA;          );&#xA;        }&#xA;&#xA;        if (snapshot.hasError) {&#xA;          return const Center(&#xA;            child: Text(&#39;Error&#39;),&#xA;          );&#xA;        }&#xA;&#xA;        final List&amp;lt;Post&amp;gt;? posts = snapshot.data;&#xA;        if (posts == null || posts.isEmpty) {&#xA;          return const Center(&#xA;            child: Text(&#39;No posts&#39;),&#xA;          );&#xA;        }&#xA;&#xA;        return ListView.builder(&#xA;          itemBuilder: (BuildContext context, int index) =&amp;gt; PostCard(&#xA;            post: posts[index],&#xA;            onTap: () {&#xA;              Navigator.of(context).push(&#xA;                MaterialPageRoute&amp;lt;void&amp;gt;(&#xA;                  builder: (BuildContext context) =&amp;gt; PostDetailPage(&#xA;                    post: posts[index],&#xA;                  ),&#xA;                ),&#xA;              );&#xA;            },&#xA;          ),&#xA;          itemCount: posts.length,&#xA;        );&#xA;      },&#xA;    );&#xA;  }&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Normally, exercising all states in this widget would involve:&lt;/p&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;Building and launching the full app.&lt;/li&gt; &#xA; &lt;li&gt;Navigating to this page.&lt;/li&gt; &#xA; &lt;li&gt;Editing the code to force display of the states we want to exercise, either by constructing a fake &lt;code&gt;Future&amp;lt;List&amp;lt;Post&amp;gt;&amp;gt;&lt;/code&gt; or commenting out the various conditional checks in the FutureBuilder&#39;s &lt;code&gt;builder&lt;/code&gt; function.&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;p&gt;Scenes present a better way to do this.&lt;/p&gt; &#xA;&lt;h3&gt;Making a Scene&lt;/h3&gt; &#xA;&lt;p&gt;We can create a Scene for each state we want to show. For example, a Scene showing the PostsListPage&#39;s empty state might look something like:&lt;/p&gt; &#xA;&lt;!--?code-excerpt &#34;pages/posts_list/posts_list_page_scenes.dart (PostsListPageScene)&#34;?--&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-dart&#34;&gt;@GenerateMocks(&amp;lt;Type&amp;gt;[Api])&#xA;import &#39;posts_list_page_scenes.mocks.dart&#39;;&#xA;&#xA;/// Defines a shared build method used by subclasses and a [MockApi] subclasses&#xA;/// can use to control the behavior of the [PostsListPage].&#xA;abstract class BasePostsListScene extends Scene {&#xA;  /// A mock dependency of [PostsListPage]. Mock the value of [Api.fetchPosts]&#xA;  /// to put the staged [PostsListPage] into different states.&#xA;  late MockApi mockApi;&#xA;&#xA;  @override&#xA;  Widget build() {&#xA;    return EnvironmentAwareApp(&#xA;      home: Provider&amp;lt;Api&amp;gt;.value(&#xA;        value: mockApi,&#xA;        child: const PostsListPage(),&#xA;      ),&#xA;    );&#xA;  }&#xA;&#xA;  @override&#xA;  Future&amp;lt;void&amp;gt; setUp() async {&#xA;    mockApi = MockApi();&#xA;  }&#xA;}&#xA;&#xA;/// A Scene showing the [PostsListPage] with no [Post]s.&#xA;class EmptyListScene extends BasePostsListScene {&#xA;  @override&#xA;  String get title =&amp;gt; &#39;Empty List&#39;;&#xA;&#xA;  @override&#xA;  Future&amp;lt;void&amp;gt; setUp() async {&#xA;    await super.setUp();&#xA;    when(mockApi.fetchPosts()).thenAnswer((_) async =&amp;gt; &amp;lt;Post&amp;gt;[]);&#xA;  }&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h3&gt;Running a StagerApp&lt;/h3&gt; &#xA;&lt;p&gt;Once you have created a Scene subclass, generate your &lt;code&gt;StagerApp&lt;/code&gt;:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;flutter pub run build_runner build --delete-conflicting-outputs&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;This will generate a &lt;code&gt;my_scenes.stager_app.g.dart&lt;/code&gt; file (if you named the file containing your Scenes &lt;code&gt;my_scenes.dart&lt;/code&gt;), which contains a &lt;code&gt;main&lt;/code&gt; function that creates your Scenes and launches a StagerApp. For the &lt;code&gt;EmptyListScene&lt;/code&gt; we defined above, it would look something like:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-dart&#34;&gt;// GENERATED CODE - DO NOT MODIFY BY HAND&#xA;&#xA;// **************************************************************************&#xA;// StagerAppGenerator&#xA;// **************************************************************************&#xA;&#xA;import &#39;package:stager/stager.dart&#39;;&#xA;&#xA;import &#39;posts_list_page_scenes.dart&#39;;&#xA;&#xA;void main() {&#xA;  final List&amp;lt;Scene&amp;gt; scenes = &amp;lt;Scene&amp;gt;[&#xA;    EmptyListScene(),&#xA;  ];&#xA;&#xA;  if (const String.fromEnvironment(&#39;Scene&#39;).isNotEmpty) {&#xA;    const String sceneName = String.fromEnvironment(&#39;Scene&#39;);&#xA;    final Scene scene =&#xA;        scenes.firstWhere((Scene scene) =&amp;gt; scene.title == sceneName);&#xA;    runStagerApp(scenes: &amp;lt;Scene&amp;gt;[scene]);&#xA;  } else {&#xA;    runStagerApp(scenes: scenes);&#xA;  }&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;You can launch this app directly from VS Code, or by running:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;flutter run -t path/to/my_scenes.stager_app.g.dart&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;If your Stager app consists of multiple Scenes, you can launch to a specific scene by providing the name of the scene as an argument:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;flutter run -t path/to/my_scenes.stager_app.g.dart --dart-define=&#39;Scene=No Posts&#39;&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h3&gt;Adding your own environment controls&lt;/h3&gt; &#xA;&lt;p&gt;Stager&#39;s control panel comes with a generally useful set of controls that enable you to toggle dark mode, adjust text scale, etc. However, it is very likely that your app has unique environment properties that would be useful to adjust at runtime. To support this, Scenes have an overridable &lt;code&gt;environmentControls&lt;/code&gt; property which allows you to add custom widgets to the default set of environment manipulation controls.&lt;/p&gt; &#xA;&lt;p&gt;A very simple example:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-dart&#34;&gt;class CounterScene extends Scene {&#xA;  // A [StepperControl] allows the user to increment and decrement a value using &#34;-&#34; and&#xA;  // &#34;+&#34; buttons. [EnvironmentControl]s will trigger a Scene rebuild when they update&#xA;  // their values.&#xA;  final StepperControl&amp;lt;int&amp;gt; stepperControl = StepperControl&amp;lt;int&amp;gt;(&#xA;    title: &#39;My Control&#39;,&#xA;    stateKey: &#39;MyControl.Key&#39;,&#xA;    defaultValue: 0,&#xA;    onDecrementPressed: (int currentValue) =&amp;gt; currentValue + 1,&#xA;    onIncrementPressed: (int currentValue) =&amp;gt; currentValue - 1,&#xA;  );&#xA;&#xA;  @override&#xA;  String get title =&amp;gt; &#39;Counter&#39;;&#xA;&#xA;  @override&#xA;  final List&amp;lt;EnvironmentControl&amp;lt;Object?&amp;gt;&amp;gt; environmentControls =&#xA;      &amp;lt;EnvironmentControl&amp;lt;Object?&amp;gt;&amp;gt;[&#xA;        stepperControl,&#xA;  ];&#xA;&#xA;  @override&#xA;  Widget build() {&#xA;    return EnvironmentAwareApp(&#xA;      home: Scaffold(&#xA;        body: Center(&#xA;          child: Text(stepperControl.currentValue.toString()),&#xA;        ),&#xA;      ),&#xA;    );&#xA; }&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;More complex examples can be found in &lt;code&gt;WithPostsScene&lt;/code&gt; in &lt;code&gt;example/lib/pages/posts_list/posts_list_page_scenes.dart&lt;/code&gt; and &lt;code&gt;PostDetailPageScene&lt;/code&gt; in &lt;code&gt;example/lib/pages/post_detail/post_detail_page_scenes.dart&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;h2&gt;Testing&lt;/h2&gt; &#xA;&lt;p&gt;You may notice that these names are very similar to Flutter testing functions. This is intentional – Scenes are very easy to reuse in tests. Writing Scenes for your widgets can be a great way to start writing widget tests or to expand your widget test coverage. A widget test using a Scene can be as simple as this:&lt;/p&gt; &#xA;&lt;!--?code-excerpt &#34;../../test/pages/posts_list_page_test.dart (EmptySceneTest)&#34;?--&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-dart&#34;&gt;testWidgets(&#39;shows an empty state&#39;, (WidgetTester tester) async {&#xA;  final Scene scene = EmptyListScene();&#xA;  await scene.setUp();&#xA;  await tester.pumpWidget(scene.build());&#xA;  await tester.pump();&#xA;  expect(find.text(&#39;No posts&#39;), findsOneWidget);&#xA;});&#xA;&lt;/code&gt;&lt;/pre&gt;</summary>
  </entry>
</feed>