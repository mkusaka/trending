<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom">
  <title>GitHub Objective-C Daily Trending</title>
  <id>http://mshibanami.github.io/GitHubTrendingRSS</id>
  <updated>2022-07-07T01:48:41Z</updated>
  <subtitle>Daily Trending of Objective-C in GitHub</subtitle>
  <link href="http://mshibanami.github.io/GitHubTrendingRSS"></link>
  <entry>
    <title>marcuswestin/WebViewJavascriptBridge</title>
    <updated>2022-07-07T01:48:41Z</updated>
    <id>tag:github.com,2022-07-07:/marcuswestin/WebViewJavascriptBridge</id>
    <link href="https://github.com/marcuswestin/WebViewJavascriptBridge" rel="alternate"></link>
    <summary type="html">&lt;p&gt;An iOS/OSX bridge for sending messages between Obj-C and JavaScript in UIWebViews/WebViews&lt;/p&gt;&lt;hr&gt;&lt;h1&gt;WebViewJavascriptBridge&lt;/h1&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://circleci.com/gh/marcuswestin/WebViewJavascriptBridge&#34;&gt;&lt;img src=&#34;https://img.shields.io/circleci/project/github/marcuswestin/WebViewJavascriptBridge.svg?sanitize=true&#34; alt=&#34;Circle CI&#34;&gt;&lt;/a&gt;&lt;/p&gt; &#xA;&lt;p&gt;An iOS/OSX bridge for sending messages between Obj-C and JavaScript in WKWebViews, UIWebViews &amp;amp; WebViews.&lt;/p&gt; &#xA;&lt;h2&gt;Migration Guide&lt;/h2&gt; &#xA;&lt;p&gt;When upgrading from v5.0.x to 6.0.x you will have to update the &lt;code&gt;setupWebViewJavascriptBridge&lt;/code&gt; javascript snippet. See &lt;a href=&#34;https://github.com/marcuswestin/WebViewJavascriptBridge#usage&#34;&gt;https://github.com/marcuswestin/WebViewJavascriptBridge#usage&lt;/a&gt; part 4).&lt;/p&gt; &#xA;&lt;h2&gt;Who uses WebViewJavascriptBridge?&lt;/h2&gt; &#xA;&lt;p&gt;WebViewJavascriptBridge is used by a range of companies and projects. This is a small and incomplete sample list:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://www.facebook.com/mobile/messenger&#34;&gt;Facebook Messenger&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://facebook.com/paper&#34;&gt;Facebook Paper&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;http://www.getyardsale.com/&#34;&gt;Yardsale&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;http://www.evertrue.com/&#34;&gt;EverTrue&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;http://www.game-insight.com/&#34;&gt;Game Insight&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;http://www.sush.io&#34;&gt;Sush.io&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;http://imbed.github.io/&#34;&gt;Imbed&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://carezone.com&#34;&gt;CareZone&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;http://www.hemlig.co&#34;&gt;Hemlig&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;http://www.altralogica.it&#34;&gt;Altralogica&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://itunes.apple.com/us/app/ding-sheng-zhong-hua/id537273940?mt=8&#34;&gt;鼎盛中华&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://fril.jp&#34;&gt;FRIL&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;http://liubaiapp.com&#34;&gt;留白·WHITE&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;http://thirdiron.com/browzine/&#34;&gt;BrowZine&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;... &amp;amp; many more!&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;Installation (iOS &amp;amp; OSX)&lt;/h2&gt; &#xA;&lt;h3&gt;Installation with CocoaPods&lt;/h3&gt; &#xA;&lt;p&gt;Add this to your &lt;a href=&#34;https://guides.cocoapods.org/using/getting-started.html&#34;&gt;podfile&lt;/a&gt; and run &lt;code&gt;pod install&lt;/code&gt; to install:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-ruby&#34;&gt;pod &#39;WebViewJavascriptBridge&#39;, &#39;~&amp;gt; 6.0&#39;&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h3&gt;Manual installation&lt;/h3&gt; &#xA;&lt;p&gt;Drag the &lt;code&gt;WebViewJavascriptBridge&lt;/code&gt; folder into your project.&lt;/p&gt; &#xA;&lt;p&gt;In the dialog that appears, uncheck &#34;Copy items into destination group&#39;s folder&#34; and select &#34;Create groups for any folders&#34;.&lt;/p&gt; &#xA;&lt;h2&gt;Examples&lt;/h2&gt; &#xA;&lt;p&gt;See the &lt;code&gt;Example Apps/&lt;/code&gt; folder. Open either the iOS or OSX project and hit run to see it in action.&lt;/p&gt; &#xA;&lt;p&gt;To use a WebViewJavascriptBridge in your own project:&lt;/p&gt; &#xA;&lt;h2&gt;Usage&lt;/h2&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;Import the header file and declare an ivar property:&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-objc&#34;&gt;#import &#34;WebViewJavascriptBridge.h&#34;&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;...&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-objc&#34;&gt;@property WebViewJavascriptBridge* bridge;&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;ol start=&#34;2&#34;&gt; &#xA; &lt;li&gt;Instantiate WebViewJavascriptBridge with a WKWebView, UIWebView (iOS) or WebView (OSX):&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-objc&#34;&gt;self.bridge = [WebViewJavascriptBridge bridgeForWebView:webView];&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;ol start=&#34;3&#34;&gt; &#xA; &lt;li&gt;Register a handler in ObjC, and call a JS handler:&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-objc&#34;&gt;[self.bridge registerHandler:@&#34;ObjC Echo&#34; handler:^(id data, WVJBResponseCallback responseCallback) {&#xA;&#x9;NSLog(@&#34;ObjC Echo called with: %@&#34;, data);&#xA;&#x9;responseCallback(data);&#xA;}];&#xA;[self.bridge callHandler:@&#34;JS Echo&#34; data:nil responseCallback:^(id responseData) {&#xA;&#x9;NSLog(@&#34;ObjC received response: %@&#34;, responseData);&#xA;}];&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;ol start=&#34;4&#34;&gt; &#xA; &lt;li&gt;Copy and paste &lt;code&gt;setupWebViewJavascriptBridge&lt;/code&gt; into your JS:&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;function setupWebViewJavascriptBridge(callback) {&#xA;&#x9;if (window.WebViewJavascriptBridge) { return callback(WebViewJavascriptBridge); }&#xA;&#x9;if (window.WVJBCallbacks) { return window.WVJBCallbacks.push(callback); }&#xA;&#x9;window.WVJBCallbacks = [callback];&#xA;&#x9;var WVJBIframe = document.createElement(&#39;iframe&#39;);&#xA;&#x9;WVJBIframe.style.display = &#39;none&#39;;&#xA;&#x9;WVJBIframe.src = &#39;https://__bridge_loaded__&#39;;&#xA;&#x9;document.documentElement.appendChild(WVJBIframe);&#xA;&#x9;setTimeout(function() { document.documentElement.removeChild(WVJBIframe) }, 0)&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;ol start=&#34;5&#34;&gt; &#xA; &lt;li&gt;Finally, call &lt;code&gt;setupWebViewJavascriptBridge&lt;/code&gt; and then use the bridge to register handlers and call ObjC handlers:&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;setupWebViewJavascriptBridge(function(bridge) {&#xA;&#x9;&#xA;&#x9;/* Initialize your app here */&#xA;&#xA;&#x9;bridge.registerHandler(&#39;JS Echo&#39;, function(data, responseCallback) {&#xA;&#x9;&#x9;console.log(&#34;JS Echo called with:&#34;, data)&#xA;&#x9;&#x9;responseCallback(data)&#xA;&#x9;})&#xA;&#x9;bridge.callHandler(&#39;ObjC Echo&#39;, {&#39;key&#39;:&#39;value&#39;}, function responseCallback(responseData) {&#xA;&#x9;&#x9;console.log(&#34;JS received response:&#34;, responseData)&#xA;&#x9;})&#xA;})&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h2&gt;Automatic reference counting (ARC)&lt;/h2&gt; &#xA;&lt;p&gt;This library relies on ARC, so if you use ARC in you project, all works fine. But if your project have no ARC support, be sure to do next steps:&lt;/p&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt; &lt;p&gt;In your Xcode project open project settings -&amp;gt; &#39;Build Phases&#39;&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;Expand &#39;Compile Sources&#39; header and find all *.m files which are belongs to this library. Make attention on the &#39;Compiler Flags&#39; in front of each source file in this list&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;For each file add &#39;-fobjc-arc&#39; flag&lt;/p&gt; &lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;p&gt;Now all WVJB files will be compiled with ARC support.&lt;/p&gt; &#xA;&lt;h2&gt;Contributors &amp;amp; Forks&lt;/h2&gt; &#xA;&lt;p&gt;Contributors: &lt;a href=&#34;https://github.com/marcuswestin/WebViewJavascriptBridge/graphs/contributors&#34;&gt;https://github.com/marcuswestin/WebViewJavascriptBridge/graphs/contributors&lt;/a&gt;&lt;/p&gt; &#xA;&lt;p&gt;Forks: &lt;a href=&#34;https://github.com/marcuswestin/WebViewJavascriptBridge/network/members&#34;&gt;https://github.com/marcuswestin/WebViewJavascriptBridge/network/members&lt;/a&gt;&lt;/p&gt; &#xA;&lt;h2&gt;API Reference&lt;/h2&gt; &#xA;&lt;h3&gt;ObjC API&lt;/h3&gt; &#xA;&lt;h5&gt;&lt;code&gt;[WebViewJavascriptBridge bridgeForWebView:(WKWebVIew/UIWebView/WebView*)webview&lt;/code&gt;&lt;/h5&gt; &#xA;&lt;p&gt;Create a javascript bridge for the given web view.&lt;/p&gt; &#xA;&lt;p&gt;Example:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-objc&#34;&gt;[WebViewJavascriptBridge bridgeForWebView:webView];&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h5&gt;&lt;code&gt;[bridge registerHandler:(NSString*)handlerName handler:(WVJBHandler)handler]&lt;/code&gt;&lt;/h5&gt; &#xA;&lt;p&gt;Register a handler called &lt;code&gt;handlerName&lt;/code&gt;. The javascript can then call this handler with &lt;code&gt;WebViewJavascriptBridge.callHandler(&#34;handlerName&#34;)&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;p&gt;Example:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-objc&#34;&gt;[self.bridge registerHandler:@&#34;getScreenHeight&#34; handler:^(id data, WVJBResponseCallback responseCallback) {&#xA;&#x9;responseCallback([NSNumber numberWithInt:[UIScreen mainScreen].bounds.size.height]);&#xA;}];&#xA;[self.bridge registerHandler:@&#34;log&#34; handler:^(id data, WVJBResponseCallback responseCallback) {&#xA;&#x9;NSLog(@&#34;Log: %@&#34;, data);&#xA;}];&#xA;&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h5&gt;&lt;code&gt;[bridge callHandler:(NSString*)handlerName data:(id)data]&lt;/code&gt;&lt;/h5&gt; &#xA;&lt;h5&gt;&lt;code&gt;[bridge callHandler:(NSString*)handlerName data:(id)data responseCallback:(WVJBResponseCallback)callback]&lt;/code&gt;&lt;/h5&gt; &#xA;&lt;p&gt;Call the javascript handler called &lt;code&gt;handlerName&lt;/code&gt;. If a &lt;code&gt;responseCallback&lt;/code&gt; block is given the javascript handler can respond.&lt;/p&gt; &#xA;&lt;p&gt;Example:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-objc&#34;&gt;[self.bridge callHandler:@&#34;showAlert&#34; data:@&#34;Hi from ObjC to JS!&#34;];&#xA;[self.bridge callHandler:@&#34;getCurrentPageUrl&#34; data:nil responseCallback:^(id responseData) {&#xA;&#x9;NSLog(@&#34;Current UIWebView page URL is: %@&#34;, responseData);&#xA;}];&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h4&gt;&lt;code&gt;[bridge setWebViewDelegate:(id)webViewDelegate]&lt;/code&gt;&lt;/h4&gt; &#xA;&lt;p&gt;Optionally, set a &lt;code&gt;WKNavigationDelegate/UIWebViewDelegate&lt;/code&gt; if you need to respond to the &lt;a href=&#34;https://developer.apple.com/reference/uikit/uiwebviewdelegate&#34;&gt;web view&#39;s lifecycle events&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;h5&gt;&lt;code&gt;[bridge disableJavscriptAlertBoxSafetyTimeout]&lt;/code&gt;&lt;/h5&gt; &#xA;&lt;p&gt;UNSAFE. Speed up bridge message passing by disabling the setTimeout safety check. It is only safe to disable this safety check if you do not call any of the javascript popup box functions (alert, confirm, and prompt). If you call any of these functions from the bridged javascript code, the app will hang.&lt;/p&gt; &#xA;&lt;p&gt;Example:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;[self.bridge disableJavscriptAlertBoxSafetyTimeout];&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h3&gt;Javascript API&lt;/h3&gt; &#xA;&lt;h5&gt;&lt;code&gt;bridge.registerHandler(&#34;handlerName&#34;, function(responseData) { ... })&lt;/code&gt;&lt;/h5&gt; &#xA;&lt;p&gt;Register a handler called &lt;code&gt;handlerName&lt;/code&gt;. The ObjC can then call this handler with &lt;code&gt;[bridge callHandler:&#34;handlerName&#34; data:@&#34;Foo&#34;]&lt;/code&gt; and &lt;code&gt;[bridge callHandler:&#34;handlerName&#34; data:@&#34;Foo&#34; responseCallback:^(id responseData) { ... }]&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;Example:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;bridge.registerHandler(&#34;showAlert&#34;, function(data) { alert(data) })&#xA;bridge.registerHandler(&#34;getCurrentPageUrl&#34;, function(data, responseCallback) {&#xA;&#x9;responseCallback(document.location.toString())&#xA;})&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h5&gt;&lt;code&gt;bridge.callHandler(&#34;handlerName&#34;, data)&lt;/code&gt;&lt;/h5&gt; &#xA;&lt;h5&gt;&lt;code&gt;bridge.callHandler(&#34;handlerName&#34;, data, function responseCallback(responseData) { ... })&lt;/code&gt;&lt;/h5&gt; &#xA;&lt;p&gt;Call an ObjC handler called &lt;code&gt;handlerName&lt;/code&gt;. If a &lt;code&gt;responseCallback&lt;/code&gt; function is given the ObjC handler can respond.&lt;/p&gt; &#xA;&lt;p&gt;Example:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;bridge.callHandler(&#34;Log&#34;, &#34;Foo&#34;)&#xA;bridge.callHandler(&#34;getScreenHeight&#34;, null, function(response) {&#xA;&#x9;alert(&#39;Screen height:&#39; + response)&#xA;})&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h5&gt;&lt;code&gt;bridge.disableJavscriptAlertBoxSafetyTimeout()&lt;/code&gt;&lt;/h5&gt; &#xA;&lt;p&gt;Calling &lt;code&gt;bridge.disableJavscriptAlertBoxSafetyTimeout()&lt;/code&gt; has the same effect as calling &lt;code&gt;[bridge disableJavscriptAlertBoxSafetyTimeout];&lt;/code&gt; in ObjC.&lt;/p&gt; &#xA;&lt;p&gt;Example:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;bridge.disableJavscriptAlertBoxSafetyTimeout()&#xA;&lt;/code&gt;&lt;/pre&gt;</summary>
  </entry>
</feed>