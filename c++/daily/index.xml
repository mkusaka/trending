<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom">
  <title>GitHub C++ Daily Trending</title>
  <id>http://mshibanami.github.io/GitHubTrendingRSS</id>
  <updated>2024-08-08T01:28:49Z</updated>
  <subtitle>Daily Trending of C++ in GitHub</subtitle>
  <link href="http://mshibanami.github.io/GitHubTrendingRSS"></link>
  <entry>
    <title>vosen/ZLUDA</title>
    <updated>2024-08-08T01:28:49Z</updated>
    <id>tag:github.com,2024-08-08:/vosen/ZLUDA</id>
    <link href="https://github.com/vosen/ZLUDA" rel="alternate"></link>
    <summary type="html">&lt;p&gt;CUDA on ??? GPUs&lt;/p&gt;&lt;hr&gt;&lt;h1&gt;&lt;span&gt;⚠&lt;/span&gt; IMPORTANT &lt;span&gt;⚠&lt;/span&gt;&lt;/h1&gt; &#xA;&lt;h2&gt;What happened&lt;/h2&gt; &#xA;&lt;p&gt;The code that was previously here has been taken down at AMD&#39;s request. The code was released with AMD&#39;s approval through an email. AMD&#39;s legal department now says it&#39;s not legally binding, hence the rollback.&lt;br&gt; Before anyone asks: I have received no legal threats or any communication from NVIDIA.&lt;/p&gt; &#xA;&lt;h2&gt;What now&lt;/h2&gt; &#xA;&lt;p&gt;At this point, one more hostile corporation does not make much difference. I plan to rebuild ZLUDA starting from the pre-AMD codebase. Funding for the project is coming along and I hope to be able to share the details in the coming weeks. It will have a different scope and certain features will not come back.&lt;br&gt; I wanted it to be a surprise, but one of those features was support for NVIDIA GameWorks. I got it working in Batman: Arkham Knight, but I never finished it, and now that code will never see the light of the day:&lt;/p&gt; &#xA;&lt;table&gt; &#xA; &lt;thead&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;th align=&#34;center&#34;&gt;Settings&lt;/th&gt; &#xA;   &lt;th align=&#34;center&#34;&gt;ZLUDA OFF&lt;/th&gt; &#xA;   &lt;th align=&#34;center&#34;&gt;ZLUDA ON&lt;/th&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/thead&gt; &#xA; &lt;tbody&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td align=&#34;center&#34;&gt;&lt;img src=&#34;https://imgur.com/yUB4MpQ.jpg&#34; alt=&#34;Graphics settings&#34;&gt;&lt;/td&gt; &#xA;   &lt;td align=&#34;center&#34;&gt;&lt;img src=&#34;https://imgur.com/XEtL2kx.jpg&#34; alt=&#34;ZLUDA OFF&#34;&gt;&lt;/td&gt; &#xA;   &lt;td align=&#34;center&#34;&gt;&lt;img src=&#34;https://imgur.com/TEo9XcQ.jpg&#34; alt=&#34;ZLUDA OFF&#34;&gt;&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/tbody&gt; &#xA;&lt;/table&gt; &#xA;&lt;p&gt;Feel free to discuss the topic &lt;a href=&#34;https://github.com/vosen/ZLUDA/discussions/261&#34;&gt;here&lt;/a&gt;&lt;/p&gt; &#xA;&lt;hr&gt; &#xA;&lt;hr&gt; &#xA;&lt;h1&gt;ZLUDA&lt;/h1&gt; &#xA;&lt;p&gt;ZLUDA is a drop-in replacement for CUDA on Intel GPU. ZLUDA allows to run unmodified CUDA applications using Intel GPUs with near-native performance (more below). It works with current integrated Intel UHD GPUs and will work with future Intel Xe GPUs&lt;/p&gt; &#xA;&lt;h2&gt;Performance&lt;/h2&gt; &#xA;&lt;p&gt;ZLUDA performance has been measured with GeekBench 5.2.3 on Intel UHD 630.&lt;br&gt; One measurement has been done using OpenCL and another measurement has been done using CUDA with Intel GPU masquerading as a (relatively slow) NVIDIA GPU with the help of ZLUDA. Both measurements use the same GPU.&lt;/p&gt; &#xA;&lt;p&gt;Performance below is normalized to OpenCL performance. 110% means that ZLUDA-implemented CUDA is 10% faster on Intel UHD 630.&lt;/p&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/vosen/ZLUDA/master/GeekBench_5_2_3.svg?sanitize=true&#34; alt=&#34;Performance graph&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://browser.geekbench.com/v5/compute/2305009&#34;&gt;ZLUDA - detailed results on Geekbench.com&lt;/a&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://browser.geekbench.com/v5/compute/2304997&#34;&gt;OpenCL - detailed results on Geekbench.com&lt;/a&gt;&lt;/p&gt; &#xA;&lt;p&gt;Overall, ZLUDA is slower in GeekBench by roughly 2%.&lt;/p&gt; &#xA;&lt;h3&gt;Explanation of the results&lt;/h3&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Why is ZLUDA faster in some benchmarks?&lt;br&gt; This has not been precisely pinpointed to one thing or another but it&#39;s likely a combination of things: &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;ZLUDA uses &lt;a href=&#34;https://spec.oneapi.com/level-zero/latest/index.html&#34;&gt;Level 0&lt;/a&gt;, which in general is a more low level, high performance API than OpenCL&lt;/li&gt; &#xA;   &lt;li&gt;Tying to the previous point, currently ZLUDA does not support asynchronous execution. This gives us an unfair advantage in a benchmark like GeekBench. GeekBench exclusively uses CUDA synchronous APIs&lt;/li&gt; &#xA;   &lt;li&gt;There is a set of GPU instructions which are available on both NVIDIA hardware and Intel hardware, but are not exposed through OpenCL. We are comparing NVIDIA GPU optimized code with the more general OpenCL code. It&#39;s a lucky coincidence (and a credit to the underlying Intel Graphics Compiler) that this code also works well on an Intel GPU&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA; &lt;li&gt;Why is OpenCL faster in Canny and Horizon Detection?&lt;br&gt; Authors of CUDA benchmarks used CUDA functions &lt;code&gt;atomicInc&lt;/code&gt; and &lt;code&gt;atomicDec&lt;/code&gt; which have direct hardware support on NVIDIA cards, but no hardware support on Intel cards. They have to be emulated in software, which limits performance&lt;/li&gt; &#xA; &lt;li&gt;Why is ZLUDA slower in the remaining benchmarks?&lt;br&gt; The reason is unknown. Most likely, in some tests we compile from suboptimal NVIDIA GPU code and in other tests ZLUDA itself is emitting suboptimal Intel GPU code. For example, SFFT used to be even slower before PR &lt;a href=&#34;https://github.com/vosen/ZLUDA/pull/22&#34;&gt;#22&lt;/a&gt;&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;Details&lt;/h2&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Is ZLUDA a drop-in replacement for CUDA?&lt;br&gt; Yes, but certain applications use CUDA in ways which make it incompatible with ZLUDA&lt;/li&gt; &#xA; &lt;li&gt;What is the status of the project?&lt;br&gt; This project is a Proof of Concept. About the only thing that works currently is Geekbench. It&#39;s amazingly buggy and incomplete. You should not rely on it for anything serious&lt;/li&gt; &#xA; &lt;li&gt;Is it an Intel project? Is it an NVIDIA project?&lt;br&gt; No, it&#39;s a private project&lt;/li&gt; &#xA; &lt;li&gt;What is the performance?&lt;br&gt; Performance can be close to the performance of similarly written OpenCL code (see GeekBench results in the previous section). NVIDIA GPUs and Intel GPUs have different architecture and feature set. Consequently, certain NVIDIA features have to be emulated in ZLUDA with performance penalty. Additionally, performance of ZLUDA will be always lower than the performance of code specifically optimized for Intel GPUs&lt;/li&gt; &#xA; &lt;li&gt;How it&#39;s different from AMD HIP or Intel DPC++ Compatibility toolkit?&lt;br&gt; Both are porting toolkits which require programmer&#39;s effort to port applications to the API in question. With ZLUDA existing applications &#34;just work&#34; on an Intel GPU (if you are lucky and ZLUDA supports the particular subset of CUDA)&lt;/li&gt; &#xA; &lt;li&gt;Which Intel GPU are supported?&lt;br&gt; Intel Gen9 and newer (Skylake and newer) which are supported by Intel Level 0&lt;/li&gt; &#xA; &lt;li&gt;Does ZLUDA support AMD GPUs?&lt;br&gt; Certainly not currently, but it might be technically possible&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;Usage&lt;/h2&gt; &#xA;&lt;p&gt;&lt;strong&gt;Warning&lt;/strong&gt;: this is a very incomplete proof of concept. It&#39;s probably not going to work with your application. ZLUDA currently works only with applications which use CUDA Driver API or statically-linked CUDA Runtime API - dynamically-linked CUDA Runtime API is not supported at all&lt;/p&gt; &#xA;&lt;h3&gt;Windows&lt;/h3&gt; &#xA;&lt;p&gt;You should have the most recent Intel GPU drivers installed.&lt;br&gt; Run your application like this:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;&amp;lt;ZLUDA_DIRECTORY&amp;gt;\zluda_with.exe -- &amp;lt;APPLICATION&amp;gt; &amp;lt;APPLICATIONS_ARGUMENTS&amp;gt;&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h3&gt;Linux&lt;/h3&gt; &#xA;&lt;p&gt;You should install most recent run-time driver packages as outlined here: &lt;a href=&#34;https://dgpu-docs.intel.com/installation-guides/index.html&#34;&gt;https://dgpu-docs.intel.com/installation-guides/index.html&lt;/a&gt;.&lt;br&gt; Run your application like this:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;LD_LIBRARY_PATH=&amp;lt;ZLUDA_DIRECTORY&amp;gt; &amp;lt;APPLICATION&amp;gt; &amp;lt;APPLICATIONS_ARGUMENTS&amp;gt;&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h2&gt;Building&lt;/h2&gt; &#xA;&lt;p&gt;You should have a relatively recent version of Rust installed, then you just do:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;cargo build --release&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;in the main directory of the project.&lt;/p&gt; &#xA;&lt;h3&gt;Linux&lt;/h3&gt; &#xA;&lt;p&gt;You should install most recent run-time an developer driver packages as outlined here: &lt;a href=&#34;https://dgpu-docs.intel.com/installation-guides/index.html&#34;&gt;https://dgpu-docs.intel.com/installation-guides/index.html&lt;/a&gt;. Additionally, you should have &lt;code&gt;ocl-icd-opencl-dev&lt;/code&gt; (or equivalent) installed.&lt;br&gt; If you are building on Linux you must also symlink (or rename) the ZLUDA output binaries after ZLUDA build finishes:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;ln -s libnvcuda.so target/release/libcuda.so&#xA;ln -s libnvcuda.so target/release/libcuda.so.1&#xA;ln -s libnvml.so target/release/libnvidia-ml.so&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h2&gt;Contributing&lt;/h2&gt; &#xA;&lt;p&gt;If you want to develop ZLUDA itself, read &lt;a href=&#34;https://raw.githubusercontent.com/vosen/ZLUDA/master/CONTRIBUTING.md&#34;&gt;CONTRIBUTING.md&lt;/a&gt;, it contains instructions how to set up dependencies and run tests&lt;/p&gt; &#xA;&lt;h2&gt;License&lt;/h2&gt; &#xA;&lt;p&gt;This software is dual-licensed under either the Apache 2.0 license or the MIT license. See &lt;a href=&#34;https://raw.githubusercontent.com/vosen/ZLUDA/master/LICENSE-APACHE&#34;&gt;LICENSE-APACHE&lt;/a&gt; or &lt;a href=&#34;https://raw.githubusercontent.com/vosen/ZLUDA/master/LICENSE-MIT&#34;&gt;LICENSE-MIT&lt;/a&gt; for details&lt;/p&gt;</summary>
  </entry>
</feed>