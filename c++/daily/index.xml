<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom">
  <title>GitHub C++ Daily Trending</title>
  <id>http://mshibanami.github.io/GitHubTrendingRSS</id>
  <updated>2024-04-27T01:24:48Z</updated>
  <subtitle>Daily Trending of C++ in GitHub</subtitle>
  <link href="http://mshibanami.github.io/GitHubTrendingRSS"></link>
  <entry>
    <title>microsoft/onnxruntime-genai</title>
    <updated>2024-04-27T01:24:48Z</updated>
    <id>tag:github.com,2024-04-27:/microsoft/onnxruntime-genai</id>
    <link href="https://github.com/microsoft/onnxruntime-genai" rel="alternate"></link>
    <summary type="html">&lt;p&gt;Generative AI extensions for onnxruntime&lt;/p&gt;&lt;hr&gt;&lt;h1&gt;ONNX Runtime Generative AI&lt;/h1&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://www.nuget.org/packages/Microsoft.ML.OnnxRuntimeGenAI&#34;&gt;&lt;img src=&#34;https://img.shields.io/nuget/vpre/Microsoft.ML.OnnxRuntimeGenAI.Managed&#34; alt=&#34;Latest version&#34;&gt;&lt;/a&gt;&lt;/p&gt; &#xA;&lt;p&gt;Run generative AI models with ONNX Runtime.&lt;/p&gt; &#xA;&lt;p&gt;This library provides the generative AI loop for ONNX models, including inference with ONNX Runtime, logits processing, search and sampling, and KV cache management.&lt;/p&gt; &#xA;&lt;p&gt;Users can call a high level &lt;code&gt;generate()&lt;/code&gt; method, or run each iteration of the model in a loop.&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Support greedy/beam search and TopP, TopK sampling to generate token sequences&lt;/li&gt; &#xA; &lt;li&gt;Built in logits processing like repetition penalties&lt;/li&gt; &#xA; &lt;li&gt;Easy custom scoring&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;See full documentation at [https://onnxruntime.ai/docs/genai].&lt;/p&gt; &#xA;&lt;h2&gt;Features&lt;/h2&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Supported model architectures: &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;Phi-3&lt;/li&gt; &#xA;   &lt;li&gt;Phi-2&lt;/li&gt; &#xA;   &lt;li&gt;Gemma&lt;/li&gt; &#xA;   &lt;li&gt;LLaMA&lt;/li&gt; &#xA;   &lt;li&gt;Mistral&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA; &lt;li&gt;Supported targets: &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;GPU (DirectML)&lt;/li&gt; &#xA;   &lt;li&gt;GPU (CUDA)&lt;/li&gt; &#xA;   &lt;li&gt;CPU&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA; &lt;li&gt;Supported sampling features &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;Beam search&lt;/li&gt; &#xA;   &lt;li&gt;Greedy search&lt;/li&gt; &#xA;   &lt;li&gt;Top P/Top K&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA; &lt;li&gt;APIs &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;Python&lt;/li&gt; &#xA;   &lt;li&gt;C#&lt;/li&gt; &#xA;   &lt;li&gt;C/C++&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;Coming very soon&lt;/h2&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Support for the encoder decoder model architectures, such as whisper, T5 and BART.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;Coming soon&lt;/h2&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Support for mobile devices (Android and iOS) with Java and Objective-C bindings&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;Roadmap&lt;/h2&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Stable diffusion pipeline&lt;/li&gt; &#xA; &lt;li&gt;Automatic model download and cache&lt;/li&gt; &#xA; &lt;li&gt;More model architectures&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;Installation&lt;/h2&gt; &#xA;&lt;h3&gt;DirectML&lt;/h3&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;pip install [--pre] numpy onnxruntime-genai-directml&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h3&gt;CPU&lt;/h3&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;pip install [--pre] numpy onnxruntime-genai&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h3&gt;CUDA&lt;/h3&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;pip install numpy onnxruntime-genai-cuda --pre --index-url=https://aiinfra.pkgs.visualstudio.com/PublicPackages/_packaging/onnxruntime-genai/pypi/simple/&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h2&gt;Sample code for phi-2 in Python&lt;/h2&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://onnxruntime.ai/docs/genai/howto/install&#34;&gt;Install&lt;/a&gt; the onnxruntime-genai Python package.&lt;/p&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;Build the model&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;python -m onnxruntime_genai.models.builder -m microsoft/phi-2 -e cpu -p int4 -o ./models/phi2&#xA;# You can append --extra_options enable_cuda_graph=1 to build an onnx model that supports using cuda graph in ORT.&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;ol start=&#34;2&#34;&gt; &#xA; &lt;li&gt;Run inference&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;import os&#xA;import onnxruntime_genai as og&#xA;&#xA;model_path = os.path.abspath(&#34;./models/phi2&#34;)&#xA;&#xA;model = og.Model(model_path)&#xA;&#xA;tokenizer = og.Tokenizer(model)&#xA;&#xA;prompt = &#39;&#39;&#39;def print_prime(n):&#xA;    &#34;&#34;&#34;&#xA;    Print all primes between 1 and n&#xA;    &#34;&#34;&#34;&#39;&#39;&#39;&#xA;&#xA;tokens = tokenizer.encode(prompt)&#xA;&#xA;params = og.GeneratorParams(model)&#xA;params.set_search_options({&#34;max_length&#34;:200})&#xA;# Add the following line to enable cuda graph by passing the maximum batch size.&#xA;# params.try_use_cuda_graph_with_max_batch_size(16)&#xA;params.input_ids = tokens&#xA;&#xA;output_tokens = model.generate(params)&#xA;&#xA;text = tokenizer.decode(output_tokens)&#xA;&#xA;print(&#34;Output:&#34;)&#xA;print(text)&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h2&gt;Model download and export&lt;/h2&gt; &#xA;&lt;p&gt;ONNX models are run from a local folder, via a string supplied to the &lt;code&gt;Model()&lt;/code&gt; method.&lt;/p&gt; &#xA;&lt;p&gt;You can bring your own ONNX model or use the model builder utility, included in this package.&lt;/p&gt; &#xA;&lt;p&gt;Install model builder dependencies.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;pip install numpy install transformers torch onnx onnxruntime&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Export int4 CPU version&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;huggingface-cli login --token &amp;lt;your HuggingFace token&amp;gt;&#xA;python -m onnxruntime_genai.models.builder -m microsoft/phi-2 -p int4 -e cpu -o &amp;lt;model folder&amp;gt;&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h2&gt;Contributing&lt;/h2&gt; &#xA;&lt;p&gt;This project welcomes contributions and suggestions. Most contributions require you to agree to a Contributor License Agreement (CLA) declaring that you have the right to, and actually do, grant us the rights to use your contribution. For details, visit &lt;a href=&#34;https://cla.opensource.microsoft.com&#34;&gt;https://cla.opensource.microsoft.com&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;p&gt;When you submit a pull request, a CLA bot will automatically determine whether you need to provide a CLA and decorate the PR appropriately (e.g., status check, comment). Simply follow the instructions provided by the bot. You will only need to do this once across all repos using our CLA.&lt;/p&gt; &#xA;&lt;p&gt;This project has adopted the &lt;a href=&#34;https://opensource.microsoft.com/codeofconduct/&#34;&gt;Microsoft Open Source Code of Conduct&lt;/a&gt;. For more information see the &lt;a href=&#34;https://opensource.microsoft.com/codeofconduct/faq/&#34;&gt;Code of Conduct FAQ&lt;/a&gt; or contact &lt;a href=&#34;mailto:opencode@microsoft.com&#34;&gt;opencode@microsoft.com&lt;/a&gt; with any additional questions or comments.&lt;/p&gt; &#xA;&lt;h2&gt;Trademarks&lt;/h2&gt; &#xA;&lt;p&gt;This project may contain trademarks or logos for projects, products, or services. Authorized use of Microsoft trademarks or logos is subject to and must follow &lt;a href=&#34;https://www.microsoft.com/en-us/legal/intellectualproperty/trademarks/usage/general&#34;&gt;Microsoft&#39;s Trademark &amp;amp; Brand Guidelines&lt;/a&gt;. Use of Microsoft trademarks or logos in modified versions of this project must not cause confusion or imply Microsoft sponsorship. Any use of third-party trademarks or logos are subject to those third-party&#39;s policies.&lt;/p&gt;</summary>
  </entry>
</feed>