<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom">
  <title>GitHub Jupyter Notebook Daily Trending</title>
  <id>http://mshibanami.github.io/GitHubTrendingRSS</id>
  <updated>2022-10-21T01:34:18Z</updated>
  <subtitle>Daily Trending of Jupyter Notebook in GitHub</subtitle>
  <link href="http://mshibanami.github.io/GitHubTrendingRSS"></link>
  <entry>
    <title>runwayml/stable-diffusion</title>
    <updated>2022-10-21T01:34:18Z</updated>
    <id>tag:github.com,2022-10-21:/runwayml/stable-diffusion</id>
    <link href="https://github.com/runwayml/stable-diffusion" rel="alternate"></link>
    <summary type="html">&lt;p&gt;Latent Text-to-Image Diffusion&lt;/p&gt;&lt;hr&gt;&lt;h2&gt;Stable Diffusion&lt;/h2&gt; &#xA;&lt;p&gt;&lt;em&gt;&lt;a href=&#34;https://github.com/compvis/stable-diffusion&#34;&gt;Stable Diffusion&lt;/a&gt; builds upon our previous work with the &lt;a href=&#34;https://ommer-lab.com/&#34;&gt;CompVis group&lt;/a&gt;:&lt;/em&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://ommer-lab.com/research/latent-diffusion-models/&#34;&gt;&lt;strong&gt;High-Resolution Image Synthesis with Latent Diffusion Models&lt;/strong&gt;&lt;/a&gt;&lt;br&gt; &lt;a href=&#34;https://github.com/rromb&#34;&gt;Robin Rombach&lt;/a&gt;*, &lt;a href=&#34;https://github.com/ablattmann&#34;&gt;Andreas Blattmann&lt;/a&gt;*, &lt;a href=&#34;https://github.com/qp-qp&#34;&gt;Dominik Lorenz&lt;/a&gt;, &lt;a href=&#34;https://github.com/pesser&#34;&gt;Patrick Esser&lt;/a&gt;, &lt;a href=&#34;https://hci.iwr.uni-heidelberg.de/Staff/bommer&#34;&gt;Bj√∂rn Ommer&lt;/a&gt;&lt;br&gt; &lt;em&gt;&lt;a href=&#34;https://openaccess.thecvf.com/content/CVPR2022/html/Rombach_High-Resolution_Image_Synthesis_With_Latent_Diffusion_Models_CVPR_2022_paper.html&#34;&gt;CVPR &#39;22 Oral&lt;/a&gt; | &lt;a href=&#34;https://github.com/CompVis/latent-diffusion&#34;&gt;GitHub&lt;/a&gt; | &lt;a href=&#34;https://arxiv.org/abs/2112.10752&#34;&gt;arXiv&lt;/a&gt; | &lt;a href=&#34;https://ommer-lab.com/research/latent-diffusion-models/&#34;&gt;Project page&lt;/a&gt;&lt;/em&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/runwayml/stable-diffusion/main/assets/stable-samples/txt2img/merged-0006.png&#34; alt=&#34;txt2img-stable2&#34;&gt; &lt;a href=&#34;https://raw.githubusercontent.com/runwayml/stable-diffusion/main/#stable-diffusion-v1&#34;&gt;Stable Diffusion&lt;/a&gt; is a latent text-to-image diffusion model. Thanks to a generous compute donation from &lt;a href=&#34;https://stability.ai/&#34;&gt;Stability AI&lt;/a&gt; and support from &lt;a href=&#34;https://laion.ai/&#34;&gt;LAION&lt;/a&gt;, we were able to train a Latent Diffusion Model on 512x512 images from a subset of the &lt;a href=&#34;https://laion.ai/blog/laion-5b/&#34;&gt;LAION-5B&lt;/a&gt; database. Similar to Google&#39;s &lt;a href=&#34;https://arxiv.org/abs/2205.11487&#34;&gt;Imagen&lt;/a&gt;, this model uses a frozen CLIP ViT-L/14 text encoder to condition the model on text prompts. With its 860M UNet and 123M text encoder, the model is relatively lightweight and runs on a GPU with at least 10GB VRAM. See &lt;a href=&#34;https://raw.githubusercontent.com/runwayml/stable-diffusion/main/#stable-diffusion-v1&#34;&gt;this section&lt;/a&gt; below and the &lt;a href=&#34;https://huggingface.co/CompVis/stable-diffusion&#34;&gt;model card&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;h2&gt;News&lt;/h2&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;em&gt;2022-10-20&lt;/em&gt; &lt;a href=&#34;https://huggingface.co/runwayml/stable-diffusion-v1-5&#34;&gt;v1.5 Text-to-Image Checkpoint&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;em&gt;2022-10-18&lt;/em&gt; &lt;a href=&#34;https://raw.githubusercontent.com/runwayml/stable-diffusion/main/#inpainting-with-stable-diffusion&#34;&gt;Inpainting Model&lt;/a&gt; &lt;img src=&#34;https://raw.githubusercontent.com/runwayml/stable-diffusion/main/assets/inpaintingbanner.png&#34; alt=&#34;Inpainting Banner&#34;&gt;&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;Requirements&lt;/h2&gt; &#xA;&lt;p&gt;A suitable &lt;a href=&#34;https://conda.io/&#34;&gt;conda&lt;/a&gt; environment named &lt;code&gt;ldm&lt;/code&gt; can be created and activated with:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;conda env create -f environment.yaml&#xA;conda activate ldm&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;You can also update an existing &lt;a href=&#34;https://github.com/CompVis/latent-diffusion&#34;&gt;latent diffusion&lt;/a&gt; environment by running&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;conda install pytorch torchvision -c pytorch&#xA;pip install transformers==4.19.2 diffusers invisible-watermark&#xA;pip install -e .&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h2&gt;Stable Diffusion v1&lt;/h2&gt; &#xA;&lt;p&gt;Stable Diffusion v1 refers to a specific configuration of the model architecture that uses a downsampling-factor 8 autoencoder with an 860M UNet and CLIP ViT-L/14 text encoder for the diffusion model. The model was pretrained on 256x256 images and then finetuned on 512x512 images.&lt;/p&gt; &#xA;&lt;p&gt;&lt;em&gt;Note: Stable Diffusion v1 is a general text-to-image diffusion model and therefore mirrors biases and (mis-)conceptions that are present in its training data. Details on the training procedure and data, as well as the intended use of the model can be found in the corresponding &lt;a href=&#34;https://raw.githubusercontent.com/runwayml/stable-diffusion/main/Stable_Diffusion_v1_Model_Card.md&#34;&gt;model card&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt; &#xA;&lt;p&gt;The weights are available via &lt;a href=&#34;https://huggingface.co/CompVis&#34;&gt;the CompVis&lt;/a&gt; and &lt;a href=&#34;https://huggingface.co/runwayml&#34;&gt;Runway organization at Hugging Face&lt;/a&gt; under &lt;a href=&#34;https://raw.githubusercontent.com/runwayml/stable-diffusion/main/LICENSE&#34;&gt;a license which contains specific use-based restrictions to prevent misuse and harm as informed by the model card, but otherwise remains permissive&lt;/a&gt;. While commercial use is permitted under the terms of the license, &lt;strong&gt;we do not recommend using the provided weights for services or products without additional safety mechanisms and considerations&lt;/strong&gt;, since there are &lt;a href=&#34;https://raw.githubusercontent.com/runwayml/stable-diffusion/main/Stable_Diffusion_v1_Model_Card.md#limitations-and-bias&#34;&gt;known limitations and biases&lt;/a&gt; of the weights, and research on safe and ethical deployment of general text-to-image models is an ongoing effort. &lt;strong&gt;The weights are research artifacts and should be treated as such.&lt;/strong&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://raw.githubusercontent.com/runwayml/stable-diffusion/main/LICENSE&#34;&gt;The CreativeML OpenRAIL M license&lt;/a&gt; is an &lt;a href=&#34;https://www.licenses.ai/blog/2022/8/18/naming-convention-of-responsible-ai-licenses&#34;&gt;Open RAIL M license&lt;/a&gt;, adapted from the work that &lt;a href=&#34;https://bigscience.huggingface.co/&#34;&gt;BigScience&lt;/a&gt; and &lt;a href=&#34;https://www.licenses.ai/&#34;&gt;the RAIL Initiative&lt;/a&gt; are jointly carrying in the area of responsible AI licensing. See also &lt;a href=&#34;https://bigscience.huggingface.co/blog/the-bigscience-rail-license&#34;&gt;the article about the BLOOM Open RAIL license&lt;/a&gt; on which our license is based.&lt;/p&gt; &#xA;&lt;h3&gt;Weights&lt;/h3&gt; &#xA;&lt;p&gt;We currently provide the following checkpoints:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://huggingface.co/compvis&#34;&gt;&lt;code&gt;sd-v1-1.ckpt&lt;/code&gt;&lt;/a&gt;: 237k steps at resolution &lt;code&gt;256x256&lt;/code&gt; on &lt;a href=&#34;https://huggingface.co/datasets/laion/laion2B-en&#34;&gt;laion2B-en&lt;/a&gt;. 194k steps at resolution &lt;code&gt;512x512&lt;/code&gt; on &lt;a href=&#34;https://huggingface.co/datasets/laion/laion-high-resolution&#34;&gt;laion-high-resolution&lt;/a&gt; (170M examples from LAION-5B with resolution &lt;code&gt;&amp;gt;= 1024x1024&lt;/code&gt;).&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://huggingface.co/compvis&#34;&gt;&lt;code&gt;sd-v1-2.ckpt&lt;/code&gt;&lt;/a&gt;: Resumed from &lt;code&gt;sd-v1-1.ckpt&lt;/code&gt;. 515k steps at resolution &lt;code&gt;512x512&lt;/code&gt; on &lt;a href=&#34;https://laion.ai/blog/laion-aesthetics/&#34;&gt;laion-aesthetics v2 5+&lt;/a&gt; (a subset of laion2B-en with estimated aesthetics score &lt;code&gt;&amp;gt; 5.0&lt;/code&gt;, and additionally filtered to images with an original size &lt;code&gt;&amp;gt;= 512x512&lt;/code&gt;, and an estimated watermark probability &lt;code&gt;&amp;lt; 0.5&lt;/code&gt;. The watermark estimate is from the &lt;a href=&#34;https://laion.ai/blog/laion-5b/&#34;&gt;LAION-5B&lt;/a&gt; metadata, the aesthetics score is estimated using the &lt;a href=&#34;https://github.com/christophschuhmann/improved-aesthetic-predictor&#34;&gt;LAION-Aesthetics Predictor V2&lt;/a&gt;).&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://huggingface.co/compvis&#34;&gt;&lt;code&gt;sd-v1-3.ckpt&lt;/code&gt;&lt;/a&gt;: Resumed from &lt;code&gt;sd-v1-2.ckpt&lt;/code&gt;. 195k steps at resolution &lt;code&gt;512x512&lt;/code&gt; on &#34;laion-aesthetics v2 5+&#34; and 10% dropping of the text-conditioning to improve &lt;a href=&#34;https://arxiv.org/abs/2207.12598&#34;&gt;classifier-free guidance sampling&lt;/a&gt;.&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://huggingface.co/compvis&#34;&gt;&lt;code&gt;sd-v1-4.ckpt&lt;/code&gt;&lt;/a&gt;: Resumed from &lt;code&gt;sd-v1-2.ckpt&lt;/code&gt;. 225k steps at resolution &lt;code&gt;512x512&lt;/code&gt; on &#34;laion-aesthetics v2 5+&#34; and 10% dropping of the text-conditioning to improve &lt;a href=&#34;https://arxiv.org/abs/2207.12598&#34;&gt;classifier-free guidance sampling&lt;/a&gt;.&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://huggingface.co/runwayml/stable-diffusion-v1-5&#34;&gt;&lt;code&gt;sd-v1-5.ckpt&lt;/code&gt;&lt;/a&gt;: Resumed from &lt;code&gt;sd-v1-2.ckpt&lt;/code&gt;. 595k steps at resolution &lt;code&gt;512x512&lt;/code&gt; on &#34;laion-aesthetics v2 5+&#34; and 10% dropping of the text-conditioning to improve &lt;a href=&#34;https://arxiv.org/abs/2207.12598&#34;&gt;classifier-free guidance sampling&lt;/a&gt;.&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://huggingface.co/runwayml/stable-diffusion-inpainting&#34;&gt;&lt;code&gt;sd-v1-5-inpainting.ckpt&lt;/code&gt;&lt;/a&gt;: Resumed from &lt;code&gt;sd-v1-5.ckpt&lt;/code&gt;. 440k steps of inpainting training at resolution &lt;code&gt;512x512&lt;/code&gt; on &#34;laion-aesthetics v2 5+&#34; and 10% dropping of the text-conditioning to improve &lt;a href=&#34;https://arxiv.org/abs/2207.12598&#34;&gt;classifier-free guidance sampling&lt;/a&gt;. For inpainting, the UNet has 5 additional input channels (4 for the encoded masked-image and 1 for the mask itself) whose weights were zero-initialized after restoring the non-inpainting checkpoint. During training, we generate synthetic masks and in 25% mask everything.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;Evaluations with different classifier-free guidance scales (1.5, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0) and 50 PLMS sampling steps show the relative improvements of the checkpoints: &lt;img src=&#34;https://raw.githubusercontent.com/runwayml/stable-diffusion/main/assets/v1-1-to-v1-5.png&#34; alt=&#34;sd evaluation results&#34;&gt;&lt;/p&gt; &#xA;&lt;h3&gt;Text-to-Image with Stable Diffusion&lt;/h3&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/runwayml/stable-diffusion/main/assets/stable-samples/txt2img/merged-0005.png&#34; alt=&#34;txt2img-stable2&#34;&gt; &lt;img src=&#34;https://raw.githubusercontent.com/runwayml/stable-diffusion/main/assets/stable-samples/txt2img/merged-0007.png&#34; alt=&#34;txt2img-stable2&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;Stable Diffusion is a latent diffusion model conditioned on the (non-pooled) text embeddings of a CLIP ViT-L/14 text encoder. We provide a &lt;a href=&#34;https://raw.githubusercontent.com/runwayml/stable-diffusion/main/#reference-sampling-script&#34;&gt;reference script for sampling&lt;/a&gt;, but there also exists a &lt;a href=&#34;https://raw.githubusercontent.com/runwayml/stable-diffusion/main/#diffusers-integration&#34;&gt;diffusers integration&lt;/a&gt;, which we expect to see more active community development.&lt;/p&gt; &#xA;&lt;h4&gt;Reference Sampling Script&lt;/h4&gt; &#xA;&lt;p&gt;We provide a reference sampling script, which incorporates&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;a &lt;a href=&#34;https://github.com/CompVis/stable-diffusion/pull/36&#34;&gt;Safety Checker Module&lt;/a&gt;, to reduce the probability of explicit outputs,&lt;/li&gt; &#xA; &lt;li&gt;an &lt;a href=&#34;https://github.com/ShieldMnt/invisible-watermark&#34;&gt;invisible watermarking&lt;/a&gt; of the outputs, to help viewers &lt;a href=&#34;https://raw.githubusercontent.com/runwayml/stable-diffusion/main/scripts/tests/test_watermark.py&#34;&gt;identify the images as machine-generated&lt;/a&gt;.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;After &lt;a href=&#34;https://raw.githubusercontent.com/runwayml/stable-diffusion/main/#weights&#34;&gt;obtaining the &lt;code&gt;stable-diffusion-v1-*-original&lt;/code&gt; weights&lt;/a&gt;, link them&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;mkdir -p models/ldm/stable-diffusion-v1/&#xA;ln -s &amp;lt;path/to/model.ckpt&amp;gt; models/ldm/stable-diffusion-v1/model.ckpt &#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;and sample with&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;python scripts/txt2img.py --prompt &#34;a photograph of an astronaut riding a horse&#34; --plms &#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;By default, this uses a guidance scale of &lt;code&gt;--scale 7.5&lt;/code&gt;, &lt;a href=&#34;https://github.com/CompVis/latent-diffusion/pull/51&#34;&gt;Katherine Crowson&#39;s implementation&lt;/a&gt; of the &lt;a href=&#34;https://arxiv.org/abs/2202.09778&#34;&gt;PLMS&lt;/a&gt; sampler, and renders images of size 512x512 (which it was trained on) in 50 steps. All supported arguments are listed below (type &lt;code&gt;python scripts/txt2img.py --help&lt;/code&gt;).&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-commandline&#34;&gt;usage: txt2img.py [-h] [--prompt [PROMPT]] [--outdir [OUTDIR]] [--skip_grid] [--skip_save] [--ddim_steps DDIM_STEPS] [--plms] [--laion400m] [--fixed_code] [--ddim_eta DDIM_ETA]&#xA;                  [--n_iter N_ITER] [--H H] [--W W] [--C C] [--f F] [--n_samples N_SAMPLES] [--n_rows N_ROWS] [--scale SCALE] [--from-file FROM_FILE] [--config CONFIG] [--ckpt CKPT]&#xA;                  [--seed SEED] [--precision {full,autocast}]&#xA;&#xA;optional arguments:&#xA;  -h, --help            show this help message and exit&#xA;  --prompt [PROMPT]     the prompt to render&#xA;  --outdir [OUTDIR]     dir to write results to&#xA;  --skip_grid           do not save a grid, only individual samples. Helpful when evaluating lots of samples&#xA;  --skip_save           do not save individual samples. For speed measurements.&#xA;  --ddim_steps DDIM_STEPS&#xA;                        number of ddim sampling steps&#xA;  --plms                use plms sampling&#xA;  --laion400m           uses the LAION400M model&#xA;  --fixed_code          if enabled, uses the same starting code across samples&#xA;  --ddim_eta DDIM_ETA   ddim eta (eta=0.0 corresponds to deterministic sampling&#xA;  --n_iter N_ITER       sample this often&#xA;  --H H                 image height, in pixel space&#xA;  --W W                 image width, in pixel space&#xA;  --C C                 latent channels&#xA;  --f F                 downsampling factor&#xA;  --n_samples N_SAMPLES&#xA;                        how many samples to produce for each given prompt. A.k.a. batch size&#xA;  --n_rows N_ROWS       rows in the grid (default: n_samples)&#xA;  --scale SCALE         unconditional guidance scale: eps = eps(x, empty) + scale * (eps(x, cond) - eps(x, empty))&#xA;  --from-file FROM_FILE&#xA;                        if specified, load prompts from this file&#xA;  --config CONFIG       path to config which constructs model&#xA;  --ckpt CKPT           path to checkpoint of model&#xA;  --seed SEED           the seed (for reproducible sampling)&#xA;  --precision {full,autocast}&#xA;                        evaluate at this precision&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Note: The inference config for all v1 versions is designed to be used with EMA-only checkpoints. For this reason &lt;code&gt;use_ema=False&lt;/code&gt; is set in the configuration, otherwise the code will try to switch from non-EMA to EMA weights. If you want to examine the effect of EMA vs no EMA, we provide &#34;full&#34; checkpoints which contain both types of weights. For these, &lt;code&gt;use_ema=False&lt;/code&gt; will load and use the non-EMA weights.&lt;/p&gt; &#xA;&lt;h4&gt;Diffusers Integration&lt;/h4&gt; &#xA;&lt;p&gt;A simple way to download and sample Stable Diffusion is by using the &lt;a href=&#34;https://github.com/huggingface/diffusers/tree/main#new--stable-diffusion-is-now-fully-compatible-with-diffusers&#34;&gt;diffusers library&lt;/a&gt;:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-py&#34;&gt;from diffusers import StableDiffusionPipeline&#xA;&#xA;model_id = &#34;runwayml/stable-diffusion-v1-5&#34;&#xA;pipe = StableDiffusionPipeline.from_pretrained(model_id, torch_dtype=torch.float16, revision=&#34;fp16&#34;)&#xA;pipe = pipe.to(device)&#xA;&#xA;prompt = &#34;a photo of an astronaut riding a horse on mars&#34;&#xA;image = pipe(prompt).images[0]&#xA;    &#xA;image.save(&#34;astronaut_rides_horse.png&#34;)&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h3&gt;Image Modification with Stable Diffusion&lt;/h3&gt; &#xA;&lt;p&gt;By using a diffusion-denoising mechanism as first proposed by &lt;a href=&#34;https://arxiv.org/abs/2108.01073&#34;&gt;SDEdit&lt;/a&gt;, the model can be used for different tasks such as text-guided image-to-image translation and upscaling. Similar to the txt2img sampling script, we provide a script to perform image modification with Stable Diffusion.&lt;/p&gt; &#xA;&lt;p&gt;The following describes an example where a rough sketch made in &lt;a href=&#34;https://www.pinta-project.com/&#34;&gt;Pinta&lt;/a&gt; is converted into a detailed artwork.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;python scripts/img2img.py --prompt &#34;A fantasy landscape, trending on artstation&#34; --init-img &amp;lt;path-to-img.jpg&amp;gt; --strength 0.8&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Here, strength is a value between 0.0 and 1.0, that controls the amount of noise that is added to the input image. Values that approach 1.0 allow for lots of variations but will also produce images that are not semantically consistent with the input. See the following example.&lt;/p&gt; &#xA;&lt;p&gt;&lt;strong&gt;Input&lt;/strong&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/runwayml/stable-diffusion/main/assets/stable-samples/img2img/sketch-mountains-input.jpg&#34; alt=&#34;sketch-in&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;strong&gt;Outputs&lt;/strong&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/runwayml/stable-diffusion/main/assets/stable-samples/img2img/mountains-3.png&#34; alt=&#34;out3&#34;&gt; &lt;img src=&#34;https://raw.githubusercontent.com/runwayml/stable-diffusion/main/assets/stable-samples/img2img/mountains-2.png&#34; alt=&#34;out2&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;This procedure can, for example, also be used to upscale samples from the base model.&lt;/p&gt; &#xA;&lt;h3&gt;Inpainting with Stable Diffusion&lt;/h3&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/runwayml/stable-diffusion/main/assets/stable-inpainting/merged-bench.png&#34; alt=&#34;txt2img-stable2&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;We provide a checkpoint finetuned for inpainting to perform text-based erase &amp;amp; replace functionality.&lt;/p&gt; &#xA;&lt;h4&gt;Quick Start&lt;/h4&gt; &#xA;&lt;p&gt;After &lt;a href=&#34;https://raw.githubusercontent.com/runwayml/stable-diffusion/main/#Requirements&#34;&gt;creating a suitable environment&lt;/a&gt;, download the &lt;a href=&#34;https://huggingface.co/runwayml/stable-diffusion-inpainting&#34;&gt;checkpoint finetuned for inpainting&lt;/a&gt; and run&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;streamlit run scripts/inpaint_st.py -- configs/stable-diffusion/v1-inpainting-inference.yaml &amp;lt;path-to-checkpoint&amp;gt;&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;for a streamlit demo of the inpainting model. Details on the training procedure and data, as well as the intended use of the model can be found in the corresponding &lt;a href=&#34;https://raw.githubusercontent.com/runwayml/stable-diffusion/main/Stable_Diffusion_v1_Model_Card.md&#34;&gt;model card&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;h4&gt;Diffusers Integration&lt;/h4&gt; &#xA;&lt;p&gt;Another simple way to use the inpainting model is via the &lt;a href=&#34;https://github.com/huggingface/diffusers&#34;&gt;diffusers library&lt;/a&gt;:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-py&#34;&gt;from diffusers import StableDiffusionInpaintPipeline&#xA;&#xA;pipe = StableDiffusionInpaintPipeline.from_pretrained(&#xA;    &#34;runwayml/stable-diffusion-inpainting&#34;,&#xA;    revision=&#34;fp16&#34;,&#xA;    torch_dtype=torch.float16,&#xA;)&#xA;prompt = &#34;Face of a yellow cat, high resolution, sitting on a park bench&#34;&#xA;#image and mask_image should be PIL images.&#xA;#The mask structure is white for inpainting and black for keeping as is&#xA;image = pipe(prompt=prompt, image=image, mask_image=mask_image).images[0]&#xA;image.save(&#34;./yellow_cat_on_park_bench.png&#34;)&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h4&gt;Evaluation&lt;/h4&gt; &#xA;&lt;p&gt;To assess the performance of the inpainting model, we used the same evaluation protocol as in our &lt;a href=&#34;https://arxiv.org/abs/2112.10752&#34;&gt;LDM paper&lt;/a&gt;. Since the Stable Diffusion Inpainting Model acccepts a text input, we simply used a fixed prompt of &lt;code&gt;photograph of a beautiful empty scene, highest quality settings&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;table&gt; &#xA; &lt;thead&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;th&gt;Model&lt;/th&gt; &#xA;   &lt;th&gt;FID&lt;/th&gt; &#xA;   &lt;th&gt;LPIPS&lt;/th&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/thead&gt; &#xA; &lt;tbody&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;Stable Diffusion Inpainting&lt;/td&gt; &#xA;   &lt;td&gt;1.00&lt;/td&gt; &#xA;   &lt;td&gt;0.141 (+- 0.082)&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;Latent Diffusion Inpainting&lt;/td&gt; &#xA;   &lt;td&gt;1.50&lt;/td&gt; &#xA;   &lt;td&gt;0.137 (+- 0.080)&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;CoModGAN&lt;/td&gt; &#xA;   &lt;td&gt;1.82&lt;/td&gt; &#xA;   &lt;td&gt;0.15&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;LaMa&lt;/td&gt; &#xA;   &lt;td&gt;2.21&lt;/td&gt; &#xA;   &lt;td&gt;0.134 (+- 0.080)&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/tbody&gt; &#xA;&lt;/table&gt; &#xA;&lt;h4&gt;Online Demo&lt;/h4&gt; &#xA;&lt;p&gt;If you want to try the model without setting things up locally, you can try the &lt;a href=&#34;https://app.runwayml.com/ai-tools/erase-and-replace&#34;&gt;Erase &amp;amp; Replace&lt;/a&gt; tool at &lt;a href=&#34;https://runwayml.com/&#34;&gt;Runway&lt;/a&gt;:&lt;/p&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://user-images.githubusercontent.com/2175508/196499595-d8194abf-fec4-4927-bf14-af106fe4fa40.mp4&#34;&gt;https://user-images.githubusercontent.com/2175508/196499595-d8194abf-fec4-4927-bf14-af106fe4fa40.mp4&lt;/a&gt;&lt;/p&gt; &#xA;&lt;h2&gt;Comments&lt;/h2&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt; &lt;p&gt;Our codebase for the diffusion models builds heavily on &lt;a href=&#34;https://github.com/openai/guided-diffusion&#34;&gt;OpenAI&#39;s ADM codebase&lt;/a&gt; and &lt;a href=&#34;https://github.com/lucidrains/denoising-diffusion-pytorch&#34;&gt;https://github.com/lucidrains/denoising-diffusion-pytorch&lt;/a&gt;. Thanks for open-sourcing!&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;The implementation of the transformer encoder is from &lt;a href=&#34;https://github.com/lucidrains/x-transformers&#34;&gt;x-transformers&lt;/a&gt; by &lt;a href=&#34;https://github.com/lucidrains?tab=repositories&#34;&gt;lucidrains&lt;/a&gt;.&lt;/p&gt; &lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;BibTeX&lt;/h2&gt; &#xA;&lt;pre&gt;&lt;code&gt;@misc{rombach2021highresolution,&#xA;      title={High-Resolution Image Synthesis with Latent Diffusion Models}, &#xA;      author={Robin Rombach and Andreas Blattmann and Dominik Lorenz and Patrick Esser and Bj√∂rn Ommer},&#xA;      year={2021},&#xA;      eprint={2112.10752},&#xA;      archivePrefix={arXiv},&#xA;      primaryClass={cs.CV}&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt;</summary>
  </entry>
  <entry>
    <title>stochasticai/x-stable-diffusion</title>
    <updated>2022-10-21T01:34:18Z</updated>
    <id>tag:github.com,2022-10-21:/stochasticai/x-stable-diffusion</id>
    <link href="https://github.com/stochasticai/x-stable-diffusion" rel="alternate"></link>
    <summary type="html">&lt;p&gt;Real-time inference for Stable Diffusion - 0.88s latency. Covers AITemplate, nvFuser, TensorRT, FlashAttention.&lt;/p&gt;&lt;hr&gt;&lt;p align=&#34;center&#34;&gt; &lt;img src=&#34;https://raw.githubusercontent.com/stochasticai/x-stable-diffusion/main/.github/stochastic_logo_light.svg#gh-light-mode-only&#34; width=&#34;600&#34; alt=&#34;Stochastic.ai&#34;&gt; &lt;img src=&#34;https://raw.githubusercontent.com/stochasticai/x-stable-diffusion/main/.github/stochastic_logo_dark.svg#gh-dark-mode-only&#34; width=&#34;600&#34; alt=&#34;Stochastic.ai&#34;&gt; &lt;/p&gt; &#xA;&lt;br&gt; &#xA;&lt;h1&gt;‚ö°Ô∏è Real-time inference for Stable Diffusion&lt;/h1&gt; &#xA;&lt;!-- ![stochasticai_demo](.github/stochasticai_demo.gif) --&gt; &#xA;&lt;p align=&#34;center&#34;&gt; &lt;img src=&#34;https://raw.githubusercontent.com/stochasticai/x-stable-diffusion/main/.github/stochasticai_demo.gif&#34; width=&#34;600&#34; alt=&#34;Stochastic.ai Demo&#34;&gt; &lt;/p&gt; &#xA;&lt;p&gt;Stochastic provides this repository to perform fast real-time inference with &lt;code&gt;Stable Diffusion&lt;/code&gt;. The goal of this repo is to collect and document as many optimization techniques for Stable Diffusion as possible.&lt;/p&gt; &#xA;&lt;p&gt;Currently this repository includes 4 optimization techiques with more in the pipeline. Feel free to open a PR to submit a new optimization technique to the folder.&lt;/p&gt; &#xA;&lt;!-- TOC --&gt; &#xA;&lt;p&gt;Table of contents:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/stochasticai/x-stable-diffusion/main/#-optimizations&#34;&gt;Optimizations&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/stochasticai/x-stable-diffusion/main/#benchmarks&#34;&gt;Benchmarks&lt;/a&gt; &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/stochasticai/x-stable-diffusion/main/#setup&#34;&gt;Setup&lt;/a&gt;&lt;/li&gt; &#xA;   &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/stochasticai/x-stable-diffusion/main/#online-results&#34;&gt;Online results&lt;/a&gt; &#xA;    &lt;ul&gt; &#xA;     &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/stochasticai/x-stable-diffusion/main/#a100-gpu&#34;&gt;A100 GPU&lt;/a&gt;&lt;/li&gt; &#xA;     &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/stochasticai/x-stable-diffusion/main/#t4-gpu&#34;&gt;T4 GPU&lt;/a&gt;&lt;/li&gt; &#xA;    &lt;/ul&gt; &lt;/li&gt; &#xA;   &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/stochasticai/x-stable-diffusion/main/#batched-results&#34;&gt;Batched results&lt;/a&gt;&lt;/li&gt; &#xA;   &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/stochasticai/x-stable-diffusion/main/#sample-images-generated&#34;&gt;Sample images generated&lt;/a&gt;&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/stochasticai/x-stable-diffusion/main/#deployment&#34;&gt;Deploy&lt;/a&gt; &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/stochasticai/x-stable-diffusion/main/#-quickstart&#34;&gt;Quickstart&lt;/a&gt;&lt;/li&gt; &#xA;   &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/stochasticai/x-stable-diffusion/main/#how-to-get-less-than-1s-latency&#34;&gt;How to get less than 1s latency?&lt;/a&gt;&lt;/li&gt; &#xA;   &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/stochasticai/x-stable-diffusion/main/#manual&#34;&gt;Manual&lt;/a&gt;&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/stochasticai/x-stable-diffusion/main/#how-to-run-with-google-colab&#34;&gt;Colab Notebooks&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/stochasticai/x-stable-diffusion/main/#-stochastic&#34;&gt;Stochastic&lt;/a&gt; &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/stochasticai/x-stable-diffusion/main/#features&#34;&gt;Features&lt;/a&gt;&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/stochasticai/x-stable-diffusion/main/#reference&#34;&gt;Reference&lt;/a&gt;&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;!-- /TOC --&gt; &#xA;&lt;h2&gt;üî• Optimizations&lt;/h2&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;AITemplate: &lt;a href=&#34;https://github.com/facebookincubator/AITemplate&#34;&gt;Latest optimization framework of Meta&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;TensorRT: &lt;a href=&#34;https://github.com/NVIDIA/TensorRT&#34;&gt;NVIDIA TensorRT framework&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;nvFuser: &lt;a href=&#34;https://pytorch.org/blog/introducing-nvfuser-a-deep-learning-compiler-for-pytorch/&#34;&gt;nvFuser with Pytorch&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;FlashAttention: &lt;a href=&#34;https://github.com/facebookresearch/xformers&#34;&gt;FlashAttention intergration in Xformers&lt;/a&gt;&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;Benchmarks&lt;/h2&gt; &#xA;&lt;h3&gt;Setup&lt;/h3&gt; &#xA;&lt;p&gt;For hardware, we used 1x40GB A100 GPU with CUDA 11.6 and the results are reported by averaging 50 runs.&lt;/p&gt; &#xA;&lt;p&gt;The following arguments were used for image generation for all the benchmarks:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;{&#xA;  &#39;max_seq_length&#39;: 64,&#xA;  &#39;num_inference_steps&#39;: 50, &#xA;  &#39;image_size&#39;: (512, 512) &#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h3&gt;Online results&lt;/h3&gt; &#xA;&lt;p&gt;For &lt;code&gt;batch_size&lt;/code&gt; 1, these are the latency results:&lt;/p&gt; &#xA;&lt;h4&gt;A100 GPU&lt;/h4&gt; &#xA;&lt;table&gt; &#xA; &lt;thead&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;th align=&#34;left&#34;&gt;project&lt;/th&gt; &#xA;   &lt;th align=&#34;left&#34;&gt;Latency (s)&lt;/th&gt; &#xA;   &lt;th align=&#34;left&#34;&gt;GPU VRAM (GB)&lt;/th&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/thead&gt; &#xA; &lt;tbody&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;PyTorch fp16&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;5.77&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;10.3&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;nvFuser fp16&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;3.15&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;---&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;FlashAttention fp16&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;2.80&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;7.5&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;TensorRT fp16&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;1.68&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;8.1&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;AITemplate fp16&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;1.38&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;4.83&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;ONNX (CUDA)&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;7.26&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;13.3&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/tbody&gt; &#xA;&lt;/table&gt; &#xA;&lt;h4&gt;T4 GPU&lt;/h4&gt; &#xA;&lt;blockquote&gt; &#xA; &lt;p&gt;Note: AITemplate might not support T4 GPU yet. &lt;a href=&#34;https://github.com/facebookincubator/AITemplate#installation&#34;&gt;Check support here&lt;/a&gt;&lt;/p&gt; &#xA;&lt;/blockquote&gt; &#xA;&lt;table&gt; &#xA; &lt;thead&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;th align=&#34;left&#34;&gt;project&lt;/th&gt; &#xA;   &lt;th align=&#34;left&#34;&gt;Latency (s)&lt;/th&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/thead&gt; &#xA; &lt;tbody&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;PyTorch fp16&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;28.5&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;nvFuser fp16&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;19.3&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;FlashAttention fp16&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;14.9&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;TensorRT fp16&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;9.3&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/tbody&gt; &#xA;&lt;/table&gt; &#xA;&lt;h3&gt;Batched results&lt;/h3&gt; &#xA;&lt;p&gt;The following results were obtained by varying &lt;code&gt;batch_size&lt;/code&gt; from 1 to 24.&lt;/p&gt; &#xA;&lt;table&gt; &#xA; &lt;thead&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;th align=&#34;left&#34;&gt;project \ bs&lt;/th&gt; &#xA;   &lt;th align=&#34;left&#34;&gt;1&lt;/th&gt; &#xA;   &lt;th align=&#34;left&#34;&gt;4&lt;/th&gt; &#xA;   &lt;th align=&#34;left&#34;&gt;8&lt;/th&gt; &#xA;   &lt;th align=&#34;left&#34;&gt;16&lt;/th&gt; &#xA;   &lt;th align=&#34;left&#34;&gt;24&lt;/th&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/thead&gt; &#xA; &lt;tbody&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;Pytorch fp16&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;5.77s/10.3GB&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;19.2s/18.5GB&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;36s/26.7GB&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;OOM&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;FlashAttention fp16&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;2.80s/7.5GB&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;9.1s/17GB&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;17.7s/29.5GB&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;OOM&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;TensorRT fp16&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;1.68s/8.1GB&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;OOM&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;AITemplate fp16&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;1.38s/4.83GB&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;4.25s/8.5GB&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;7.4s/14.5GB&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;15.7s/25GB&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;23.4s/36GB&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;ONNX (CUDA)&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;7.26s/13.3GB&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;OOM&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;OOM&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;OOM&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;OOM&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/tbody&gt; &#xA;&lt;/table&gt; &#xA;&lt;blockquote&gt; &#xA; &lt;p&gt;Note: TensorRT fails to convert UNet model from ONNX to TensorRT due to memory issues.&lt;/p&gt; &#xA;&lt;/blockquote&gt; &#xA;&lt;h3&gt;Sample images generated&lt;/h3&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://raw.githubusercontent.com/stochasticai/x-stable-diffusion/main/generated_images/README.md&#34;&gt;Click here to view the complete list of generated images&lt;/a&gt;&lt;/p&gt; &#xA;&lt;table&gt; &#xA; &lt;thead&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;th&gt;Optimization \ Prompt&lt;/th&gt; &#xA;   &lt;th&gt;Super Mario learning to fly in an airport, Painting by Leonardo Da Vinci&lt;/th&gt; &#xA;   &lt;th&gt;The Easter bunny riding a motorcycle in New York City&lt;/th&gt; &#xA;   &lt;th&gt;Drone flythrough of a tropical jungle convered in snow&lt;/th&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/thead&gt; &#xA; &lt;tbody&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;PyTorch fp16&lt;/td&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://raw.githubusercontent.com/stochasticai/x-stable-diffusion/main/generated_images/PyTorch/0.png&#34; alt=&#34;pytorch_stable-diffusion_mario&#34;&gt;&lt;/td&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://raw.githubusercontent.com/stochasticai/x-stable-diffusion/main/generated_images/PyTorch/1.png&#34; alt=&#34;pytorch_stable-diffusion_bunny&#34;&gt;&lt;/td&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://raw.githubusercontent.com/stochasticai/x-stable-diffusion/main/generated_images/PyTorch/9.png&#34; alt=&#34;pytorch_stable-diffusion_bunny&#34;&gt;&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;nvFuser fp16&lt;/td&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://raw.githubusercontent.com/stochasticai/x-stable-diffusion/main/generated_images/nvFuser/0.png&#34; alt=&#34;nvFuser_stable-diffusion_mario&#34;&gt;&lt;/td&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://raw.githubusercontent.com/stochasticai/x-stable-diffusion/main/generated_images/nvFuser/1.png&#34; alt=&#34;nvFuser_stable-diffusion_bunny&#34;&gt;&lt;/td&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://raw.githubusercontent.com/stochasticai/x-stable-diffusion/main/generated_images/nvFuser/9.png&#34; alt=&#34;nvFuser_stable-diffusion_bunny&#34;&gt;&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;FlashAttention fp16&lt;/td&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://raw.githubusercontent.com/stochasticai/x-stable-diffusion/main/generated_images/FlashAttention/0.png&#34; alt=&#34;FlashAttention_stable-diffusion_mario&#34;&gt;&lt;/td&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://raw.githubusercontent.com/stochasticai/x-stable-diffusion/main/generated_images/FlashAttention/1.png&#34; alt=&#34;FlashAttention_stable-diffusion_bunny&#34;&gt;&lt;/td&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://raw.githubusercontent.com/stochasticai/x-stable-diffusion/main/generated_images/FlashAttention/9.png&#34; alt=&#34;FlashAttention_stable-diffusion_bunny&#34;&gt;&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;TensorRT fp16&lt;/td&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://raw.githubusercontent.com/stochasticai/x-stable-diffusion/main/generated_images/TensorRT/0.png&#34; alt=&#34;TensorRT_stable-diffusion_mario&#34;&gt;&lt;/td&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://raw.githubusercontent.com/stochasticai/x-stable-diffusion/main/generated_images/TensorRT/1.png&#34; alt=&#34;TensorRT_stable-diffusion_bunny&#34;&gt;&lt;/td&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://raw.githubusercontent.com/stochasticai/x-stable-diffusion/main/generated_images/TensorRT/9.png&#34; alt=&#34;TensorRT_stable-diffusion_bunny&#34;&gt;&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;AITemplate fp16&lt;/td&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://raw.githubusercontent.com/stochasticai/x-stable-diffusion/main/generated_images/AITemplate/0.png&#34; alt=&#34;AITemplate_stable-diffusion_mario&#34;&gt;&lt;/td&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://raw.githubusercontent.com/stochasticai/x-stable-diffusion/main/generated_images/AITemplate/1.png&#34; alt=&#34;AITemplate_stable-diffusion_bunny&#34;&gt;&lt;/td&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://raw.githubusercontent.com/stochasticai/x-stable-diffusion/main/generated_images/AITemplate/9.png&#34; alt=&#34;AITemplate_stable-diffusion_bunny&#34;&gt;&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/tbody&gt; &#xA;&lt;/table&gt; &#xA;&lt;h2&gt;üöÄ Quickstart&lt;/h2&gt; &#xA;&lt;p&gt;Make sure you have &lt;a href=&#34;https://www.python.org/downloads/&#34;&gt;Python&lt;/a&gt; and &lt;a href=&#34;https://docs.docker.com/engine/install/&#34;&gt;Docker&lt;/a&gt; installed on your system&lt;/p&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;Install the latest version of &lt;code&gt;stochasticx&lt;/code&gt; library.&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;pre&gt;&lt;code&gt;pip install stochasticx&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;ol start=&#34;2&#34;&gt; &#xA; &lt;li&gt;Deploy the Stable Diffusion model&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;pre&gt;&lt;code&gt;stochasticx stable-diffusion deploy --type aitemplate&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;If you don&#39;t have a Stochastic account, then the CLI will prompt you to quickly create one. It is free and just takes 1 minute &lt;a href=&#34;https://app.stochastic.ai/signup&#34;&gt;Sign up ‚Üí&lt;/a&gt;&lt;/p&gt; &#xA;&lt;blockquote&gt; &#xA; &lt;p&gt;Alternatively, you can deploy stable diffusion without our CLI by checking the steps &lt;a href=&#34;https://raw.githubusercontent.com/stochasticai/x-stable-diffusion/main/#manual-deployment&#34;&gt;here&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;/blockquote&gt; &#xA;&lt;p&gt;To infer with this deployed model:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;stochasticx stable-diffusion infer --prompt &#34;Riding a horse&#34;&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Check all the options of the &lt;code&gt;infer&lt;/code&gt; command:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;stochasticx stable-diffusion infer --help&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;You can get the logs of the deployment executing the following command:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;stochasticx stable-diffusion logs&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Stop and remove the deployment with this command:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;stochasticx stable-diffusion stop&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h2&gt;How to get less than 1s latency?&lt;/h2&gt; &#xA;&lt;p&gt;Change the &lt;code&gt;num_inference_steps&lt;/code&gt; to &lt;code&gt;30&lt;/code&gt;. With this, you can get an image generated in 0.88 seconds.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;{&#xA;  &#39;max_seq_length&#39;: 64,&#xA;  &#39;num_inference_steps&#39;: 30, &#xA;  &#39;image_size&#39;: (512, 512) &#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;You can also experiment with reducing the &lt;code&gt;image_size&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;h2&gt;How to run with Google Colab?&lt;/h2&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://colab.research.google.com/drive/1m3n2n5bfNpRgWJ8K-xwTvhzrTQETWduq?usp=sharing&#34;&gt;Try PyTorch - FP16 in Colab -&amp;gt;&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://colab.research.google.com/drive/1WQ98YBHTG355vL5wKbmNj9xeBmHRZGJb?usp=sharing&#34;&gt;Try TensorRT in Colab -&amp;gt;&lt;/a&gt;&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;In each folder, we will provide a Google Colab notebook with which you can test the full flow and inference on a T4 GPU&lt;/p&gt; &#xA;&lt;h2&gt;Manual deployment&lt;/h2&gt; &#xA;&lt;p&gt;Check the &lt;code&gt;README.md&lt;/code&gt; of the following directories:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;AITemplate&lt;/li&gt; &#xA; &lt;li&gt;FlashAttention&lt;/li&gt; &#xA; &lt;li&gt;nvFuser&lt;/li&gt; &#xA; &lt;li&gt;PyTorch&lt;/li&gt; &#xA; &lt;li&gt;TensorRT&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;‚úÖ Stochastic&lt;/h2&gt; &#xA;&lt;p&gt;Stochastic was founded with a vision to make deep learning optimization and deployment effortless. We make it easy to ship state-of-the-art AI models with production-grade performance.&lt;/p&gt; &#xA;&lt;h3&gt;Features&lt;/h3&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Auto-optimization of deep learning models&lt;/li&gt; &#xA; &lt;li&gt;Benchmarking of models and hardware on different evaluation metrics&lt;/li&gt; &#xA; &lt;li&gt;Auto-scaling hosted and on-prem accelerated inference for models like BLOOM 176B, Stable Diffusion, GPT-J &lt;a href=&#34;https://stochastic.ai/contact&#34;&gt;Enquire ‚Üí&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;Support for AWS, GCP, Azure clouds and Kubernetes clusters&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h3&gt;&lt;a href=&#34;https://www.stochastic.ai/&#34;&gt;Sign up ‚Üí&lt;/a&gt;&lt;/h3&gt; &#xA;&lt;h2&gt;References&lt;/h2&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/huggingface/diffusers&#34;&gt;HuggingFace Diffusers&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/facebookincubator/AITemplate&#34;&gt;AITemplate&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://www.photoroom.com/tech/stable-diffusion-100-percent-faster-with-memory-efficient-attention/&#34;&gt;Make stable diffusion up to 100% faster with Memory Efficient Attention&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://www.photoroom.com/tech/stable-diffusion-25-percent-faster-and-save-seconds/&#34;&gt;Making stable diffusion 25% faster using TensorRT&lt;/a&gt;&lt;/li&gt; &#xA;&lt;/ul&gt;</summary>
  </entry>
  <entry>
    <title>acheong08/Diffusion-ColabUI</title>
    <updated>2022-10-21T01:34:18Z</updated>
    <id>tag:github.com,2022-10-21:/acheong08/Diffusion-ColabUI</id>
    <link href="https://github.com/acheong08/Diffusion-ColabUI" rel="alternate"></link>
    <summary type="html">&lt;p&gt;One-click run on Colab for all major models (NovelAI, Stable Diffusion V1.5)&lt;/p&gt;&lt;hr&gt;&lt;h1&gt;Diffusion WebUI Colab&lt;/h1&gt; &#xA;&lt;p&gt;Fully functional Colab based on AUTOMATIC1111/stable-diffusion-webui with the leaked NAI model included&lt;/p&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://colab.research.google.com/drive/1PvNyEWIhDU_D-i15DzpPjqDQkbYv_6Hu?usp=sharing&#34;&gt;&lt;img src=&#34;https://colab.research.google.com/assets/colab-badge.svg?sanitize=true&#34; alt=&#34;link&#34;&gt;&lt;/a&gt;&lt;/p&gt; &#xA;&lt;h2&gt;Models supported&lt;/h2&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;NovelAI&lt;/li&gt; &#xA; &lt;li&gt;Stable Diffusion (V1.4 and V1.5)&lt;/li&gt; &#xA; &lt;li&gt;Waifu Diffusion&lt;/li&gt; &#xA; &lt;li&gt;H Diffusion&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;Extra features&lt;/h2&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Fixes issue &lt;a href=&#34;https://github.com/gradio-app/gradio/issues/2260&#34;&gt;https://github.com/gradio-app/gradio/issues/2260&lt;/a&gt; and &lt;a href=&#34;https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/160&#34;&gt;https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/160&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;One-click model installations&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;Contributing&lt;/h2&gt; &#xA;&lt;p&gt;If possible, perhaps there is a better way to get the NovelAI files. I currently have it self hosted but would prefer it somewhere safer than a test server that may crash at any time.&lt;/p&gt;</summary>
  </entry>
</feed>