<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom">
  <title>GitHub Dockerfile Weekly Trending</title>
  <id>http://mshibanami.github.io/GitHubTrendingRSS</id>
  <updated>2023-11-19T01:49:28Z</updated>
  <subtitle>Weekly Trending of Dockerfile in GitHub</subtitle>
  <link href="http://mshibanami.github.io/GitHubTrendingRSS"></link>
  <entry>
    <title>mzazon/php-apache-mysql-containerized</title>
    <updated>2023-11-19T01:49:28Z</updated>
    <id>tag:github.com,2023-11-19:/mzazon/php-apache-mysql-containerized</id>
    <link href="https://github.com/mzazon/php-apache-mysql-containerized" rel="alternate"></link>
    <summary type="html">&lt;p&gt;A brief demo of containerizing php apache and mysql with Docker using some best practices.&lt;/p&gt;&lt;hr&gt;&lt;h1&gt;Containerize This: PHP/Apache/MySQL&lt;/h1&gt; &#xA;&lt;h3&gt;Intro&lt;/h3&gt; &#xA;&lt;p&gt;Continuing with the Containerize This! series, we&#39;re looking at common web application technologies and how they can be used within Docker containers effectively. PHP/Apache/MySQL have a very large market share on content management systems and web applications on the internet, and with so many developers using these technologies, there is a lot of interest to modernize the way that they use them from from local development all the way to production. Today we&#39;ll take a look at several ways to containerize and link PHP, Apache, and MySQL together while demonstrating some tips, tricks, and best-practices that will help you take a modern approach when developing and deploying your PHP applications!&lt;/p&gt; &#xA;&lt;p&gt;There are 5 simple files for this demo that you can clone from &lt;a href=&#34;https://github.com/mzazon/php-apache-mysql&#34;&gt;https://github.com/mzazon/php-apache-mysql&lt;/a&gt; or simply copy and paste from this post to replicate the following folder structure. Please note that some Docker and security principals have been skipped here for simplicity and demonstration purposes. Namely PHP using root credentials, hardcoded/weak MySQL password, lack of SSL, to name a few! Do not run this code in production! :-)&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;/php-apache-mysql/&#xA;├── apache&#xA;│   ├── Dockerfile&#xA;│   └── demo.apache.conf&#xA;├── docker-compose.yml&#xA;├── php&#xA;│   └── Dockerfile&#xA;└── public_html&#xA;    └── index.php&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Once this structure is replicated or cloned with these files, and Docker installed locally, you can simply run &#34;docker-compose up&#34; from the root of the project to run this entire demo, and point your browser (or curl) to &lt;a href=&#34;http://localhost:80&#34;&gt;http://localhost:80&lt;/a&gt; to see the demo. We will get into what &#34;docker-compose&#34; is, and what makes up this basic demonstration in the following sections!&lt;/p&gt; &#xA;&lt;p&gt;We&#39;ll use the following simple PHP application to demonstrate everything:&lt;/p&gt; &#xA;&lt;h4&gt;index.php&lt;/h4&gt; &#xA;&lt;pre&gt;&lt;code&gt;&amp;lt;h1&amp;gt;Hello Cloudreach!&amp;lt;/h1&amp;gt;&#xA;&amp;lt;h4&amp;gt;Attempting MySQL connection from php...&amp;lt;/h4&amp;gt;&#xA;&amp;lt;?php&#xA;$host = &#39;mysql&#39;;&#xA;$user = &#39;root&#39;;&#xA;$pass = &#39;rootpassword&#39;;&#xA;$conn = new mysqli($host, $user, $pass);&#xA;&#xA;if ($conn-&amp;gt;connect_error) {&#xA;    die(&#34;Connection failed: &#34; . $conn-&amp;gt;connect_error);&#xA;} else {&#xA;  echo &#34;Connected to MySQL successfully!&#34;;&#xA;}&#xA;?&amp;gt;&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;This code attempts to connect to a MySQL database using the mysqli interface from PHP. If successful, it prints a success. If not, it prints a failed message.&lt;/p&gt; &#xA;&lt;h3&gt;Docker Compose&lt;/h3&gt; &#xA;&lt;p&gt;This format has been around for a while in Dockerland and is now in version 3.6 at the time of this writing. We&#39;ll use 3.2 here to ensure broad compatibility with those who may not be running the latest and greatest versions of Docker (however, you should always upgrade!)&lt;/p&gt; &#xA;&lt;p&gt;This format allows for defining sets of services which make up an entire application. It allows you to define the dependencies for those services, networks, volumes, etc as code and as you roll into production, you can even specify deployment parameters on services which allow you to replicate, scale, update, and self-heal on Docker Swarm or even Kubernetes on the latest Docker for Mac or Docker Enterprise Edition!&lt;/p&gt; &#xA;&lt;h4&gt;docker-compose.yml&lt;/h4&gt; &#xA;&lt;pre&gt;&lt;code&gt;version: &#34;3.2&#34;&#xA;services:&#xA;  php:&#xA;    build: &#xA;      context: &#39;./php/&#39;&#xA;      args:&#xA;       PHP_VERSION: ${PHP_VERSION}&#xA;    networks:&#xA;      - backend&#xA;    volumes:&#xA;      - ${PROJECT_ROOT}/:/var/www/html/&#xA;    container_name: php&#xA;  apache:&#xA;    build:&#xA;      context: &#39;./apache/&#39;&#xA;      args:&#xA;       APACHE_VERSION: ${APACHE_VERSION}&#xA;    depends_on:&#xA;      - php&#xA;      - mysql&#xA;    networks:&#xA;      - frontend&#xA;      - backend&#xA;    ports:&#xA;      - &#34;80:80&#34;&#xA;    volumes:&#xA;      - ${PROJECT_ROOT}/:/var/www/html/&#xA;    container_name: apache&#xA;  mysql:&#xA;    image: mysql:${MYSQL_VERSION:-latest}&#xA;    restart: always&#xA;    ports:&#xA;      - &#34;3306:3306&#34;&#xA;    volumes:&#xA;            - data:/var/lib/mysql&#xA;    networks:&#xA;      - backend&#xA;    environment:&#xA;      MYSQL_ROOT_PASSWORD: &#34;${DB_ROOT_PASSWORD}&#34;&#xA;      MYSQL_DATABASE: &#34;${DB_NAME}&#34;&#xA;      MYSQL_USER: &#34;${DB_USERNAME}&#34;&#xA;      MYSQL_PASSWORD: &#34;${DB_PASSWORD}&#34;&#xA;    container_name: mysql&#xA;networks:&#xA;  frontend:&#xA;  backend:&#xA;volumes:&#xA;    data:&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h3&gt;Decouple dependencies, run one process per container (PID 1)&lt;/h3&gt; &#xA;&lt;p&gt;Containers at the core are simply process encapsulation within a shared Linux kernel, to allow for many processes to run inside of their own spaces without interfering or interacting unless we explicitly tell them they can. Thus, it is a long-running best practice to run your primary service within a container as PID 1. This means that no other process should be running inside of your containers. It allows containers to maintain a native linux process lifecycle, respect linux process signals, allow for greater security, and will make your life easier when you schedule these containers on orchestrators such as Docker Swarm or Kubernetes in production.&lt;/p&gt; &#xA;&lt;p&gt;A perfect example is decoupling Apache and PHP by building them out into separate containers. We see our customers often starting to couple Apache and PHP together early on in a Docker journey by building custom images which include both Apache and PHP in the image. This easily works in development scenarios and is a fast way to get off the ground, but as we want to follow a more modern approach of decoupling, we want to break these apart.&lt;/p&gt; &#xA;&lt;p&gt;The following simple Dockerfiles are what we&#39;re using in this example to build a decoupled Apache and PHP envivonment:&lt;/p&gt; &#xA;&lt;h4&gt;apache/Dockerfile&lt;/h4&gt; &#xA;&lt;pre&gt;&lt;code&gt;FROM httpd:2.4.33-alpine&#xA;&#xA;RUN apk update; \&#xA;    apk upgrade;&#xA;&#xA;# Copy apache vhost file to proxy php requests to php-fpm container&#xA;COPY demo.apache.conf /usr/local/apache2/conf/demo.apache.conf&#xA;RUN echo &#34;Include /usr/local/apache2/conf/demo.apache.conf&#34; \&#xA;    &amp;gt;&amp;gt; /usr/local/apache2/conf/httpd.conf&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h4&gt;php/Dockerfile&lt;/h4&gt; &#xA;&lt;pre&gt;&lt;code&gt;FROM php:7.2.7-fpm-alpine3.7&#xA;&#xA;RUN apk update; \&#xA;    apk upgrade;&#xA;&#xA;RUN docker-php-ext-install mysqli&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Note that we run minimal containers wherever possible, in this example we&#39;re using official alpine-based images!&lt;/p&gt; &#xA;&lt;h3&gt;Networking&lt;/h3&gt; &#xA;&lt;p&gt;Now that we have container images for Apache and PHP that are decoupled, how do we get these to interact with eachother? Notice we&#39;re using &#34;PHP FPM&#34; for this. We&#39;re going to have Apache proxy connections which require PHP rendering to port 9000 of our PHP container, and then have the PHP container serve those out as rendered HTML. Sound complicated? Don&#39;t worry! This is very common in modern applications, Apache and NGINX are very good at this proxying, and there is plenty of documentation out there to support this behavior!&lt;/p&gt; &#xA;&lt;p&gt;Notice in the above Docker Compose example, we link the containers together with an overlay networks we define as &#34;frontend&#34; and &#34;backend&#34;. By specifying these networks in our services, we can leverage some really cool Docker features! Namely, we can refer to the containers/services by their service names in code, so we don&#39;t have to worry about messy hard-coding of IP addresses anymore. Phew! Docker handles this for us by managing and updating /etc/hosts files within containers seamlessly to allow for this cross-talk. We can also enforce which containers can talk to eachother. This allows for more secure applications. Notice in this example we have &#34;frontend&#34; and &#34;backend&#34; defined. We can have our php and mysql services live in a network that is more restricted and not exposed to the outside world, and only expose our apache container on the required port. This is great for production environments!&lt;/p&gt; &#xA;&lt;p&gt;One note: We need an apache vhost configuration file that is set up to proxy these requests for PHP files to the PHP container. You&#39;ll notice in the Dockerfile for Apache we have defined above, we add this file and then include it in the base httpd.conf file. This is for the proxying which allows for the decoupling of Apache and PHP. In this example we called it demo.apache.conf and we have the proxying modules defined as well as the VirtualHost. Also notice that we call the php container in the code &#34;php&#34; which, because of the /etc/hosts file integration that Docker handles for us, works flawlessly!&lt;/p&gt; &#xA;&lt;h4&gt;apache/demo.apache.conf&lt;/h4&gt; &#xA;&lt;pre&gt;&lt;code&gt;ServerName localhost&#xA;&#xA;LoadModule deflate_module /usr/local/apache2/modules/mod_deflate.so&#xA;LoadModule proxy_module /usr/local/apache2/modules/mod_proxy.so&#xA;LoadModule proxy_fcgi_module /usr/local/apache2/modules/mod_proxy_fcgi.so&#xA;&#xA;&amp;lt;VirtualHost *:80&amp;gt;&#xA;    # Proxy .php requests to port 9000 of the php-fpm container&#xA;    ProxyPassMatch ^/(.*\.php(/.*)?)$ fcgi://php:9000/var/www/html/$1&#xA;    DocumentRoot /var/www/html/&#xA;    &amp;lt;Directory /var/www/html/&amp;gt;&#xA;        DirectoryIndex index.php&#xA;        Options Indexes FollowSymLinks&#xA;        AllowOverride All&#xA;        Require all granted&#xA;    &amp;lt;/Directory&amp;gt;&#xA;    &#xA;    # Send apache logs to stdout and stderr&#xA;    CustomLog /proc/self/fd/1 common&#xA;    ErrorLog /proc/self/fd/2&#xA;&amp;lt;/VirtualHost&amp;gt;&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h3&gt;Volumes&lt;/h3&gt; &#xA;&lt;p&gt;The last feature that we&#39;ll call out here for demonstration purposes is the use of volumes to serve out our code. Both the PHP and Apache containers have access to a &#34;volume&#34; that we define in the docker-compose.yml file which maps the public_html folder of our repository to the respective services for them to access. When we do this, we map a folder on the host filesystem (outside of the container context) to inside of the running containers. Developers may wish to set their projects up like this because it allows them to edit the file outside of the container, yet have the container serve the updated PHP code out as soon as changes are saved.&lt;/p&gt; &#xA;&lt;p&gt;Volumes are a very powerful construct of the Docker world and we&#39;re only scratching the surface of what one can achieve by using them in development and production. Please see the official documentation on volumes for further use cases and best practices!&lt;/p&gt; &#xA;&lt;h3&gt;Demonstration of docker-compose up!&lt;/h3&gt; &#xA;&lt;pre&gt;&lt;code&gt;$ docker-compose up&#xA;&#xA;&amp;lt;... some details omitted ...&amp;gt;&#xA;php_1     | [16-Jul-2018 02:08:11] NOTICE: fpm is running, pid 1&#xA;php_1     | [16-Jul-2018 02:08:11] NOTICE: ready to handle connections&#xA;apache_1  | [Mon Jul 16 02:08:12.494294 2018] [pid 1:tid 140290664872840] AH00489: Apache/2.4.33 (Unix)&#xA;apache_1  | [Mon Jul 16 02:08:12.496833 2018] [pid 1:tid 140290664872840] AH00094: Command line: &#39;httpd -D FOREGROUND&#39;&#xA;mysql_1   | 2018-07-16 02:08:12 1 [Note] mysqld: ready for connections.&#xA;mysql_1   | Version: &#39;5.6.40&#39;  socket: &#39;/var/run/mysqld/mysqld.sock&#39;  port: 3306  MySQL Community Server (GPL)&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Notice how these 3 daemons run on PID 1 inside of each container, this is considered a best-practice for building containers!&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;$  curl localhost:80&#xA;Hello Cloudreach!&#xA;Attempting MySQL connection from php...&#xA;Connected to MySQL successfully!&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Notice now in the logs that the apache container and php containers both respond to the request, as desired:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;php_1     | 172.18.0.4 -  16/Jul/2018:02:09:22 +0000 &#34;GET /index.php&#34; 200&#xA;apache_1  | 172.18.0.1 - - [16/Jul/2018:02:09:22 +0000] &#34;GET / HTTP/1.1&#34; 200 108&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h3&gt;Conclusion&lt;/h3&gt; &#xA;&lt;p&gt;With these basic principals you can link services together to create applications. You could easily include &#34;composer&#34; in the PHP container to build and run your PHP/Laravel application in a similar manner. Perhaps you want to run Drupal or Wordpress and decouple PHP from the Apache instance, that is possible too! You can even use this to seamlessly test PHP version or MySQL version upgrades with minimal code change. There are a lot of benefits to modernizing your application with Docker using docker-compose and some of the latest images and features.&lt;/p&gt;</summary>
  </entry>
  <entry>
    <title>WCGKING/BRANDED-VPS</title>
    <updated>2023-11-19T01:49:28Z</updated>
    <id>tag:github.com,2023-11-19:/WCGKING/BRANDED-VPS</id>
    <link href="https://github.com/WCGKING/BRANDED-VPS" rel="alternate"></link>
    <summary type="html">&lt;p&gt;&lt;/p&gt;&lt;hr&gt;&lt;h1&gt;BRANDED-VPS&lt;/h1&gt; &#xA;&lt;p align=&#34;center&#34;&gt;&lt;a href=&#34;https://t.me/BRANDED_WORLD&#34;&gt;&lt;img src=&#34;https://te.legra.ph/file/174dd16205416d0934b8d.jpg&#34;&gt;&lt;/a&gt;&lt;/p&gt; &#xA;&lt;p&gt;🍁 𝐓𝐡𝐞 𝐍𝐞𝐰 𝐒𝐞𝐫𝐯𝐞𝐫 📡 &lt;a href=&#34;https://t.me/BRANDED_WORLD&#34;&gt;𝗕𝗥𝗔𝗡𝗗𝗘𝗗 𝗦𝗨𝗣𝗣𝗢𝗥𝗧&lt;/a&gt; 𝐂𝐫𝐞𝐚𝐭𝐞𝐝 𝐀𝐧𝐝 💞 𝐌𝐚𝐧𝐚𝐠𝐞𝐝 𝐁𝐲 » &lt;a href=&#34;https://t.me/BRANDEDKING82&#34;&gt;𝗕𝗥𝗔𝗡𝗗𝗘𝗗 𓆩🇽𓆪 𝗞𝗜𝗡𝗚&lt;/a&gt; ✨&lt;/p&gt; &#xA;&lt;h3&gt;𝐑𝐞𝐪𝐮𝐢𝐫𝐞𝐝 𝐂𝐨𝐧𝐟𝐢𝐠 𝐕𝐚𝐫𝐢𝐚𝐛𝐥𝐞 ...&lt;/h3&gt; &#xA;&lt;p&gt;&lt;code&gt; NGROK_TOKEN&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;img width=&#34;494&#34; align=&#34;center&#34; src=&#34;https://github-readme-stats.vercel.app/api/top-langs?username=WCGKING&amp;amp;show_icons=true&amp;amp;locale=en&amp;amp;layout=compact&#34; alt=&#34;WCGKING&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://github-readme-stats.vercel.app/api/pin/?username=WCGKING&amp;amp;repo=BRANDED-VPS&amp;amp;theme=flag-india&#34; alt=&#34;Readme Card&#34;&gt; &lt;a href=&#34;https://github.com/WCGKING&#34;&gt;&lt;img src=&#34;https://github.com/WCGKING/BRANDED-VPS/raw/main/WCGKING.gif&#34; alt=&#34;GIF&#34;&gt;&lt;/a&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://github-stats-alpha.vercel.app/api?username=WCGKING&#34; title=&#34;BRANDED KING&#34;&gt;&lt;img src=&#34;https://github-stats-alpha.vercel.app/api?username=WCGKING&#34; alt=&#34;𝗕𝗥𝗔𝗡𝗗𝗘𝗗 𓆩🇽𓆪 𝗞𝗜𝗡𝗚&#34; title=&#34;BRANDED KING&#34;&gt;&lt;/a&gt;&lt;/p&gt;</summary>
  </entry>
  <entry>
    <title>ministryofjustice/modernisation-platform-cp-network-test</title>
    <updated>2023-11-19T01:49:28Z</updated>
    <id>tag:github.com,2023-11-19:/ministryofjustice/modernisation-platform-cp-network-test</id>
    <link href="https://github.com/ministryofjustice/modernisation-platform-cp-network-test" rel="alternate"></link>
    <summary type="html">&lt;p&gt;Simple network testing app to be deployed in Cloud Platform in order to test connectivity between the Cloud Platform and the Modernisation Platform • This repository is defined and managed in Terraform&lt;/p&gt;&lt;hr&gt;&lt;h1&gt;Container bundled with utilities for network testing&lt;/h1&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://operations-engineering-reports.cloud-platform.service.justice.gov.uk/public-report/modernisation-platform-cp-network-test&#34;&gt;&lt;img src=&#34;https://img.shields.io/endpoint?labelColor=231f20&amp;amp;color=005ea5&amp;amp;style=for-the-badge&amp;amp;label=MoJ%20Compliant&amp;amp;url=https%3A%2F%2Foperations-engineering-reports.cloud-platform.service.justice.gov.uk%2Fapi%2Fv1%2Fcompliant_public_repositories%2Fendpoint%2Fmodernisation-platform-cp-network-test&amp;amp;logo=data:image/png;base64,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&#34; alt=&#34;repo standards badge&#34;&gt;&lt;/a&gt;&lt;/p&gt; &#xA;&lt;h2&gt;Run the Node.JS application locally&lt;/h2&gt; &#xA;&lt;pre&gt;&lt;code&gt;npm init -y&#xA;npm install express&#xA;node app.js&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Open &lt;a href=&#34;http://localhost:3000&#34;&gt;http://localhost:3000&lt;/a&gt;&lt;/p&gt; &#xA;&lt;blockquote&gt; &#xA; &lt;p&gt;The application at the moment does not have any functionality but only serves as a placeholder for potentially adding features later on. Network testing is carried out by connecting a shell into the running container and performing some diagnostic commands as shown in the sections below.&lt;/p&gt; &#xA;&lt;/blockquote&gt; &#xA;&lt;h2&gt;Connect to the Cloud Platform AWS EKS cluster&lt;/h2&gt; &#xA;&lt;p&gt;Login to &lt;a href=&#34;https://login.live.cloud-platform.service.justice.gov.uk&#34;&gt;https://login.live.cloud-platform.service.justice.gov.uk&lt;/a&gt; and download the &lt;code&gt;~/.kube/config&lt;/code&gt; file.&lt;/p&gt; &#xA;&lt;p&gt;Minimize the permissions on the file&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;chmod 600 ~/.kube/config&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Tell kubectl to use this config&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;kubectl config use-context live.cloud-platform.service.justice.gov.uk&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h2&gt;Connect a shell into the running container&lt;/h2&gt; &#xA;&lt;pre&gt;&lt;code&gt;kubectl config set-context --current --namespace=nettest&#xA;kubectl get pods&#xA;kubectl exec --stdin --tty nettest-5948d76c47-g56s2 -- bash&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h2&gt;Example tests to run from within the running container&lt;/h2&gt; &#xA;&lt;p&gt;Check if the container has access to the internet&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;curl ipinfo.io&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Check if the container can access port 1521 at the IP address 10.26.12.202&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;curl --connect-timeout 5 10.26.12.202:1521&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;In the above&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;code&gt;curl: (28) Connection timed out after 5001 milliseconds&lt;/code&gt; means NO&lt;/li&gt; &#xA; &lt;li&gt;&lt;code&gt;curl: (56) Recv failure: Connection reset by peer&lt;/code&gt; means YES&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;Run a speed test&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;iperf3 -c ping.online.net -p 5209&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h2&gt;How to redeploy the container into the Cloud Platform&lt;/h2&gt; &#xA;&lt;p&gt;Change the application code and/or the Dockerfile&lt;/p&gt; &#xA;&lt;p&gt;Build the docker image&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;docker build -t nettest .&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Retrieve ECR info&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;cloud-platform decode-secret -n nettest -s ecr-repo-nettest&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Configure the AWS profile&lt;/p&gt; &#xA;&lt;p&gt;~/.aws/config&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;[profile nettest]&#xA;region = eu-west-2&#xA;output=json&#xA;aws_access_key_id=&amp;lt;refer to the ECR info above&amp;gt;&#xA;aws_secret_access_key=&amp;lt;refer to the ECR info above&amp;gt;&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Login to the repository&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;aws ecr get-login-password --region eu-west-2 --profile nettest \&#xA;| docker login --username AWS --password-stdin \&#xA;754256621582.dkr.ecr.eu-west-2.amazonaws.com&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Tag the image and push it to your ECR&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;docker tag nettest 754256621582.dkr.ecr.eu-west-2.amazonaws.com/modernisation-platform/nettest-ecr:1.2&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Push&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;docker push 754256621582.dkr.ecr.eu-west-2.amazonaws.com/modernisation-platform/nettest-ecr:1.2&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Update the image in &lt;code&gt;kubectl_deploy/deployment.yaml&lt;/code&gt;, then deploy&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;kubectl -n nettest apply -f kubectl_deploy&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Open &lt;a href=&#34;https://nettest.apps.live.cloud-platform.service.justice.gov.uk&#34;&gt;https://nettest.apps.live.cloud-platform.service.justice.gov.uk&lt;/a&gt;&lt;/p&gt; &#xA;&lt;p&gt;Additional useful commands&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;kubectl delete pod nettest-76bfd79fd9-9xfr6&#xA;kubectl describe pod nettest-76bfd79fd9-9xfr6&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h2&gt;References&lt;/h2&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://user-guide.cloud-platform.service.justice.gov.uk/documentation/getting-started/env-create.html#creating-a-cloud-platform-environment&#34;&gt;https://user-guide.cloud-platform.service.justice.gov.uk/documentation/getting-started/env-create.html#creating-a-cloud-platform-environment&lt;/a&gt;&lt;/li&gt; &#xA;&lt;/ol&gt;</summary>
  </entry>
</feed>