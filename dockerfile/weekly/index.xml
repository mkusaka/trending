<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom">
  <title>GitHub Dockerfile Weekly Trending</title>
  <id>http://mshibanami.github.io/GitHubTrendingRSS</id>
  <updated>2024-09-01T01:38:04Z</updated>
  <subtitle>Weekly Trending of Dockerfile in GitHub</subtitle>
  <link href="http://mshibanami.github.io/GitHubTrendingRSS"></link>
  <entry>
    <title>mixpanel/tracking-proxy</title>
    <updated>2024-09-01T01:38:04Z</updated>
    <id>tag:github.com,2024-09-01:/mixpanel/tracking-proxy</id>
    <link href="https://github.com/mixpanel/tracking-proxy" rel="alternate"></link>
    <summary type="html">&lt;p&gt;One-click configuration to proxy tracking requests to Mixpanel&#39;s API&lt;/p&gt;&lt;hr&gt;&lt;h1&gt;Nginx Proxy for Mixpanel&lt;/h1&gt; &#xA;&lt;p&gt;An example nginx config that serves as a proxy to Mixpanel&#39;s Ingestion API and JavaScript library endpoints. To learn more, visit our &lt;a href=&#34;https://docs.mixpanel.com/docs/tracking/how-tos/tracking-via-proxy&#34;&gt;docs on Tracking via Proxy&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;h2&gt;Installation&lt;/h2&gt; &#xA;&lt;p&gt;There are a few ways you can use this repo to deploy a server that can be use to proxy Mixpanel API requests:&lt;/p&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;&lt;strong&gt;one-click deploy&lt;/strong&gt; to your cloud provider&lt;/li&gt; &#xA; &lt;li&gt;&lt;strong&gt;build a docker image&lt;/strong&gt; and run it on your own servers&lt;/li&gt; &#xA; &lt;li&gt;&lt;strong&gt;copy and paste&lt;/strong&gt; the nginx settings to your existing nginx config file&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;h3&gt;Option 1: One-Click Deploy&lt;/h3&gt; &#xA;&lt;p&gt;click on a button below to deploy to your favorite cloud provider:&lt;/p&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://deploy.cloud.run&#34;&gt;&lt;img src=&#34;https://binbashbanana.github.io/deploy-buttons/buttons/remade/googlecloud.svg?sanitize=true&#34; alt=&#34;Google Cloud Btn&#34;&gt;&lt;/a&gt; &lt;a href=&#34;https://cloud.digitalocean.com/apps/new?repo=https://github.com/mixpanel/tracking-proxy/tree/master&#34;&gt;&lt;img src=&#34;https://www.deploytodo.com/do-btn-blue.svg?sanitize=true&#34; width=&#34;198px&#34;&gt;&lt;/a&gt; &lt;a href=&#34;https://railway.app/template/_RaWSW&#34;&gt;&lt;img src=&#34;https://binbashbanana.github.io/deploy-buttons/buttons/remade/railway.svg?sanitize=true&#34; alt=&#34;Railway Btn&#34;&gt;&lt;/a&gt; &lt;a href=&#34;https://render.com/deploy?repo=https://github.com/mixpanel/tracking-proxy&#34;&gt;&lt;img src=&#34;https://binbashbanana.github.io/deploy-buttons/buttons/remade/render.svg?sanitize=true&#34; alt=&#34;Render Btn&#34;&gt;&lt;/a&gt;&lt;/p&gt; &#xA;&lt;!-- URLS --&gt; &#xA;&lt;!-- Maybe later? --&gt; &#xA;&lt;!-- Heroku&#39;s app.json conflicts with GCP 0_o  --&gt; &#xA;&lt;!-- Azure is too... complicated --&gt; &#xA;&lt;h3&gt;Option 2: Docker Image&lt;/h3&gt; &#xA;&lt;p&gt;Assuming you have Docker installed on your system, you can do the following:&lt;/p&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;Clone the repo &lt;code&gt;git clone https://github.com/mixpanel/tracking-proxy&lt;/code&gt;&lt;/li&gt; &#xA; &lt;li&gt;Build the Docker image: &lt;code&gt;docker build -t mixpanel-proxy .&lt;/code&gt;&lt;/li&gt; &#xA; &lt;li&gt;Run a container using the image: &lt;code&gt;docker run --name my-tracking-proxy -d -p 8080:80 mixpanel-proxy&lt;/code&gt;&lt;/li&gt; &#xA; &lt;li&gt;Visit &lt;code&gt;http://localhost:8080&lt;/code&gt;&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;p&gt;You should see:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;{&#xA;  &#34;error&#34;: &#34;Welcome. Get started with our API by visiting https://developer.mixpanel.com/&#34;&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;This is same response you would get from visiting &lt;a href=&#34;https://api.mixpanel.com/&#34;&gt;https://api.mixpanel.com/&lt;/a&gt; (which means your proxy is working as expected).&lt;/p&gt; &#xA;&lt;p&gt;You can also verify the nginx config on the command line:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;nginx -t -c /etc/nginx/nginx.conf&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;For production, you would deploy this docker image to whatever servers you run your production services on.&lt;/p&gt; &#xA;&lt;h3&gt;Option 3: Add locations to your existing Nginx config&lt;/h3&gt; &#xA;&lt;p&gt;If you already have servers running nginx, you can copy and paste the locations from the &lt;a href=&#34;https://github.com/mixpanel/tracking-proxy/raw/master/nginx.conf&#34;&gt;nginx.conf&lt;/a&gt; file in this repo and adjust the locations to match your preference.&lt;/p&gt; &#xA;&lt;h3&gt;Additional Configuration&lt;/h3&gt; &#xA;&lt;p&gt;In case you see events tracked to your project, but geo-location properties are not being added correctly, there&#39;s likely a configuration issue with passing the IP address through the headers. Within the &lt;a href=&#34;%5Burl%5D(https://github.com/mixpanel/tracking-proxy/blob/2c08e999d4b38aa943fad55884bcfe0ef72bb681/nginx.conf#L31)&#34;&gt;nginx configuration&lt;/a&gt;, by default, we leverage &lt;code&gt;$http_x_forwarded_for&lt;/code&gt; and pass it through the &lt;code&gt;X-Real-IP&lt;/code&gt; header to forward the IP from the original client; in some providers, this is not available and you will want to review which header/variable provides the IP address from the client. As an example, in Cloudflare, you need to pass &lt;code&gt;$realip_remote_addr&lt;/code&gt; instead. You&#39;ll want to review the option that applies to your cloud provider.&lt;/p&gt; &#xA;&lt;p&gt;When you&#39;re seeing events ingested into Mixpanel, but no geo-location data included as properties (you don&#39;t see the mp_country_code property created, for example), one more aspect to check is if the query string param/value &lt;code&gt;ip=1&lt;/code&gt; is being passed to our ingestion endpoint. Our client-side libraries, by default (unless you&#39;ve disabled geo-location tracking), will append &lt;code&gt;ip=1&lt;/code&gt; to the URL of the ingestion endpoint to indicate we should parse geo-location from the IP address of the incoming request. In some setups, this param might not be included in the request from the proxy, so it&#39;s also an aspect to check in this situation.&lt;/p&gt; &#xA;&lt;h3&gt;EU Residency&lt;/h3&gt; &#xA;&lt;p&gt;This proxy server resolves requests to &lt;code&gt;api.mixpanel.com&lt;/code&gt;, which points to Mixpanel&#39;s primary data centers in the United States. If you are using Mixpanel&#39;s &lt;strong&gt;&lt;a href=&#34;https://docs.mixpanel.com/docs/other-bits/privacy-and-security/eu-residency&#34;&gt;EU Data Residency&lt;/a&gt;&lt;/strong&gt;, you will need to change the &lt;a href=&#34;https://github.com/mixpanel/tracking-proxy/raw/master/nginx.conf#L34&#34;&gt;nginx.config&lt;/a&gt; from &lt;code&gt;api.mixpanel.com&lt;/code&gt; to &lt;code&gt;api-eu.mixpanel.com&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h3&gt;Load Testing&lt;/h3&gt; &#xA;&lt;p&gt;If you wish to load test your proxy, see &lt;strong&gt;&lt;a href=&#34;https://github.com/ak--47/mp-proxy-load-test/&#34;&gt;mp-proxy-load-test&lt;/a&gt;&lt;/strong&gt; for a load testing script with artillery.&lt;/p&gt;</summary>
  </entry>
</feed>