<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom">
  <title>GitHub Dockerfile Daily Trending</title>
  <id>http://mshibanami.github.io/GitHubTrendingRSS</id>
  <updated>2022-08-23T01:34:56Z</updated>
  <subtitle>Daily Trending of Dockerfile in GitHub</subtitle>
  <link href="http://mshibanami.github.io/GitHubTrendingRSS"></link>
  <entry>
    <title>sanjaydahiya332/cloudknowledge</title>
    <updated>2022-08-23T01:34:56Z</updated>
    <id>tag:github.com,2022-08-23:/sanjaydahiya332/cloudknowledge</id>
    <link href="https://github.com/sanjaydahiya332/cloudknowledge" rel="alternate"></link>
    <summary type="html">&lt;p&gt;&lt;/p&gt;&lt;hr&gt;</summary>
  </entry>
  <entry>
    <title>tianon/docker-postgres-upgrade</title>
    <updated>2022-08-23T01:34:56Z</updated>
    <id>tag:github.com,2022-08-23:/tianon/docker-postgres-upgrade</id>
    <link href="https://github.com/tianon/docker-postgres-upgrade" rel="alternate"></link>
    <summary type="html">&lt;p&gt;a PoC for using &#34;pg_upgrade&#34; inside Docker -- learn from it, adapt it for your needs; don&#39;t expect it to work as-is!&lt;/p&gt;&lt;hr&gt;&lt;h1&gt;&lt;code&gt;pg_upgrade&lt;/code&gt;, Docker style&lt;/h1&gt; &#xA;&lt;p&gt;(Source for this image is available at &lt;a href=&#34;https://github.com/tianon/docker-postgres-upgrade&#34;&gt;https://github.com/tianon/docker-postgres-upgrade&lt;/a&gt;.)&lt;/p&gt; &#xA;&lt;p&gt;Tags of this image are of the format &lt;code&gt;OLD-to-NEW&lt;/code&gt;, where &lt;code&gt;OLD&lt;/code&gt; represents the version of PostgreSQL you are &lt;em&gt;currently&lt;/em&gt; running, and &lt;code&gt;NEW&lt;/code&gt; represents the version of PostgreSQL you would like to upgrade to.&lt;/p&gt; &#xA;&lt;p&gt;In order to get good performance, it is recommended to run this image with &lt;code&gt;docker run image --link&lt;/code&gt; (see &lt;a href=&#34;https://www.postgresql.org/docs/9.5/static/pgupgrade.html&#34;&gt;&lt;code&gt;pg_upgrade&lt;/code&gt; documentation&lt;/a&gt; for more details).&lt;/p&gt; &#xA;&lt;p&gt;For this to be feasible, your directory structure should look something like this: (if yours does not, either adjust it, or scroll down to see the alternate pattern for running this image)&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-console&#34;&gt;$ find DIR -mindepth 2 -maxdepth 2&#xA;DIR/OLD/data&#xA;DIR/NEW/data&#xA;&#xA;$ docker run --rm \&#xA;&#x9;-v DIR:/var/lib/postgresql \&#xA;&#x9;tianon/postgres-upgrade:OLD-to-NEW \&#xA;&#x9;--link&#xA;&#xA;...&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;More concretely, assuming &lt;code&gt;OLD&lt;/code&gt; of &lt;code&gt;9.4&lt;/code&gt;, &lt;code&gt;NEW&lt;/code&gt; of &lt;code&gt;9.5&lt;/code&gt;, and &lt;code&gt;DIR&lt;/code&gt; of &lt;code&gt;/mnt/bigdrive/postgresql&lt;/code&gt;:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-console&#34;&gt;$ find /mnt/bigdrive/postgresql -mindepth 2 -maxdepth 2&#xA;/mnt/bigdrive/postgresql/9.4/data&#xA;/mnt/bigdrive/postgresql/9.5/data&#xA;&#xA;$ docker run --rm \&#xA;&#x9;-v /mnt/bigdrive/postgresql:/var/lib/postgresql \&#xA;&#x9;tianon/postgres-upgrade:9.4-to-9.5 \&#xA;&#x9;--link&#xA;&#xA;...&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;(which assumes that your previous &lt;code&gt;postgres:9.4&lt;/code&gt; instance was running with &lt;code&gt;-v /mnt/bigdrive/postgresql/9.4/data:/var/lib/postgresql/data&lt;/code&gt;, and your new &lt;code&gt;postgres:9.5&lt;/code&gt; instance will run with &lt;code&gt;-v /mnt/bigdrive/postgresql/9.5/data:/var/lib/postgresql/data&lt;/code&gt;)&lt;/p&gt; &#xA;&lt;hr&gt; &#xA;&lt;p&gt;If your two directories (denoted below as &lt;code&gt;PGDATAOLD&lt;/code&gt; and &lt;code&gt;PGDATANEW&lt;/code&gt;) do not follow this structure, then the following may also be used (but will be slower):&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-console&#34;&gt;$ docker run --rm \&#xA;&#x9;-v PGDATAOLD:/var/lib/postgresql/OLD/data \&#xA;&#x9;-v PGDATANEW:/var/lib/postgresql/NEW/data \&#xA;&#x9;tianon/postgres-upgrade:OLD-to-NEW&#xA;&#xA;...&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;More concretely, assuming &lt;code&gt;OLD&lt;/code&gt; of &lt;code&gt;9.4&lt;/code&gt;, &lt;code&gt;NEW&lt;/code&gt; of &lt;code&gt;9.5&lt;/code&gt;, &lt;code&gt;PGDATAOLD&lt;/code&gt; of &lt;code&gt;/mnt/bigdrive/postgresql-9.4&lt;/code&gt;, and &lt;code&gt;PGDATANEW&lt;/code&gt; of &lt;code&gt;/mnt/bigdrive/postgresql-9.5&lt;/code&gt;:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-console&#34;&gt;$ docker run --rm \&#xA;&#x9;-v /mnt/bigdrive/postgresql-9.4:/var/lib/postgresql/9.4/data \&#xA;&#x9;-v /mnt/bigdrive/postgresql-9.5:/var/lib/postgresql/9.5/data \&#xA;&#x9;tianon/postgres-upgrade:9.4-to-9.5&#xA;&#xA;...&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;(which assumes that your previous &lt;code&gt;postgres:9.4&lt;/code&gt; instance was running with &lt;code&gt;-v /mnt/bigdrive/postgresql-9.4:/var/lib/postgresql/data&lt;/code&gt;, and your new &lt;code&gt;postgres:9.5&lt;/code&gt; instance will run with &lt;code&gt;-v /mnt/bigdrive/postgresql-9.5:/var/lib/postgresql/data&lt;/code&gt;)&lt;/p&gt; &#xA;&lt;hr&gt; &#xA;&lt;p&gt;Putting it all together:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-console&#34;&gt;$ mkdir -p postgres-upgrade-testing&#xA;$ cd postgres-upgrade-testing&#xA;$ OLD=&#39;9.4&#39;&#xA;$ NEW=&#39;9.5&#39;&#xA;&#xA;$ docker pull &#34;postgres:$OLD&#34;&#xA;$ docker run -dit \&#xA;&#x9;--name postgres-upgrade-testing \&#xA;&#x9;-e POSTGRES_PASSWORD=password \&#xA;&#x9;-v &#34;$PWD/$OLD/data&#34;:/var/lib/postgresql/data \&#xA;&#x9;&#34;postgres:$OLD&#34;&#xA;$ sleep 5&#xA;$ docker logs --tail 100 postgres-upgrade-testing&#xA;&#xA;$ # let&#39;s get some testing data in there&#xA;$ docker exec -it \&#xA;&#x9;-u postgres \&#xA;&#x9;postgres-upgrade-testing \&#xA;&#x9;pgbench -i -s 10&#xA;&#xA;$ docker stop postgres-upgrade-testing&#xA;$ docker rm postgres-upgrade-testing&#xA;&#xA;$ docker run --rm \&#xA;&#x9;-v &#34;$PWD&#34;:/var/lib/postgresql \&#xA;&#x9;&#34;tianon/postgres-upgrade:$OLD-to-$NEW&#34; \&#xA;&#x9;--link&#xA;&#xA;$ docker pull &#34;postgres:$NEW&#34;&#xA;$ docker run -dit \&#xA;&#x9;--name postgres-upgrade-testing \&#xA;&#x9;-e POSTGRES_PASSWORD=password \&#xA;&#x9;-v &#34;$PWD/$NEW/data&#34;:/var/lib/postgresql/data \&#xA;&#x9;&#34;postgres:$NEW&#34;&#xA;$ sleep 5&#xA;$ docker logs --tail 100 postgres-upgrade-testing&#xA;&#xA;$ # can now safely remove &#34;$OLD&#34;&#xA;$ sudo rm -rf &#34;$OLD&#34;&#xA;&lt;/code&gt;&lt;/pre&gt;</summary>
  </entry>
</feed>