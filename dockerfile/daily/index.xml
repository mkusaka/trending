<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom">
  <title>GitHub Dockerfile Daily Trending</title>
  <id>http://mshibanami.github.io/GitHubTrendingRSS</id>
  <updated>2023-12-04T01:30:13Z</updated>
  <subtitle>Daily Trending of Dockerfile in GitHub</subtitle>
  <link href="http://mshibanami.github.io/GitHubTrendingRSS"></link>
  <entry>
    <title>cmj2002/warp-docker</title>
    <updated>2023-12-04T01:30:13Z</updated>
    <id>tag:github.com,2023-12-04:/cmj2002/warp-docker</id>
    <link href="https://github.com/cmj2002/warp-docker" rel="alternate"></link>
    <summary type="html">&lt;p&gt;Run Cloudflare WARP in Docker.&lt;/p&gt;&lt;hr&gt;&lt;h1&gt;warp-docker&lt;/h1&gt; &#xA;&lt;p&gt;Run official &lt;a href=&#34;https://1.1.1.1/&#34;&gt;Cloudflare WARP&lt;/a&gt; client in Docker.&lt;/p&gt; &#xA;&lt;h2&gt;Usage&lt;/h2&gt; &#xA;&lt;h3&gt;Start the container&lt;/h3&gt; &#xA;&lt;p&gt;To run the WARP client in Docker, just write the following content to &lt;code&gt;docker-compose.yml&lt;/code&gt; and run &lt;code&gt;docker-compose up -d&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;version: &#39;3&#39;&#xA;&#xA;services:&#xA;  warp:&#xA;    image: caomingjun/warp&#xA;    container_name: warp&#xA;    restart: always&#xA;    ports:&#xA;      - &#39;1080:1080&#39;&#xA;    environment:&#xA;      - WARP_SLEEP=2&#xA;      # - WARP_LICENSE_KEY= # optional&#xA;    cap_add:&#xA;      - NET_ADMIN&#xA;    sysctls:&#xA;      - net.ipv6.conf.all.disable_ipv6=0&#xA;      - net.ipv4.conf.all.src_valid_mark=1&#xA;    volumes:&#xA;      - ./data:/var/lib/cloudflare-warp&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Try it out to see if it works:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;curl --socks5 127.0.0.1:1080 https://cloudflare.com/cdn-cgi/trace&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;If the output contains &lt;code&gt;warp=on&lt;/code&gt; or &lt;code&gt;warp=plus&lt;/code&gt;, the container is working properly. If the output contains &lt;code&gt;warp=off&lt;/code&gt;, it means that the container failed to connect to the WARP service.&lt;/p&gt; &#xA;&lt;h3&gt;Configuration&lt;/h3&gt; &#xA;&lt;p&gt;You can configure the container through the following environment variables:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt; &lt;p&gt;&lt;code&gt;WARP_SLEEP&lt;/code&gt;: The time to wait for the WARP daemon to start, in seconds. The default is 2 seconds. If the time is too short, it may cause the WARP daemon to not start before using the proxy, resulting in the proxy not working properly. If the time is too long, it may cause the container to take too long to start. If your server has poor performance, you can increase this value appropriately.&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;&lt;code&gt;WARP_LICENSE_KEY&lt;/code&gt;: The license key of the WARP client, which is optional. If you have subscribed to WARP+ service, you can fill in the key in this environment variable. If you have not subscribed to WARP+ service, you can ignore this environment variable.&lt;/p&gt; &lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;Data persistence: Use the host volume &lt;code&gt;./data&lt;/code&gt; to persist the data of the WARP client. You can change the location of this directory or use other types of volumes. If you modify the &lt;code&gt;WARP_LICENSE_KEY&lt;/code&gt;, please delete the &lt;code&gt;./data&lt;/code&gt; directory so that the client can detect and register again.&lt;/p&gt; &#xA;&lt;h3&gt;Change proxy type&lt;/h3&gt; &#xA;&lt;p&gt;The container uses &lt;a href=&#34;https://github.com/ginuerzh/gost&#34;&gt;GOST&lt;/a&gt; to provide proxy, where the environment variable &lt;code&gt;GOST_ARGS&lt;/code&gt; is used to pass parameters to GOST. The default is &lt;code&gt;-L :1080&lt;/code&gt;, that is, to listen on port 1080 in the container at the same time through HTTP and SOCKS5 protocols. If you want to have UDP support or use advanced features provided by other protocols, you can modify this parameter. For more information, refer to &lt;a href=&#34;https://v2.gost.run/en/&#34;&gt;GOST documentation&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;p&gt;If you modify the port number, you may also need to modify the port mapping in the &lt;code&gt;docker-compose.yml&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;h3&gt;Health check&lt;/h3&gt; &#xA;&lt;p&gt;The health check of the container will verify if the WARP client inside the container is working properly. If the check fails, the container will automatically restart. Specifically, 15 seconds after starting, a check will be performed every 15 seconds. If the inspection fails for 3 consecutive times, the container will be marked as unhealthy and trigger an automatic restart.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-Dockerfile&#34;&gt;HEALTHCHECK --interval=15s --timeout=5s --start-period=30s --retries=3 \&#xA;  CMD curl -fsS &#34;https://cloudflare.com/cdn-cgi/trace&#34; | grep -qE &#34;warp=(plus|on)&#34; || exit 1&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;If you don&#39;t want the container to restart automatically, you can remove &lt;code&gt;restart: always&lt;/code&gt; from the &lt;code&gt;docker-compose.yml&lt;/code&gt;. You can also modify the parameters of the health check through the &lt;code&gt;docker-compose.yml&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;h2&gt;Further reading&lt;/h2&gt; &#xA;&lt;p&gt;Read in my &lt;a href=&#34;https://blog.caomingjun.com/run-cloudflare-warp-in-docker/en/#How-it-works&#34;&gt;blog post&lt;/a&gt;.&lt;/p&gt;</summary>
  </entry>
</feed>