<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom">
  <title>GitHub Dockerfile Daily Trending</title>
  <id>http://mshibanami.github.io/GitHubTrendingRSS</id>
  <updated>2023-08-30T01:27:10Z</updated>
  <subtitle>Daily Trending of Dockerfile in GitHub</subtitle>
  <link href="http://mshibanami.github.io/GitHubTrendingRSS"></link>
  <entry>
    <title>Platformatory/cp-ansible-sandbox</title>
    <updated>2023-08-30T01:27:10Z</updated>
    <id>tag:github.com,2023-08-30:/Platformatory/cp-ansible-sandbox</id>
    <link href="https://github.com/Platformatory/cp-ansible-sandbox" rel="alternate"></link>
    <summary type="html">&lt;p&gt;&lt;/p&gt;&lt;hr&gt;&lt;h1&gt;cp-ansible-sandbox&lt;/h1&gt; &#xA;&lt;p&gt;docker-compose environment to run cp-ansible in a docker environment with systemd and ssh for the inventory nodes&lt;/p&gt; &#xA;&lt;h2&gt;Getting Started&lt;/h2&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;# This is run only once after cloning the repo&#xA;git submodule update --init --recursive&#xA;&#xA;docker compose up -d&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h3&gt;Verify if the containers are up&lt;/h3&gt; &#xA;&lt;pre&gt;&lt;code&gt;docker compose ps -a&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h3&gt;Setup SSH keys on all containers&lt;/h3&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;./setup-ssh-keys.sh&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h3&gt;Access the ansible control node&lt;/h3&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;docker compos exec -it ansible-control bash&#xA;&#xA;# Inside the ansible control node, verify ssh connectivity with other nodes&#xA;ssh root@zookeeper1&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h3&gt;Install the cp-ansible playbook&lt;/h3&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;# Inside the ansible control node&#xA;ansible-playbook confluent.platform.all&#xA;# This assumes the inventory is in /ansible/inventories/ansible-inventory.yml since ANSIBLE_INVENTORY is pointing to that&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h3&gt;Change the inventory&lt;/h3&gt; &#xA;&lt;p&gt;The inventory files in &lt;code&gt;inventories&lt;/code&gt; is mounted to &lt;code&gt;/ansible/inventories/&lt;/code&gt; on the ansible control node container. You can create new files or update &lt;code&gt;ansible-inventory.yml&lt;/code&gt; locally to let it reflect on the control node.&lt;/p&gt; &#xA;&lt;h4&gt;Using a custom inventory file&lt;/h4&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;ansible-playbook -i /ansible/inventories/custom-inventory.yml confluent.platform.all&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h3&gt;Additional files&lt;/h3&gt; &#xA;&lt;p&gt;Add additional files to the ansible control node by placing them in the &lt;code&gt;share&lt;/code&gt; directory locally. These will be available in &lt;code&gt;/usr/share/cp-ansible-sandbox&lt;/code&gt; in the ansible control node&lt;/p&gt; &#xA;&lt;h3&gt;Accessing the control center&lt;/h3&gt; &#xA;&lt;p&gt;Port 9021 is exposed locally as 9021 for the &lt;code&gt;control-center&lt;/code&gt; container. If control-center is installed in the &lt;code&gt;control-center&lt;/code&gt; container, it can be accessed locally in localhost:9021&lt;/p&gt; &#xA;&lt;h3&gt;Verifying health of the cp-ansible cluster&lt;/h3&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;docker compose exec -it kafka1 bash&#xA;&#xA;# Once inside the container, you can run the Kafka CLIs to interact with the cluster&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h3&gt;Updating the cp-ansible playbook&lt;/h3&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;git submodule update --recursive&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h3&gt;Destroy the environment&lt;/h3&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;docker compose down -v&#xA;&lt;/code&gt;&lt;/pre&gt;</summary>
  </entry>
</feed>