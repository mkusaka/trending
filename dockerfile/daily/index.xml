<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom">
  <title>GitHub Dockerfile Daily Trending</title>
  <id>http://mshibanami.github.io/GitHubTrendingRSS</id>
  <updated>2024-05-10T01:28:30Z</updated>
  <subtitle>Daily Trending of Dockerfile in GitHub</subtitle>
  <link href="http://mshibanami.github.io/GitHubTrendingRSS"></link>
  <entry>
    <title>wurstmeister/zookeeper-docker</title>
    <updated>2024-05-10T01:28:30Z</updated>
    <id>tag:github.com,2024-05-10:/wurstmeister/zookeeper-docker</id>
    <link href="https://github.com/wurstmeister/zookeeper-docker" rel="alternate"></link>
    <summary type="html">&lt;p&gt;&lt;/p&gt;&lt;hr&gt;&lt;h1&gt;zookeeper-docker&lt;/h1&gt;</summary>
  </entry>
  <entry>
    <title>RedHatOfficial/rhelai-dev-preview</title>
    <updated>2024-05-10T01:28:30Z</updated>
    <id>tag:github.com,2024-05-10:/RedHatOfficial/rhelai-dev-preview</id>
    <link href="https://github.com/RedHatOfficial/rhelai-dev-preview" rel="alternate"></link>
    <summary type="html">&lt;p&gt;Red Hat Enterprise Linux AI -- Developer Preview&lt;/p&gt;&lt;hr&gt;&lt;h1&gt;RHEL AI Developer Preview Guide&lt;/h1&gt; &#xA;&lt;p&gt;This guide will help you assemble and test a &lt;a href=&#34;https://access.redhat.com/support/offerings/devpreview&#34;&gt;developer preview&lt;/a&gt; version of the RHEL AI product.&lt;/p&gt; &#xA;&lt;h2&gt;Overview&lt;/h2&gt; &#xA;&lt;p&gt;Welcome to the &lt;strong&gt;Red Hat Enterprise Linux AI Developer Preview!&lt;/strong&gt; This guide is meant to introduce you to RHEL AI Developer Preview capabilities. As with other Developer Previews, expect changes to these workflows, additional automation and simplification, as well as a broadening of capabilities, hardware and software support versions, performance improvements (and other optimizations) prior to GA.&lt;/p&gt; &#xA;&lt;p&gt;RHEL AI is an open-source product that includes:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://huggingface.co/instructlab&#34;&gt;Granite&lt;/a&gt;: an open source, Apache 2 licensed foundation model from IBM.&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/instructlab&#34;&gt;InstructLab&lt;/a&gt;: a CLI and tuning backend that provides a simple user interface for contributing knowledge and skills to a base model.&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/containers/bootc&#34;&gt;RHEL Image Mode (bootc)&lt;/a&gt;: RHEL AI is distributed as a “bootable container” image. Provision RHEL AI appliances via kickstart onto bare metal or cloud instances.&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/vllm-project/vllm&#34;&gt;vLLM&lt;/a&gt;: A high-throughput and memory-efficient inference and serving engine for LLMs, based on PyTorch.&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://www.deepspeed.ai/&#34;&gt;deepspeed&lt;/a&gt;: A deep learning optimization software suite for both training and inference.&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://pytorch.org/&#34;&gt;PyTorch&lt;/a&gt;: PyTorch is an optimized tensor library for deep learning using GPUs and CPUs.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;blockquote&gt; &#xA; &lt;p&gt;[!NOTE] RHEL AI is targeted at server platforms and workstations with discrete GPUs. For laptops, please use upstream &lt;a href=&#34;https://github.com/instructlab&#34;&gt;InstructLab&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;/blockquote&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/RedHatOfficial/rhelai-dev-preview/main/images/rhel-ai-developer-preview.png&#34; alt=&#34;RHEL AI Developer Preview&#34;&gt;&lt;/p&gt; &#xA;&lt;h2&gt;Validated Hardware for Developer Preview&lt;/h2&gt; &#xA;&lt;p&gt;Here is a list of servers validated by Red Hat engineers to work with the RHEL AI Developer Preview. We anticipate that recent systems certified to run RHEL 9, with recent datacenter GPUs such as those listed below, will work with this Developer Preview.&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Minimum Total GPU memory: 320GB (e.g., 4 GPUs @ 80GB memory each)&lt;/li&gt; &#xA; &lt;li&gt;Minimum 200GB of disk space for model storage.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h3&gt;Compute Vendor&lt;/h3&gt; &#xA;&lt;table&gt; &#xA; &lt;thead&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;th&gt;GPU Vendor / Specs&lt;/th&gt; &#xA;   &lt;th&gt;RHEL AI Dev Preview&lt;/th&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/thead&gt; &#xA; &lt;tbody&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;Dell (4) NVIDIA H100&lt;/td&gt; &#xA;   &lt;td&gt;Yes&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;&lt;a href=&#34;https://community.ibm.com/community/user/blogs/dan-waugh/2024/05/06/rhel-ai-on-ibm-cloud-for-custom-model-tuning&#34;&gt;IBM&lt;/a&gt; &lt;code&gt;GX3&lt;/code&gt; Instances&lt;/td&gt; &#xA;   &lt;td&gt;Yes&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;Lenovo (8) AMD MI300x&lt;/td&gt; &#xA;   &lt;td&gt;Yes&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;AWS p4 and p5 instances (NVIDIA)&lt;/td&gt; &#xA;   &lt;td&gt;Ongoing&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;Intel&lt;/td&gt; &#xA;   &lt;td&gt;Ongoing&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/tbody&gt; &#xA;&lt;/table&gt; &#xA;&lt;h3&gt;Training Performance - What to Expect&lt;/h3&gt; &#xA;&lt;p&gt;For the best experience using the RHEL AI developer preview period, we have included a pruned taxonomy tree inside the InstructLab container. This will allow for validating training to complete in a reasonable time frame on a single server.&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Add your knowledge and skills to this version of the taxonomy. We recommend you add no more than 5 additions to the taxonomy tree to keep the resource requirements reasonable.&lt;/li&gt; &#xA; &lt;li&gt;On systems like the above, training should take ~1 hour.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;&lt;strong&gt;Formula:&lt;/strong&gt; A single GPU can train ~250 samples per minute. If you have 8 GPUs and 10,000 samples, expect it to take $&lt;code&gt;(10000/250/8*10)&lt;/code&gt;$ minutes, or about 50 minutes for 10 epochs. For smoke testing, feel free to run 1-2 epochs (note we recommend 10 epochs for best results).&lt;/p&gt; &#xA;&lt;h2&gt;Trying it Out&lt;/h2&gt; &#xA;&lt;p&gt;By the end of this exercise, you’ll have:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Built a set of Image-Mode and InstructLab containers&lt;/li&gt; &#xA; &lt;li&gt;Booted your system into the RHEL AI Image-Mode container&lt;/li&gt; &#xA; &lt;li&gt;Run through the InstructLab exercises to demonstrate the technology&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h3&gt;What is bootc?&lt;/h3&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://containers.github.io/bootc/&#34;&gt;&lt;code&gt;bootc&lt;/code&gt;&lt;/a&gt; is a transactional, in-place operating system that provisions and updates using OCI/Docker container images. &lt;code&gt;bootc&lt;/code&gt; is the key component in a broader mission of bootable containers.&lt;/p&gt; &#xA;&lt;p&gt;The original Docker container model of using &#34;layers&#34; to model applications has been extremely successful. This project aims to apply the same technique for bootable host systems - using standard OCI/Docker containers as a transport and delivery format for base operating system updates.&lt;/p&gt; &#xA;&lt;p&gt;The container image includes a Linux kernel (in e.g. &lt;code&gt;/usr/lib/modules&lt;/code&gt;), which is used to boot. At runtime on a target system, the base userspace is not itself running in a container by default. For example, assuming &lt;code&gt;systemd&lt;/code&gt; is in use, &lt;code&gt;systemd&lt;/code&gt; acts as &lt;code&gt;pid1&lt;/code&gt; as usual - there&#39;s no &#34;outer&#34; process.&lt;/p&gt; &#xA;&lt;p&gt;In the following example, the bootc container is labeled &lt;code&gt;Node Base Image&lt;/code&gt;:&lt;/p&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/RedHatOfficial/rhelai-dev-preview/main/images/bootc-example.png&#34; alt=&#34;bootc Example&#34;&gt;&lt;/p&gt; &#xA;&lt;h2&gt;Build Host Prerequisites&lt;/h2&gt; &#xA;&lt;p&gt;Depending on your build host hardware and internet connection speed, building and uploading container images could take up to 2 hours.&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;RHEL 9.4&lt;/li&gt; &#xA; &lt;li&gt;Connection to the internet (some images are &amp;gt; 15GB)&lt;/li&gt; &#xA; &lt;li&gt;4 CPU, 16GB RAM, 400GB disk space (tested with AWS EC2 &lt;code&gt;m5.xlarge&lt;/code&gt; using GP3 storage)&lt;/li&gt; &#xA; &lt;li&gt;A place to push container images that you will build – e.g., &lt;code&gt;quay.io&lt;/code&gt; or another image registry.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;Preparing the Build Host&lt;/h2&gt; &#xA;&lt;p&gt;Register the host (&lt;a href=&#34;https://access.redhat.com/solutions/253273&#34;&gt;How to register and subscribe a RHEL system to the Red Hat Customer Portal using Red Hat Subscription-Manager?&lt;/a&gt;)&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;sudo subscription-manager register --username &amp;lt;username&amp;gt; --password &amp;lt;password&amp;gt;&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Install required packages&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;sudo dnf install git make podman buildah lorax -y&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Clone the RHEL AI Developer Preview git repo&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;git clone https://github.com/RedHatOfficial/rhelai-dev-preview&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Authenticate to the Red Hat registry (&lt;a href=&#34;https://access.redhat.com/RegistryAuthentication&#34;&gt;Red Hat Container Registry Authentication&lt;/a&gt;) using your &lt;code&gt;redhat.com&lt;/code&gt; account.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;podman login registry.redhat.io --username &amp;lt;username&amp;gt; --password &amp;lt;password&amp;gt;&#xA;podman login --get-login registry.redhat.io&#xA;Your_login_here&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Ensure you have an SSH key on the build host. This is used during the driver toolkit image build. (&lt;a href=&#34;https://www.redhat.com/sysadmin/configure-ssh-keygen&#34;&gt;Using &lt;code&gt;ssh-keygen&lt;/code&gt; and sharing for key-based authentication in Linux | Enable Sysadmin&lt;/a&gt;)&lt;/p&gt; &#xA;&lt;h3&gt;Creating bootc containers&lt;/h3&gt; &#xA;&lt;p&gt;RHEL AI includes a set of Makefiles to facilitate creating the container images. Depending on your build host hardware and internet connection speed, this could take up to an hour.&lt;/p&gt; &#xA;&lt;p&gt;Build the InstructLab NVIDIA container image.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;make instruct-nvidia&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Build the &lt;a href=&#34;https://github.com/vllm-project/vllm&#34;&gt;&lt;code&gt;vllm&lt;/code&gt;&lt;/a&gt; container image.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;make vllm&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Build the &lt;a href=&#34;https://www.deepspeed.ai/&#34;&gt;&lt;code&gt;deepspeed&lt;/code&gt;&lt;/a&gt; container image.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;make deepspeed&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Last, build the RHEL AI NVIDIA &lt;code&gt;bootc&lt;/code&gt; container image. This is the RHEL Image-mode “bootable” container. We embed the 3 images above into this container.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;make nvidia FROM=registry.redhat.io/rhel9/rhel-bootc:9.4 REGISTRY=&amp;lt;your-registry&amp;gt; REGISTRY_ORG=&amp;lt;your-org-name&amp;gt;&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;The resulting image is tagged &lt;code&gt;${REGISTRY}/${REGISTRY_ORG}/nvidia-bootc:latest&lt;/code&gt;. For more variables and examples, see the &lt;a href=&#34;https://github.com/rhelai-dev-preview/tree/main/training&#34;&gt;training/README&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;p&gt;Push the resulting image to your registry. You will refer to this URL inside a kickstart file in an upcoming step.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;podman push ${REGISTRY}/${REGISTRY_ORG}/nvidia-bootc:latest&#xA;e.g. podman push quay.io/&amp;lt;your-user-name&amp;gt;/nvidia-bootc.latest&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;blockquote&gt; &#xA; &lt;p&gt;At this point you have a RHEL AI bootable container image ready to be installed on a physical or virtual host.&lt;/p&gt; &#xA;&lt;/blockquote&gt; &#xA;&lt;h3&gt;Provisioning your GPU host (kickstart method)&lt;/h3&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://docs.anaconda.com/free/anaconda/install/index.html&#34;&gt;Anaconda&lt;/a&gt; is the Red Hat Enterprise Linux installer, and it is embedded in all RHEL downloadable ISO images. The main method of automating RHEL installation is via scripts called Kickstart. For more information about Anaconda and Kickstart, &lt;a href=&#34;https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/performing_an_advanced_rhel_9_installation/index#what-are-kickstart-installations_kickstart-installation-basics&#34;&gt;read these documents&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;p&gt;A recent kickstart command called &lt;a href=&#34;https://pykickstart.readthedocs.io/en/latest/kickstart-docs.html#ostreecontainer&#34;&gt;&lt;code&gt;ostreecontainer&lt;/code&gt;&lt;/a&gt; was introduced with RHEL 9.4. We use &lt;code&gt;ostreecontainer&lt;/code&gt; to provision the bootable &lt;code&gt;nvidia-bootc&lt;/code&gt; container you just pushed to your registry over the network.&lt;/p&gt; &#xA;&lt;p&gt;Here is an example of a kickstart file. Copy it to a file called &lt;code&gt;rhelai-dev-preview-bootc.ks&lt;/code&gt;, and customize it for your environment:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;# text&#xA;## customize this for your target system&#xA;# network --bootproto=dhcp --device=link --activate&#xA;&#xA;## Basic partitioning&#xA;## customize this for your target system&#xA;# clearpart --all --initlabel --disklabel=gpt&#xA;# reqpart --add-boot&#xA;# part / --grow --fstype xfs&#xA;&#xA;# ostreecontainer --url quay.io/&amp;lt;your-user-name&amp;gt;/nvidia-bootc:latest&#xA;&#xA;# firewall --disabled&#xA;# services --enabled=sshd&#xA;&#xA;## optionally add a user&#xA;# user --name=cloud-user --groups=wheel --plaintext --password&#xA;# sshkey --username cloud-user &#34;ssh-ed25519 AAAAC3Nza.....&#34;&#xA;&#xA;## if desired, inject an SSH key for root&#xA;# rootpw --iscrypted locked&#xA;# sshkey --username root &#34;ssh-ed25519 AAAAC3Nza...&#34;&#xA;# reboot&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h3&gt;Embed your kickstart into the RHEL Boot ISO&lt;/h3&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://developers.redhat.com/products/rhel/download#rhel-new-product-download-list-61451&#34;&gt;Download the RHEL 9.4&lt;/a&gt; “Boot ISO”, and use &lt;code&gt;mkksiso&lt;/code&gt; command to embed the kickstart into the RHEL boot ISO.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;mkksiso rhelai-dev-preview-bootc.ks rhel-9.4-x86_64-boot.iso rhelai-dev-preview-bootc-ks.iso&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;At this point you should have:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;code&gt;nvidia-bootc:latest&lt;/code&gt;: a bootable container image with support for NVIDIA GPUs&lt;/li&gt; &#xA; &lt;li&gt;&lt;code&gt;rhelai-dev-preview-bootc.ks&lt;/code&gt;: a kickstart file customized to provision RHEL from your container registry to your target system.&lt;/li&gt; &#xA; &lt;li&gt;&lt;code&gt;rhelai-dev-preview-bootc-ks.iso&lt;/code&gt;: a bootable RHEL 9.4 ISO with the kickstart embedded.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;Boot your target system using the &lt;code&gt;rhelai-dev-preview-bootc-ks.iso&lt;/code&gt; file. anaconda will pull the nvidia-bootc:latest image from your registry and provision RHEL according to your kickstart file.&lt;/p&gt; &#xA;&lt;p&gt;&lt;strong&gt;Alternative&lt;/strong&gt;: the kickstart file can be served via HTTP. On the installation via kernel command line and an external HTTP server – add &lt;code&gt;inst.ks=http(s)://kickstart/url/rhelai-dev-preview-bootc.ks&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h2&gt;Using RHEL AI and InstructLab&lt;/h2&gt; &#xA;&lt;h3&gt;Download Models&lt;/h3&gt; &#xA;&lt;p&gt;Before using the RHEL AI environment, you must download two models, each tailored to a key function in the high-fidelity tuning process. &lt;a href=&#34;https://huggingface.co/instructlab&#34;&gt;Granite&lt;/a&gt; is used as the student model and is responsible for facilitating the training of a new fine-tuned mode. &lt;a href=&#34;https://huggingface.co/mistralai/Mixtral-8x7B-Instruct-v0.1&#34;&gt;Mixtral&lt;/a&gt; is used as the teacher model and is responsible for aiding the generation phase of the LAB process, where skills and knowledge are used in concert to produce a rich training dataset.&lt;/p&gt; &#xA;&lt;h3&gt;Prerequisites&lt;/h3&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Before you can start the download process, you need to create an account on &lt;a href=&#34;https://huggingface.co/&#34;&gt;HuggingFace.co&lt;/a&gt; and manually acknowledge the terms and conditions for Mixtral.&lt;/li&gt; &#xA; &lt;li&gt;Additionally, you will need to create a token on the Hugging Face site so we can download the model from the command line. &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;Click on your profile in the upper right corner and click &lt;code&gt;Settings&lt;/code&gt;.&lt;/li&gt; &#xA;   &lt;li&gt;Click &lt;code&gt;Access Tokens&lt;/code&gt;. Click the &lt;code&gt;New token&lt;/code&gt; button and provide a name. The new token only requires the use of &lt;code&gt;Read&lt;/code&gt; permissions since it&#39;s only being used to fetch models. On this screen, you will be able to generate the token content and save and copy the text to authenticate.&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/RedHatOfficial/rhelai-dev-preview/main/images/hf-access-tokens.png&#34; alt=&#34;HuggingFace Access Tokens&#34;&gt;&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Review and accept the terms of the Mixtral model&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/RedHatOfficial/rhelai-dev-preview/main/images/mixtral-agree.png&#34; alt=&#34;Agree to terms for Mixtral&#34;&gt;&lt;/p&gt; &#xA;&lt;h4&gt;Understanding the Differences Between ilab and RHEL AI CLIs&lt;/h4&gt; &#xA;&lt;p&gt;The &lt;code&gt;ilab&lt;/code&gt; command line interface that is part of the InstructLab project focuses on running lightweight quantized models on personal computing devices like laptops. In contrast, RHEL AI enables the use of high-fidelity training using full-precision models. For familiarity, the command and parameters mirror that of InstructLab’s &lt;code&gt;ilab&lt;/code&gt; command; however, the backing implementation is very different.&lt;/p&gt; &#xA;&lt;blockquote&gt; &#xA; &lt;p&gt;In RHEL AI, the &lt;code&gt;ilab&lt;/code&gt; command is a &lt;strong&gt;wrapper&lt;/strong&gt; that acts as a front-end to a container architecture pre-bundled on the RHEL AI system.&lt;/p&gt; &#xA;&lt;/blockquote&gt; &#xA;&lt;h3&gt;Using the &lt;code&gt;ilab&lt;/code&gt; Command Line Interface&lt;/h3&gt; &#xA;&lt;h3&gt;Create a working directory for your project&lt;/h3&gt; &#xA;&lt;p&gt;The first step is to create a new working directory for your project. Everything will be relative to this working directory. It will contain your models, logs, and training data.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;mkdir my-project&#xA;cd my-project&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h4&gt;Initialize your project&lt;/h4&gt; &#xA;&lt;p&gt;The very first &lt;code&gt;ilab&lt;/code&gt; command you will run sets up the base environment, including downloading the taxonomy repo if you choose. This will be needed for later steps, so it is recommended to do so.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;ilab init&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h4&gt;Download Granite-7B (~27GB on disk)&lt;/h4&gt; &#xA;&lt;p&gt;Next, download the IBM Granite base model. Important: Do not download the “lab” versions of the model. The granite &lt;strong&gt;base&lt;/strong&gt; model is most effective when performing high-fidelity training.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;ilab download --repository ibm/granite-7b-base&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h4&gt;Download Mixtral-8x7B-Instruct (~96GB on disk)&lt;/h4&gt; &#xA;&lt;p&gt;Follow the same process, but additionally define an environment variable using the HF token you created in the above section under Access Tokens.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;export HF_TOKEN=&amp;lt;paste token value here&amp;gt;&#xA;ilab download --repository mistralai/Mixtral-8x7B-Instruct-v0.1&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h4&gt;Directory Structure&lt;/h4&gt; &#xA;&lt;p&gt;Now that you have initialized your project and downloaded your first models, observe the directory structure of your project&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;my-project/&#xA;├─ models/&#xA;├─ generated/&#xA;├─ taxonomy/&#xA;├─ training/&#xA;├─ training_output/&#xA;├─ cache/&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;table&gt; &#xA; &lt;thead&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;th&gt;Folder&lt;/th&gt; &#xA;   &lt;th&gt;Purpose&lt;/th&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/thead&gt; &#xA; &lt;tbody&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;models&lt;/td&gt; &#xA;   &lt;td&gt;Holds all language models, including the saved output of ones you generate with RHEL AI&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;generated&lt;/td&gt; &#xA;   &lt;td&gt;Generated data output from the generation phase, built on modifications to the taxonomy repository&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;taxonomy&lt;/td&gt; &#xA;   &lt;td&gt;Skill or Knowledge data used by the LAB method to generate synthetic data for training&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;training&lt;/td&gt; &#xA;   &lt;td&gt;Converted seed data to facilitate the training process&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;training_output&lt;/td&gt; &#xA;   &lt;td&gt;All transient output of the training process, including logs and in-flight sample checkpoints&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;cache&lt;/td&gt; &#xA;   &lt;td&gt;An internal cache used by the model data&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/tbody&gt; &#xA;&lt;/table&gt; &#xA;&lt;h3&gt;Modifying the Taxonomy&lt;/h3&gt; &#xA;&lt;p&gt;The next step is to contribute new knowledge or skills into the taxonomy repo. See the &lt;a href=&#34;https://github.com/instructlab/taxonomy/raw/main/README.md&#34;&gt;InstructLab documentation&lt;/a&gt; for more information and examples of how to do this. We also have a set of lab exercises here.&lt;/p&gt; &#xA;&lt;h4&gt;Launching the Teacher model&lt;/h4&gt; &#xA;&lt;p&gt;With the additional taxonomy data added, it’s now possible to generate new synthetic data to eventually train a new model. Although, before generation can begin, a teacher model first needs to be started to assist the generator in constructing new data. In a separate terminal session, run the “serve” command and wait for the VLLM startup to complete. Note this process can take several minutes to complete&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;ilab serve&#xA;INFO:     Application startup complete.&#xA;INFO:     Uvicorn running on http://0.0.0.0:8080 (Press CTRL+C to quit)&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h4&gt;Generating new Synthetic Data&lt;/h4&gt; &#xA;&lt;p&gt;Now that VLLM is serving the teacher mode, the generation process can be started using the &lt;code&gt;ilab&lt;/code&gt; generate command. This process will take some time to complete and will continually output the total number of instructions generated as it is updated. This defaults to 5000 instructions, but you can adjust this with the &lt;code&gt;--num-instructions&lt;/code&gt; option.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;ilab generate&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;Q&amp;gt; How do cytokines influence the outcome of certain diseases involving tonsils?&#xA;A&amp;gt; The outcome of infectious, autoimmune, or malignant diseases affecting tonsils may be influenced by the overall balance of production profiles of pro-inflammatory and anti-inflammatory cytokines. Determining cytokine profiles in tonsil studies is essential for understanding the causes and underlying mechanisms of these disorders.&#xA; 35%|████████████████████████████████████████▉ &#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h4&gt;Examining the Synthetic Data Set&lt;/h4&gt; &#xA;&lt;p&gt;In addition to the current data printed to the screen during generation, a full output is recorded in the generated folder. Before training it is recommended to review this output to verify it meets expectations. If it is not satisfactory, try modifying or creating new examples in the taxonomy and rerunning.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;less generated/generated_Mixtral*.json&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h4&gt;Stopping VLLM&lt;/h4&gt; &#xA;&lt;p&gt;Once the generated data is satisfactory, the training process can begin. Although first close the VLLM instance in the terminal session that was started for generation.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;CTRL+C&#xA;INFO:     Application shutdown complete.&#xA;INFO:     Finished server process [1]&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;blockquote&gt; &#xA; &lt;p&gt;You may receive a Python KeyboardInterrupt exception and stack trace. This can be safely ignored.&lt;/p&gt; &#xA;&lt;/blockquote&gt; &#xA;&lt;h3&gt;Starting Training&lt;/h3&gt; &#xA;&lt;p&gt;With VLLM stopped and the new data generated, the training process can be launched using the &lt;code&gt;ilab train&lt;/code&gt; command. By default, the training process saves a model checkpoint after every 4999 samples. You can adjust this using the &lt;code&gt;--num-samples&lt;/code&gt; parameter. Additionally, training defaults to running for 10 epochs, which can also be adjusted with the &lt;code&gt;--num-epochs&lt;/code&gt; parameter. Generally, more epochs are better, but after a certain point, more epochs will result in overfitting. It is typically recommended to stay within 10 or fewer epochs and to look at different sample points to find the best result.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;ilab train --num-epochs 9&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;RunningAvgSamplesPerSec=149.4829861942806, CurrSamplesPerSec=161.99957513920629, MemAllocated=22.45GB, MaxMemAllocated=29.08GB&#xA;throughput: 161.84935045724643 samples/s, lr: 1.3454545454545455e-05, loss: 0.840185821056366 cuda_mem_allocated: 22.45188570022583 GB cuda_malloc_retries: 0 num_loss_counted_tokens: 8061.0 batch_size: 96.0 total loss: 0.8581467866897583&#xA;Epoch 1: 100%|█████████████████████████████████████████████████████████| 84/84 [01:09&amp;lt;00:00,  1.20it/s]&#xA; total length: 2527 num samples 15 - rank: 6 max len: 187 min len: 149&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h4&gt;Serving the New Model&lt;/h4&gt; &#xA;&lt;p&gt;Once the training process has completed, the new model entries will be stored in the models directory with locations printed to the terminal&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;Generated model in /root/workspace/models/tuned-0504-0051:&#xA;.&#xA;./samples_4992&#xA;./samples_9984&#xA;./samples_14976&#xA;./samples_19968&#xA;./samples_24960&#xA;./samples_29952&#xA;./samples_34944&#xA;./samples_39936&#xA;./samples_44928&#xA;./samples_49920&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;The same &lt;code&gt;ilab serve&lt;/code&gt; command can be used to serve the new model by passing the –model option with the name and sample&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;ilab serve --model tuned-0504-0051/samples_49920&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h4&gt;Chatting with the New Model&lt;/h4&gt; &#xA;&lt;p&gt;After VLLM has started with the new model, a chat session can be launched by creating a new terminal session and passing the same &lt;code&gt;--model&lt;/code&gt; parameter to chat (Note that if this does not match, you will receive a 404 error message). Ask it a question related to your taxonomy contributions.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;ilab chat --model tuned-0504-0051/samples_49920&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h4&gt;Example Chat Session with the New Model&lt;/h4&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;╭─────────────────────────────── system ────────────────────────────────╮&#xA;│ Welcome to InstructLab Chat w/                                        │&#xA;│ /INSTRUCTLAB/MODELS/TUNED-0504-0051/SAMPLES_49920 (type /h for help)  │&#xA;╰───────────────────────────────────────────────────────────────────────╯&#xA;&#xA;&amp;gt;&amp;gt;&amp;gt; What are tonsils?&#xA;╭────────── /instructlab/models/tuned-0504-0051/samples_49920 ──────────╮&#xA;│                                                                       │&#xA;│ Tonsils are a type of mucosal lymphatic tissue found in the           │&#xA;│ aerodigestive tracts of various mammals, including humans. In the     │&#xA;│ human body, the tonsils play a crucial role in protecting the body    │&#xA;│ from infections, particularly those caused by bacteria and viruses.   │&#xA;╰─────────────────────────────────────────────── elapsed 0.469 seconds ─╯&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;blockquote&gt; &#xA; &lt;p&gt;To exit the session, type &lt;code&gt;exit&lt;/code&gt;&lt;/p&gt; &#xA;&lt;/blockquote&gt; &#xA;&lt;h3&gt;Summary&lt;/h3&gt; &#xA;&lt;p&gt;That’s it! The purpose of a Developer Preview is to get something out to our users for early feedback. We realize there may be bugs. And we appreciate your time and effort if you’ve made it this far. Chances are you hit some issues or needed to troubleshoot. We encourage you to file bug reports, feature requests, and ask us questions. See the contact information below for how to do that. Thank you!&lt;/p&gt; &#xA;&lt;h3&gt;How to contact us&lt;/h3&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;To report bugs or request features, use the GitHub issues page.&lt;/li&gt; &#xA; &lt;li&gt;For questions: send us an email &lt;a href=&#34;mailto:help-rhelai-devpreview@redhat.com&#34;&gt;help-rhelai-devpreview@redhat.com&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;For InstructLab: please see the community documentation.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h3&gt;Known Issues&lt;/h3&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;We have not tried this with Fedora (coming soon!)&lt;/li&gt; &#xA; &lt;li&gt;We intend to include a toolbox container inside the bootc container. For now, you can pull any toolbox image (e.g., Fedora Toolbx).&lt;/li&gt; &#xA; &lt;li&gt;RHUI-entitled hosts (e.g., on AWS) will require additional configuration to move from RHUI cloud auto-registration to Red Hat standard registration.&lt;/li&gt; &#xA; &lt;li&gt;Use subscription-manager with username/password or activation key, then run the following command: &lt;code&gt;$ sudo subscription-manager config --rhsm.manage_repos=1&lt;/code&gt;&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h3&gt;Troubleshooting&lt;/h3&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;code&gt;nvidia-smi&lt;/code&gt; to make sure the drivers work and can see the GPUs&lt;/li&gt; &#xA; &lt;li&gt;&lt;code&gt;nvtop&lt;/code&gt; (available in EPEL) to see whether the GPUs are being used (some code paths have CPU fallback, which we don’t want here)&lt;/li&gt; &#xA; &lt;li&gt;“no space left on device” errors (or similar) during container builds Ensure your build host has 400GB of storage.&lt;/li&gt; &#xA; &lt;li&gt;Run &lt;code&gt;make prune&lt;/code&gt; out of the training subdirectory. This will clean up old build artifacts.&lt;/li&gt; &#xA; &lt;li&gt;Sometimes, interrupting the container build process may lead to wanting a complete restart of the process. For those cases, we can instruct Podman to start from scratch and discard the cached layers. This is possible by passing the &lt;code&gt;--no-cache&lt;/code&gt; parameter to the build process&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;make nvidia-bootc CONTAINER_TOOL_EXTRA_ARGS=&#34;--no-cache&#34;&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;The building of accelerated images requires a lot of temporary disk space. In case you need to specify a directory for temporary storage, this can be done with the &lt;code&gt;TMPDIR&lt;/code&gt; environment variable:&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;make &amp;lt;platform&amp;gt; TMPDIR=/path/to/tmp&#xA;&lt;/code&gt;&lt;/pre&gt;</summary>
  </entry>
</feed>