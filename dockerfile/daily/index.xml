<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom">
  <title>GitHub Dockerfile Daily Trending</title>
  <id>http://mshibanami.github.io/GitHubTrendingRSS</id>
  <updated>2022-12-10T01:31:02Z</updated>
  <subtitle>Daily Trending of Dockerfile in GitHub</subtitle>
  <link href="http://mshibanami.github.io/GitHubTrendingRSS"></link>
  <entry>
    <title>artis3n/ansible-role-tailscale</title>
    <updated>2022-12-10T01:31:02Z</updated>
    <id>tag:github.com,2022-12-10:/artis3n/ansible-role-tailscale</id>
    <link href="https://github.com/artis3n/ansible-role-tailscale" rel="alternate"></link>
    <summary type="html">&lt;p&gt;Ansible role to install and configure a Tailscale node.&lt;/p&gt;&lt;hr&gt;&lt;h1&gt;artis3n.tailscale&lt;/h1&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://galaxy.ansible.com/artis3n/tailscale&#34;&gt;&lt;img src=&#34;https://img.shields.io/ansible/role/d/51664&#34; alt=&#34;Ansible Role&#34;&gt;&lt;/a&gt; &lt;a href=&#34;https://github.com/artis3n/ansible-role-tailscale/releases&#34;&gt;&lt;img src=&#34;https://img.shields.io/github/v/release/artis3n/ansible-role-tailscale?include_prereleases&#34; alt=&#34;GitHub release (latest SemVer including pre-releases)&#34;&gt;&lt;/a&gt; &lt;a href=&#34;https://github.com/artis3n/ansible-role-tailscale/actions/workflows/pull_request_target.yml&#34;&gt;&lt;img src=&#34;https://github.com/artis3n/ansible-role-tailscale/actions/workflows/pull_request_target.yml/badge.svg?sanitize=true&#34; alt=&#34;Molecule Tests&#34;&gt;&lt;/a&gt; &lt;a href=&#34;https://bestpractices.coreinfrastructure.org/projects/6312&#34;&gt;&lt;img src=&#34;https://bestpractices.coreinfrastructure.org/projects/6312/badge&#34; alt=&#34;CII Best Practices&#34;&gt;&lt;/a&gt; &lt;img src=&#34;https://img.shields.io/github/last-commit/artis3n/ansible-role-tailscale&#34; alt=&#34;GitHub last commit&#34;&gt; &lt;img src=&#34;https://img.shields.io/github/license/artis3n/ansible-role-tailscale&#34; alt=&#34;GitHub&#34;&gt; &lt;a href=&#34;https://github.com/sponsors/artis3n&#34;&gt;&lt;img src=&#34;https://img.shields.io/github/sponsors/artis3n&#34; alt=&#34;GitHub Sponsors&#34;&gt;&lt;/a&gt; &lt;a href=&#34;https://github.com/artis3n/&#34;&gt;&lt;img src=&#34;https://img.shields.io/github/followers/artis3n?style=social&#34; alt=&#34;GitHub followers&#34;&gt;&lt;/a&gt; &lt;a href=&#34;https://twitter.com/Artis3n&#34;&gt;&lt;img src=&#34;https://img.shields.io/twitter/follow/artis3n?style=social&#34; alt=&#34;Twitter Follow&#34;&gt;&lt;/a&gt;&lt;/p&gt; &#xA;&lt;p&gt;This role installs and configures &lt;a href=&#34;https://tailscale.com/&#34;&gt;Tailscale&lt;/a&gt; on a Linux target.&lt;/p&gt; &#xA;&lt;p&gt;Supported operating systems:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Debian / Ubuntu&lt;/li&gt; &#xA; &lt;li&gt;CentOS / RedHat&lt;/li&gt; &#xA; &lt;li&gt;Rocky Linux / AlmaLinux&lt;/li&gt; &#xA; &lt;li&gt;Amazon Linux 2&lt;/li&gt; &#xA; &lt;li&gt;Oracle Linux&lt;/li&gt; &#xA; &lt;li&gt;Fedora&lt;/li&gt; &#xA; &lt;li&gt;Arch Linux&lt;/li&gt; &#xA; &lt;li&gt;OpenSUSE&lt;/li&gt; &#xA; &lt;li&gt;Raspbian (untested but should work through Debian support)&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;See the &lt;a href=&#34;https://github.com/artis3n/ansible-role-tailscale/raw/main/.github/workflows/ci.yml#L15&#34;&gt;CI worfklow&lt;/a&gt; for the list of distribution versions actively tested in each pull request.&lt;/p&gt; &#xA;&lt;div align=&#34;center&#34;&gt; &#xA; &lt;a href=&#34;https://asciinema.org/a/g8P2DT45oedUaxXSKGBKpU2Dl&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/artis3n/ansible-role-tailscale/main/docs/demo.gif&#34; width=&#34;650&#34; height=&#34;450&#34;&gt;&lt;/a&gt; &#xA;&lt;/div&gt; &#xA;&lt;p&gt;This role uses Ansible fully qualified collection names (FQCN) and therefore requires Ansible 2.11+. Ansible 2.12 is set as the minimum required version as this was the version tested for compatibility during the FQCN refactor.&lt;/p&gt; &#xA;&lt;h1&gt;V3 Breaking Changes&lt;/h1&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;code&gt;tailscale_auth_key&lt;/code&gt; is now &lt;code&gt;tailscale_authkey&lt;/code&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;code&gt;insecurely_log_auth_key&lt;/code&gt; is now &lt;code&gt;insecurely_log_authkey&lt;/code&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;code&gt;force&lt;/code&gt; is no longer a role variable&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h1&gt;State Tracking&lt;/h1&gt; &#xA;&lt;p&gt;This role will create a &lt;code&gt;.artis3n-tailscale&lt;/code&gt; directory in the target&#39;s home directory in order to maintain a concept of state from the configuration of the arguments passed to &lt;code&gt;tailscale up&lt;/code&gt;. This allows the role to idempotently update a Tailscale node&#39;s configuration when needed. Deleting this directory will lead to this role re-configuring Tailscale when it is not needed, but will not otherwise break anything. However, it is recommended that you let this Ansible role manage this directory and its contents.&lt;/p&gt; &#xA;&lt;p&gt;Note that:&lt;/p&gt; &#xA;&lt;blockquote&gt; &#xA; &lt;p&gt;Flags are not persisted between runs; you must specify all flags each time.&lt;/p&gt; &#xA; &lt;p&gt;...&lt;/p&gt; &#xA; &lt;p&gt;In Tailscale v1.8 or greater, if you forget to specify a flag you added before, the CLI will warn you and provide a copyable command that includes all existing flags.&lt;/p&gt; &#xA;&lt;/blockquote&gt; &#xA;&lt;small&gt; &lt;p&gt;- &lt;a href=&#34;https://tailscale.com/kb/1080/cli/#up&#34;&gt;docs: tailscale up&lt;/a&gt;&lt;/p&gt; &lt;/small&gt; &#xA;&lt;p&gt;This role will bubble up any stderr messages from the Tailscale binary to resolve any end-user configuration errors with &lt;code&gt;tailscale up&lt;/code&gt; arguments. The &lt;code&gt;--authkey=&lt;/code&gt; value will be redacted unless &lt;a href=&#34;https://raw.githubusercontent.com/artis3n/ansible-role-tailscale/main/#insecurely_log_authkey&#34;&gt;&lt;code&gt;insecurely_log_authkey&lt;/code&gt;&lt;/a&gt; is set to &lt;code&gt;true&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/artis3n/ansible-role-tailscale/main/docs/images/printed_stderr.png&#34; alt=&#34;logged stderr&#34;&gt;&lt;/p&gt; &#xA;&lt;h1&gt;Role Variables&lt;/h1&gt; &#xA;&lt;h2&gt;Required&lt;/h2&gt; &#xA;&lt;p&gt;One of &lt;code&gt;tailscale_authkey&lt;/code&gt; or &lt;code&gt;tailscale_up_skip&lt;/code&gt; must be present. In most cases you will use &lt;code&gt;tailscale_authkey&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;p&gt;If you are uninstalling Tailscale (&lt;code&gt;state: absent&lt;/code&gt;), neither &lt;code&gt;tailscale_authkey&lt;/code&gt; nor &lt;code&gt;tailscale_up_skip&lt;/code&gt; is required.&lt;/p&gt; &#xA;&lt;h3&gt;tailscale_authkey&lt;/h3&gt; &#xA;&lt;p&gt;Is &lt;strong&gt;not&lt;/strong&gt; required if &lt;code&gt;tailscale_up_skip&lt;/code&gt; is set to &lt;code&gt;true&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;p&gt;A Tailscale Node Authorization auth key.&lt;/p&gt; &#xA;&lt;p&gt;A Node Authorization auth key can be generated under your Tailscale account at &lt;a href=&#34;https://login.tailscale.com/admin/authkeys&#34;&gt;https://login.tailscale.com/admin/authkeys&lt;/a&gt;. Note that reusable authorization keys now expire 90 days after they are generated.&lt;/p&gt; &#xA;&lt;p&gt;This value should be treated as a sensitive secret. You are encouraged to use &lt;a href=&#34;https://docs.ansible.com/ansible/latest/user_guide/vault.html#encrypt-string-for-use-in-yaml&#34;&gt;ansible-vault&lt;/a&gt; to encrypt this value in your playbook.&lt;/p&gt; &#xA;&lt;h3&gt;tailscale_up_skip&lt;/h3&gt; &#xA;&lt;p&gt;&lt;strong&gt;If set to true, &lt;code&gt;tailscale_authkey&lt;/code&gt; is not required.&lt;/strong&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;strong&gt;Default&lt;/strong&gt;: &lt;code&gt;false&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;Whether to install and configure Tailscale as a service but skip running &lt;code&gt;tailscale up&lt;/code&gt;. Helpful when packaging up a Tailscale installation into a build process such as AMI creation when the server should not yet authenticate to your Tailscale network.&lt;/p&gt; &#xA;&lt;h2&gt;Optional&lt;/h2&gt; &#xA;&lt;h3&gt;insecurely_log_authkey&lt;/h3&gt; &#xA;&lt;p&gt;&lt;strong&gt;Default&lt;/strong&gt;: &lt;code&gt;false&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;If set to &lt;code&gt;true&lt;/code&gt;, the &#34;Bring Tailscale Up&#34; command will include the raw value of the Tailscale authkey when logging any errors encountered during &lt;code&gt;tailscale up&lt;/code&gt;. The authkey is not logged in successful task completions and is redacted in the &lt;code&gt;stderr&lt;/code&gt; output by this role if an error occurs.&lt;/p&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/artis3n/ansible-role-tailscale/main/docs/images/redacted_authkey.png&#34; alt=&#34;redacted authkey&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;If you are encountering an error bringing Tailscale up and want the &#34;Bring Tailscale Up&#34; task to &lt;em&gt;not&lt;/em&gt; redact the value of the authkey, set this variable to &lt;code&gt;true&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;p&gt;If the authkey is invalid, the role will relay Tailscale&#39;s error message on that fact:&lt;/p&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/artis3n/ansible-role-tailscale/main/docs/images/invalid_authkey.png&#34; alt=&#34;invalid authkey&#34;&gt;&lt;/p&gt; &#xA;&lt;h3&gt;release_stability&lt;/h3&gt; &#xA;&lt;p&gt;&lt;strong&gt;Default&lt;/strong&gt;: &lt;code&gt;stable&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;Whether to use the Tailscale stable or unstable track.&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;stable&lt;/code&gt;:&lt;/p&gt; &#xA;&lt;blockquote&gt; &#xA; &lt;p&gt;Stable releases. If you&#39;re not sure which track to use, pick this one.&lt;/p&gt; &#xA;&lt;/blockquote&gt; &#xA;&lt;p&gt;&lt;code&gt;unstable&lt;/code&gt;:&lt;/p&gt; &#xA;&lt;blockquote&gt; &#xA; &lt;p&gt;The bleeding edge. Pushed early and often. Expect rough edges!&lt;/p&gt; &#xA;&lt;/blockquote&gt; &#xA;&lt;h3&gt;state&lt;/h3&gt; &#xA;&lt;p&gt;&lt;strong&gt;Default&lt;/strong&gt;: &lt;code&gt;latest&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;Whether to install or uninstall Tailscale. If defined, &lt;code&gt;state&lt;/code&gt; must be either &lt;code&gt;latest&lt;/code&gt;, &lt;code&gt;present&lt;/code&gt;, or &lt;code&gt;absent&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;p&gt;This role uses &lt;code&gt;latest&lt;/code&gt; by default to help ensure your software remains up-to-date and incorporates the latest security and product features. For users who desire more control over configuration drift, &lt;code&gt;present&lt;/code&gt; will not update Tailscale if it is already installed. Changes to &lt;a href=&#34;https://raw.githubusercontent.com/artis3n/ansible-role-tailscale/main/#tailscale_args&#34;&gt;&lt;code&gt;tailscale_args&lt;/code&gt;&lt;/a&gt; will be applied under both &lt;code&gt;latest&lt;/code&gt; and &lt;code&gt;present&lt;/code&gt;; this parameter only impacts the version of Tailscale installed to the target system.&lt;/p&gt; &#xA;&lt;p&gt;If set to &lt;code&gt;absent&lt;/code&gt;, this role will de-register the Tailscale node (if already authenticated) and clean up or disable all Tailscale artifacts added to the system.&lt;/p&gt; &#xA;&lt;p&gt;Note that neither &lt;code&gt;tailscale_authkey&lt;/code&gt; nor &lt;code&gt;tailscale_up_skip&lt;/code&gt; is required if &lt;code&gt;state&lt;/code&gt; is set to &lt;code&gt;absent&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;h3&gt;tailscale_args&lt;/h3&gt; &#xA;&lt;p&gt;Pass any additional command-line arguments to &lt;code&gt;tailscale up&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;p&gt;Note that the &lt;a href=&#34;https://docs.ansible.com/ansible/latest/collections/ansible/builtin/command_module.html&#34;&gt;command&lt;/a&gt; module is used, which does not support subshell expressions (&lt;code&gt;$()&lt;/code&gt;) or bash operations like &lt;code&gt;;&lt;/code&gt; and &lt;code&gt;&amp;amp;&lt;/code&gt;. Only &lt;code&gt;tailscale up&lt;/code&gt; arguments can be passed in.&lt;/p&gt; &#xA;&lt;p&gt;&lt;strong&gt;Do not use this for &lt;code&gt;--authkey&lt;/code&gt;.&lt;/strong&gt; Use the &lt;code&gt;tailscale_authkey&lt;/code&gt; variable instead.&lt;/p&gt; &#xA;&lt;p&gt;Any stdout/stderr output from the &lt;code&gt;tailscale&lt;/code&gt; binary will be printed. Since the tasks move quickly in this section, a 5 second pause is introduced to grant more time for users to realize a message was printed.&lt;/p&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/artis3n/ansible-role-tailscale/main/docs/images/printed_stdout.png&#34; alt=&#34;printed stdout&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;Stderrs will continue to fail the role&#39;s execution. The sensitive &lt;code&gt;--authkey&lt;/code&gt; value will be redacted by default. If you need to view the unredacted value, see &lt;a href=&#34;https://raw.githubusercontent.com/artis3n/ansible-role-tailscale/main/#insecurely_log_authkey&#34;&gt;&lt;code&gt;insecurely_log_authkey&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;h3&gt;verbose&lt;/h3&gt; &#xA;&lt;p&gt;&lt;strong&gt;Default&lt;/strong&gt;: &lt;code&gt;false&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;Whether to output additional information during role execution. Helpful for debugging and collecting information to submit in a GitHub issue on this repository.&lt;/p&gt; &#xA;&lt;h1&gt;Dependencies&lt;/h1&gt; &#xA;&lt;h2&gt;Collections&lt;/h2&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://docs.ansible.com/ansible/latest/collections/community/general/index.html&#34;&gt;&lt;code&gt;community.general&lt;/code&gt;&lt;/a&gt;&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h1&gt;Example Playbook&lt;/h1&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;- name: Servers&#xA;  hosts: all&#xA;  roles:&#xA;    - role: artis3n.tailscale&#xA;      vars:&#xA;        # Example pulling the API key from the env vars on the host running Ansible&#xA;        tailscale_authkey: &#34;{{ lookup(&#39;env&#39;, &#39;TAILSCALE_KEY&#39;) }}&#34;&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Pass arbitrary command-line arguments:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;- name: Servers&#xA;  hosts: all&#xA;  tasks:&#xA;    - name: Get AZ subnets&#xA;      ec2_vpc_subnet_facts:&#xA;        region: &#34;{{ placement.region }}&#34;&#xA;        filters:&#xA;          vpc-id: &#34;{{ vpc_id }}&#34;&#xA;          availability-zone: &#34;{{ placement.availability_zone }}&#34;&#xA;      register: subnet_info&#xA;&#xA;    - name: Set Subnet list&#xA;      set_fact:&#xA;        subnet_blocks: &#34;{{ subnet_info.subnets | map(attribute=&#39;cidr_block&#39;) | list  }}&#34;&#xA;&#xA;    - name: Configure Sysctl&#xA;      sysctl:&#xA;        name: net.ipv4.ip_forward&#xA;        value: 1&#xA;        state: present&#xA;        ignoreerrors: true&#xA;        sysctl_set: true&#xA;&#xA;    - name: Iptables Masquerade&#xA;      iptables:&#xA;        table: nat&#xA;        chain: POSTROUTING&#xA;        jump: MASQUERADE&#xA;&#xA;    - name: Configure Tailscale&#xA;      include_role:&#xA;        name: artis3n.tailscale&#xA;      vars:&#xA;        tailscale_args: &#34;--accept-routes=false --advertise-routes={{ subnet_blocks | join(&#39;,&#39;) }}&#34;&#xA;        tailscale_authkey: &#34;{{ lookup(&#39;env&#39;, &#39;TAILSCALE_KEY&#39;) }}&#34;&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Get verbose output:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;- name: Servers&#xA;  hosts: all&#xA;  roles:&#xA;    - role: artis3n.tailscale&#xA;      vars:&#xA;        verbose: true&#xA;        tailscale_authkey: &#34;{{ lookup(&#39;env&#39;, &#39;TAILSCALE_KEY&#39;) }}&#34;&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Install Tailscale, but don&#39;t authenticate to the network:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;- name: Servers&#xA;  hosts: all&#xA;  roles:&#xA;    - role: artis3n.tailscale&#xA;      vars:&#xA;        tailscale_up_skip: true&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;De-register and uninstall a Tailscale node:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;- name: Servers&#xA;  hosts: all&#xA;  roles:&#xA;    - role: artis3n.tailscale&#xA;      vars:&#xA;        state: absent&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h1&gt;License&lt;/h1&gt; &#xA;&lt;p&gt;MIT&lt;/p&gt; &#xA;&lt;h1&gt;Author Information&lt;/h1&gt; &#xA;&lt;p&gt;Ari Kalfus (&lt;a href=&#34;https://www.artis3nal.com/&#34;&gt;@artis3n&lt;/a&gt;) &lt;a href=&#34;mailto:dev@artis3nal.com&#34;&gt;dev@artis3nal.com&lt;/a&gt;&lt;/p&gt; &#xA;&lt;h1&gt;Development and Contributing&lt;/h1&gt; &#xA;&lt;p&gt;This GitHub repository uses a dedicated &#34;test&#34; Tailscale account to authenticate Tailscale during CI runs. Each Docker container creates a new authorized machine in that test account. The machines are authorized with &lt;a href=&#34;https://tailscale.com/kb/1111/ephemeral-nodes/&#34;&gt;ephemeral auth keys&lt;/a&gt; and are automatically cleaned up within 30 minutes-48 hours.&lt;/p&gt; &#xA;&lt;p&gt;This value is stored in a &lt;a href=&#34;https://docs.github.com/en/actions/reference/encrypted-secrets&#34;&gt;GitHub Action secret&lt;/a&gt; with the name &lt;code&gt;TAILSCALE_CI_KEY&lt;/code&gt;. To test this role locally, store the Tailscale ephemeral auth key in a &lt;code&gt;TAILSCALE_CI_KEY&lt;/code&gt; env var. If you are a Collaborator on this repository, you can open a GitHub CodeSpace and the &lt;code&gt;TAILSCALE_CI_KEY&lt;/code&gt; will be populated for you.&lt;/p&gt;</summary>
  </entry>
</feed>