<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom">
  <title>GitHub Dockerfile Daily Trending</title>
  <id>http://mshibanami.github.io/GitHubTrendingRSS</id>
  <updated>2023-06-04T01:35:47Z</updated>
  <subtitle>Daily Trending of Dockerfile in GitHub</subtitle>
  <link href="http://mshibanami.github.io/GitHubTrendingRSS"></link>
  <entry>
    <title>instructorUz/kubernetes-practise</title>
    <updated>2023-06-04T01:35:47Z</updated>
    <id>tag:github.com,2023-06-04:/instructorUz/kubernetes-practise</id>
    <link href="https://github.com/instructorUz/kubernetes-practise" rel="alternate"></link>
    <summary type="html">&lt;p&gt;&lt;/p&gt;&lt;hr&gt;</summary>
  </entry>
  <entry>
    <title>ministryofjustice/modernisation-platform-cp-network-test</title>
    <updated>2023-06-04T01:35:47Z</updated>
    <id>tag:github.com,2023-06-04:/ministryofjustice/modernisation-platform-cp-network-test</id>
    <link href="https://github.com/ministryofjustice/modernisation-platform-cp-network-test" rel="alternate"></link>
    <summary type="html">&lt;p&gt;Simple network testing app to be deployed in Cloud Platform in order to test connectivity between the Cloud Platform and the Modernisation Platform â€¢ This repository is defined and managed in Terraform&lt;/p&gt;&lt;hr&gt;&lt;h1&gt;Container bundled with utilities for network testing&lt;/h1&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://operations-engineering-reports.cloud-platform.service.justice.gov.uk/public-github-repositories.html#modernisation-platform-cp-network-test&#34; title=&#34;Link to report&#34;&gt;&lt;img src=&#34;https://img.shields.io/badge/dynamic/json?color=blue&amp;amp;style=for-the-badge&amp;amp;logo=github&amp;amp;label=MoJ%20Compliant&amp;amp;query=%24.result&amp;amp;url=https%3A%2F%2Foperations-engineering-reports.cloud-platform.service.justice.gov.uk%2Fapi%2Fv1%2Fcompliant_public_repositories%2Fmodernisation-platform-cp-network-test&#34; alt=&#34;repo standards badge&#34;&gt;&lt;/a&gt;&lt;/p&gt; &#xA;&lt;h2&gt;Run the Node.JS application locally&lt;/h2&gt; &#xA;&lt;pre&gt;&lt;code&gt;npm init -y&#xA;npm install express&#xA;node app.js&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Open &lt;a href=&#34;http://localhost:3000&#34;&gt;http://localhost:3000&lt;/a&gt;&lt;/p&gt; &#xA;&lt;blockquote&gt; &#xA; &lt;p&gt;The application at the moment does not have any functionality but only serves as a placeholder for potentially adding features later on. Network testing is carried out by connecting a shell into the running container and performing some diagnostic commands as shown in the sections below.&lt;/p&gt; &#xA;&lt;/blockquote&gt; &#xA;&lt;h2&gt;Connect to the Cloud Platform AWS EKS cluster&lt;/h2&gt; &#xA;&lt;p&gt;Login to &lt;a href=&#34;https://login.live.cloud-platform.service.justice.gov.uk&#34;&gt;https://login.live.cloud-platform.service.justice.gov.uk&lt;/a&gt; and download the &lt;code&gt;~/.kube/config&lt;/code&gt; file.&lt;/p&gt; &#xA;&lt;p&gt;Minimize the permissions on the file&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;chmod 600 ~/.kube/config&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Tell kubectl to use this config&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;kubectl config use-context live.cloud-platform.service.justice.gov.uk&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h2&gt;Connect a shell into the running container&lt;/h2&gt; &#xA;&lt;pre&gt;&lt;code&gt;kubectl config set-context --current --namespace=nettest&#xA;kubectl get pods&#xA;kubectl exec --stdin --tty nettest-5948d76c47-g56s2 -- bash&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h2&gt;Example tests to run from within the running container&lt;/h2&gt; &#xA;&lt;p&gt;Check if the container has access to the internet&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;curl ipinfo.io&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Check if the container can access port 1521 at the IP address 10.26.12.202&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;curl --connect-timeout 5 10.26.12.202:1521&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;In the above&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;code&gt;curl: (28) Connection timed out after 5001 milliseconds&lt;/code&gt; means NO&lt;/li&gt; &#xA; &lt;li&gt;&lt;code&gt;curl: (56) Recv failure: Connection reset by peer&lt;/code&gt; means YES&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;Run a speed test&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;iperf3 -c ping.online.net -p 5209&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h2&gt;How to redeploy the container into the Cloud Platform&lt;/h2&gt; &#xA;&lt;p&gt;Change the application code and/or the Dockerfile&lt;/p&gt; &#xA;&lt;p&gt;Build the docker image&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;docker build -t nettest .&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Retrieve ECR info&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;cloud-platform decode-secret -n nettest -s ecr-repo-nettest&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Configure the AWS profile&lt;/p&gt; &#xA;&lt;p&gt;~/.aws/config&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;[profile nettest]&#xA;region = eu-west-2&#xA;output=json&#xA;aws_access_key_id=&amp;lt;refer to the ECR info above&amp;gt;&#xA;aws_secret_access_key=&amp;lt;refer to the ECR info above&amp;gt;&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Login to the repository&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;aws ecr get-login-password --region eu-west-2 --profile nettest \&#xA;| docker login --username AWS --password-stdin \&#xA;754256621582.dkr.ecr.eu-west-2.amazonaws.com&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Tag the image and push it to your ECR&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;docker tag nettest 754256621582.dkr.ecr.eu-west-2.amazonaws.com/modernisation-platform/nettest-ecr:1.2&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Push&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;docker push 754256621582.dkr.ecr.eu-west-2.amazonaws.com/modernisation-platform/nettest-ecr:1.2&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Update the image in &lt;code&gt;kubectl_deploy/deployment.yaml&lt;/code&gt;, then deploy&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;kubectl -n nettest apply -f kubectl_deploy&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Open &lt;a href=&#34;https://nettest.apps.live.cloud-platform.service.justice.gov.uk&#34;&gt;https://nettest.apps.live.cloud-platform.service.justice.gov.uk&lt;/a&gt;&lt;/p&gt; &#xA;&lt;p&gt;Additional useful commands&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;kubectl delete pod nettest-76bfd79fd9-9xfr6&#xA;kubectl describe pod nettest-76bfd79fd9-9xfr6&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h2&gt;References&lt;/h2&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://user-guide.cloud-platform.service.justice.gov.uk/documentation/getting-started/env-create.html#creating-a-cloud-platform-environment&#34;&gt;https://user-guide.cloud-platform.service.justice.gov.uk/documentation/getting-started/env-create.html#creating-a-cloud-platform-environment&lt;/a&gt;&lt;/li&gt; &#xA;&lt;/ol&gt;</summary>
  </entry>
</feed>