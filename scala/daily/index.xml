<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom">
  <title>GitHub Scala Daily Trending</title>
  <id>http://mshibanami.github.io/GitHubTrendingRSS</id>
  <updated>2022-08-02T01:54:30Z</updated>
  <subtitle>Daily Trending of Scala in GitHub</subtitle>
  <link href="http://mshibanami.github.io/GitHubTrendingRSS"></link>
  <entry>
    <title>broadinstitute/rawls</title>
    <updated>2022-08-02T01:54:30Z</updated>
    <id>tag:github.com,2022-08-02:/broadinstitute/rawls</id>
    <link href="https://github.com/broadinstitute/rawls" rel="alternate"></link>
    <summary type="html">&lt;p&gt;Rawls service for DSDE&lt;/p&gt;&lt;hr&gt;&lt;p&gt;&lt;a href=&#34;https://travis-ci.com/broadinstitute/rawls?branch=develop&#34;&gt;&lt;img src=&#34;https://github.com/broadinstitute/rawls/workflows/Scala%20tests%20with%20coverage/badge.svg?branch=develop&#34; alt=&#34;Build Status&#34;&gt;&lt;/a&gt; &lt;a href=&#34;https://codecov.io/gh/broadinstitute/rawls&#34;&gt;&lt;img src=&#34;https://img.shields.io/codecov/c/gh/broadinstitute/rawls&#34; alt=&#34;Coverage Status&#34;&gt;&lt;/a&gt; &lt;a href=&#34;https://github.com/broadinstitute/rawls/raw/master/LICENSE.txt&#34;&gt;&lt;img src=&#34;https://img.shields.io/badge/License-BSD%203--Clause-green&#34; alt=&#34;License&#34;&gt;&lt;/a&gt;&lt;/p&gt; &#xA;&lt;h1&gt;rawls&lt;/h1&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;The workspace/entity/submission/method config manager for Terra&lt;/li&gt; &#xA; &lt;li&gt;Bill Rawls, Deputy Commissioner for Operations from &lt;em&gt;The Wire&lt;/em&gt;:&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;p&gt;&lt;img src=&#34;http://vignette2.wikia.nocookie.net/thewire/images/b/b5/Rawls.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt; &#xA;&lt;h2&gt;Getting started&lt;/h2&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;git clone git@github.com:broadinstitute/rawls.git&#xA;brew install git-secrets # if not already installed&#xA;cd rawls&#xA;sbt antlr4:antlr4Generate # Generates source code for IntellIJ IDEA&#xA;./minnie-kenny.sh -f&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h2&gt;Unit Testing with MySQL in Docker&lt;/h2&gt; &#xA;&lt;p&gt;Ensure that docker is up to date and initialized. Spin up mysql locally and validate that it is working:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;./docker/run-mysql.sh start&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Run tests.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;export JAVA_OPTS=&#34;-Xmx2G -Xms1G -Dmysql.host=localhost -Dmysql.port=3310&#34;&#xA;sbt clean compile test&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;And when you&#39;re done, spin down mysql (it is also fine to leave it running for your next round of tests):&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;./docker/run-mysql.sh stop&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h2&gt;Running Locally&lt;/h2&gt; &#xA;&lt;h3&gt;Requirements:&lt;/h3&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://www.docker.com/products/docker-desktop&#34;&gt;Docker Desktop&lt;/a&gt; (4GB+, 8GB recommended)&lt;/li&gt; &#xA; &lt;li&gt;Broad internal internet connection (or VPN, non-split recommended)&lt;/li&gt; &#xA; &lt;li&gt;Render the local configuration files. From the root of the &lt;a href=&#34;https://github.com/broadinstitute/firecloud-develop&#34;&gt;firecloud-develop&lt;/a&gt; repo, run:&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;sh run-context/local/scripts/firecloud-setup.sh&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Note: this script will offer to set up configuration for several other services as well. You can skip those if you only want to set up configuration for Rawls. If this is your first time running Rawls or rendering configuration files, you will want to run through the &#34;Setup vault&#34; step. You must also have a Ruby interpreter installed at &lt;code&gt;/usr/bin/ruby&lt;/code&gt; for this script to work as expected.&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;The &lt;code&gt;/etc/hosts&lt;/code&gt; file on your machine must contain this entry (for calling Rawls endpoints):&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;127.0.0.1&#x9;local.broadinstitute.org&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h3&gt;Running:&lt;/h3&gt; &#xA;&lt;p&gt;After satisfying the above requirements, execute the following command from the root of the Rawls repo:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;./config/docker-rsync-local-rawls.sh&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;If Rawls successfully starts up, you can now access the Rawls Swagger page: &lt;a href=&#34;https://local.broadinstitute.org:20443/&#34;&gt;https://local.broadinstitute.org:20443/&lt;/a&gt;&lt;/p&gt; &#xA;&lt;h3&gt;Useful Tricks:&lt;/h3&gt; &#xA;&lt;h4&gt;Front &amp;amp; Back Rawls&lt;/h4&gt; &#xA;&lt;p&gt;By default, a locally run Rawls will boot as a &#34;front&#34; instance of Rawls. A front Rawls will serve all HTTP requests and can modify the database, but it will not do monitoring tasks such as submission monitoring, PFB imports, or Google billing project creation.&lt;/p&gt; &#xA;&lt;p&gt;If you are developing a ticket that deals with any sort of monitoring or asynchronous features, you will likely want to boot your Rawls as a &#34;back&#34; instance, which will run a fully-featured instance of Rawls with monitoring tasks enabled. To boot your local instance as a &#34;back&#34; instance, run*:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;BACK_RAWLS=true ./config/docker-rsync-local-rawls.sh&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;*&lt;strong&gt;Important&lt;/strong&gt;: It is highly recommended that use your own Cloud SQL instance when running an instance of back Rawls. See note below on database work.&lt;/p&gt; &#xA;&lt;h4&gt;Developing Database Schema Changes&lt;/h4&gt; &#xA;&lt;p&gt;If you are writing Liquibase migrations or doing database work, it is mandatory that you create your own Cloud SQL instance and develop against that. To point to your own CloudSQL instance, modify &lt;code&gt;/config/sqlproxy.env&lt;/code&gt; accordingly&lt;/p&gt; &#xA;&lt;h2&gt;Developer quick links:&lt;/h2&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Swagger UI: &lt;a href=&#34;https://rawls.dsde-dev.broadinstitute.org&#34;&gt;https://rawls.dsde-dev.broadinstitute.org&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;Jenkins: &lt;a href=&#34;https://dsde-jenkins.broadinstitute.org/job/rawls-dev-build&#34;&gt;https://dsde-jenkins.broadinstitute.org/job/rawls-dev-build&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;Running locally in docker &lt;a href=&#34;https://github.com/broadinstitute/firecloud-develop&#34;&gt;https://github.com/broadinstitute/firecloud-develop&lt;/a&gt;&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;Build Rawls docker image&lt;/h2&gt; &#xA;&lt;p&gt;Note: this may use more than 4.5 GB of Docker memory. If your Docker is not configured with enough memory (Docker for Mac defaults to 2GB), you may see a cryptic error messages saying &lt;code&gt;Killed&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;p&gt;Build Rawls jar&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;./docker/build.sh jar&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Build Rawls jar and docker image&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;./docker/build.sh jar -d build&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h2&gt;Publish rawls-model&lt;/h2&gt; &#xA;&lt;p&gt;Supported Scala versions: 2.13&lt;/p&gt; &#xA;&lt;p&gt;Running the &lt;code&gt;publishRelease.sh&lt;/code&gt; script publishes a release of rawls-model, workbench-util and workbench-google to Artifactory. You should do this manually from the base directory of the repo when you change something in &lt;code&gt;model/src&lt;/code&gt;, &lt;code&gt;util/src&lt;/code&gt; or &lt;code&gt;google/src&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://fc-jenkins.dsp-techops.broadinstitute.org/job/rawls-build/&#34;&gt;Jenkins runs &lt;code&gt;publishSnapshot.sh&lt;/code&gt; on every dev build&lt;/a&gt;, but that makes &#34;unofficial&#34; &lt;code&gt;-SNAP&lt;/code&gt; versions.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;To publish a temporary or test version, use &lt;code&gt;publishSnapshot.sh&lt;/code&gt; like so:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;VAULT_TOKEN=$(cat ~/.vault-token) ARTIFACTORY_USERNAME=dsdejenkins ARTIFACTORY_PASSWORD=$(docker run -e VAULT_TOKEN=$VAULT_TOKEN broadinstitute/dsde-toolbox vault read -field=password secret/dsp/accts/artifactory/dsdejenkins) core/src/bin/publishSnapshot.sh&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;To publish an official release, you can run the following command:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;VAULT_TOKEN=$(cat ~/.vault-token) ARTIFACTORY_USERNAME=dsdejenkins ARTIFACTORY_PASSWORD=$(docker run -e VAULT_TOKEN=$VAULT_TOKEN broadinstitute/dsde-toolbox vault read -field=password secret/dsp/accts/artifactory/dsdejenkins) core/src/bin/publishRelease.sh&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;You can view what is in the artifactory here: &lt;a href=&#34;https://broadinstitute.jfrog.io/broadinstitute/webapp/#/home&#34;&gt;https://broadinstitute.jfrog.io/broadinstitute/webapp/#/home&lt;/a&gt;&lt;/p&gt; &#xA;&lt;p&gt;After publishing:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;update &lt;a href=&#34;https://raw.githubusercontent.com/broadinstitute/rawls/develop/model/CHANGELOG.md&#34;&gt;model/CHANGELOG.md&lt;/a&gt; properly&lt;/li&gt; &#xA; &lt;li&gt;update the rawls-model dependency in the automation subdirectory, and ensure that sbt project is healthy&lt;/li&gt; &#xA; &lt;li&gt;update the rawls-model dependency in workbench-libs serviceTest, and ensure that sbt project is healthy&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;Troubleshooting&lt;/h2&gt; &#xA;&lt;p&gt;If you get this error message: &lt;code&gt;java.lang.IllegalArgumentException: invalid flag: --release&lt;/code&gt;:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Run &lt;code&gt;java -version&lt;/code&gt; and verify that you&#39;re running jdk11. If not, you will need to install / update your PATH.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;For integration test issues, see &lt;a href=&#34;https://raw.githubusercontent.com/broadinstitute/rawls/develop/automation/README.md&#34;&gt;automation/README.md&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;h2&gt;Debugging in Intellij IDEA&lt;/h2&gt; &#xA;&lt;p&gt;You can attach Intellij&#39;s interactive debugger to Rawls running locally in a docker container configured via &lt;code&gt;run-context/local/scripts/firecloud-setup.sh&lt;/code&gt; in &lt;a href=&#34;https://github.com/broadinstitute/firecloud-develop/raw/dev/run-context/local/README.md&#34;&gt;firecloud-develop&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;p&gt;Add a &#34;Remote JVM Debug&#34; configuration that attaches to &lt;code&gt;localhost&lt;/code&gt; on port &lt;code&gt;25050&lt;/code&gt;. See the link below for more detailed steps. &lt;a href=&#34;https://blog.jetbrains.com/idea/2019/04/debug-your-java-applications-in-docker-using-intellij-idea/&#34;&gt;https://blog.jetbrains.com/idea/2019/04/debug-your-java-applications-in-docker-using-intellij-idea/&lt;/a&gt;&lt;/p&gt;</summary>
  </entry>
</feed>