<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom">
  <title>GitHub Common Lisp Daily Trending</title>
  <id>http://mshibanami.github.io/GitHubTrendingRSS</id>
  <updated>2023-07-28T01:31:58Z</updated>
  <subtitle>Daily Trending of Common Lisp in GitHub</subtitle>
  <link href="http://mshibanami.github.io/GitHubTrendingRSS"></link>
  <entry>
    <title>quil-lang/quilc</title>
    <updated>2023-07-28T01:31:58Z</updated>
    <id>tag:github.com,2023-07-28:/quil-lang/quilc</id>
    <link href="https://github.com/quil-lang/quilc" rel="alternate"></link>
    <summary type="html">&lt;p&gt;The optimizing Quil compiler.&lt;/p&gt;&lt;hr&gt;&lt;h1&gt;QUILC&lt;/h1&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/rigetti/quilc/releases&#34;&gt;&lt;img src=&#34;https://img.shields.io/github/release/rigetti/quilc.svg?sanitize=true&#34; alt=&#34;github release&#34;&gt;&lt;/a&gt; &lt;a href=&#34;https://hub.docker.com/r/rigetti/quilc&#34;&gt;&lt;img src=&#34;https://img.shields.io/docker/pulls/rigetti/quilc.svg?sanitize=true&#34; alt=&#34;docker pulls&#34;&gt;&lt;/a&gt; &lt;a href=&#34;https://doi.org/10.5281/zenodo.3677536&#34;&gt;&lt;img src=&#34;https://zenodo.org/badge/DOI/10.5281/zenodo.3677536.svg?sanitize=true&#34; alt=&#34;DOI&#34;&gt;&lt;/a&gt;&lt;/p&gt; &#xA;&lt;p&gt;Quilc is an advanced optimizing compiler for the quantum instruction language Quil, licensed under the &lt;a href=&#34;https://raw.githubusercontent.com/quil-lang/quilc/master/LICENSE.txt&#34;&gt;Apache 2.0 license&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;p&gt;Quilc comprises two projects. The first, &lt;code&gt;cl-quil&lt;/code&gt;, does the heavy lifting of parsing, compiling, and optimizing Quil code. The second, &lt;code&gt;quilc&lt;/code&gt;, presents an external interface for using &lt;code&gt;cl-quil&lt;/code&gt;, either using the binary &lt;code&gt;quilc&lt;/code&gt; application directly, or alternatively by communicating with an &lt;a href=&#34;https://github.com/rigetti/rpcq/&#34;&gt;RPCQ&lt;/a&gt; server.&lt;/p&gt; &#xA;&lt;p&gt;Quil is the &lt;a href=&#34;https://quil-lang.github.io/&#34;&gt;quantum instruction language&lt;/a&gt;, originally developed at Rigetti Computing. In Quil quantum algorithms are expressed using Quil&#39;s standard gates and instructions. One can also use Quil&#39;s &lt;code&gt;DEFGATE&lt;/code&gt; to define new non-standard gates, and &lt;code&gt;DEFCIRCUIT&lt;/code&gt; to build a named circuit that can be referenced elsewhere in Quil code (analogous to a function in most other programming languages).&lt;/p&gt; &#xA;&lt;h2&gt;Quil Compiler&lt;/h2&gt; &#xA;&lt;p&gt;This directory contains the &lt;code&gt;quilc&lt;/code&gt; application. &lt;code&gt;quilc&lt;/code&gt; takes as input arbitrary Quil code, either provided directly to the binary or to the &lt;code&gt;quilc&lt;/code&gt; server, and produces optimized Quil code. The compiled code is optimized for the configured instruction set architecture (ISA), targeting the native gates specified by the ISA.&lt;/p&gt; &#xA;&lt;h3&gt;Cloning the repository&lt;/h3&gt; &#xA;&lt;p&gt;To clone the quilc repository and its bundled submodules, run the following command:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;git clone --recurse-submodules https://github.com/quil-lang/quilc.git&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h3&gt;Building the Quil Compiler&lt;/h3&gt; &#xA;&lt;p&gt;Prerequisites to building &lt;code&gt;quilc&lt;/code&gt; are:&lt;/p&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;Standard UNIX build tools&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;http://www.sbcl.org/&#34;&gt;SBCL&lt;/a&gt; (a recent version, but &lt;a href=&#34;https://raw.githubusercontent.com/quil-lang/quilc/master/#sbcl-156&#34;&gt;&lt;em&gt;not&lt;/em&gt; SBCL 1.5.6&lt;/a&gt;): Common Lisp compiler&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://www.quicklisp.org/beta/&#34;&gt;Quicklisp&lt;/a&gt;: Common Lisp library manager&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;http://zeromq.org/intro:get-the-software&#34;&gt;ZeroMQ&lt;/a&gt;: Messaging library required by RPCQ. Development headers are required at build time.&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;p&gt;Follow &lt;a href=&#34;https://github.com/quil-lang/qvm/raw/master/doc/lisp-setup.md&#34;&gt;these instructions&lt;/a&gt; to get started from scratch.&lt;/p&gt; &#xA;&lt;p&gt;One notorious dependency is &lt;a href=&#34;https://github.com/quil-lang/magicl&#34;&gt;MAGICL&lt;/a&gt;. It is available on Quicklisp, but requires you to install some system libraries such as BLAS, LAPACK, and libffi. Follow MAGICL&#39;s instructions carefully before proceeding with loading CL-QUIL or &lt;code&gt;make&lt;/code&gt;ing quilc.&lt;/p&gt; &#xA;&lt;p&gt;Once these dependencies are installed, building should be easy. Building the &lt;code&gt;quilc&lt;/code&gt; binary is automated using the &lt;code&gt;Makefile&lt;/code&gt;:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;$ make quilc&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;This will create a binary &lt;code&gt;quilc&lt;/code&gt; in the current directory&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;$ ./quilc --version&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;To install system-wide issue the command&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;$ make install&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h4&gt;Build flags&lt;/h4&gt; &#xA;&lt;p&gt;&lt;code&gt;quilc&lt;/code&gt; can be built with additional options provided to &lt;code&gt;make&lt;/code&gt; as described below:&lt;/p&gt; &#xA;&lt;table&gt; &#xA; &lt;thead&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;th&gt;Flag&lt;/th&gt; &#xA;   &lt;th&gt;Description&lt;/th&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/thead&gt; &#xA; &lt;tbody&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;&lt;code&gt;POST_LOAD_ASDF_SYSTEMS&lt;/code&gt;&lt;/td&gt; &#xA;   &lt;td&gt;Specify additional ASDF systems to load &lt;em&gt;after&lt;/em&gt; &lt;code&gt;quilc&lt;/code&gt; as part of the executable. This can be used to build &lt;code&gt;quilc&lt;/code&gt; with additional out-of-tree functionality.&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/tbody&gt; &#xA;&lt;/table&gt; &#xA;&lt;h3&gt;Using the Quil Compiler&lt;/h3&gt; &#xA;&lt;p&gt;The Quil Compiler provides two modes of interaction: (1) communicating directly with the &lt;code&gt;quilc&lt;/code&gt; binary, providing your Quil code over &lt;code&gt;stdin&lt;/code&gt;; or (2) communicating with the &lt;code&gt;quilc&lt;/code&gt; server.&lt;/p&gt; &#xA;&lt;h4&gt;quilc&lt;/h4&gt; &#xA;&lt;p&gt;The &lt;code&gt;quilc&lt;/code&gt; binary reads Quil code provided on &lt;code&gt;stdin&lt;/code&gt;:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;$ echo H 0 | quilc&#xA;$ cat large_file.quil | quilc&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h4&gt;Server&lt;/h4&gt; &#xA;&lt;p&gt;For various reasons (e.g. not having to repeatedly load the &lt;code&gt;quilc&lt;/code&gt; binary into memory, communicating over a network) &lt;code&gt;quilc&lt;/code&gt; provides a an &lt;a href=&#34;https://github.com/rigetti/rpcq/&#34;&gt;RPCQ&lt;/a&gt; server interface. &lt;a href=&#34;https://github.com/rigetti/rpcq/&#34;&gt;RPCQ&lt;/a&gt; is an open-source RPC framework developed at Rigetti for efficient network communication through the QCS stack. The server is started in RPCQ-mode using the &lt;code&gt;-R&lt;/code&gt; flag&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;$ quilc -R&#xA;+-----------------+&#xA;|  W E L C O M E  |&#xA;|   T O   T H E   |&#xA;|  R I G E T T I  |&#xA;|     Q U I L     |&#xA;| C O M P I L E R |&#xA;+-----------------+&#xA;Copyright (c) 2016-2019 Rigetti Computing.&#xA;&#xA;&amp;lt;134&amp;gt;1 2019-01-29T22:03:08Z workstation.local ./quilc 4077 LOG0001 - Launching quilc.&#xA;&amp;lt;134&amp;gt;1 2019-01-29T22:03:08Z workstation.local ./quilc 4077 - - Spawning server at (tcp://*:5555) .&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;The server-mode provides to high-level languages such as Python a way to communicate with the Quil compiler, thus enabling high-level abstractions and tools that are not directly available in Quil. The &lt;a href=&#34;https://github.com/rigetti/pyquil&#34;&gt;&lt;code&gt;pyquil&lt;/code&gt;&lt;/a&gt; library provides such an interface to &lt;code&gt;quilc&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;h2&gt;CL-QUIL&lt;/h2&gt; &#xA;&lt;p&gt;&lt;code&gt;CL-QUIL&lt;/code&gt; is the Lisp library that implements parsing and compiling of Quil code. The code can be found under &lt;code&gt;./src/&lt;/code&gt;. Other lisp libraries, including &lt;code&gt;quilc&lt;/code&gt;, can depend on it.&lt;/p&gt; &#xA;&lt;h3&gt;Usage&lt;/h3&gt; &#xA;&lt;p&gt;To get up and running quickly using the &lt;code&gt;quilc&lt;/code&gt; Docker image, head directly to the section &#34;Running the Quil Compiler with Docker&#34; below. Otherwise, the following steps will walk you through how to build the compiler from source.&lt;/p&gt; &#xA;&lt;p&gt;Follow the instructions in QVM&#39;s &lt;a href=&#34;https://github.com/quil-lang/qvm/raw/master/doc/lisp-setup.md&#34;&gt;doc/lisp-setup.md&lt;/a&gt; to satisfy the dependencies required to load the &lt;code&gt;CL-QUIL&lt;/code&gt; library. Afterwhich, the library can be loaded&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;$ sbcl&#xA;&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-common-lisp&#34;&gt;* (ql:quickload :cl-quil)&#xA;;;; &amp;lt;snip&amp;gt;compilation output&amp;lt;/snip&amp;gt;&#xA;(:CL-QUIL)&#xA;* (cl-quil:parse-quil &#34;H 0&#34;)&#xA;#&amp;lt;CL-QUIL:PARSED-PROGRAM {100312C643}&amp;gt;&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;A few good entry points to exploring the library are:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;The functions &lt;code&gt;cl-quil::parse-quil&lt;/code&gt; in &lt;a href=&#34;https://raw.githubusercontent.com/quil-lang/quilc/master/src/parser.lisp&#34;&gt;&lt;code&gt;src/parser.lisp&lt;/code&gt;&lt;/a&gt;, and &lt;code&gt;cl-quil:parse-quil&lt;/code&gt; in &lt;a href=&#34;https://raw.githubusercontent.com/quil-lang/quilc/master/src/cl-quil.lisp&#34;&gt;&lt;code&gt;src/cl-quil.lisp&lt;/code&gt;&lt;/a&gt; and the various transforms therein.&lt;/li&gt; &#xA; &lt;li&gt;The function &lt;code&gt;cl-quil:compiler-hook&lt;/code&gt; which constructs a control-flow graph (CFG) and then performs various optimizations on the CFG.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;Automated Build, Test, and Release with Docker&lt;/h2&gt; &#xA;&lt;p&gt;The CI pipeline for &lt;code&gt;quilc&lt;/code&gt; produces a Docker image, available at &lt;a href=&#34;https://hub.docker.com/r/rigetti/quilc&#34;&gt;&lt;code&gt;rigetti/quilc&lt;/code&gt;&lt;/a&gt;. To get the latest stable version of &lt;code&gt;quilc&lt;/code&gt;, run &lt;code&gt;docker pull rigetti/quilc&lt;/code&gt;. To instead pull a specific version of quilc, run &lt;code&gt;docker pull rigetti/quilc:VERSION&lt;/code&gt;, where &lt;code&gt;VERSION&lt;/code&gt; is something like &lt;code&gt;1.10.4&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;p&gt;The Dockerfile for quilc builds from three parent Docker images:&lt;/p&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://hub.docker.com/r/rigetti/lisp&#34;&gt;&lt;code&gt;rigetti/lisp&lt;/code&gt;&lt;/a&gt;: Contains SBCL, Quicklisp, and third-party libraries.&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://hub.docker.com/r/rigetti/rpcq&#34;&gt;&lt;code&gt;rigetti/rpcq&lt;/code&gt;&lt;/a&gt;: Contains the message spec and RPC framework used by quilc.&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://hub.docker.com/r/rigetti/qvm&#34;&gt;&lt;code&gt;rigetti/qvm&lt;/code&gt;&lt;/a&gt;: Contains the Quantum Virtual Machine, used in the quilc tests.&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;p&gt;The Dockerfile for quilc intentionally pins the versions of these three images, which means that the version numbers must be actively incremented as necessary. If the build for quilc is failing, this is probably the place to look, because the unit tests are run inside of a freshly-built quilc Docker image as part of the GitLab CI pipeline.&lt;/p&gt; &#xA;&lt;h2&gt;Running the Quil Compiler with Docker&lt;/h2&gt; &#xA;&lt;p&gt;As outlined above, the Quil Compiler supports two modes of operation: stdin and server.&lt;/p&gt; &#xA;&lt;p&gt;To run &lt;code&gt;quilc&lt;/code&gt; in stdin mode, do one either of the following:&lt;/p&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;The containerized compiler will then read whatever newline-separated Quil instructions you enter, waiting for an EOF signal (Control+d) to compile it.&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;docker run --rm -it rigetti/quilc&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;ol start=&#34;2&#34;&gt; &#xA; &lt;li&gt;You can alternatively pipe Quil instructions into the &lt;code&gt;quilc&lt;/code&gt; container if you drop the &lt;code&gt;-t&lt;/code&gt;.&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;echo H 0 | docker run --rm -i rigetti/quilc&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;To run &lt;code&gt;quilc&lt;/code&gt; in server mode, do the following:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;docker run --rm -it -p 5555:5555 rigetti/quilc -R&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;This will spawn an RPCQ-mode &lt;code&gt;quilc&lt;/code&gt; server, that you can communicate with over TCP. If you would like to change the port of the server to PORT, you can alter the command as follows:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;docker run --rm -it -p PORT:PORT rigetti/quilc -R -p PORT&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Ports 5555 and 6000 are exposed using the EXPOSE directive in the &lt;code&gt;rigetti/quilc&lt;/code&gt; image, so you can additionally use the &lt;code&gt;-P&lt;/code&gt; option to automatically bind these container ports to randomly assigned host ports. You can then inspect the mapping using &lt;code&gt;docker port CONTAINER [PORT]&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;h2&gt;Release Process&lt;/h2&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;Update &lt;code&gt;VERSION.txt&lt;/code&gt; and push the commit to &lt;code&gt;master&lt;/code&gt;.&lt;/li&gt; &#xA; &lt;li&gt;Push a git tag &lt;code&gt;vX.Y.Z&lt;/code&gt; that contains the same version number as in &lt;code&gt;VERSION.txt&lt;/code&gt;.&lt;/li&gt; &#xA; &lt;li&gt;Verify that the resulting build (triggered by pushing the tag) completes successfully.&lt;/li&gt; &#xA; &lt;li&gt;Publish a &lt;a href=&#34;https://github.com/quil-lang/quilc/releases&#34;&gt;release&lt;/a&gt; using the tag as the name.&lt;/li&gt; &#xA; &lt;li&gt;Close the &lt;a href=&#34;https://github.com/quil-lang/quilc/milestones&#34;&gt;milestone&lt;/a&gt; associated with this release, and migrate incomplete issues to the next one.&lt;/li&gt; &#xA; &lt;li&gt;Update the quilc version of downstream dependencies (if applicable, see next section).&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;h2&gt;Downstream Dependencies&lt;/h2&gt; &#xA;&lt;p&gt;Currently, there are a couple different components of the Forest SDK that depend on quilc:&lt;/p&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/quil-lang/qvm&#34;&gt;qvm&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/rigetti/pyquil&#34;&gt;pyquil&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/rigetti/forest-benchmarking&#34;&gt;forest-benchmarking&lt;/a&gt;&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;p&gt;It is the responsibility of the releaser to verify that the latest quilc release does not break the test suites of these downstream dependencies. All of these repositories pull the latest released version of quilc as part of their CI pipelines.&lt;/p&gt; &#xA;&lt;h2&gt;Benchmarking&lt;/h2&gt; &#xA;&lt;p&gt;&lt;code&gt;quilc&lt;/code&gt; offers a benchmarking suite to compare its performance against other compilers and between its own versions. To run the benchmark suite, move to the &lt;code&gt;quilc&lt;/code&gt; root directory, make sure the git submodules are checked out, and run&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;make benchmark-qasm&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h1&gt;Get involved!&lt;/h1&gt; &#xA;&lt;p&gt;We welcome and encourage community contributions! Peruse our &lt;a href=&#34;https://raw.githubusercontent.com/quil-lang/quilc/master/CONTRIBUTING.md&#34;&gt;guidelines for contributing&lt;/a&gt; to get you up to speed on expectations. Once that&#39;s clear, a good place to start is the &lt;a href=&#34;https://github.com/quil-lang/quilc/issues?q=is%3Aissue+is%3Aopen+label%3A%22good+first+issue%22&#34;&gt;good first issue&lt;/a&gt; section. If you find any bugs, please create an &lt;a href=&#34;https://github.com/quil-lang/quilc/issues?q=is%3Aissue+is%3Aopen+label%3A%22good+first+issue%22&#34;&gt;issue&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;p&gt;We look forward to meeting and working with you!&lt;/p&gt; &#xA;&lt;h1&gt;Incompatible software versions&lt;/h1&gt; &#xA;&lt;h2&gt;SBCL 1.5.6&lt;/h2&gt; &#xA;&lt;p&gt;There is &lt;a href=&#34;https://github.com/quil-lang/quilc/issues/401&#34;&gt;an issue&lt;/a&gt; with SBCL 1.5.6 that results in unhandled memory faults in &lt;code&gt;SB-VM::FUNCALLABLE-INSTANCE-TRAMP&lt;/code&gt; when attempting to run quilc compiled with that version of SBCL. The issue was resolved with SBCL commit &lt;a href=&#34;https://sourceforge.net/p/sbcl/sbcl/ci/550c4d23c77cc670fb95d7216e3c6d493bbd76eb/&#34;&gt;550c4d2&lt;/a&gt;. For this reason, it&#39;s not possible to use quilc or cl-quil with SBCL 1.5.6, but any other recent SBCL version should work fine.&lt;/p&gt;</summary>
  </entry>
</feed>