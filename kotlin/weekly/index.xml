<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom">
  <title>GitHub Kotlin Weekly Trending</title>
  <id>http://mshibanami.github.io/GitHubTrendingRSS</id>
  <updated>2024-12-31T01:52:05Z</updated>
  <subtitle>Weekly Trending of Kotlin in GitHub</subtitle>
  <link href="http://mshibanami.github.io/GitHubTrendingRSS"></link>
  <entry>
    <title>wangchenyan/ponymusic</title>
    <updated>2024-12-31T01:52:05Z</updated>
    <id>tag:github.com,2024-12-31:/wangchenyan/ponymusic</id>
    <link href="https://github.com/wangchenyan/ponymusic" rel="alternate"></link>
    <summary type="html">&lt;p&gt;An Android online music player like NetEase Cloud Music&lt;/p&gt;&lt;hr&gt;&lt;h1&gt;波尼音乐&lt;/h1&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/wangchenyan/ponymusic/master/app/src/main/res/drawable-xxhdpi/ic_launcher.webp&#34; alt=&#34;&#34;&gt;&lt;/p&gt; &#xA;&lt;h2&gt;系列文章&lt;/h2&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://juejin.cn/post/7294072229003952143&#34;&gt;重生！入门级开源音乐播放器APP —— 波尼音乐&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://juejin.im/post/5c373a32e51d4551cc6df6db&#34;&gt;Android开源在线音乐播放器——波尼音乐&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://juejin.im/post/5c373a32e51d45521315fc50&#34;&gt;Android开源音乐播放器之播放器基本功能&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://juejin.im/post/5c373a336fb9a04a016488e8&#34;&gt;Android开源音乐播放器之高仿云音乐黑胶唱片&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://juejin.im/post/5c373a336fb9a049f43b85de&#34;&gt;Android开源音乐播放器之自动滚动歌词&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://juejin.im/post/5c373a336fb9a049b82aaaaf&#34;&gt;Android开源音乐播放器之在线音乐列表自动加载更多&lt;/a&gt;&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;展示&lt;/h2&gt; &#xA;&lt;h3&gt;视频&lt;/h3&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://www.ixigua.com/7294169212384182291&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/wangchenyan/ponymusic/master/art/video_cover.jpg&#34; alt=&#34;&#34;&gt;&lt;/a&gt;&lt;/p&gt; &#xA;&lt;h3&gt;截图&lt;/h3&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/wangchenyan/ponymusic/master/art/screenshot.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt; &#xA;&lt;h2&gt;功能&lt;/h2&gt; &#xA;&lt;blockquote&gt; &#xA; &lt;p&gt;后续可能会根据大家的反馈增加或调整功能&lt;/p&gt; &#xA;&lt;/blockquote&gt; &#xA;&lt;h3&gt;本地功能&lt;/h3&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;添加和播放本地音乐文件&lt;/li&gt; &#xA; &lt;li&gt;专辑封面显示&lt;/li&gt; &#xA; &lt;li&gt;歌词显示，支持拖动歌词调节播放进度&lt;/li&gt; &#xA; &lt;li&gt;通知栏控制&lt;/li&gt; &#xA; &lt;li&gt;夜间模式&lt;/li&gt; &#xA; &lt;li&gt;定时关闭&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h3&gt;在线功能&lt;/h3&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;登录网易云&lt;/li&gt; &#xA; &lt;li&gt;同步网易云歌单&lt;/li&gt; &#xA; &lt;li&gt;每日推荐&lt;/li&gt; &#xA; &lt;li&gt;歌单广场&lt;/li&gt; &#xA; &lt;li&gt;排行榜&lt;/li&gt; &#xA; &lt;li&gt;搜索歌曲和歌单&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;体验&lt;/h2&gt; &#xA;&lt;blockquote&gt; &#xA; &lt;p&gt;欢迎大家体验，如果发现功能问题或兼容性问题，可以提 &lt;a href=&#34;https://github.com/wangchenyan/ponymusic/issues&#34;&gt;GitHub Issue&lt;/a&gt;&lt;/p&gt; &#xA;&lt;/blockquote&gt; &#xA;&lt;h3&gt;环境要求&lt;/h3&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Android 手机（系统版本为 Android 5.0 及以上）&lt;/li&gt; &#xA; &lt;li&gt;电脑（非必须）&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h3&gt;安装步骤&lt;/h3&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;搭建网易云服务器&lt;br&gt; 由于我们使用的是非官方 API，因此需要自行搭建 API 服务器。&lt;br&gt; clone &lt;a href=&#34;https://github.com/Binaryify/NeteaseCloudMusicApi&#34;&gt;NeteaseCloudMusicApi&lt;/a&gt; 服务端项目到本地，根据项目说明安装并运行服务，需要确认电脑和手机处于同一局域网&lt;/li&gt; &#xA; &lt;li&gt;安装 APP&lt;br&gt; 点击下载&lt;a href=&#34;https://github.com/wangchenyan/ponymusic/releases&#34;&gt;最新安装包&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;设置域名&lt;br&gt; 打开 APP，点击左上角汉堡按钮，打开抽屉，点击「域名设置」，输入步骤1中的地址（包含端口）&lt;/li&gt; &#xA; &lt;li&gt;设置完成即可体验&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;h3&gt;没有电脑，如何体验？&lt;/h3&gt; &#xA;&lt;blockquote&gt; &#xA; &lt;p&gt;其实有一些同仁已经将网易云 API 服务部署到公网了，我们可以直接用🐶。&lt;/p&gt; &#xA; &lt;p&gt;这里不方便直接贴地址，下面教大家如何找到可以用的服务：&lt;/p&gt; &#xA; &lt;p&gt;用 Google 搜索「&lt;a href=&#34;https://www.google.com.hk/search?q=%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90API&#34;&gt;网易云音乐API&lt;/a&gt;」，点击搜索结果链接，如果页面打开后是下图这样（注意：非作者的 github.io 页面），恭喜！你找到了可以直接使用的服务，拷贝地址栏链接，输入到步骤3即可。&lt;/p&gt; &#xA; &lt;p&gt;如果设置域名后 APP 接口报错，说明这个域名不可用，可以尝试其他结果。&lt;/p&gt; &#xA; &lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/wangchenyan/ponymusic/master/art/api_page.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt; &#xA;&lt;/blockquote&gt; &#xA;&lt;h2&gt;更新说明&lt;/h2&gt; &#xA;&lt;p&gt;&lt;code&gt;v 2.0.0&lt;/code&gt;&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;使用 Kotlin 重写&lt;/li&gt; &#xA; &lt;li&gt;接口改为网易云音乐&lt;/li&gt; &#xA; &lt;li&gt;增加「每日推荐」、「歌单广场」、「排行榜」、「搜索」等在线功能&lt;/li&gt; &#xA; &lt;li&gt;适配到 Android 13&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;&lt;code&gt;v 1.3.0&lt;/code&gt;&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;新增歌词支持上下拖动&lt;/li&gt; &#xA; &lt;li&gt;新增支持分屏模式&lt;/li&gt; &#xA; &lt;li&gt;新增本地歌曲支持按大小和时长过滤&lt;/li&gt; &#xA; &lt;li&gt;新增下载的歌曲文件自动添加专辑封面&lt;/li&gt; &#xA; &lt;li&gt;新增编辑歌曲信息&lt;/li&gt; &#xA; &lt;li&gt;新增5.0以上系统支持联动系统媒体中心，锁屏显示播放信息&lt;/li&gt; &#xA; &lt;li&gt;修复已知bug&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;&lt;code&gt;v 1.2.3&lt;/code&gt;&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;新增通知栏播放控制&lt;/li&gt; &#xA; &lt;li&gt;修复魅族手机扫描不到音乐的问题&lt;/li&gt; &#xA; &lt;li&gt;修复已知bug&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;&lt;code&gt;v 1.2.0&lt;/code&gt;&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;修复在线音乐无法加载的问题&lt;/li&gt; &#xA; &lt;li&gt;修复弱网时播放网络歌曲导致ANR的问题&lt;/li&gt; &#xA; &lt;li&gt;修复每日启动图片无法更新的问题&lt;/li&gt; &#xA; &lt;li&gt;下载在线歌曲可以显示专辑封面了&lt;/li&gt; &#xA; &lt;li&gt;修复已知bug&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;&lt;code&gt;v 1.1.0&lt;/code&gt;&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;支持 Android 6.0 运行时权限&lt;/li&gt; &#xA; &lt;li&gt;修复已知bug&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;&lt;code&gt;v 1.0.0&lt;/code&gt;&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;First Release&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;TODO&lt;/h2&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;input type=&#34;checkbox&#34; disabled&gt; 桌面小部件 by &lt;a href=&#34;https://developer.android.com/jetpack/compose/glance/create-app-widget&#34;&gt;Glance&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;input type=&#34;checkbox&#34; checked disabled&gt; 适配 Android 14&lt;/li&gt; &#xA; &lt;li&gt;&lt;input type=&#34;checkbox&#34; checked disabled&gt; 在线音乐可以免下载加入我的音乐列表&lt;/li&gt; &#xA; &lt;li&gt;&lt;input type=&#34;checkbox&#34; disabled&gt; 在线音乐自动缓存&lt;/li&gt; &#xA; &lt;li&gt;&lt;input type=&#34;checkbox&#34; checked disabled&gt; 编辑音乐信息&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;依赖&lt;/h2&gt; &#xA;&lt;blockquote&gt; &#xA; &lt;p&gt;站在巨人的肩膀上&lt;/p&gt; &#xA;&lt;/blockquote&gt; &#xA;&lt;h3&gt;在线服务&lt;/h3&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;在线音乐: &lt;a href=&#34;https://github.com/Binaryify/NeteaseCloudMusicApi&#34;&gt;Binaryify/NeteaseCloudMusicApi: 网易云音乐 Node.js API service&lt;/a&gt;&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h3&gt;开源技术&lt;/h3&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;页面: MVVM&lt;/li&gt; &#xA; &lt;li&gt;网络: &lt;a href=&#34;https://square.github.io/retrofit/&#34;&gt;Retrofit&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;数据库: &lt;a href=&#34;https://developer.android.com/jetpack/androidx/releases/room&#34;&gt;Room&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;依赖注入: &lt;a href=&#34;https://developer.android.com/training/dependency-injection/hilt-android&#34;&gt;Hilt&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;图片: &lt;a href=&#34;https://github.com/bumptech/glide&#34;&gt;Glide&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;统计&amp;amp;崩溃收集: &lt;a href=&#34;https://firebase.google.com&#34;&gt;Firebase&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;路由框架: &lt;a href=&#34;https://github.com/wangchenyan/crouter&#34;&gt;wangchenyan/crouter: 支持组件化的 Android 路由框架&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;歌词控件: &lt;a href=&#34;https://github.com/wangchenyan/lrcview&#34;&gt;wangchenyan/lrcview: Android beautiful draggable lyric view library&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;启动任务: &lt;a href=&#34;https://github.com/wangchenyan/init&#34;&gt;wangchenyan/init: Android 启动任务调度&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;通用库: &lt;a href=&#34;https://github.com/wangchenyan/android-common&#34;&gt;wangchenyan/android-common: 个人使用的 Android 通用库&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;RecyclerView Adapter: &lt;a href=&#34;https://github.com/wangchenyan/radapter3&#34;&gt;wangchenyan/radapter3: A multitype adapter for Android recyclerview&lt;/a&gt;&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h3&gt;关键代码&lt;/h3&gt; &#xA;&lt;p&gt;黑胶唱片专辑封面绘制流程&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;override fun onDraw(canvas: Canvas) {&#xA;    // 1.绘制封面&#xA;    val cover = coverBitmap&#xA;    if (cover != null) {&#xA;        coverMatrix.setRotate(discRotation, coverCenterPoint.x.toFloat(), coverCenterPoint.y.toFloat())&#xA;        coverMatrix.preTranslate(coverStartPoint.x.toFloat(), coverStartPoint.y.toFloat())&#xA;        coverMatrix.preScale(coverSize.toFloat() / cover.width, coverSize.toFloat() / cover.height)&#xA;        canvas.drawBitmap(cover, coverMatrix, null)&#xA;    }&#xA;&#xA;    // 2.绘制黑胶唱片外侧半透明边框&#xA;    coverBorder.setBounds(&#xA;        discStartPoint.x - COVER_BORDER_WIDTH,&#xA;        discStartPoint.y - COVER_BORDER_WIDTH,&#xA;        discStartPoint.x + discBitmap.width + COVER_BORDER_WIDTH,&#xA;        discStartPoint.y + discBitmap.height + COVER_BORDER_WIDTH&#xA;    )&#xA;    coverBorder.draw(canvas)&#xA;&#xA;    // 3.绘制黑胶&#xA;    // 设置旋转中心和旋转角度，setRotate和preTranslate顺序很重要&#xA;    discMatrix.setRotate(discRotation, discCenterPoint.x.toFloat(),discCenterPoint.y.toFloat())&#xA;    // 设置图片起始坐标&#xA;    discMatrix.preTranslate(discStartPoint.x.toFloat(), discStartPoint.y.toFloat())&#xA;    canvas.drawBitmap(discBitmap, discMatrix, null)&#xA;&#xA;    // 4.绘制指针&#xA;    needleMatrix.setRotate(needleRotation, needleCenterPoint.x.toFloat(), needleCenterPoint.y.toFloat())&#xA;    needleMatrix.preTranslate(needleStartPoint.x.toFloat(), needleStartPoint.y.toFloat())&#xA;    canvas.drawBitmap(needleBitmap, needleMatrix, null)&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;歌词绘制流程&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;@Override&#xA;protected void onDraw(Canvas canvas) {&#xA;    super.onDraw(canvas);&#xA;    // 中心Y坐标&#xA;    float centerY = getHeight() / 2 + mTextSize / 2 + mAnimOffset;&#xA;&#xA;    // 无歌词文件&#xA;    if (!hasLrc()) {&#xA;        float centerX = (getWidth() - mCurrentPaint.measureText(label)) / 2;&#xA;        canvas.drawText(label, centerX, centerY, mCurrentPaint);&#xA;        return;&#xA;    }&#xA;&#xA;    // 画当前行&#xA;    String currStr = mLrcTexts.get(mCurrentLine);&#xA;    float currX = (getWidth() - mCurrentPaint.measureText(currStr)) / 2;&#xA;    canvas.drawText(currStr, currX, centerY, mCurrentPaint);&#xA;&#xA;    // 画当前行上面的&#xA;    for (int i = mCurrentLine - 1; i &amp;gt;= 0; i--) {&#xA;        String upStr = mLrcTexts.get(i);&#xA;        float upX = (getWidth() - mNormalPaint.measureText(upStr)) / 2;&#xA;        float upY = centerY - (mTextSize + mDividerHeight) * (mCurrentLine - i);&#xA;        // 超出屏幕停止绘制&#xA;        if (upY - mTextSize &amp;lt; 0) {&#xA;            break;&#xA;        }&#xA;        canvas.drawText(upStr, upX, upY, mNormalPaint);&#xA;    }&#xA;&#xA;    // 画当前行下面的&#xA;    for (int i = mCurrentLine + 1; i &amp;lt; mLrcTimes.size(); i++) {&#xA;        String downStr = mLrcTexts.get(i);&#xA;        float downX = (getWidth() - mNormalPaint.measureText(downStr)) / 2;&#xA;        float downY = centerY + (mTextSize + mDividerHeight) * (i - mCurrentLine);&#xA;        // 超出屏幕停止绘制&#xA;        if (downY &amp;gt; getHeight()) {&#xA;            break;&#xA;        }&#xA;        canvas.drawText(downStr, downX, downY, mNormalPaint);&#xA;    }&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h2&gt;关于作者&lt;/h2&gt; &#xA;&lt;p&gt;掘金: &lt;a href=&#34;https://juejin.im/user/2313028193754168&#34;&gt;https://juejin.im/user/2313028193754168&lt;/a&gt;&lt;br&gt; 微博: &lt;a href=&#34;https://weibo.com/wangchenyan1993&#34;&gt;https://weibo.com/wangchenyan1993&lt;/a&gt;&lt;/p&gt; &#xA;&lt;h2&gt;License&lt;/h2&gt; &#xA;&lt;pre&gt;&lt;code&gt;Copyright 2023 wangchenyan&#xA;&#xA;Licensed under the Apache License, Version 2.0 (the &#34;License&#34;);&#xA;you may not use this file except in compliance with the License.&#xA;You may obtain a copy of the License at&#xA;&#xA;   http://www.apache.org/licenses/LICENSE-2.0&#xA;&#xA;Unless required by applicable law or agreed to in writing, software&#xA;distributed under the License is distributed on an &#34;AS IS&#34; BASIS,&#xA;WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&#xA;See the License for the specific language governing permissions and&#xA;limitations under the License.&#xA;&lt;/code&gt;&lt;/pre&gt;</summary>
  </entry>
</feed>