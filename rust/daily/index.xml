<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom">
  <title>GitHub Rust Daily Trending</title>
  <id>http://mshibanami.github.io/GitHubTrendingRSS</id>
  <updated>2024-08-18T01:33:35Z</updated>
  <subtitle>Daily Trending of Rust in GitHub</subtitle>
  <link href="http://mshibanami.github.io/GitHubTrendingRSS"></link>
  <entry>
    <title>axodotdev/cargo-dist</title>
    <updated>2024-08-18T01:33:35Z</updated>
    <id>tag:github.com,2024-08-18:/axodotdev/cargo-dist</id>
    <link href="https://github.com/axodotdev/cargo-dist" rel="alternate"></link>
    <summary type="html">&lt;p&gt;ðŸ“¦ shippable application packaging&lt;/p&gt;&lt;hr&gt;&lt;div class=&#34;oranda-hide&#34;&gt; &#xA; &lt;h1&gt;&lt;code&gt;cargo-dist&lt;/code&gt;&lt;/h1&gt; &#xA;&lt;/div&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://crates.io/crates/cargo-dist&#34;&gt;&lt;img src=&#34;https://img.shields.io/crates/v/cargo-dist.svg?sanitize=true&#34; alt=&#34;crates.io&#34;&gt;&lt;/a&gt; &lt;a href=&#34;https://docs.rs/cargo-dist&#34;&gt;&lt;img src=&#34;https://docs.rs/cargo-dist/badge.svg?sanitize=true&#34; alt=&#34;docs&#34;&gt;&lt;/a&gt; &lt;a href=&#34;https://github.com/axodotdev/cargo-dist/actions/workflows/ci.yml&#34;&gt;&lt;img src=&#34;https://github.com/axodotdev/cargo-dist/workflows/Rust%20CI/badge.svg?branch=main&#34; alt=&#34;Rust CI&#34;&gt;&lt;/a&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;em&gt;cargo-dist distributes your binaries&lt;/em&gt;&lt;/p&gt; &#xA;&lt;p&gt;The TL;DR is that with cargo-dist set up, just doing this:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;git commit -am &#34;release: 0.2.0&#34;&#xA;git tag &#34;v0.2.0&#34;&#xA;git push&#xA;git push --tags&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Will make &lt;a href=&#34;https://github.com/axodotdev/axolotlsay/releases/tag/v0.2.0&#34;&gt;this Github Release&lt;/a&gt;:&lt;/p&gt; &#xA;&lt;p&gt;Or if you&#39;re using &lt;a href=&#34;https://opensource.axo.dev/oranda/&#34;&gt;oranda&lt;/a&gt;, you&#39;ll get &lt;a href=&#34;https://opensource.axo.dev/axolotlsay/&#34;&gt;this website&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;h2&gt;Plan, Build, Host, Publish, Announce&lt;/h2&gt; &#xA;&lt;p&gt;Cutting releases of your apps and distributing binaries for them has a lot of steps, and cargo-dist is quickly growing to try to cover them all!&lt;/p&gt; &#xA;&lt;p&gt;To accomplish this, cargo-dist functionality can be broken up into two parts:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;building (&lt;strong&gt;planning&lt;/strong&gt; the release; &lt;strong&gt;building&lt;/strong&gt; binaries and installers)&lt;/li&gt; &#xA; &lt;li&gt;distributing (&lt;strong&gt;hosting&lt;/strong&gt; artifacts; &lt;strong&gt;publishing&lt;/strong&gt; packages; &lt;strong&gt;announcing&lt;/strong&gt; releases)&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;The build functionality can be used on its own if you just want some tarballs and installers, but everything really comes together when you use the distribution functionality too.&lt;/p&gt; &#xA;&lt;h2&gt;Building&lt;/h2&gt; &#xA;&lt;p&gt;As a build tool, cargo-dist can do the following:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Pick good build flags for &#34;shippable binaries&#34;&lt;/li&gt; &#xA; &lt;li&gt;Make &lt;a href=&#34;https://opensource.axo.dev/cargo-dist/book/artifacts/archives.html&#34;&gt;tarballs&lt;/a&gt; and &lt;a href=&#34;https://opensource.axo.dev/cargo-dist/book/installers/index.html&#34;&gt;installers&lt;/a&gt; for the resulting binaries&lt;/li&gt; &#xA; &lt;li&gt;Generate &lt;a href=&#34;https://opensource.axo.dev/cargo-dist/book/reference/schema.html&#34;&gt;machine-readable manifests&lt;/a&gt; so other tools can understand the results&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;That&#39;s a short list because &#34;we make &lt;a href=&#34;https://opensource.axo.dev/cargo-dist/book/installers/index.html&#34;&gt;installers&lt;/a&gt;&#34; is doing a lot of heavy lifting. Each installer could be (and sometimes is!) an entire standalone tool with its own documentation and ecosystem.&lt;/p&gt; &#xA;&lt;h2&gt;Distributing&lt;/h2&gt; &#xA;&lt;p&gt;As a distribution tool, cargo-dist gets to flex its biggest superpower: &lt;strong&gt;it generates &lt;a href=&#34;https://opensource.axo.dev/cargo-dist/book/ci/index.html&#34;&gt;its own CI scripts&lt;/a&gt;&lt;/strong&gt;. For instance, enabling &lt;a href=&#34;https://opensource.axo.dev/cargo-dist/book/ci/index.html&#34;&gt;GitHub CI&lt;/a&gt; with &lt;code&gt;cargo dist init&lt;/code&gt; will generate release.yml, which implements the full pipeline of plan, build, host, publish, announce:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Plan &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;Waits for you to push a git tag for a new version (v1.0.0, my-app-v1.0.0, my-app/1.0.0, ...)&lt;/li&gt; &#xA;   &lt;li&gt;Selects what apps in your workspace to announce new releases for based on that tag&lt;/li&gt; &#xA;   &lt;li&gt;Generates &lt;a href=&#34;https://opensource.axo.dev/cargo-dist/book/reference/schema.html&#34;&gt;a machine-readable manifest&lt;/a&gt; with changelogs and build plans&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA; &lt;li&gt;Build &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;Spins up machines for each platform you support&lt;/li&gt; &#xA;   &lt;li&gt;Builds your &lt;a href=&#34;https://opensource.axo.dev/cargo-dist/book/artifacts/archives.html&#34;&gt;binaries and tarballs&lt;/a&gt;&lt;/li&gt; &#xA;   &lt;li&gt;Builds &lt;a href=&#34;https://opensource.axo.dev/cargo-dist/book/installers/index.html&#34;&gt;installers&lt;/a&gt; for your binaries&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA; &lt;li&gt;Publish: &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;Uploads to package managers&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA; &lt;li&gt;Host + Announce: &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;Creates (or edits) a GitHub Release&lt;/li&gt; &#xA;   &lt;li&gt;Uploads build artifacts to the Release&lt;/li&gt; &#xA;   &lt;li&gt;Adds relevant release notes from your RELEASES/CHANGELOG&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h1&gt;Read The Book!&lt;/h1&gt; &#xA;&lt;p&gt;We&#39;ve got all the docs you need over at the &lt;a href=&#34;https://axodotdev.github.io/cargo-dist/book/&#34;&gt;cargo-dist book&lt;/a&gt;!&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://opensource.axo.dev/cargo-dist/book/introduction.html&#34;&gt;Introduction&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://opensource.axo.dev/cargo-dist/book/install.html&#34;&gt;Install&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://opensource.axo.dev/cargo-dist/book/quickstart/index.html&#34;&gt;Way-Too-Quickstart&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://opensource.axo.dev/cargo-dist/book/workspaces/index.html&#34;&gt;Workspaces Guide&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://opensource.axo.dev/cargo-dist/book/reference/index.html&#34;&gt;Reference&lt;/a&gt;&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;div class=&#34;oranda-hide&#34;&gt; &#xA; &lt;h1&gt;Contributing&lt;/h1&gt; &#xA; &lt;h2&gt;Updating Snapshots&lt;/h2&gt; &#xA; &lt;p&gt;cargo-dist&#39;s tests rely on &lt;a href=&#34;https://crates.io/crates/cargo-insta&#34;&gt;cargo-insta&lt;/a&gt; for snapshot testing various outputs. This allows us to both catch regressions and also more easily review UI/output changes. If a snapshot test fails, you will need to use the &lt;code&gt;cargo insta&lt;/code&gt; CLI tool to update them:&lt;/p&gt; &#xA; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;cargo install cargo-insta&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA; &lt;p&gt;Once installed, you can review and accept the changes with:&lt;/p&gt; &#xA; &lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;cargo insta review&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA; &lt;p&gt;If you know you like the changes, just use &lt;code&gt;cargo insta accept&lt;/code&gt; to auto-apply all changes.&lt;/p&gt; &#xA; &lt;p&gt;(If you introduced brand-new snapshot tests you will also have to &lt;code&gt;git add&lt;/code&gt; them!)&lt;/p&gt; &#xA; &lt;blockquote&gt; &#xA;  &lt;p&gt;NOTE: when it succeeds, cargo-dist-schema&#39;s &lt;code&gt;emit&lt;/code&gt; test will actually commit the results back to disk to &lt;code&gt;cargo-dist-schema/cargo-dist-schema.json&lt;/code&gt; as a side-effect. This is a janky hack to make sure we have that stored and up to date at all times (the test also uses an insta snapshot but insta snapshots include an extra gunk header so it&#39;s not something we&#39;d want to link end users). The file isn&#39;t even used for anything yet, I just want it to Exist because it seems useful and important. In the future we might properly host it and have our outputs link it via a &lt;code&gt;$schema&lt;/code&gt; field.&lt;/p&gt; &#xA; &lt;/blockquote&gt; &#xA; &lt;h2&gt;Cutting Releases&lt;/h2&gt; &#xA; &lt;p&gt;cargo-dist is self-hosting, so you just need to push a git-tag with the right format to &#34;do&#34; a release. Of course there&#39;s lots of other tedious tasks that come with updating a release, and we use cargo-release to handle all those mechanical details of updating versions/headings/tags. See &lt;a href=&#34;https://opensource.axo.dev/cargo-dist/book/workspaces/cargo-release-guide.html#using-cargo-release-with-pull-requests&#34;&gt;these sections of the docs for the release workflow we use&lt;/a&gt;.&lt;/p&gt; &#xA; &lt;p&gt;TL;DR:&lt;/p&gt; &#xA; &lt;ul&gt; &#xA;  &lt;li&gt;Update CHANGELOG.md&#39;s &#34;Unreleased&#34; section to include all the release notes you want&lt;/li&gt; &#xA;  &lt;li&gt;run cargo-release as described in the docs&lt;/li&gt; &#xA;  &lt;li&gt;..you&#39;re done!&lt;/li&gt; &#xA; &lt;/ul&gt; &#xA; &lt;p&gt;Note that we&#39;ve wired up cargo-dist and cargo-release to understand the &#34;Unreleased&#34; heading so you should never edit that name, the tools will update it as needed.&lt;/p&gt; &#xA; &lt;p&gt;If that releases succeeds, we recommend updating the bootstrap version of cargo-dist as a follow up:&lt;/p&gt; &#xA; &lt;ul&gt; &#xA;  &lt;li&gt;install the version of cargo-dist you just released on your system&lt;/li&gt; &#xA;  &lt;li&gt;run &lt;code&gt;cargo dist init --yes&lt;/code&gt;&lt;/li&gt; &#xA;  &lt;li&gt;commit &#34;chore: update bootstrap dist to ...&#34;&lt;/li&gt; &#xA; &lt;/ul&gt; &#xA; &lt;p&gt;Note that as a consequence of the way we self-host, cargo-dist&#39;s published artifacts will always be built/generated by a previous version of itself. This can be problematic if you make breaking changes to cargo-dist-schema&#39;s format... so don&#39;t! Many things in the schema are intentionally optional to enable forward and backward compatibility, so this should hopefully work well!&lt;/p&gt; &#xA;&lt;/div&gt;</summary>
  </entry>
</feed>