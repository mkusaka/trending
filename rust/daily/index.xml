<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom">
  <title>GitHub Rust Daily Trending</title>
  <id>http://mshibanami.github.io/GitHubTrendingRSS</id>
  <updated>2023-05-04T01:44:50Z</updated>
  <subtitle>Daily Trending of Rust in GitHub</subtitle>
  <link href="http://mshibanami.github.io/GitHubTrendingRSS"></link>
  <entry>
    <title>pop-os/system76-scheduler</title>
    <updated>2023-05-04T01:44:50Z</updated>
    <id>tag:github.com,2023-05-04:/pop-os/system76-scheduler</id>
    <link href="https://github.com/pop-os/system76-scheduler" rel="alternate"></link>
    <summary type="html">&lt;p&gt;Auto-configure CFS and process priorities for improved desktop responsiveness&lt;/p&gt;&lt;hr&gt;&lt;h1&gt;System76 Scheduler&lt;/h1&gt; &#xA;&lt;p&gt;Scheduling service which optimizes Linux&#39;s CPU scheduler and automatically assigns process priorities for improved desktop responsiveness. Low latency CPU scheduling will be activated automatically when on AC, and the default scheduling latencies set on battery. Processes are regularly sweeped and assigned process priorities based on configuration files. When combined with &lt;a href=&#34;https://github.com/pop-os/shell/&#34;&gt;pop-shell&lt;/a&gt;, foreground processes and their sub-processes will be given higher process priority.&lt;/p&gt; &#xA;&lt;p&gt;These changes result in a noticeable improvement in the experienced smoothness and performance of applications and games. The improved responsiveness of applications is most noticeable on older systems with budget hardware, whereas games will benefit from higher framerates and reduced jitter. This is because background applications and services will be given a smaller portion of leftover CPU budget after the active process has had the most time on the CPU.&lt;/p&gt; &#xA;&lt;h2&gt;Install&lt;/h2&gt; &#xA;&lt;p&gt;Requires dependencies as defined in the &lt;a href=&#34;https://raw.githubusercontent.com/pop-os/system76-scheduler/master/debian/control&#34;&gt;debian/control&lt;/a&gt; file:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;cargo &amp;amp; rustc&lt;/li&gt; &#xA; &lt;li&gt;clang&lt;/li&gt; &#xA; &lt;li&gt;just&lt;/li&gt; &#xA; &lt;li&gt;libclang-dev&lt;/li&gt; &#xA; &lt;li&gt;libpipewire-0.3-dev&lt;/li&gt; &#xA; &lt;li&gt;pkg-config&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;Then the included justfile can be used to build and install:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;just execsnoop=$(which execsnoop-bpfcc) build-release&#xA;sudo just sysconfdir=/usr/share install&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h2&gt;DBus&lt;/h2&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Interface: &lt;code&gt;com.system76.Scheduler&lt;/code&gt;&lt;/li&gt; &#xA; &lt;li&gt;Path: &lt;code&gt;/com/system76/Scheduler&lt;/code&gt;&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;The &lt;code&gt;SetForeground(u32)&lt;/code&gt; method can be called to change the active foreground process.&lt;/p&gt; &#xA;&lt;h2&gt;Scheduler Config&lt;/h2&gt; &#xA;&lt;p&gt;The configuration file is stored at the following locations:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;System: &lt;code&gt;/etc/system76-scheduler/config.kdl&lt;/code&gt;&lt;/li&gt; &#xA; &lt;li&gt;Distribution: &lt;code&gt;/usr/share/system76-scheduler/config.kdl&lt;/code&gt;&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;Presence of the system configuration will override the distribution configuration. The documented &lt;a href=&#34;https://raw.githubusercontent.com/pop-os/system76-scheduler/master/data/config.kdl&#34;&gt;default configuration can be found here&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;p&gt;Note that if the &lt;code&gt;background&lt;/code&gt; and &lt;code&gt;foreground&lt;/code&gt; assignment profiles are defined, then foreground process management will be enabled. Likewise, if a &lt;code&gt;pipewire&lt;/code&gt; profile is defined, then pipewire process monitoring will be enabled.&lt;/p&gt; &#xA;&lt;h2&gt;Process Priority Assignments&lt;/h2&gt; &#xA;&lt;p&gt;In addition to &lt;code&gt;config.kdl&lt;/code&gt;, additional process scheduling profiles are stored in:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;User-config: &lt;code&gt;/etc/system76-scheduler/process-scheduler/&lt;/code&gt;&lt;/li&gt; &#xA; &lt;li&gt;Distribution: &lt;code&gt;/usr/share/system76-scheduler/process-scheduler/&lt;/code&gt;&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;An &lt;a href=&#34;https://raw.githubusercontent.com/pop-os/system76-scheduler/master/data/pop_os.kdl&#34;&gt;example configuration is provided here&lt;/a&gt;. It is parsed the same as the assignments and exceptions nodes in the main config, and profiles can inherit values from the previous assignment of the same name.&lt;/p&gt; &#xA;&lt;h3&gt;Profile&lt;/h3&gt; &#xA;&lt;pre&gt;&lt;code&gt;assignments {&#xA;    {{profile-name}} {{profile-properties}}&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;The &lt;code&gt;profile-name&lt;/code&gt; can refer to any name of your choice. If the name matches a previous assignment, it will inherit the values from that assignment, plus any additional profile properties assigned.&lt;/p&gt; &#xA;&lt;p&gt;The &lt;code&gt;profile-properties&lt;/code&gt; may contain any of&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt; &lt;p&gt;Niceness priority, defined as &lt;code&gt;nice=-20&lt;/code&gt; through &lt;code&gt;nice=19&lt;/code&gt;&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;A scheduler policy defined as one of:&lt;/p&gt; &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;&lt;code&gt;sched=&#34;batch&#34;&lt;/code&gt;&lt;/li&gt; &#xA;   &lt;li&gt;&lt;code&gt;sched=&#34;idle&#34;&lt;/code&gt;,&lt;/li&gt; &#xA;   &lt;li&gt;&lt;code&gt;sched=&#34;other&#34;&lt;/code&gt;&lt;/li&gt; &#xA;   &lt;li&gt;&lt;code&gt;sched=(fifo)1&lt;/code&gt; through &lt;code&gt;sched=(fifo)99&lt;/code&gt;&lt;/li&gt; &#xA;   &lt;li&gt;&lt;code&gt;sched=(rr)1&lt;/code&gt; through &lt;code&gt;sched=(rr)99&lt;/code&gt;&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;blockquote&gt; &#xA; &lt;p&gt;Realtime scheduler policies assign a priority level between 1 and 99. Higher values have higher priority. It is recommended not to set a higher priority than hardware IRQs (&amp;gt;49)&lt;/p&gt; &#xA;&lt;/blockquote&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;An I/O priority defined as one of &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;&lt;code&gt;io=&#34;idle&#34;&lt;/code&gt;&lt;/li&gt; &#xA;   &lt;li&gt;&lt;code&gt;io=(best-effort)0&lt;/code&gt; through &lt;code&gt;io=(best-effort)7&lt;/code&gt;&lt;/li&gt; &#xA;   &lt;li&gt;&lt;code&gt;io=(realtime)0&lt;/code&gt; through &lt;code&gt;io=(realtime)7&lt;/code&gt;&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;blockquote&gt; &#xA; &lt;p&gt;The best-effort and realtime classes have priority levels between 0 and 7, where 7 has the least priority, and 0 is the highest priority&lt;/p&gt; &#xA;&lt;/blockquote&gt; &#xA;&lt;h3&gt;Assignments&lt;/h3&gt; &#xA;&lt;p&gt;Each child element of a profile defines th process(es) to assign to the profile.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-kdl&#34;&gt;{{profile-name}} {{profile-properties}} {&#xA;    &#34;/match/by/cmdline&#34; {{profile-properties}}&#xA;    match-by-name {{profile-properties}}&#xA;    * {{condition-properties}} {{profile-properties}}&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;A node name starting with a &lt;code&gt;/&lt;/code&gt; is a match by command line path&lt;/li&gt; &#xA; &lt;li&gt;A node name otherwise is a match by process name&lt;/li&gt; &#xA; &lt;li&gt;&lt;code&gt;*&lt;/code&gt; matches all processes, used with additional &lt;code&gt;condition-properties&lt;/code&gt; &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;properties are &lt;a href=&#34;https://github.com/becheran/wildmatch&#34;&gt;wild-match&#39;d&lt;/a&gt;&lt;/li&gt; &#xA;   &lt;li&gt;properties may start with &lt;code&gt;!&lt;/code&gt; to exclude results matching the condition&lt;/li&gt; &#xA;   &lt;li&gt;&lt;code&gt;cgroup=&#34;cgroup-path&#34;&lt;/code&gt; matches processes by a cgroup&lt;/li&gt; &#xA;   &lt;li&gt;&lt;code&gt;parent=&#34;name&#34;&lt;/code&gt; matches processes by the process name of the parent&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;CPU Scheduler Latency Configurations&lt;/h2&gt; &#xA;&lt;h3&gt;Default&lt;/h3&gt; &#xA;&lt;p&gt;The default settings for CFS by the Linux kernel. Achieves a high level of throughput for CPU-bound tasks at the cost of increased latency for inputs. This setting is ideal for servers and laptops on battery, because low-latency scheduling sacrifices some energy efficiency for improved responsiveness.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;latency: 6ns&#xA;minimum_granularity: 0.75ms&#xA;wakeup_granularity: 1.0ms&#xA;bandwidth_size: 5us&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h3&gt;Responsive&lt;/h3&gt; &#xA;&lt;p&gt;Slightly reduces time given to CPU-bound tasks to give more time to other processes, particularly those awaiting and responding to user inputs. This can significantly improve desktop responsiveness for a slight penalty in throughput on CPU-bound tasks.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;latency: 4ns&#xA;minimum_granularity: 0.4ms&#xA;wakeup_granularity: 0.5ms&#xA;bandwidth_size: 3us&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h2&gt;License&lt;/h2&gt; &#xA;&lt;p&gt;Licensed under the &lt;a href=&#34;https://choosealicense.com/licenses/mpl-2.0/&#34;&gt;Mozilla Public License 2.0&lt;/a&gt;. Permissions of this copyleft license are conditioned on making available source code of licensed files and modifications of those files under the same license (or in certain cases, one of the GNU licenses). Copyright and license notices must be preserved. Contributors provide an express grant of patent rights. However, a larger work using the licensed work may be distributed under different terms and without source code for files added in the larger work.&lt;/p&gt; &#xA;&lt;h3&gt;Contribution&lt;/h3&gt; &#xA;&lt;p&gt;Any contribution intentionally submitted for inclusion in the work by you shall be licensed under the Mozilla Public License 2.0 (MPL-2.0). It is required to add a boilerplate copyright notice to the top of each file:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-rs&#34;&gt;// Copyright {year} {person OR org} &amp;lt;{email}&amp;gt;&#xA;// SPDX-License-Identifier: MPL-2.0&#xA;&lt;/code&gt;&lt;/pre&gt;</summary>
  </entry>
</feed>