<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom">
  <title>GitHub Rust Daily Trending</title>
  <id>http://mshibanami.github.io/GitHubTrendingRSS</id>
  <updated>2025-03-22T01:37:14Z</updated>
  <subtitle>Daily Trending of Rust in GitHub</subtitle>
  <link href="http://mshibanami.github.io/GitHubTrendingRSS"></link>
  <entry>
    <title>googlefonts/fontations</title>
    <updated>2025-03-22T01:37:14Z</updated>
    <id>tag:github.com,2025-03-22:/googlefonts/fontations</id>
    <link href="https://github.com/googlefonts/fontations" rel="alternate"></link>
    <summary type="html">&lt;p&gt;Reading and writing font files&lt;/p&gt;&lt;hr&gt;&lt;p&gt;&lt;a href=&#34;https://github.com/googlefonts/fontations/actions/workflows/rust.yml&#34;&gt;&lt;img src=&#34;https://github.com/googlefonts/fontations/actions/workflows/rust.yml/badge.svg?sanitize=true&#34; alt=&#34;CI Status&#34;&gt;&lt;/a&gt; &lt;a href=&#34;https://bugs.chromium.org/p/oss-fuzz/issues/list?sort=-opened&amp;amp;can=1&amp;amp;q=proj:fontations&#34;&gt;&lt;img src=&#34;https://oss-fuzz-build-logs.storage.googleapis.com/badges/fontations.svg?sanitize=true&#34; alt=&#34;Fuzzing Status&#34;&gt;&lt;/a&gt;&lt;/p&gt; &#xA;&lt;h1&gt;Fontations&lt;/h1&gt; &#xA;&lt;p&gt;This repo contains a number of foundational crates for reading and manipulating OpenType font files. It is motivated by a desire to have more robust and performant open tools for a variety of font engineering and production tasks. For an overview of the motivations, see &lt;a href=&#34;https://github.com/googlefonts/oxidize&#34;&gt;googlefonts/oxidize&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;h2&gt;Structure&lt;/h2&gt; &#xA;&lt;p&gt;Currently, this repo contains four main library crates: &lt;a href=&#34;https://raw.githubusercontent.com/googlefonts/fontations/main/font-types&#34;&gt;&lt;code&gt;font-types&lt;/code&gt;&lt;/a&gt;, &lt;a href=&#34;https://raw.githubusercontent.com/googlefonts/fontations/main/read-fonts&#34;&gt;&lt;code&gt;read-fonts&lt;/code&gt;&lt;/a&gt;, &lt;a href=&#34;https://raw.githubusercontent.com/googlefonts/fontations/main/write-fonts&#34;&gt;&lt;code&gt;write-fonts&lt;/code&gt;&lt;/a&gt;, and &lt;a href=&#34;https://raw.githubusercontent.com/googlefonts/fontations/main/skrifa&#34;&gt;&lt;code&gt;skrifa&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/googlefonts/fontations/main/font-types&#34;&gt;&lt;code&gt;font-types&lt;/code&gt;&lt;/a&gt; contains common definitions of the core types used in the OpenType spec. This is a small crate, and is intended as a basic dependency for any project reading or manipulating font data.&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/googlefonts/fontations/main/read-fonts&#34;&gt;&lt;code&gt;read-fonts&lt;/code&gt;&lt;/a&gt; contains code for parsing and accessing font files. It is intended to be a high performance parser, suitable for shaping. In particular this means that it performs no allocation and no copying.&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/googlefonts/fontations/main/write-fonts&#34;&gt;&lt;code&gt;write-fonts&lt;/code&gt;&lt;/a&gt; contains code for modifying and writing font data. It contains owned types representing the various tables and records in the specification, as well as code for compiling these and writing out font files. It has an optional dependency on &lt;code&gt;read-fonts&lt;/code&gt;, in which case it can also parse font data, which can then be modified and written back out to disk.&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/googlefonts/fontations/main/skrifa&#34;&gt;&lt;code&gt;skrifa&lt;/code&gt;&lt;/a&gt; is a mid level library that provides access to various types of metadata contained in a font as well as support for loading glyph outlines. &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;It&#39;s primary purpose is to replace FreeType in Google applications.&lt;/li&gt; &#xA;   &lt;li&gt;It is also used for tasks such as produce assets for &lt;a href=&#34;https://fonts.google.com/icons&#34;&gt;https://fonts.google.com/icons&lt;/a&gt;&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;depgraph&lt;/h2&gt; &#xA;&lt;p&gt;Shows the non-dev dependency relationships among the font-related crates in fontations. fontc primarily uses the fontations crates via write-fonts and skrifa.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-mermaid&#34;&gt;%% This is a map of non-dev font-related dependencies.&#xA;%% See https://mermaid.live/edit for a lightweight editing environment for&#xA;%% mermaid diagrams.&#xA;&#xA;graph LR&#xA;    %% First we define the nodes and give them short descriptions.&#xA;    %% We group them into subgraphs by repo so that the visual layout&#xA;    %% maps to the source layout, as this is intended for contributors.&#xA;    %% https://github.com/googlefonts/fontations&#xA;    subgraph fontations[fontations repo]&#xA;        fauntlet[fauntlet\ncompares Skrifa &amp;amp; freetype]&#xA;        font-types[font-types\ndefinitions of types\nfrom OpenType and a bit more]&#xA;        read-fonts[read-fonts\nparses and reads OpenType fonts]&#xA;        skrifa[skrifa\nhigher level lib\nfor reading OpenType fonts]&#xA;        write-fonts[write-fonts\ncreates and edits font-files]&#xA;    end&#xA;&#xA;    %% https://github.com/linebender/kurbo&#xA;    kurbo[kurbo\n2d curves lib]&#xA;    %% https://github.com/linebender/norad&#xA;    norad[norad\nhandles Unified Font Object files]&#xA;    %% https://github.com/PistonDevelopers/freetype-rs&#xA;    freetype-rs[freetype-rs\nbindings for the FreeType library]&#xA;&#xA;    %% Now define the edges.&#xA;    %% Made by hand on March 20, 2024, probably not completely correct.&#xA;    %% Should be easy to automate if we want to, main thing is to&#xA;    %% define the crates of interest.&#xA;    fauntlet --&amp;gt; skrifa&#xA;    fauntlet --&amp;gt; freetype-rs&#xA;    read-fonts --&amp;gt; font-types&#xA;    skrifa --&amp;gt; read-fonts&#xA;    write-fonts --&amp;gt; font-types&#xA;    write-fonts --&amp;gt; read-fonts&#xA;    write-fonts --&amp;gt; kurbo&#xA;    norad --&amp;gt; kurbo&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h2&gt;codegen&lt;/h2&gt; &#xA;&lt;p&gt;Much of the code in the &lt;code&gt;read-fonts&lt;/code&gt; and &lt;code&gt;write-fonts&lt;/code&gt; crate is generated automatically. Code generation is performed by the &lt;code&gt;font-codegen&lt;/code&gt; crate. For an overview of what we generate and how it works, see the &lt;a href=&#34;https://raw.githubusercontent.com/googlefonts/fontations/main/docs/codegen-tour.md&#34;&gt;codegen-tour&lt;/a&gt;. For an overview of how to use the &lt;code&gt;font-codegen&lt;/code&gt; crate, see the readme at &lt;a href=&#34;https://raw.githubusercontent.com/googlefonts/fontations/main/font-codegen/README.md&#34;&gt;&lt;code&gt;font-codegen/README.md&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;h2&gt;Fuzzing&lt;/h2&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Coverage can be viewed at &lt;a href=&#34;https://oss-fuzz.com/&#34;&gt;https://oss-fuzz.com/&lt;/a&gt;, and search for &#34;fontations&#34;&lt;/li&gt; &#xA; &lt;li&gt;The &lt;code&gt;fuzz/&lt;/code&gt; crate in this repo contains our fuzzers&lt;/li&gt; &#xA; &lt;li&gt;fuzzers are implemented using the &lt;a href=&#34;https://rust-fuzz.github.io/book/cargo-fuzz.html&#34;&gt;&lt;code&gt;cargo-fuzz&lt;/code&gt;&lt;/a&gt; crate&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/google/oss-fuzz&#34;&gt;oss-fuzz&lt;/a&gt; configuration lives in &lt;a href=&#34;https://github.com/google/oss-fuzz/tree/master/projects/fontations&#34;&gt;https://github.com/google/oss-fuzz/tree/master/projects/fontations&lt;/a&gt; &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;&lt;a href=&#34;https://github.com/google/oss-fuzz/raw/master/projects/fontations/build.sh&#34;&gt;build.sh&lt;/a&gt; looks for &lt;code&gt;target/x86_64-unknown-linux-gnu/release/fuzz_*&lt;/code&gt;&lt;/li&gt; &#xA;   &lt;li&gt;^ is meant to mean we can add additional fuzzers to fontations without having to touch oss-fuzz every time&lt;/li&gt; &#xA;   &lt;li&gt;&lt;code&gt;build.sh&lt;/code&gt; also controls the test corpus, look for the &lt;code&gt;git clone&lt;/code&gt; lines&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;To reproduce a fuzzer issue:&lt;/p&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;Download the file from the testcase, e.g. &lt;a href=&#34;https://oss-fuzz.com/testcase-detail/6213391169945600&#34;&gt;https://oss-fuzz.com/testcase-detail/6213391169945600&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;Build the fuzzers &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;&lt;code&gt;cargo +nightly fuzz build -O --debug-assertions&lt;/code&gt;&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA; &lt;li&gt;Pass the repro file to the fuzzer &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;&lt;code&gt;target/x86_64-unknown-linux-gnu/release/fuzz_skrifa_outline ~/Downloads/clusterfuzz-testcase-minimized-fuzz_skrifa_outline-6213391169945600&lt;/code&gt;&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;h2&gt;Performance&lt;/h2&gt; &#xA;&lt;h3&gt;Harfbuzz&lt;/h3&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/harfbuzz/harfbuzz/raw/main/perf/README.md&#34;&gt;https://github.com/harfbuzz/harfbuzz/blob/main/perf/README.md&lt;/a&gt; has instructions on running harfbuzz benchmarks, including against Fontations.&lt;/p&gt; &#xA;&lt;h2&gt;Contributing&lt;/h2&gt; &#xA;&lt;p&gt;We have included a few git hooks that you may choose to use to ensure that patches will pass CI; these are in &lt;code&gt;resources/githooks&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;p&gt;If you would like to have these run automatically when you commit or push changes, you can set this as your git hooksPath:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;git config core.hooksPath &#34;./resources/githooks&#34;&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;&lt;strong&gt;note&lt;/strong&gt;: If you wish to use the hooks on macOS, install the gnu coreutils (&lt;code&gt;brew install coreutils&lt;/code&gt;, via homebrew.)&lt;/p&gt; &#xA;&lt;h2&gt;Releasing&lt;/h2&gt; &#xA;&lt;p&gt;We use &lt;a href=&#34;https://github.com/crate-ci/cargo-release&#34;&gt;&lt;code&gt;cargo-release&lt;/code&gt;&lt;/a&gt; to help guide the release process. It can be installed with &lt;code&gt;cargo install cargo-release&lt;/code&gt;. You may need to install &lt;code&gt;pkg-config&lt;/code&gt; via your package manager for this to work.&lt;/p&gt; &#xA;&lt;p&gt;Releasing involves the following steps:&lt;/p&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt; &lt;p&gt;Determine which crates may need to be published: run &lt;code&gt;cargo release changes&lt;/code&gt; to see which crates have been modified since their last release.&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;Determine the new versions for the crates.&lt;/p&gt; &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;Before 1.0, breaking changes bump the &lt;em&gt;minor&lt;/em&gt; version number, and non-breaking changes modify the &lt;em&gt;patch&lt;/em&gt; number.&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;Update manifest versions and release. &lt;code&gt;./resources/scripts/bump-version.sh&lt;/code&gt; orchestrates this process.&lt;/p&gt; &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;&lt;code&gt;cargo release&lt;/code&gt; does all the heavy lifting&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# To see usage&#xA;./resources/scripts/bump-version.sh&#xA;# To do the thing&#xA;./resources/scripts/bump-version.sh read-fonts write-fonts patch&#xA;&lt;/code&gt;&lt;/pre&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;Commit these changes to a new branch, get it approved and merged, and switch to the up-to-date &lt;code&gt;main&lt;/code&gt;.&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;Publish the crates. &lt;code&gt;./resources/scripts/release.sh&lt;/code&gt; orchestrates the process.&lt;/p&gt; &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;You will be prompted to review changes along the way&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# To see usage&#xA;./resources/scripts/release.sh&#xA;# To do the thing&#xA;./resources/scripts/release.sh read-fonts write-fonts&#xA;&lt;/code&gt;&lt;/pre&gt; &lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;h2&gt;Skia and Chromium builds&lt;/h2&gt; &#xA;&lt;p&gt;An experimental &lt;code&gt;SkTypeface&lt;/code&gt; implementation based on Fontations exists. This build is available in the Skia and Chromium repositories. The goal is to eventually use Fontations + Skia in Chromium as a memory-safe font backend. Tracking bugs: &lt;a href=&#34;https://crbug.com/skia/14259&#34;&gt;Skia&lt;/a&gt;, &lt;a href=&#34;https://crbug.com/1446251&#34;&gt;Chromium&lt;/a&gt;. To build the backends in Skia or Chromium follow the instructions below. This process is currently only tested on Linux.&lt;/p&gt; &#xA;&lt;h3&gt;Skia build&lt;/h3&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;Download Skia &lt;a href=&#34;https://skia.org/docs/user/download/&#34;&gt;https://skia.org/docs/user/download/&lt;/a&gt;, including bazelisk&lt;/li&gt; &#xA; &lt;li&gt;&lt;code&gt;$ bazelisk build --sandbox_base=/dev/shm --with_fontations //tools/viewer //tests:FontationsTest&lt;/code&gt; (to build debug, add &lt;code&gt;-c dbg&lt;/code&gt; after &lt;code&gt;build&lt;/code&gt;) &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;You should now have executables at &lt;code&gt;bazel-bin/tests/FontationsTest&lt;/code&gt; and &lt;code&gt;bazel-bin/tools/viewer/viewer&lt;/code&gt;&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;h4&gt;Skia Fontations unit tests&lt;/h4&gt; &#xA;&lt;p&gt;Build as above, then run the executable to run tests:&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;$ bazel-bin/tests/FontationsTest&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;OR compile and test in one command:&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;$ bazelisk test --sandbox_base=/dev/shm --with_fontations //tests:FontationsTest&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h4&gt;Skia Fontations GM&lt;/h4&gt; &#xA;&lt;p&gt;Build as above then:&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;$ bazel-bin/tools/viewer/viewer --slide GM_typeface_fontations_roboto&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;OR build and run in one command:&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;$ bazelisk run --sandbox_base=/dev/shm --with_fontations //tools/viewer -- --slide GM_typeface_fontations_roboto&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h3&gt;chromium build&lt;/h3&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;Follow the instructions for &lt;a href=&#34;https://chromium.googlesource.com/chromium/src/+/main/docs/linux/build_instructions.md&#34;&gt;getting and building Chromium&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;Add &lt;code&gt;use_typeface_fontations = true&lt;/code&gt; to your &lt;code&gt;args.gn&lt;/code&gt; using &lt;code&gt;$ gn args out/&amp;lt;builddir&amp;gt;&lt;/code&gt;&lt;/li&gt; &#xA; &lt;li&gt;Build Chromium using &lt;code&gt;autoninja -C out/&amp;lt;builddir&amp;gt; chrome&lt;/code&gt;&lt;/li&gt; &#xA; &lt;li&gt;Run Chromium using &lt;code&gt;$ out/&amp;lt;builddir&amp;gt;/chrome&lt;/code&gt;&lt;/li&gt; &#xA; &lt;li&gt;Go to chrome://flags/#enable-fontations-backend and activate the flag, restart Chrome.&lt;/li&gt; &#xA; &lt;li&gt;Navigate to any URL, observe web fonts being displayed with Fontations + Skia path rendering.&lt;/li&gt; &#xA;&lt;/ol&gt;</summary>
  </entry>
</feed>