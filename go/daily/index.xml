<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom">
  <title>GitHub Go Daily Trending</title>
  <id>http://mshibanami.github.io/GitHubTrendingRSS</id>
  <updated>2023-09-29T01:27:37Z</updated>
  <subtitle>Daily Trending of Go in GitHub</subtitle>
  <link href="http://mshibanami.github.io/GitHubTrendingRSS"></link>
  <entry>
    <title>macOScontainers/rund</title>
    <updated>2023-09-29T01:27:37Z</updated>
    <id>tag:github.com,2023-09-29:/macOScontainers/rund</id>
    <link href="https://github.com/macOScontainers/rund" rel="alternate"></link>
    <summary type="html">&lt;p&gt;OCI Container Runtime for macOS&lt;/p&gt;&lt;hr&gt;&lt;h1&gt;rund&lt;/h1&gt; &#xA;&lt;div id=&#34;preamble&#34;&gt; &#xA; &lt;div class=&#34;sectionbody&#34;&gt; &#xA;  &lt;div class=&#34;paragraph&#34;&gt; &#xA;   &lt;p&gt;&lt;span class=&#34;image&#34;&gt;&lt;a class=&#34;image&#34; href=&#34;https://github.com/macoscontainers/rund/actions?query=branch%3Amain&#34;&gt;&lt;img src=&#34;https://github.com/macoscontainers/rund/workflows/CI/badge.svg?branch=main&#34; alt=&#34;GitHub Actions&#34;&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt; &#xA;  &lt;/div&gt; &#xA;  &lt;div class=&#34;paragraph&#34;&gt; &#xA;   &lt;p&gt;rund is an experimental &lt;a href=&#34;https://containerd.io&#34;&gt;containerd&lt;/a&gt; shim for running &lt;strong&gt;macOS&lt;/strong&gt; containers on macOS.&lt;/p&gt; &#xA;  &lt;/div&gt; &#xA;  &lt;div class=&#34;paragraph&#34;&gt; &#xA;   &lt;p&gt;rund doesn’t offer the usual level of container isolation that is achievable on other OSes due to limited macOS kernel API.&lt;/p&gt; &#xA;  &lt;/div&gt; &#xA;  &lt;div class=&#34;paragraph&#34;&gt; &#xA;   &lt;p&gt;What rund provides:&lt;/p&gt; &#xA;  &lt;/div&gt; &#xA;  &lt;div class=&#34;ulist&#34;&gt; &#xA;   &lt;ul&gt; &#xA;    &lt;li&gt; &lt;p&gt;Filesystem isolation via &lt;a href=&#34;https://developer.apple.com/library/archive/documentation/System/Conceptual/ManPages_iPhoneOS/man2/chroot.2.html&#34;&gt;&lt;code&gt;chroot(2)&lt;/code&gt;&lt;/a&gt;&lt;/p&gt; &lt;/li&gt; &#xA;    &lt;li&gt; &lt;p&gt;Cleanup of container processes using process group&lt;/p&gt; &lt;/li&gt; &#xA;    &lt;li&gt; &lt;p&gt;OCI Runtime Specification compatibility (to the extent it is possible on macOS)&lt;/p&gt; &lt;/li&gt; &#xA;    &lt;li&gt; &lt;p&gt;Host-network mode only&lt;/p&gt; &lt;/li&gt; &#xA;    &lt;li&gt; &lt;p&gt;bind mounts&lt;/p&gt; &lt;/li&gt; &#xA;   &lt;/ul&gt; &#xA;  &lt;/div&gt; &#xA; &lt;/div&gt; &#xA;&lt;/div&gt; &#xA;&lt;div class=&#34;sect1&#34;&gt; &#xA; &lt;h2 id=&#34;_installation_and_usage&#34;&gt;Installation and usage&lt;/h2&gt; &#xA; &lt;div class=&#34;sectionbody&#34;&gt; &#xA;  &lt;div class=&#34;paragraph&#34;&gt; &#xA;   &lt;p&gt;See &lt;a href=&#34;https://github.com/macOScontainers/homebrew-formula#readme&#34;&gt;homebrew-formula&lt;/a&gt; repository for end-user instructions.&lt;/p&gt; &#xA;  &lt;/div&gt; &#xA; &lt;/div&gt; &#xA;&lt;/div&gt; &#xA;&lt;div class=&#34;sect1&#34;&gt; &#xA; &lt;h2 id=&#34;_development&#34;&gt;Development&lt;/h2&gt; &#xA; &lt;div class=&#34;sectionbody&#34;&gt; &#xA;  &lt;div class=&#34;paragraph&#34;&gt; &#xA;   &lt;p&gt;This section describes development setup for hacking on rund code.&lt;/p&gt; &#xA;  &lt;/div&gt; &#xA;  &lt;div class=&#34;sect2&#34;&gt; &#xA;   &lt;h3 id=&#34;_prerequisites&#34;&gt;Prerequisites&lt;/h3&gt; &#xA;   &lt;div class=&#34;ulist&#34;&gt; &#xA;    &lt;ul&gt; &#xA;     &lt;li&gt; &lt;p&gt;Disable &lt;a href=&#34;https://developer.apple.com/documentation/security/disabling_and_enabling_system_integrity_protection&#34;&gt;System Integrity Protection&lt;/a&gt;. SIP &lt;a href=&#34;https://github.com/containerd/containerd/discussions/5525#discussioncomment-2685649&#34;&gt;doesn’t allow&lt;/a&gt; to &lt;code&gt;chroot&lt;/code&gt;.&lt;/p&gt; &lt;/li&gt; &#xA;     &lt;li&gt; &lt;p&gt;Install &lt;a href=&#34;https://osxfuse.github.io&#34;&gt;macFUSE&lt;/a&gt; or &lt;a href=&#34;https://www.fuse-t.org&#34;&gt;fuse-t&lt;/a&gt;&lt;/p&gt; &lt;/li&gt; &#xA;     &lt;li&gt; &lt;p&gt;Install &lt;a href=&#34;https://bindfs.org/downloads/&#34;&gt;bindfs&lt;/a&gt; using &lt;a href=&#34;https://github.com/mpartel/bindfs/issues/100#issuecomment-870699085&#34;&gt;build instructions&lt;/a&gt;&lt;/p&gt; &lt;/li&gt; &#xA;    &lt;/ul&gt; &#xA;   &lt;/div&gt; &#xA;  &lt;/div&gt; &#xA;  &lt;div class=&#34;sect2&#34;&gt; &#xA;   &lt;h3 id=&#34;containerd&#34;&gt;Usage with containerd&lt;/h3&gt; &#xA;   &lt;div class=&#34;paragraph&#34;&gt; &#xA;    &lt;p&gt;Prerequisite: &lt;a href=&#34;https://docs.github.com/en/packages/working-with-a-github-packages-registry/working-with-the-container-registry#authenticating-to-the-container-registry&#34;&gt;authenticate to GitHub Package Registry&lt;/a&gt;.&lt;/p&gt; &#xA;   &lt;/div&gt; &#xA;   &lt;div class=&#34;paragraph&#34;&gt; &#xA;    &lt;p&gt;Then, run in Terminal:&lt;/p&gt; &#xA;   &lt;/div&gt; &#xA;   &lt;div class=&#34;listingblock&#34;&gt; &#xA;    &lt;div class=&#34;content&#34;&gt; &#xA;     &lt;pre class=&#34;highlight&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;# Download rund&#xA;git clone https://github.com/macOScontainers/rund&#xA;cd rund&#xA;# Build rund&#xA;go build -o bin/ cmd/*.go&#xA;cd ..&#xA;&#xA;# Download containerd&#xA;git clone https://github.com/macOScontainers/containerd&#xA;cd containerd&#xA;# Run containerd&#xA;sudo go run cmd/containerd/main.go&#xA;&#xA;# Continue from a SEPARATE terminal, without stopping containerd&#xA;&#xA;# Download base image&#xA;cd containerd&#xA;sudo go run cmd/ctr/main.go image pull ghcr.io/macoscontainers/macos-jail/ventura:latest&#xA;&#xA;# Aaaand... Run your first macOS container!&#xA;sudo go run cmd/ctr/main.go run --rm -t --runtime &#34;$(pwd)/../rund/bin/containerd-shim-rund-v1&#34; ghcr.io/macoscontainers/macos-jail/ventura:latest my_container /bin/sh -c &#39;echo &#34;Hello from macOS container ^_^&#34;&#39;&lt;/code&gt;&lt;/pre&gt; &#xA;    &lt;/div&gt; &#xA;   &lt;/div&gt; &#xA;   &lt;div class=&#34;paragraph&#34;&gt; &#xA;    &lt;p&gt;If you want to build image from scratch, see &lt;a href=&#34;https://github.com/macOScontainers/macos-jail&#34;&gt;macos-jail&lt;/a&gt; project.&lt;/p&gt; &#xA;   &lt;/div&gt; &#xA;  &lt;/div&gt; &#xA;  &lt;div class=&#34;sect2&#34;&gt; &#xA;   &lt;h3 id=&#34;_usage_with_buildkit&#34;&gt;Usage with BuildKit&lt;/h3&gt; &#xA;   &lt;div class=&#34;paragraph&#34;&gt; &#xA;    &lt;p&gt;Perform all the steps from &lt;a href=&#34;https://raw.githubusercontent.com/macOScontainers/rund/main/#containerd&#34;&gt;Usage with containerd&lt;/a&gt;.&lt;/p&gt; &#xA;   &lt;/div&gt; &#xA;   &lt;div class=&#34;paragraph&#34;&gt; &#xA;    &lt;p&gt;Create &lt;code&gt;/etc/buildkit/buildkitd.toml&lt;/code&gt; with the following contents:&lt;/p&gt; &#xA;   &lt;/div&gt; &#xA;   &lt;div class=&#34;listingblock&#34;&gt; &#xA;    &lt;div class=&#34;content&#34;&gt; &#xA;     &lt;pre class=&#34;highlight&#34;&gt;&lt;code class=&#34;language-toml&#34; data-lang=&#34;toml&#34;&gt;[worker.containerd]&#xA;runtime = &#34;/path/to/rund/bin/containerd-shim-rund-v1&#34;&lt;/code&gt;&lt;/pre&gt; &#xA;    &lt;/div&gt; &#xA;   &lt;/div&gt; &#xA;   &lt;div class=&#34;paragraph&#34;&gt; &#xA;    &lt;p&gt;Then, from terminal:&lt;/p&gt; &#xA;   &lt;/div&gt; &#xA;   &lt;div class=&#34;listingblock&#34;&gt; &#xA;    &lt;div class=&#34;content&#34;&gt; &#xA;     &lt;pre class=&#34;highlight&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;# Download BuildKit&#xA;git clone https://github.com/macOScontainers/buildkit&#xA;&#xA;# Run BuildKit daemon&#xA;cd buildkit&#xA;sudo go run ./cmd/buildkitd&#xA;&#xA;# Continue from a SEPARATE terminal, without stopping neither containerd nor buildkitd&#xA;&#xA;# Create Dockerfile&#xA;cat &amp;lt;&amp;lt; EOF &amp;gt; Dockerfile&#xA;FROM ghcr.io/macoscontainers/macos-jail/ventura:latest&#xA;RUN echo &#34;Hello, World!&#34;&#xA;EOF&#xA;&#xA;# Aaaaad, build your first macOS image&#xA;sudo go run ./cmd/buildctl build --frontend=dockerfile.v0 --local context=. -local dockerfile=.&lt;/code&gt;&lt;/pre&gt; &#xA;    &lt;/div&gt; &#xA;   &lt;/div&gt; &#xA;  &lt;/div&gt; &#xA;  &lt;div class=&#34;sect2&#34;&gt; &#xA;   &lt;h3 id=&#34;_usage_with_docker&#34;&gt;Usage with Docker&lt;/h3&gt; &#xA;   &lt;div class=&#34;paragraph&#34;&gt; &#xA;    &lt;p&gt;Perform all the steps from &lt;a href=&#34;https://raw.githubusercontent.com/macOScontainers/rund/main/#containerd&#34;&gt;Usage with containerd&lt;/a&gt;. You don’t need BuildKit daemon to use Docker on macOS.&lt;/p&gt; &#xA;   &lt;/div&gt; &#xA;   &lt;div class=&#34;paragraph&#34;&gt; &#xA;    &lt;p&gt;Create &lt;code&gt;/etc/docker/daemon.json&lt;/code&gt; with the following contents:&lt;/p&gt; &#xA;   &lt;/div&gt; &#xA;   &lt;div class=&#34;listingblock&#34;&gt; &#xA;    &lt;div class=&#34;content&#34;&gt; &#xA;     &lt;pre class=&#34;highlight&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;{&#xA;  &#34;data-root&#34;: &#34;/private/d/&#34;,&#xA;  &#34;default-runtime&#34;: &#34;/path/to/rund/bin/containerd-shim-rund-v1&#34;,&#xA;  &#34;runtimes&#34;: {&#xA;    &#34;/path/to/rund/bin/containerd-shim-rund-v1&#34;: {&#xA;      &#34;runtimeType&#34;: &#34;/path/to/rund/bin/containerd-shim-rund-v1&#34;&#xA;    }&#xA;  }&#xA;}&lt;/code&gt;&lt;/pre&gt; &#xA;    &lt;/div&gt; &#xA;   &lt;/div&gt; &#xA;   &lt;div class=&#34;paragraph&#34;&gt; &#xA;    &lt;p&gt;Then, from terminal:&lt;/p&gt; &#xA;   &lt;/div&gt; &#xA;   &lt;div class=&#34;listingblock&#34;&gt; &#xA;    &lt;div class=&#34;content&#34;&gt; &#xA;     &lt;pre class=&#34;highlight&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;# Download Docker&#xA;git clone https://github.com/macOScontainers/moby&#xA;&#xA;# Run Docker daemon&#xA;cd moby&#xA;cp vendor.mod go.mod&#xA;cp vendor.sum go.sum&#xA;sudo go run ./cmd/dockerd&#xA;&#xA;# Continue from a SEPARATE terminal, without stopping neither containerd nor dockerd&#xA;&#xA;# Install Docker cli&#xA;brew install docker&#xA;&#xA;# Aaaand, run your first macOS native container&#xA;sudo docker run --rm -it ghcr.io/macoscontainers/macos-jail/ventura:latest echo &#34;Hello from macOS! ^_^&#34;&lt;/code&gt;&lt;/pre&gt; &#xA;    &lt;/div&gt; &#xA;   &lt;/div&gt; &#xA;  &lt;/div&gt; &#xA; &lt;/div&gt; &#xA;&lt;/div&gt;</summary>
  </entry>
</feed>