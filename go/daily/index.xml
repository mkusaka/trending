<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom">
  <title>GitHub Go Daily Trending</title>
  <id>http://mshibanami.github.io/GitHubTrendingRSS</id>
  <updated>2022-09-25T01:32:49Z</updated>
  <subtitle>Daily Trending of Go in GitHub</subtitle>
  <link href="http://mshibanami.github.io/GitHubTrendingRSS"></link>
  <entry>
    <title>deepmap/oapi-codegen</title>
    <updated>2022-09-25T01:32:49Z</updated>
    <id>tag:github.com,2022-09-25:/deepmap/oapi-codegen</id>
    <link href="https://github.com/deepmap/oapi-codegen" rel="alternate"></link>
    <summary type="html">&lt;p&gt;Generate Go client and server boilerplate from OpenAPI 3 specifications&lt;/p&gt;&lt;hr&gt;&lt;h2&gt;OpenAPI Client and Server Code Generator&lt;/h2&gt; &#xA;&lt;p&gt;⚠️ This README may be for the latest development version, which may contain unreleased changes. Please ensure you&#39;re looking at the README for the latest release version.&lt;/p&gt; &#xA;&lt;p&gt;This package contains a set of utilities for generating Go boilerplate code for services based on &lt;a href=&#34;https://github.com/OAI/OpenAPI-Specification/raw/master/versions/3.0.0.md&#34;&gt;OpenAPI 3.0&lt;/a&gt; API definitions. When working with services, it&#39;s important to have an API contract which servers and clients both implement to minimize the chances of incompatibilities. It&#39;s tedious to generate Go models which precisely correspond to OpenAPI specifications, so let our code generator do that work for you, so that you can focus on implementing the business logic for your service.&lt;/p&gt; &#xA;&lt;p&gt;We have chosen to focus on &lt;a href=&#34;https://github.com/labstack/echo&#34;&gt;Echo&lt;/a&gt; as our default HTTP routing engine, due to its speed and simplicity for the generated stubs, and &lt;a href=&#34;https://github.com/go-chi/chi&#34;&gt;Chi&lt;/a&gt;, and &lt;a href=&#34;https://github.com/gin-gonic/gin&#34;&gt;Gin&lt;/a&gt; have also been added by contributors as additional routers. We chose Echo because the &lt;code&gt;Context&lt;/code&gt; object is a mockable interface, and it allows for some advanced testing.&lt;/p&gt; &#xA;&lt;p&gt;This package tries to be too simple rather than too generic, so we&#39;ve made some design decisions in favor of simplicity, knowing that we can&#39;t generate strongly typed Go code for all possible OpenAPI Schemas. If there is a way to accomplish something via utility code or reflection, it&#39;s probably a better approach than code generation, which is fragile due to the very dynamic nature of OpenAPI and the very static nature of Go.&lt;/p&gt; &#xA;&lt;h2&gt;Overview&lt;/h2&gt; &#xA;&lt;p&gt;We&#39;re going to use the OpenAPI example of the &lt;a href=&#34;https://github.com/OAI/OpenAPI-Specification/raw/master/examples/v3.0/petstore-expanded.yaml&#34;&gt;Expanded Petstore&lt;/a&gt; in the descriptions below, please have a look at it.&lt;/p&gt; &#xA;&lt;p&gt;In order to create a Go server to serve this exact schema, you would have to write a lot of boilerplate code to perform all the marshalling and unmarshalling into objects which match the OpenAPI 3.0 definition. The code generator in this directory does a lot of that for you. You would run it like so:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;go install github.com/deepmap/oapi-codegen/cmd/oapi-codegen@latest&#xA;oapi-codegen petstore-expanded.yaml &amp;gt; petstore.gen.go&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Let&#39;s go through that &lt;code&gt;petstore.gen.go&lt;/code&gt; file to show you everything which was generated.&lt;/p&gt; &#xA;&lt;h2&gt;Generated Server Boilerplate&lt;/h2&gt; &#xA;&lt;p&gt;The &lt;code&gt;/components/schemas&lt;/code&gt; section in OpenAPI defines reusable objects, so Go types are generated for these. The Pet Store example defines &lt;code&gt;Error&lt;/code&gt;, &lt;code&gt;Pet&lt;/code&gt;, &lt;code&gt;Pets&lt;/code&gt; and &lt;code&gt;NewPet&lt;/code&gt;, so we do the same in Go:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;// Error defines model for Error.&#xA;type Error struct {&#xA;    // Error code&#xA;    Code int32 `json:&#34;code&#34;`&#xA;&#xA;    // Error message&#xA;    Message string `json:&#34;message&#34;`&#xA;}&#xA;&#xA;// NewPet defines model for NewPet.&#xA;type NewPet struct {&#xA;    // Name of the pet&#xA;    Name string `json:&#34;name&#34;`&#xA;&#xA;    // Type of the pet&#xA;    Tag *string `json:&#34;tag,omitempty&#34;`&#xA;}&#xA;&#xA;// Pet defines model for Pet.&#xA;type Pet struct {&#xA;    // Unique id of the pet&#xA;    Id int64 `json:&#34;id&#34;`&#xA;&#xA;    // Name of the pet&#xA;    Name string `json:&#34;name&#34;`&#xA;&#xA;    // Type of the pet&#xA;    Tag *string `json:&#34;tag,omitempty&#34;`&#xA;}&#xA;&#xA;// Type definition for component schema &#34;Pets&#34;&#xA;type Pets []Pet&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;It&#39;s best to define objects under &lt;code&gt;/components&lt;/code&gt; field in the schema, since those will be turned into named Go types. If you use inline types in your handler definitions, we will generate inline, anonymous Go types, but those are more tedious to deal with since you will have to redeclare them at every point of use.&lt;/p&gt; &#xA;&lt;p&gt;For each element in the &lt;code&gt;paths&lt;/code&gt; map in OpenAPI, we will generate a Go handler function in an interface object. Here is the generated Go interface for our Echo server.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;type ServerInterface interface {&#xA;    //  (GET /pets)&#xA;    FindPets(ctx echo.Context, params FindPetsParams) error&#xA;    //  (POST /pets)&#xA;    AddPet(ctx echo.Context) error&#xA;    //  (DELETE /pets/{id})&#xA;    DeletePet(ctx echo.Context, id int64) error&#xA;    //  (GET /pets/{id})&#xA;    FindPetById(ctx echo.Context, id int64) error&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;These are the functions which you will implement yourself in order to create a server conforming to the API specification. Normally, all the arguments and parameters are stored on the &lt;code&gt;echo.Context&lt;/code&gt; in handlers, so we do the tedious work of of unmarshaling the JSON automatically, simply passing values into your handlers.&lt;/p&gt; &#xA;&lt;p&gt;Notice that &lt;code&gt;FindPetById&lt;/code&gt; takes a parameter &lt;code&gt;id int64&lt;/code&gt;. All path arguments will be passed as arguments to your function, since they are mandatory.&lt;/p&gt; &#xA;&lt;p&gt;Remaining arguments can be passed in headers, query arguments or cookies. Those will be written to a &lt;code&gt;params&lt;/code&gt; object. Look at the &lt;code&gt;FindPets&lt;/code&gt; function above, it takes as input &lt;code&gt;FindPetsParams&lt;/code&gt;, which is defined as follows:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;// Parameters object for FindPets&#xA;type FindPetsParams struct {&#xA;   Tags  *[]string `json:&#34;tags,omitempty&#34;`&#xA;   Limit *int32   `json:&#34;limit,omitempty&#34;`&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;The HTTP query parameter &lt;code&gt;limit&lt;/code&gt; turns into a Go field named &lt;code&gt;Limit&lt;/code&gt;. It is passed by pointer, since it is an optional parameter. If the parameter is specified, the pointer will be non-&lt;code&gt;nil&lt;/code&gt;, and you can read its value.&lt;/p&gt; &#xA;&lt;p&gt;If you changed the OpenAPI specification to make the parameter required, the &lt;code&gt;FindPetsParams&lt;/code&gt; structure will contain the type by value:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;type FindPetsParams struct {&#xA;    Tags  *[]string `json:&#34;tags,omitempty&#34;`&#xA;    Limit int32     `json:&#34;limit&#34;`&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h3&gt;Registering handlers&lt;/h3&gt; &#xA;&lt;p&gt;There are a few ways of registering your http handler based on the type of server generated i.e. &lt;code&gt;-generate server&lt;/code&gt; or &lt;code&gt;-generate chi-server&lt;/code&gt;&lt;/p&gt; &#xA;&lt;details&gt;&#xA; &lt;summary&gt;&lt;code&gt;Echo&lt;/code&gt;&lt;/summary&gt; &#xA; &lt;p&gt;Code generated using &lt;code&gt;-generate server&lt;/code&gt;.&lt;/p&gt; &#xA; &lt;p&gt;The usage of &lt;code&gt;Echo&lt;/code&gt; is out of scope of this doc, but once you have an echo instance, we generate a utility function to help you associate your handlers with this autogenerated code. For the pet store, it looks like this:&lt;/p&gt; &#xA; &lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;func RegisterHandlers(router codegen.EchoRouter, si ServerInterface) {&#xA;    wrapper := ServerInterfaceWrapper{&#xA;        Handler: si,&#xA;    }&#xA;    router.GET(&#34;/pets&#34;, wrapper.FindPets)&#xA;    router.POST(&#34;/pets&#34;, wrapper.AddPet)&#xA;    router.DELETE(&#34;/pets/:id&#34;, wrapper.DeletePet)&#xA;    router.GET(&#34;/pets/:id&#34;, wrapper.FindPetById)&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA; &lt;p&gt;The wrapper functions referenced above contain generated code which pulls parameters off the &lt;code&gt;Echo&lt;/code&gt; request context, and unmarshals them into Go objects.&lt;/p&gt; &#xA; &lt;p&gt;You would register the generated handlers as follows:&lt;/p&gt; &#xA; &lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;func SetupHandler() {&#xA;    var myApi PetStoreImpl  // This implements the pet store interface&#xA;    e := echo.New()&#xA;    petstore.RegisterHandlers(e, &amp;amp;myApi)&#xA;    ...&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;/details&gt; &#xA;&lt;details&gt;&#xA; &lt;summary&gt;&lt;code&gt;Chi&lt;/code&gt;&lt;/summary&gt; &#xA; &lt;p&gt;Code generated using &lt;code&gt;-generate chi-server&lt;/code&gt;.&lt;/p&gt; &#xA; &lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;type PetStoreImpl struct {}&#xA;func (*PetStoreImpl) GetPets(w http.ResponseWriter, r *http.Request) {&#xA;    // Implement me&#xA;}&#xA;&#xA;func SetupHandler() {&#xA;    var myApi PetStoreImpl&#xA;&#xA;    r := chi.NewRouter()&#xA;    r.Mount(&#34;/&#34;, Handler(&amp;amp;myApi))&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;/details&gt; &#xA;&lt;details&gt;&#xA; &lt;summary&gt;&lt;code&gt;Gin&lt;/code&gt;&lt;/summary&gt; &#xA; &lt;p&gt;Code generated using &lt;code&gt;-generate gin&lt;/code&gt;.&lt;/p&gt; &#xA; &lt;p&gt;The usage of &lt;code&gt;gin&lt;/code&gt; is out of scope of this doc, but once you have an gin instance, we generate a utility function to help you associate your handlers with this autogenerated code. For the pet store, it looks like this:&lt;/p&gt; &#xA; &lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;// RegisterHandlersWithOptions creates http.Handler with additional options&#xA;func RegisterHandlersWithOptions(router *gin.Engine, si ServerInterface, options GinServerOptions) *gin.Engine {&#xA;&#x9;wrapper := ServerInterfaceWrapper{&#xA;&#x9;&#x9;Handler:            si,&#xA;&#x9;&#x9;HandlerMiddlewares: options.Middlewares,&#xA;&#x9;}&#xA;&#xA;&#x9;router.GET(options.BaseURL+&#34;/pets&#34;, wrapper.FindPets)&#xA;&#x9;router.POST(options.BaseURL+&#34;/pets&#34;, wrapper.AddPet)&#xA;&#x9;router.DELETE(options.BaseURL+&#34;/pets/:id&#34;, wrapper.DeletePet)&#xA;&#x9;router.GET(options.BaseURL+&#34;/pets/:id&#34;, wrapper.FindPetByID)&#xA;&#x9;return router&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA; &lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;import (&#xA;&#x9;&#34;github.com/gin-gonic/gin&#34;&#xA;&#x9;&#34;github.com/deepmap/oapi-codegen/examples/petstore-expanded/gin/api&#34;&#xA;&#x9;middleware &#34;github.com/deepmap/oapi-codegen/pkg/gin-middleware&#34;&#xA;)&#xA;&#xA;type PetStoreImpl struct {}&#xA;func (*PetStoreImpl) GetPets(w http.ResponseWriter, r *http.Request) {&#xA;    // Implement me&#xA;}&#xA;&#xA;func SetupHandler() {&#xA;    var myApi PetStoreImpl&#xA;&#xA;    r := gin.Default()&#xA;&#x9;  r.Use(middleware.OapiRequestValidator(swagger))&#xA;    r = api.RegisterHandlers(r, petStore)&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;/details&gt; &#xA;&lt;details&gt;&#xA; &lt;summary&gt;&lt;code&gt;net/http&lt;/code&gt;&lt;/summary&gt; &#xA; &lt;p&gt;&lt;a href=&#34;https://github.com/go-chi/chi&#34;&gt;Chi&lt;/a&gt; is 100% compatible with &lt;code&gt;net/http&lt;/code&gt; allowing the following with code generated using &lt;code&gt;-generate chi-server&lt;/code&gt;.&lt;/p&gt; &#xA; &lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;type PetStoreImpl struct {}&#xA;func (*PetStoreImpl) GetPets(w http.ResponseWriter, r *http.Request) {&#xA;    // Implement me&#xA;}&#xA;&#xA;func SetupHandler() {&#xA;    var myApi PetStoreImpl&#xA;&#xA;    http.Handle(&#34;/&#34;, Handler(&amp;amp;myApi))&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA; &lt;p&gt;Alternatively, &lt;a href=&#34;https://github.com/gorilla/mux&#34;&gt;Gorilla&lt;/a&gt; is also 100% compatible with &lt;code&gt;net/http&lt;/code&gt; and can be generated with &lt;code&gt;-generate gorilla&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;/details&gt; &#xA;&lt;h4&gt;Strict server generation&lt;/h4&gt; &#xA;&lt;p&gt;oapi-codegen also supports generating RPC inspired strict server, that will parse request bodies and encode responses. The main points of this code is to automate some parsing, abstract user code from server specific code, and also to force user code to comply with the schema. It supports binding of &lt;code&gt;application/json&lt;/code&gt; and &lt;code&gt;application/x-www-form-urlencoded&lt;/code&gt; to a struct, for &lt;code&gt;multipart&lt;/code&gt; requests it generates a &lt;code&gt;multipart.Reader&lt;/code&gt;, which can be used to either manually iterating over parts or using &lt;code&gt;runtime.BindMultipart&lt;/code&gt; function to bind the form to a struct. All other content types are represented by a &lt;code&gt;io.Reader&lt;/code&gt; interface.&lt;/p&gt; &#xA;&lt;p&gt;To form a response simply return one of the generated structs with corresponding status code and content type. For example, to return a status code 200 JSON response for a AddPet use the &lt;code&gt;AddPet200JSONResponse&lt;/code&gt; struct which will set the correct Content-Type header, status code and will marshal the response data. You can also return an error, that will cause an &lt;code&gt;Internal Server Error&lt;/code&gt; response.&lt;/p&gt; &#xA;&lt;p&gt;Short example:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;type PetStoreImpl struct {}&#xA;func (*PetStoreImpl) GetPets(ctx context.Context, request GetPetsRequestObject) (GetPetsResponseObject, error) {&#xA;    var result []Pet&#xA;&#x9;// Implement me&#xA;    return GetPets200JSONResponse(result), nil&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;For a complete example see &lt;code&gt;/examples/petstore-expanded/strict&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;p&gt;Code is generation with a configuration flag &lt;code&gt;genrate: strict-server: true&lt;/code&gt; along with any other server (echo, chi, gin and gorilla are supported). The generated strict wrapper can then be used as an implementation for &lt;code&gt;ServerInterface&lt;/code&gt;. Setup example:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;func SetupHandler() {&#xA;    var myApi PetStoreImpl&#xA;&#x9;myStrictApiHandler := api.NewStrictHandler(myApi, nil)&#xA;    e := echo.New()&#xA;    petstore.RegisterHandlers(e, &amp;amp;myStrictApiHandler)&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Strict server also has its own middlewares. It can access to both request and response structs, as well as raw request\response data. It can be used for logging the parsed request\response objects, transforming go errors into response structs, authorization, etc. Note that middlewares are server-specific.&lt;/p&gt; &#xA;&lt;h4&gt;Additional Properties in type definitions&lt;/h4&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://swagger.io/specification/#schemaObject&#34;&gt;OpenAPI Schemas&lt;/a&gt; implicitly accept &lt;code&gt;additionalProperties&lt;/code&gt;, meaning that any fields provided, but not explicitly defined via properties on the schema are accepted as input, and propagated. When unspecified, the &lt;code&gt;additionalProperties&lt;/code&gt; field is assumed to be &lt;code&gt;true&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;p&gt;Additional properties are tricky to support in Go with typing, and require lots of boilerplate code, so in this library, we assume that &lt;code&gt;additionalProperties&lt;/code&gt; defaults to &lt;code&gt;false&lt;/code&gt; and we don&#39;t generate this boilerplate. If you would like an object to accept &lt;code&gt;additionalProperties&lt;/code&gt;, specify a schema for &lt;code&gt;additionalProperties&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;p&gt;Say we declared &lt;code&gt;NewPet&lt;/code&gt; above like so:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;    NewPet:&#xA;      required:&#xA;        - name&#xA;      properties:&#xA;        name:&#xA;          type: string&#xA;        tag:&#xA;          type: string&#xA;      additionalProperties:&#xA;        type: string&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;The Go code for &lt;code&gt;NewPet&lt;/code&gt; would now look like this:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;// NewPet defines model for NewPet.&#xA;type NewPet struct {&#xA;&#x9;Name                 string            `json:&#34;name&#34;`&#xA;&#x9;Tag                  *string           `json:&#34;tag,omitempty&#34;`&#xA;&#x9;AdditionalProperties map[string]string `json:&#34;-&#34;`&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;The additionalProperties, of type &lt;code&gt;string&lt;/code&gt; become &lt;code&gt;map[string]string&lt;/code&gt;, which maps field names to instances of the &lt;code&gt;additionalProperties&lt;/code&gt; schema.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;// Getter for additional properties for NewPet. Returns the specified&#xA;// element and whether it was found&#xA;func (a NewPet) Get(fieldName string) (value string, found bool) {...}&#xA;&#xA;// Setter for additional properties for NewPet&#xA;func (a *NewPet) Set(fieldName string, value string) {...}&#xA;&#xA;// Override default JSON handling for NewPet to handle additionalProperties&#xA;func (a *NewPet) UnmarshalJSON(b []byte) error {...}&#xA;&#xA;// Override default JSON handling for NewPet to handle additionalProperties&#xA;func (a NewPet) MarshalJSON() ([]byte, error) {...}w&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;There are many special cases for &lt;code&gt;additionalProperties&lt;/code&gt;, such as having to define types for inner fields which themselves support additionalProperties, and all of them are tested via the &lt;code&gt;internal/test/components&lt;/code&gt; schemas and tests. Please look through those tests for more usage examples.&lt;/p&gt; &#xA;&lt;h4&gt;oneOf/anyOf/allOf support&lt;/h4&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;code&gt;oneOf&lt;/code&gt; and &lt;code&gt;anyOf&lt;/code&gt; are implemented using delayed parsing with the help of &lt;code&gt;json.RawMessage&lt;/code&gt;. The following schema will result in a type that has methods such as &lt;code&gt;AsCat&lt;/code&gt;, &lt;code&gt;AsDog&lt;/code&gt;, &lt;code&gt;FromCat&lt;/code&gt;, &lt;code&gt;FromDog&lt;/code&gt;, &lt;code&gt;MergeCat&lt;/code&gt;, &lt;code&gt;MergeDog&lt;/code&gt;. If the schema also includes a discriminator the generated code will also have methods such as &lt;code&gt;Discriminator&lt;/code&gt;, &lt;code&gt;ValueByDiscriminator&lt;/code&gt; and will force discriminator value in &lt;code&gt;From&lt;/code&gt; methods.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;schema:&#xA;  oneOf:&#xA;    - $ref: &#39;#/components/schemas/Cat&#39;&#xA;    - $ref: &#39;#/components/schemas/Dog&#39;&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;code&gt;allOf&lt;/code&gt; is supported, by taking the union of all the fields in all the component schemas. This is the most useful of these operations, and is commonly used to merge objects with an identifier, as in the &lt;code&gt;petstore-expanded&lt;/code&gt; example.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;Generated Client Boilerplate&lt;/h2&gt; &#xA;&lt;p&gt;Once your server is up and running, you probably want to make requests to it. If you&#39;re going to do those requests from your Go code, we also generate a client which is conformant with your schema to help in marshaling objects to JSON. It uses the same types and similar function signatures to your request handlers.&lt;/p&gt; &#xA;&lt;p&gt;The interface for the pet store looks like this:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;// The interface specification for the client above.&#xA;type ClientInterface interface {&#xA;&#xA;&#x9;// FindPets request&#xA;&#x9;FindPets(ctx context.Context, params *FindPetsParams, reqEditors ...RequestEditorFn) (*http.Response, error)&#xA;&#xA;&#x9;// AddPet request with JSON body&#xA;&#x9;AddPet(ctx context.Context, body NewPet, reqEditors ...RequestEditorFn) (*http.Response, error)&#xA;&#xA;&#x9;// DeletePet request&#xA;&#x9;DeletePet(ctx context.Context, id int64, reqEditors ...RequestEditorFn) (*http.Response, error)&#xA;&#xA;&#x9;// FindPetById request&#xA;&#x9;FindPetById(ctx context.Context, id int64, reqEditors ...RequestEditorFn) (*http.Response, error)&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;A Client object which implements the above interface is also generated:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;// Client which conforms to the OpenAPI3 specification for this service.&#xA;type Client struct {&#xA;    // The endpoint of the server conforming to this interface, with scheme,&#xA;    // https://api.deepmap.com for example.&#xA;    Server string&#xA;&#xA;    // HTTP client with any customized settings, such as certificate chains.&#xA;    Client http.Client&#xA;&#xA;    // A callback for modifying requests which are generated before sending over&#xA;    // the network.&#xA;    RequestEditors []func(ctx context.Context, req *http.Request) error&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Each operation in your OpenAPI spec will result in a client function which takes the same arguments. It&#39;s difficult to handle any arbitrary body that Swagger supports, so we&#39;ve done some special casing for bodies, and you may get more than one function for an operation with a request body.&lt;/p&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt; &lt;p&gt;If you have more than one request body type, meaning more than one media type, you will have a generic handler of this form:&lt;/p&gt; &lt;pre&gt;&lt;code&gt; AddPet(ctx context.Context, contentType string, body io.Reader)&#xA;&lt;/code&gt;&lt;/pre&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;If you have only a JSON request body, you will get:&lt;/p&gt; &lt;pre&gt;&lt;code&gt; AddPet(ctx context.Context, body NewPet)&#xA;&lt;/code&gt;&lt;/pre&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;If you have multiple request body types, which include a JSON type you will get two functions. We&#39;ve chosen to give the JSON version a shorter name, as we work with JSON and don&#39;t want to wear out our keyboards.&lt;/p&gt; &lt;pre&gt;&lt;code&gt; AddPet(ctx context.Context, body NewPet)&#xA; AddPetWithBody(ctx context.Context, contentType string, body io.Reader)&#xA;&lt;/code&gt;&lt;/pre&gt; &lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;p&gt;The Client object above is fairly flexible, since you can pass in your own &lt;code&gt;http.Client&lt;/code&gt; and a request editing callback. You can use that callback to add headers. In our middleware stack, we annotate the context with additional information such as the request ID and function tracing information, and we use the callback to propagate that information into the request headers. Still, we can&#39;t foresee all possible usages, so those functions call through to helper functions which create requests. In the case of the pet store, we have:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;// Request generator for FindPets&#xA;func NewFindPetsRequest(server string, params *FindPetsParams) (*http.Request, error) {...}&#xA;&#xA;// Request generator for AddPet with JSON body&#xA;func NewAddPetRequest(server string, body NewPet) (*http.Request, error) {...}&#xA;&#xA;// Request generator for AddPet with non-JSON body&#xA;func NewAddPetRequestWithBody(server string, contentType string, body io.Reader) (*http.Request, error) {...}&#xA;&#xA;// Request generator for DeletePet&#xA;func NewDeletePetRequest(server string, id int64) (*http.Request, error) {...}&#xA;&#xA;// Request generator for FindPetById&#xA;func NewFindPetByIdRequest(server string, id int64) (*http.Request, error) {...}&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;You can call these functions to build an &lt;code&gt;http.Request&lt;/code&gt; from Go objects, which will correspond to your request schema. They map one-to-one to the functions on the client, except that we always generate the generic non-JSON body handler.&lt;/p&gt; &#xA;&lt;p&gt;There are some caveats to using this code.&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt; &lt;p&gt;exploded, form style query arguments, which are the default argument format in OpenAPI 3.0 are undecidable. Say that I have two objects, one composed of the fields &lt;code&gt;(name=bob, id=5)&lt;/code&gt; and another which has &lt;code&gt;(name=shoe, color=brown)&lt;/code&gt;. The first parameter is named &lt;code&gt;person&lt;/code&gt; and the second is named &lt;code&gt;item&lt;/code&gt;. The default marshaling style for query args would result in &lt;code&gt;/path/?name=bob,id=5&amp;amp;name=shoe,color=brown&lt;/code&gt;. In order to tell what belongs to which object, we&#39;d have to look at all the parameters and try to deduce it, but we&#39;re lazy, so we didn&#39;t. Don&#39;t use exploded form style arguments if you&#39;re passing around objects which have similar field names. If you used unexploded form parameters, you&#39;d have &lt;code&gt;/path/?person=name,bob,id,5&amp;amp;item=name,shoe,color,brown&lt;/code&gt;, which an be parsed unambiguously.&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;Parameters can be defined via &lt;code&gt;schema&lt;/code&gt; or via &lt;code&gt;content&lt;/code&gt;. Use the &lt;code&gt;content&lt;/code&gt; form for anything other than trivial objects, they can marshal to arbitrary JSON structures. When you send them as cookie (&lt;code&gt;in: cookie&lt;/code&gt;) arguments, we will URL encode them, since JSON delimiters aren&#39;t allowed in cookies.&lt;/p&gt; &lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;Using SecurityProviders&lt;/h2&gt; &#xA;&lt;p&gt;If you generate client-code, you can use some default-provided security providers which help you to use the various OpenAPI 3 Authentication mechanism.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;    import (&#xA;        &#34;github.com/deepmap/oapi-codegen/pkg/securityprovider&#34;&#xA;    )&#xA;&#xA;    func CreateSampleProviders() error {&#xA;        // Example BasicAuth&#xA;        // See: https://swagger.io/docs/specification/authentication/basic-authentication/&#xA;        basicAuthProvider, basicAuthProviderErr := securityprovider.NewSecurityProviderBasicAuth(&#34;MY_USER&#34;, &#34;MY_PASS&#34;)&#xA;        if basicAuthProviderErr != nil {&#xA;            panic(basicAuthProviderErr)&#xA;        }&#xA;&#xA;        // Example BearerToken&#xA;        // See: https://swagger.io/docs/specification/authentication/bearer-authentication/&#xA;        bearerTokenProvider, bearerTokenProviderErr := securityprovider.NewSecurityProviderBearerToken(&#34;MY_TOKEN&#34;)&#xA;        if bearerTokenProviderErr != nil {&#xA;            panic(bearerTokenProviderErr)&#xA;        }&#xA;&#xA;        // Example ApiKey provider&#xA;        // See: https://swagger.io/docs/specification/authentication/api-keys/&#xA;        apiKeyProvider, apiKeyProviderErr := securityprovider.NewSecurityProviderApiKey(&#34;query&#34;, &#34;myApiKeyParam&#34;, &#34;MY_API_KEY&#34;)&#xA;        if apiKeyProviderErr != nil {&#xA;            panic(apiKeyProviderErr)&#xA;        }&#xA;&#xA;        // Example providing your own provider using an anonymous function wrapping in the&#xA;        // InterceptoFn adapter. The behaviour between the InterceptorFn and the Interceptor interface&#xA;        // are the same as http.HandlerFunc and http.Handler.&#xA;        customProvider := func(req *http.Request, ctx context.Context) error {&#xA;            // Just log the request header, nothing else.&#xA;            log.Println(req.Header)&#xA;            return nil&#xA;        }&#xA;&#xA;        // Exhaustive list of some defaults you can use to initialize a Client.&#xA;        // If you need to override the underlying httpClient, you can use the option&#xA;        //&#xA;        // WithHTTPClient(httpClient *http.Client)&#xA;        //&#xA;        client, clientErr := NewClient(&#34;https://api.deepmap.com&#34;, WithRequestEditorFn(apiKeyProvider.Intercept))&#xA;&#xA;        return nil&#xA;    }&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h2&gt;Extensions&lt;/h2&gt; &#xA;&lt;p&gt;&lt;code&gt;oapi-codegen&lt;/code&gt; supports the following extended properties:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt; &lt;p&gt;&lt;code&gt;x-go-type&lt;/code&gt;: specifies Go type name. It allows you to specify the type name for a schema, and will override any default value. This extended property isn&#39;t supported in all parts of OpenAPI, so please refer to the spec as to where it&#39;s allowed. Swagger validation tools will flag incorrect usage of this property.&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;&lt;code&gt;x-go-name&lt;/code&gt;: specifies Go field name. It allows you to specify the field name for a schema, and will override any default value. This extended property isn&#39;t supported in all parts of OpenAPI, so please refer to the spec as to where it&#39;s allowed. Swagger validation tools will flag incorrect usage of this property.&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;&lt;code&gt;x-oapi-codegen-extra-tags&lt;/code&gt;: adds extra Go field tags to the generated struct field. This is useful for interfacing with tag based ORM or validation libraries. The extra tags that are added are in addition to the regular json tags that are generated. If you specify your own &lt;code&gt;json&lt;/code&gt; tag, you will override the default one.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;components:&#xA;  schemas:&#xA;    Object:&#xA;      properties:&#xA;        name:&#xA;          type: string&#xA;          x-oapi-codegen-extra-tags:&#xA;            tag1: value1&#xA;            tag2: value2&#xA;&lt;/code&gt;&lt;/pre&gt; &lt;p&gt;In the example above, field &lt;code&gt;name&lt;/code&gt; will be declared as:&lt;/p&gt; &lt;pre&gt;&lt;code&gt;Name string `json:&#34;name&#34; tag1:&#34;value1&#34; tag2:&#34;value2&#34;`&#xA;&lt;/code&gt;&lt;/pre&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;&lt;code&gt;x-go-type-import&lt;/code&gt;: adds extra Go imports to your generated code. It can help you, when you want to choose your own import package for &lt;code&gt;x-go-type&lt;/code&gt;.&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;  schemas:&#xA;    Pet:&#xA;      properties:&#xA;        age:&#xA;          x-go-type: myuuid.UUID&#xA;          x-go-type-import:&#xA;            name: myuuid&#xA;            path: github.com/google/uuid&#xA;&lt;/code&gt;&lt;/pre&gt; &lt;p&gt;After code generation you will get this:&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;  import (&#xA;      ...&#xA;      myuuid &#34;github.com/google/uuid&#34;&#xA;  )&#xA;  &#xA;//Pet defines model for Pet.&#xA;  type Pet struct {&#xA;      Age *myuuid.UUID `json:&#34;age,omitempty&#34;`&#xA;  }&#xA;&#xA;&lt;/code&gt;&lt;/pre&gt; &lt;p&gt;&lt;code&gt;name&lt;/code&gt; is an optional parameter. Example:&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;components:&#xA;schemas:&#xA;  Pet:&#xA;    properties:&#xA;      age:&#xA;        x-go-type: uuid.UUID&#xA;        x-go-type-import:&#xA;          path: github.com/google/uuid&#xA;    required:&#xA;      - age&#xA;&lt;/code&gt;&lt;/pre&gt; &lt;p&gt;After code generation you will get this result:&lt;/p&gt; &lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;import (&#xA;    &#34;github.com/google/uuid&#34;&#xA;)&#xA;&#xA;// Pet defines model for Pet.&#xA;type Pet struct {&#xA;    Age uuid.UUID `json:&#34;age&#34;`&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt; &lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;Using &lt;code&gt;oapi-codegen&lt;/code&gt;&lt;/h2&gt; &#xA;&lt;p&gt;The default options for &lt;code&gt;oapi-codegen&lt;/code&gt; will generate everything; client, server, type definitions and embedded swagger spec, but you can generate subsets of those via the &lt;code&gt;-generate&lt;/code&gt; flag. It defaults to &lt;code&gt;types,client,server,spec&lt;/code&gt;, but you can specify any combination of those.&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;code&gt;types&lt;/code&gt;: generate all type definitions for all types in the OpenAPI spec. This will be everything under &lt;code&gt;#components&lt;/code&gt;, as well as request parameter, request body, and response type objects.&lt;/li&gt; &#xA; &lt;li&gt;&lt;code&gt;server&lt;/code&gt;: generate the Echo server boilerplate. &lt;code&gt;server&lt;/code&gt; requires the types in the same package to compile.&lt;/li&gt; &#xA; &lt;li&gt;&lt;code&gt;chi-server&lt;/code&gt;: generate the Chi server boilerplate. This code is dependent on that produced by the &lt;code&gt;types&lt;/code&gt; target.&lt;/li&gt; &#xA; &lt;li&gt;&lt;code&gt;client&lt;/code&gt;: generate the client boilerplate. It, too, requires the types to be present in its package.&lt;/li&gt; &#xA; &lt;li&gt;&lt;code&gt;spec&lt;/code&gt;: embed the OpenAPI spec into the generated code as a gzipped blob. This is then usable with the &lt;code&gt;OapiRequestValidator&lt;/code&gt;, or to be used by other methods that need access to the parsed OpenAPI specification&lt;/li&gt; &#xA; &lt;li&gt;&lt;code&gt;skip-fmt&lt;/code&gt;: skip running &lt;code&gt;goimports&lt;/code&gt; on the generated code. This is useful for debugging the generated file in case the spec contains weird strings.&lt;/li&gt; &#xA; &lt;li&gt;&lt;code&gt;skip-prune&lt;/code&gt;: skip pruning unused components from the spec prior to generating the code.&lt;/li&gt; &#xA; &lt;li&gt;&lt;code&gt;import-mapping&lt;/code&gt;: specifies a map of references external OpenAPI specs to go Go include paths. Please see below.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;So, for example, if you would like to produce only the server code, you could run &lt;code&gt;oapi-codegen -generate types,server&lt;/code&gt;. You could generate &lt;code&gt;types&lt;/code&gt; and &lt;code&gt;server&lt;/code&gt; into separate files, but both are required for the server code.&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;oapi-codegen&lt;/code&gt; can filter paths base on their tags in the openapi definition. Use either &lt;code&gt;-include-tags&lt;/code&gt; or &lt;code&gt;-exclude-tags&lt;/code&gt; followed by a comma-separated list of tags. For instance, to generate a server that serves all paths except those tagged with &lt;code&gt;auth&lt;/code&gt; or &lt;code&gt;admin&lt;/code&gt;, use the argument, &lt;code&gt;-exclude-tags=&#34;auth,admin&#34;&lt;/code&gt;. To generate a server that only handles &lt;code&gt;admin&lt;/code&gt; paths, use the argument &lt;code&gt;-include-tags=&#34;admin&#34;&lt;/code&gt;. When neither of these arguments is present, all paths are generated.&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;oapi-codegen&lt;/code&gt; can filter schemas based on the option &lt;code&gt;--exclude-schemas&lt;/code&gt;, which is a comma separated list of schema names. For instance, &lt;code&gt;--exclude-schemas=Pet,NewPet&lt;/code&gt; will exclude from generation schemas &lt;code&gt;Pet&lt;/code&gt; and &lt;code&gt;NewPet&lt;/code&gt;. This allow to have a in the same package a manually defined structure or interface and refer to it in the openapi spec.&lt;/p&gt; &#xA;&lt;p&gt;Since &lt;code&gt;go generate&lt;/code&gt; commands must be a single line, all the options above can make them pretty unwieldy, so you can specify all of the options in a configuration file via the &lt;code&gt;--config&lt;/code&gt; option. Please see the test under &lt;a href=&#34;https://github.com/deepmap/oapi-codegen/raw/master/internal/test/externalref/externalref.cfg.yaml&#34;&gt;&lt;code&gt;/internal/test/externalref/&lt;/code&gt;&lt;/a&gt; for an example. The structure of the file is as follows:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;package: externalref&#xA;generate:&#xA;  models: true&#xA;  embedded-spec: true&#xA;output-options:&#xA;  skip-prune: true&#xA;import-mapping:&#xA;  ./packageA/spec.yaml: github.com/deepmap/oapi-codegen/internal/test/externalref/packageA&#xA;  ./packageB/spec.yaml: github.com/deepmap/oapi-codegen/internal/test/externalref/packageB&#xA;output: externalref.gen.go&#xA;output-options:&#xA;  skip-prune: true&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Have a look at &lt;a href=&#34;https://github.com/deepmap/oapi-codegen/raw/master/cmd/oapi-codegen/oapi-codegen.go#L48&#34;&gt;&lt;code&gt;cmd/oapi-codegen/oapi-codegen.go&lt;/code&gt;&lt;/a&gt; to see all the fields on the configuration structure.&lt;/p&gt; &#xA;&lt;h3&gt;Import Mappings&lt;/h3&gt; &#xA;&lt;p&gt;OpenAPI specifications may contain references to other OpenAPI specifications, and we need some additional information in order to be able to generate correct Go code.&lt;/p&gt; &#xA;&lt;p&gt;An external reference looks like this:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;$ref: ./some_spec.yaml#/components/schemas/Type&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;We assume that you have already generated the boilerplate code for &lt;code&gt;./some_spec.yaml&lt;/code&gt; using &lt;code&gt;oapi-codegen&lt;/code&gt;, and you have a package which contains the generated code, let&#39;s call it &lt;code&gt;github.com/deepmap/some-package&lt;/code&gt;. You need to tell &lt;code&gt;oapi-codegen&lt;/code&gt; that &lt;code&gt;some_spec.yaml&lt;/code&gt; corresponds to this package, and you would do it by specifying this command line argument:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;-import-mapping=./some_spec.yaml:github.com/deepmap/some-package&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;This tells us that in order to resolve references generated from &lt;code&gt;some_spec.yaml&lt;/code&gt; we need to import &lt;code&gt;github.com/deepmap/some-package&lt;/code&gt;. You may specify multiple mappings by comma separating them in the form &lt;code&gt;key1:value1,key2:value2&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;h2&gt;What&#39;s missing or incomplete&lt;/h2&gt; &#xA;&lt;p&gt;This code is still young, and not complete, since we&#39;re filling it in as we need it. We&#39;ve not yet implemented several things:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;code&gt;patternProperties&lt;/code&gt; isn&#39;t yet supported and will exit with an error. Pattern properties were defined in JSONSchema, and the &lt;code&gt;kin-openapi&lt;/code&gt; Swagger object knows how to parse them, but they&#39;re not part of OpenAPI 3.0, so we&#39;ve left them out, as support is very complicated.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;Making changes to code generation&lt;/h2&gt; &#xA;&lt;p&gt;The code generator uses a tool to inline all the template definitions into code, so that we don&#39;t have to deal with the location of the template files. When you update any of the files under the &lt;code&gt;templates/&lt;/code&gt; directory, you will need to regenerate the template inlines:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;go generate ./pkg/codegen/templates&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;All this command does is inline the files ending in &lt;code&gt;.tmpl&lt;/code&gt; into the specified Go file.&lt;/p&gt; &#xA;&lt;p&gt;Afterwards you should run &lt;code&gt;go generate ./...&lt;/code&gt;, and the templates will be updated accordingly.&lt;/p&gt; &#xA;&lt;p&gt;Alternatively, you can provide custom templates to override built-in ones using the &lt;code&gt;-templates&lt;/code&gt; flag specifying a path to a directory containing templates files. These files &lt;strong&gt;must&lt;/strong&gt; be named identically to built-in template files (see &lt;code&gt;pkg/codegen/templates/*.tmpl&lt;/code&gt; in the source code), and will be interpreted on-the-fly at run time. Example:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;$ ls -1 my-templates/&#xA;client.tmpl&#xA;typedef.tmpl&#xA;$ oapi-codegen \&#xA;    -templates my-templates/ \&#xA;    -generate types,client \&#xA;    petstore-expanded.yaml&#xA;&lt;/code&gt;&lt;/pre&gt;</summary>
  </entry>
  <entry>
    <title>vitessio/vitess</title>
    <updated>2022-09-25T01:32:49Z</updated>
    <id>tag:github.com,2022-09-25:/vitessio/vitess</id>
    <link href="https://github.com/vitessio/vitess" rel="alternate"></link>
    <summary type="html">&lt;p&gt;Vitess is a database clustering system for horizontal scaling of MySQL.&lt;/p&gt;&lt;hr&gt;&lt;p&gt;&lt;a href=&#34;https://maven-badges.herokuapp.com/maven-central/io.vitess/vitess-jdbc&#34;&gt;&lt;img src=&#34;https://maven-badges.herokuapp.com/maven-central/io.vitess/vitess-jdbc/badge.svg?sanitize=true&#34; alt=&#34;Maven Central&#34;&gt;&lt;/a&gt; &lt;a href=&#34;https://travis-ci.org/vitessio/vitess/builds&#34;&gt;&lt;img src=&#34;https://travis-ci.org/vitessio/vitess.svg?branch=master&#34; alt=&#34;Build Status&#34;&gt;&lt;/a&gt; &lt;a href=&#34;https://codebeat.co/projects/github-com-youtube-vitess&#34;&gt;&lt;img src=&#34;https://codebeat.co/badges/51c9a056-1103-4522-9a9c-dc623821ea87&#34; alt=&#34;codebeat badge&#34;&gt;&lt;/a&gt; &lt;a href=&#34;https://goreportcard.com/report/vitess.io/vitess&#34;&gt;&lt;img src=&#34;https://goreportcard.com/badge/vitess.io/vitess&#34; alt=&#34;Go Report Card&#34;&gt;&lt;/a&gt; &lt;a href=&#34;https://app.fossa.io/projects/git%2Bgithub.com%2Fvitessio%2Fvitess?ref=badge_shield&#34;&gt;&lt;img src=&#34;https://app.fossa.io/api/projects/git%2Bgithub.com%2Fvitessio%2Fvitess.svg?type=shield&#34; alt=&#34;FOSSA Status&#34;&gt;&lt;/a&gt; &lt;a href=&#34;https://bestpractices.coreinfrastructure.org/projects/1724&#34;&gt;&lt;img src=&#34;https://bestpractices.coreinfrastructure.org/projects/1724/badge&#34; alt=&#34;CII Best Practices&#34;&gt;&lt;/a&gt; &lt;a href=&#34;https://sonarcloud.io/dashboard?id=vitessio&#34;&gt;&lt;img src=&#34;https://sonarcloud.io/api/project_badges/measure?project=vitessio&amp;amp;metric=coverage&#34; alt=&#34;Coverage&#34;&gt;&lt;/a&gt;&lt;/p&gt; &#xA;&lt;h1&gt;Vitess&lt;/h1&gt; &#xA;&lt;p&gt;Vitess is a database clustering system for horizontal scaling of MySQL through generalized sharding.&lt;/p&gt; &#xA;&lt;p&gt;By encapsulating shard-routing logic, Vitess allows application code and database queries to remain agnostic to the distribution of data onto multiple shards. With Vitess, you can even split and merge shards as your needs grow, with an atomic cutover step that takes only a few seconds.&lt;/p&gt; &#xA;&lt;p&gt;Vitess has been a core component of YouTube&#39;s database infrastructure since 2011, and has grown to encompass tens of thousands of MySQL nodes.&lt;/p&gt; &#xA;&lt;p&gt;For more about Vitess, please visit &lt;a href=&#34;https://vitess.io&#34;&gt;vitess.io&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;p&gt;Vitess has a growing community. You can view the list of adopters &lt;a href=&#34;https://github.com/vitessio/vitess/raw/main/ADOPTERS.md&#34;&gt;here&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;h2&gt;Reporting a Problem, Issue, or Bug&lt;/h2&gt; &#xA;&lt;p&gt;To report a problem, the best way to get attention is to create a GitHub &lt;a href=&#34;https://raw.githubusercontent.com/vitessio/vitess/main/.https://github.com/vitessio/vitess/issues&#34;&gt;issue&lt;/a&gt; using proper severity level based on this &lt;a href=&#34;https://github.com/vitessio/vitess/raw/main/SEVERITY.md&#34;&gt;guide&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;p&gt;For topics that are better discussed live, please join the &lt;a href=&#34;https://vitess.io/slack&#34;&gt;Vitess Slack&lt;/a&gt; workspace. You may post any questions on the #general channel or join some of the special-interest channels.&lt;/p&gt; &#xA;&lt;p&gt;Follow &lt;a href=&#34;https://blog.vitess.io/&#34;&gt;Vitess Blog&lt;/a&gt; for low-frequency updates like new features and releases.&lt;/p&gt; &#xA;&lt;h2&gt;Security&lt;/h2&gt; &#xA;&lt;h3&gt;Reporting Security Vulnerabilities&lt;/h3&gt; &#xA;&lt;p&gt;To report a security vulnerability, please email &lt;a href=&#34;mailto:cncf-vitess-maintainers@lists.cncf.io&#34;&gt;vitess-maintainers&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;p&gt;See &lt;a href=&#34;https://raw.githubusercontent.com/vitessio/vitess/main/SECURITY.md&#34;&gt;Security&lt;/a&gt; for a full outline of the security process.&lt;/p&gt; &#xA;&lt;h3&gt;Security Audit&lt;/h3&gt; &#xA;&lt;p&gt;A third party security audit was performed by Cure53. You can see the full report &lt;a href=&#34;https://raw.githubusercontent.com/vitessio/vitess/main/doc/VIT-01-report.pdf&#34;&gt;here&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;h2&gt;License&lt;/h2&gt; &#xA;&lt;p&gt;Unless otherwise noted, the Vitess source files are distributed under the Apache Version 2.0 license found in the LICENSE file.&lt;/p&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://app.fossa.io/projects/git%2Bgithub.com%2Fvitessio%2Fvitess?ref=badge_large&#34;&gt;&lt;img src=&#34;https://app.fossa.io/api/projects/git%2Bgithub.com%2Fvitessio%2Fvitess.svg?type=large&#34; alt=&#34;FOSSA Status&#34;&gt;&lt;/a&gt;&lt;/p&gt;</summary>
  </entry>
  <entry>
    <title>snail007/goproxy</title>
    <updated>2022-09-25T01:32:49Z</updated>
    <id>tag:github.com,2022-09-25:/snail007/goproxy</id>
    <link href="https://github.com/snail007/goproxy" rel="alternate"></link>
    <summary type="html">&lt;p&gt;🔥 Proxy is a high performance HTTP(S) proxies, SOCKS5 proxies,WEBSOCKET, TCP, UDP proxy server implemented by golang. Now, it supports chain-style proxies,nat forwarding in different lan,TCP/UDP port forwarding, SSH forwarding.Proxy是golang实现的高性能http,https,websocket,tcp,socks5代理服务器,支持内网穿透,链式代理,通讯加密,智能HTTP,SOCKS5代理,黑白名单,限速,限流量,限连接数,跨平台,KCP支持,认证API。&lt;/p&gt;&lt;hr&gt;&lt;h2&gt;Advertisement&lt;/h2&gt; &#xA;&lt;a href=&#34;https://www.lybg1688.com/join/GOPROXY&#34;&gt; &lt;img width=&#34;auto&#34; height=&#34;100&#34; src=&#34;https://raw.githubusercontent.com/snail007/goproxy/master/doc/images/zanzhu-2.jpg&#34;&gt; &lt;/a&gt; &#xA;&lt;h2&gt;GOPROXY Introduction&lt;/h2&gt; &#xA;&lt;div align=&#34;center&#34;&gt; &#xA; &lt;img src=&#34;https://mirrors.host900.com/https://raw.githubusercontent.com/snail007/goproxy/master/doc/images/logo.jpg&#34; width=&#34;500&#34; height=&#34;auto&#34;&gt; &#xA; &lt;p&gt;&lt;a href=&#34;https://github.com/snail007/goproxy/&#34;&gt;&lt;img src=&#34;https://img.shields.io/badge/stable-stable-green.svg?sanitize=true&#34; alt=&#34;stable&#34;&gt;&lt;/a&gt; &lt;a href=&#34;&#34;&gt;&lt;img src=&#34;https://img.shields.io/github/license/snail007/goproxy.svg?style=plastic&#34; alt=&#34;license&#34;&gt;&lt;/a&gt; &lt;a href=&#34;https://github.com/snail007/goproxy/releases&#34;&gt;&lt;img src=&#34;https://img.shields.io/github/downloads/snail007/goproxy/total.svg?style=plastic&#34; alt=&#34;download_count&#34;&gt;&lt;/a&gt; &lt;a href=&#34;https://github.com/snail007/goproxy/releases&#34;&gt;&lt;img src=&#34;https://img.shields.io/github/release/snail007/goproxy.svg?style=plastic&#34; alt=&#34;download&#34;&gt;&lt;/a&gt;&lt;/p&gt; &#xA; &lt;hr&gt; &#xA; &lt;p&gt;The GoProxy is a high-performance http proxy, https proxy, socks5 proxy, ss proxy, websocket proxies, tcp proxies, udp proxies, game shield, game proxies. Support forward proxies, reverse proxy, transparent proxy, internet nat proxies, https proxy load balancing, http proxy load balancing , socks5 proxies load balancing, socket proxy load balancing, ss proxy load balancing, TCP / UDP port mapping, SSH transit, TLS encrypted transmission, protocol conversion, anti-pollution DNS proxy, API authentication, speed limit, limit connection. Reverse proxies to help you expose a local server behind a NAT or firewall to the internet so that you or your visitors can access it directly and easily.&lt;/p&gt; &#xA;&lt;/div&gt; &#xA;&lt;hr&gt; &#xA;&lt;h2&gt;中文用户请看 &lt;em&gt;中文说明&lt;/em&gt;，中文与英文内容的安装等资源链接是不一样的，谢谢合作！&lt;/h2&gt; &#xA;&lt;h3&gt;&lt;a href=&#34;https://space.bilibili.com/472844633&#34;&gt;点击我观看视频教程&lt;/a&gt;&lt;/h3&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/snail007/goproxy/raw/master/README_ZH.md&#34;&gt;中文说明&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://snail007.host900.com/goproxy/manual/zh/&#34;&gt;使用手册&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/snail007/goproxy/releases&#34;&gt;下载地址&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/snail007/goproxy/releases&#34;&gt;Download&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/snail007/proxy_admin_free&#34;&gt;Desktop Edition&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/snail007/goproxy-ss-plugin-android&#34;&gt;Android Global Edition&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/snail007/goproxy-android&#34;&gt;Android Server Edition&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/snail007/goproxy-sdk&#34;&gt;SDK&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://snail007.github.io/goproxy/manual/&#34;&gt;GORPOXY Manual&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://snail007.github.io/goproxy&#34;&gt;GORPOXY Tutorial&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://snail007.github.io/goproxy/page/free_vs_commercial/&#34;&gt;Free version VS commercial version&lt;/a&gt;&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h3&gt;ProxyAdmin Demo&lt;/h3&gt; &#xA;&lt;p&gt;And ProxyAdmin is a powerful web console of snail007/goproxy .&lt;/p&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://mirrors.host900.com/https://github.com/snail007/proxy_admin_free/raw/master/res/images/socks5_en.gif&#34; alt=&#34;&#34;&gt;&lt;/p&gt; &#xA;&lt;h3&gt;What can it do?&lt;/h3&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Chained proxies, the program itself can be used as an proxies, and if it is set up, it can be used as a secondary proxies or even an N-level proxies.&lt;/li&gt; &#xA; &lt;li&gt;Communication encryption, if the program is not a level one proxies, and the upper level proxies is also the program, then the communication between the upper level proxies and the upper level proxies can be encrypted, and the underlying tls high-intensity encryption is used, and the security is featureless.&lt;/li&gt; &#xA; &lt;li&gt;Smart HTTP, SOCKS5 proxy, will automatically determine whether the visited website is blocked. If it is blocked, it will use the upstream proxies (provided that the upstream proxies is configured) to access the website; if the visited website is not blocked, in order to speed up the access, the proxies will Direct access to the website without using a upstream proxies.&lt;/li&gt; &#xA; &lt;li&gt;Domain name black and white list, more free to control the way the website is accessed.&lt;/li&gt; &#xA; &lt;li&gt;Cross-platform, whether you are windows, linux, mac, or even raspberry pie, you can run the proxy very well.&lt;/li&gt; &#xA; &lt;li&gt;Multi-protocol support, support for HTTP(S), TCP, UDP, Websocket, SOCKS5 proxy.&lt;/li&gt; &#xA; &lt;li&gt;TCP/UDP port forwarding.&lt;/li&gt; &#xA; &lt;li&gt;Support intranet penetration, protocol supports TCP and UDP.&lt;/li&gt; &#xA; &lt;li&gt;SSH relay, HTTP (S), SOCKS5 proxy supports SSH relay, the upper Linux server does not need any server, a local proxy can be happy online.&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/xtaci/kcp-go&#34;&gt;KCP&lt;/a&gt; protocol support, HTTP(S), SOCKS5, SPS proxy supports KCP protocol to transmit data, reduce latency and improve browsing experience.&lt;/li&gt; &#xA; &lt;li&gt;Dynamic selection of upstream proxies, through the external API, HTTP (S), SOCKS5, SPS proxies can achieve user-based or IP-based speed limit, connection limit, dynamic access to upstream.&lt;/li&gt; &#xA; &lt;li&gt;Flexible upstream allocation, HTTP(S), SOCKS5 proxy can implement user- or IP-based speed limit, connection limit, and upper-level through configuration files.&lt;/li&gt; &#xA; &lt;li&gt;Transparent HTTP (S) proxy, in conjunction with iptables, forwards the outgoing 80, 443 traffic directly to the proxy at the gateway, enabling non-aware intelligent router proxy.&lt;/li&gt; &#xA; &lt;li&gt;Protocol conversion, which can convert existing HTTP(S) or SOCKS5 or SS proxy into one port and support HTTP(S) and SOCKS5 and SS proxy at the same time. Converted SOCKS5 and SS proxy. If the upstream is SOCKS5 proxy, then UDP is supported. Features while supporting powerful cascading authentication.&lt;/li&gt; &#xA; &lt;li&gt;Custom underlying encrypted transmission, http(s)\sps\socks proxy can encrypt tcp data via tls standard encryption and kcp protocol on top of tcp, in addition to support custom encryption after tls and kcp, that is Said custom encryption and tls|kcp can be used in combination, the internal AES256 encryption, you only need to define a password when you use it.&lt;/li&gt; &#xA; &lt;li&gt;Underlying compression efficient transmission, http(s)\sps\socks proxy can encrypt tcp data through custom encryption and tls standard encryption and kcp protocol on tcp, and can also compress data after encryption, that is, compression function And custom encryption and tls|kcp can be used in combination.&lt;/li&gt; &#xA; &lt;li&gt;Secure DNS proxy, which can secure and prevent pollution DNS queries through encrypted proxy communication between the DNS proxy server provided by the local proxy and the upstream proxy.&lt;/li&gt; &#xA; &lt;li&gt;Load balancing, high availability, HTTP(S)\SOCKS5\SPS proxies supports upstream load balancing and high availability, and multiple upstream repeat-P parameters can be used.&lt;/li&gt; &#xA; &lt;li&gt;Specify the egress IP. The HTTP(S)\SOCKS5\SPS\TCP proxy supports the client to connect with the ingress IP, and uses the ingress IP as the egress IP to access the target website. If the ingress IP is an intranet IP, the egress IP does not use the ingress IP.&lt;/li&gt; &#xA; &lt;li&gt;Support speed limit, HTTP(S)\SOCKS5\SPS\TCP proxy supports speed limit.&lt;/li&gt; &#xA; &lt;li&gt;SOCKS5 proxies supports cascading certification.&lt;/li&gt; &#xA; &lt;li&gt;The certificate parameter uses base64 data. By default, the -C, -K parameter is the path of the crt certificate and the key file. If it is the beginning of base64://, then the latter data is considered to be base64 encoded and will be used after decoding.&lt;/li&gt; &#xA; &lt;li&gt;Support client IP black and white list, more secure control of client access to proxy service, if black and white list is set at the same time, then only whitelist is effective. Socks / HTTP(S) / SPS / TCP / UDP / DNS / intranet NAT The bridge/intranet NAT the tbridge and supports the client IP black and white list.&lt;/li&gt; &#xA; &lt;li&gt;Range ports listen on, HTTP(S)\SOCKS5\SPS\TCP proxy supports port range listening, avoiding starting too many processes and improving performance.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h3&gt;Why do you need it?&lt;/h3&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;When for some reason we are unable to access our services elsewhere, we can establish a secure tunnel to access our services through multiple connected proxy nodes.&lt;/li&gt; &#xA; &lt;li&gt;WeChat interface is developed locally for easy debugging.&lt;/li&gt; &#xA; &lt;li&gt;Remote access to intranet machines.&lt;/li&gt; &#xA; &lt;li&gt;Play LAN games with your friends.&lt;/li&gt; &#xA; &lt;li&gt;I used to play only on the LAN, and now I can play anywhere.&lt;/li&gt; &#xA; &lt;li&gt;Replace the sword inside Netnet, show IP internal Netcom, peanut shell and other tools.&lt;/li&gt; &#xA; &lt;li&gt;..&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;The manual on this page applies to the latest version of goproxy. Other versions may not be applicable. Please use the command according to your own instructions.&lt;/p&gt; &#xA;&lt;h3&gt;Joining the organization&lt;/h3&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://t.me/snail007_goproxy&#34;&gt;Click to join the Telegram&lt;/a&gt;&lt;/p&gt; &#xA;&lt;h2&gt;Download and install&lt;/h2&gt; &#xA;&lt;h3&gt;Quick installation&lt;/h3&gt; &#xA;&lt;ol start=&#34;0&#34;&gt; &#xA; &lt;li&gt;If your VPS is a Linux 64-bit system, you only need to execute the following sentence to complete the automatic installation and configuration.&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;p&gt;Tip: All operations require root privileges.&lt;/p&gt; &#xA;&lt;p&gt;The free version performs this:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;curl -L https://mirrors.host900.com/https://raw.githubusercontent.com/snail007/goproxy/master/install_auto.sh | bash&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;The commercial version performs this:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;curl -L https://mirrors.host900.com/https://raw.githubusercontent.com/snail007/goproxy/master/install_auto_commercial.sh | bash&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;The installation is complete, the configuration directory is /etc/proxy. For more detailed usage, please refer to the manual directory above to learn more about the features you want to use. If the installation fails or your vps is not a linux64-bit system, follow the semi-automatic steps below to install:&lt;/p&gt; &#xA;&lt;h3&gt;Manual installation&lt;/h3&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;Download the proxy&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;p&gt;Download address: &lt;a href=&#34;https://github.com/snail007/goproxy/releases/latest&#34;&gt;https://github.com/snail007/goproxy/releases/latest&lt;/a&gt;&lt;/p&gt; &#xA;&lt;p&gt;Let&#39;s take v7.9 as an example. If you have the latest version, please use the latest version of the link. Note that the version number in the download link below is the latest version number.&lt;/p&gt; &#xA;&lt;p&gt;The free version performs this:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;cd /root/proxy/&#xA;wget https://mirrors.host900.com/https://github.com/snail007/goproxy/releases/download/v7.9/proxy-linux-amd64.tar.gz&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;The commercial version performs this:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;cd /root/proxy/&#xA;wget https://mirrors.host900.com/https://github.com/snail007/goproxy/releases/download/v7.9/proxy-linux-amd64_commercial.tar.gz&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;ol start=&#34;2&#34;&gt; &#xA; &lt;li&gt;Download the automatic installation script&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;p&gt;The free version performs this:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;cd /root/proxy/&#xA;wget https://mirrors.host900.com/https://raw.githubusercontent.com/snail007/goproxy/master/install.sh&#xA;chmod +x install.sh&#xA;./install.sh&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;The commercial version performs this:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;cd /root/proxy/&#xA;wget https://mirrors.host900.com/https://raw.githubusercontent.com/snail007/goproxy/master/install_commercial.sh&#xA;chmod +x install_commercial.sh&#xA;./install_commercial.sh&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h2&gt;UPDATE&lt;/h2&gt; &#xA;&lt;h3&gt;Linux&lt;/h3&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;proxy update&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Force update.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;proxy update -f&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h3&gt;Windows&lt;/h3&gt; &#xA;&lt;p&gt;For example &lt;code&gt;proxy&lt;/code&gt; placed in &lt;code&gt;c:\gp\proxy&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-bat&#34;&gt;c:\&#xA;cd gp&#xA;proxy update&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Force update.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;c:\&#xA;cd gp&#xA;proxy update -f&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h2&gt;TODO&lt;/h2&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;http,socks proxy multiple upstream load balancing?&lt;/li&gt; &#xA; &lt;li&gt;http(s) proxy to increase pac support?&lt;/li&gt; &#xA; &lt;li&gt;Welcome to add group feedback..&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;License&lt;/h2&gt; &#xA;&lt;p&gt;Proxy is licensed under GPLv3 license.&lt;/p&gt; &#xA;&lt;h2&gt;Contact&lt;/h2&gt; &#xA;&lt;p&gt;Official QQ exchange group: 608062193&lt;/p&gt; &#xA;&lt;h2&gt;Donation&lt;/h2&gt; &#xA;&lt;p&gt;If the proxy helps you solve a lot of problems, you can better support the proxy through the donation below.&lt;/p&gt; &#xA;&lt;p&gt;BTC ADDRESS: &lt;code&gt;1BJcBhGhREiz1q3VTYoiVPuAZy5PGxRG9z&lt;/code&gt;&lt;/p&gt; &#xA;&lt;img src=&#34;https://mirrors.host900.com/https://raw.githubusercontent.com/snail007/goproxy/master/docs/img/btc.png&#34; width=&#34;150&#34; height=&#34;auto&#34;&gt; &#xA;&lt;p&gt;ETH ADDRESS: &lt;code&gt;0x0fA4c567768d2E59E6221152EA52F4842866AFC8&lt;/code&gt;&lt;/p&gt; &#xA;&lt;img src=&#34;https://mirrors.host900.com/https://raw.githubusercontent.com/snail007/goproxy/master/docs/img/eth.png&#34; width=&#34;150&#34; height=&#34;auto&#34;&gt; &#xA;&lt;h3&gt;Source code declaration&lt;/h3&gt; &#xA;&lt;p&gt;The author of this project found that a large number of developers based on the project for secondary development or using a large number of core code of the project without complying with the GPLv3 agreement, which seriously violates the original intention of using the GPLv3 open source agreement in this project. In view of this situation, the project adopts the source. The code delays the release strategy, to a certain extent, to curb these behaviors that do not respect open source and do not respect the labor results of others. This project will continue to update the iterations and continue to release the full platform binary program, providing you with powerful and convenient proxies tools. If you have customized, business needs, please send an email to &lt;code&gt;arraykeys@gmail.com&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h2&gt;Goproxy Manual&lt;/h2&gt; &#xA;&lt;h2&gt;How to Install&lt;/h2&gt; &#xA;&lt;h3&gt;1. Linux Install&lt;/h3&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/snail007/goproxy/raw/master/README_ZH.md#%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85-goproxy&#34;&gt;click me get Linux installation&lt;/a&gt;&lt;/p&gt; &#xA;&lt;h3&gt;2. MacOS Install&lt;/h3&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/snail007/proxy_admin_free/raw/master/README_ZH.md#%E8%A7%86%E9%A2%91%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B&#34;&gt;click me get MacOS installation&lt;/a&gt;&lt;/p&gt; &#xA;&lt;h3&gt;3. Windows Install&lt;/h3&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/snail007/proxy_admin_free/raw/master/README_ZH.md#%E8%A7%86%E9%A2%91%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B&#34;&gt;click me get Windows installation&lt;/a&gt;&lt;/p&gt; &#xA;&lt;h3&gt;4. Others Install&lt;/h3&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/snail007/goproxy/raw/master/README_ZH.md#%E6%89%8B%E5%8A%A8%E5%AE%89%E8%A3%85-goproxy&#34;&gt;click me get Windows installation&lt;/a&gt;&lt;/p&gt; &#xA;&lt;h2&gt;Purchase Commercial Edition&lt;/h2&gt; &#xA;&lt;p&gt;This manual describes the functions, all of which are included in the commercial version; the free version of advanced functional parameters such as authentication is not included;&lt;br&gt; If you encounter some commands when you use the free version to execute some commands, a prompt similar to the following xxx parameter does not exist, indicating that this parameter is a function of the commercial version.&lt;br&gt; &lt;code&gt;err: unknown long flag &#39;-a&#39;&lt;/code&gt;&lt;br&gt; Comparison between the features of the free version and the commercial version, detailed operations on how to purchase and use the commercial version &lt;a href=&#34;https://snail007.host900.com/goproxy/page/free_vs_commercial_en/&#34;&gt;please click here to view&lt;/a&gt;&lt;/p&gt; &#xA;&lt;h2&gt;First Start&lt;/h2&gt; &#xA;&lt;h3&gt;1. Environment&lt;/h3&gt; &#xA;&lt;p&gt;The manual tutorial, the default system is linux, the program is proxy; all operations require root privileges;&lt;/p&gt; &#xA;&lt;p&gt;If you are windows, please use the windows version of proxy.exe.&lt;/p&gt; &#xA;&lt;h3&gt;2. Using configuration files&lt;/h3&gt; &#xA;&lt;p&gt;The next tutorial will introduce the usage method through the command line parameters, or you can get the parameters by reading the configuration file.&lt;/p&gt; &#xA;&lt;p&gt;The specific format is to specify the configuration file by the @ symbol, for example: proxy @configfile.txt&lt;/p&gt; &#xA;&lt;p&gt;The format in configfile.txt is that the first line is the name of the subcommand, and the second line starts with one parameter per line.&lt;/p&gt; &#xA;&lt;p&gt;Format: &lt;code&gt;parameter Parameter value&lt;/code&gt;, direct write parameter without parameter value, for example: --nolog&lt;/p&gt; &#xA;&lt;p&gt;For example, the contents of configfile.txt are as follows:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;Http  &#xA;-t tcp  &#xA;-p :33080  &#xA;--forever  &#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h3&gt;3. Debug output&lt;/h3&gt; &#xA;&lt;p&gt;By default, the information output by the log does not include the number of file lines. In some cases, in order to troubleshoot the program, the problem is quickly located.&lt;/p&gt; &#xA;&lt;p&gt;You can use the --debug parameter to output the number of lines of code and milliseconds.&lt;/p&gt; &#xA;&lt;h3&gt;4. Using log files&lt;/h3&gt; &#xA;&lt;p&gt;By default, the log is displayed directly in the console. If you want to save to a file, you can use the --log parameter.&lt;/p&gt; &#xA;&lt;p&gt;For example: --log proxy.log, the log will be output to the proxy.log to facilitate troubleshooting.&lt;/p&gt; &#xA;&lt;h3&gt;5. Generate the certificate file required for encrypted communication&lt;/h3&gt; &#xA;&lt;p&gt;The http, tcp, udp proxy process communicates with the upstream. For security, we use encrypted communication. Of course, we can choose not to encrypt the communication. All the communication and the upstream communication in this tutorial are encrypted, and the certificate file is required.&lt;/p&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt; &lt;p&gt;Generate a self-signed certificate and key file with the following command.&lt;br&gt; &lt;code&gt;proxy keygen -C proxy&lt;/code&gt;&lt;br&gt; The certificate file proxy.crt and the key file proxy.key will be generated under the current program directory.&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;Use the following command to generate a new certificate using the self-signed certificate proxy.crt and the key file proxy.key: goproxy.crt and goproxy.key.&lt;br&gt; &lt;code&gt;proxy keygen -s -C proxy -c goproxy&lt;/code&gt;&lt;br&gt; The certificate file goproxy.crt and the key file goproxy.key will be generated under the current program directory.&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;By default, the domain name inside the certificate is random and can be specified using the &lt;code&gt;-n test.com&lt;/code&gt; parameter.&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;More usage: &lt;code&gt;proxy keygen --help&lt;/code&gt;.&lt;/p&gt; &lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;h3&gt;6. Running in the background&lt;/h3&gt; &#xA;&lt;p&gt;After the proxy is executed by default, you cannot close the command line if you want to keep the proxy running.&lt;/p&gt; &#xA;&lt;p&gt;If you want to run the proxy in the background, the command line can be closed, just add the --daemon parameter at the end of the command.&lt;/p&gt; &#xA;&lt;p&gt;For example:&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy http -t tcp -p &#34;0.0.0.0:38080&#34; --daemon&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h3&gt;7. Guardian running&lt;/h3&gt; &#xA;&lt;p&gt;The daemon runs the parameter --forever, for example: &lt;code&gt;proxy http --forever&lt;/code&gt; ,&lt;/p&gt; &#xA;&lt;p&gt;The proxy will fork the child process, and then monitor the child process. If the child process exits abnormally, restart the child process after 5 seconds.&lt;/p&gt; &#xA;&lt;p&gt;This parameter is matched with the background running parameter --daemon and log parameter --log, which can guarantee that the proxy will always execute in the background without accidentally exiting.&lt;/p&gt; &#xA;&lt;p&gt;And you can see the output log content of the proxy through the log file.&lt;/p&gt; &#xA;&lt;p&gt;For example: &lt;code&gt;proxy http -p &#34;:9090&#34; --forever --log proxy.log --daemon&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h3&gt;8. Security advice&lt;/h3&gt; &#xA;&lt;p&gt;When the VPS is behind the nat device, the vps network interface IP is the intranet IP. At this time, you can use the -g parameter to add the vps external network ip to prevent the infinite loop.&lt;/p&gt; &#xA;&lt;p&gt;Suppose your vps external network ip is 23.23.23.23. The following command sets 23.23.23.23 with the -g parameter.&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy http -g &#34;23.23.23.23&#34;&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h3&gt;9. Load balancing and high availability&lt;/h3&gt; &#xA;&lt;p&gt;The HTTP(S)\SOCKS5\SPS proxy supports upper-level load balancing and high availability, and multiple upstream repeat-P parameters can be used.&lt;/p&gt; &#xA;&lt;p&gt;The load balancing policy supports five types, which can be specified by the &lt;code&gt;--lb-method&lt;/code&gt; parameter:&lt;/p&gt; &#xA;&lt;p&gt;Roundrobin used in turn&lt;/p&gt; &#xA;&lt;p&gt;Leastconn uses the minimum number of connections&lt;/p&gt; &#xA;&lt;p&gt;Leasttime uses the least connection time&lt;/p&gt; &#xA;&lt;p&gt;Hash uses a fixed upstream based on the client address&lt;/p&gt; &#xA;&lt;p&gt;Weight Select a upstream according to the weight and number of connections of each upstream&lt;/p&gt; &#xA;&lt;p&gt;prompt:&lt;/p&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt; &lt;p&gt;The load balancing check interval can be set by &lt;code&gt;--lb-retrytime&lt;/code&gt; in milliseconds.&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;The load balancing connection timeout can be set by &lt;code&gt;--lb-timeout&lt;/code&gt; in milliseconds.&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;If the load balancing policy is weight, the -P format is: 2.2.2.2: 3880?w=1, where 1 is the weight and an integer greater than 0.&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;If the load balancing policy is hash, the default is to select the upstream based on the client address. You can select the upstream by using the destination address of the access &lt;code&gt;--lb-hashtarget&lt;/code&gt;.&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;The TCP proxies has no parameter &lt;code&gt;--lb-hashtarget&lt;/code&gt;.&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;Default is load balancing + high availability mode. If the parameter &lt;code&gt;--lb-onlyha&lt;/code&gt; is used, only the high availability mode is used, then a node is selected according to the load balancing strategy, and this node will be used until it is not alive, then another node will be selected for using, thus cycling.&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;If the all nodes are not alive, a random node will be selected for using.&lt;/p&gt; &lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;h3&gt;10. Agent springboard jump&lt;/h3&gt; &#xA;&lt;p&gt;Http (s) agent, SPS agent, intranet penetration, tcp agent support the connection of upstreams through intermediate third-party agents,&lt;/p&gt; &#xA;&lt;p&gt;The parameters are: --jumper, all the formats are as follows:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;&amp;nbsp;http://username:password@host:port  &#xA;&amp;nbsp;http://host:port  &#xA;&amp;nbsp;https://username:password@host:port  &#xA;&amp;nbsp;https://host:port  &#xA;&amp;nbsp;socks5://username:password@host:port  &#xA;&amp;nbsp;socks5://host:port  &#xA;&amp;nbsp;socks5s://username:password@host:port  &#xA;&amp;nbsp;socks5s://host:port  &#xA;&amp;nbsp;ss://method:password@host:port  &#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Http,socks5 represents the normal http and socks5 proxy.&lt;/p&gt; &#xA;&lt;p&gt;Https,socks5s represents the http and socks5 agents protected by tls.&lt;/p&gt; &#xA;&lt;p&gt;That is http proxy over TLS, socks over TLS.&lt;/p&gt; &#xA;&lt;h3&gt;11. Domain Name Black and White List&lt;/h3&gt; &#xA;&lt;p&gt;The socks/http(s)/sps proxy supports domain name black and white lists.&lt;/p&gt; &#xA;&lt;p&gt;Use the --stop parameter to specify a domain name blacklist file, then the connection will be disconnected when the user connects these domains in the file.&lt;/p&gt; &#xA;&lt;p&gt;Specify a domain name whitelist file with the --only parameter, then the connection will be disconnected when the user connects to a domain other than those domains in the file.&lt;/p&gt; &#xA;&lt;p&gt;If both --stop and --only are set, then only --only will work.&lt;/p&gt; &#xA;&lt;p&gt;The format of the black and white domain name list file is as follows:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;**.baidu.com  &#xA;*.taobao.com  &#xA;A.com  &#xA;192.168.1.1  &#xA;192.168.*.*  &#xA;?.qq.com  &#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Description:&lt;/p&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;One domain name per line, domain name writing supports wildcards &lt;code&gt;*&lt;/code&gt; and &lt;code&gt;?&lt;/code&gt;, &lt;code&gt;*&lt;/code&gt; represents any number of characters, &lt;code&gt;?&lt;/code&gt; represents an arbitrary character,&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;p&gt;2.&lt;code&gt;**.baidu.com&lt;/code&gt; Matches no matter how many levels all suffixes are ..baidu.com`.&lt;/p&gt; &#xA;&lt;p&gt;3.&lt;code&gt;*.taobao.com&lt;/code&gt; The matching suffix is the third-level domain name of &lt;code&gt;.taobao.com&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;ol start=&#34;4&#34;&gt; &#xA; &lt;li&gt;It can also be an IP address directly.&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;p&gt;5.&lt;code&gt;#&lt;/code&gt; at the beginning of the comment.&lt;/p&gt; &#xA;&lt;h3&gt;12. Client IP Blacklist and Whitelist&lt;/h3&gt; &#xA;&lt;p&gt;socks/http(s)/sps/tcp/udp/dns/ intranet penetration bridge/intranet penetration tbridge, support client IP black and white list.&lt;/p&gt; &#xA;&lt;p&gt;Use the --ip-deny parameter to specify a client IP blacklist list file, then the connection will be disconnected when the user&#39;s IP is in this file.&lt;/p&gt; &#xA;&lt;p&gt;Use the --ip-allow parameter to specify a client IP whitelist file, then the connection will be disconnected when the user&#39;s IP is not in the file.&lt;/p&gt; &#xA;&lt;p&gt;If both --ip-deny and --ip-allow are set, then only --ip-allow will work.&lt;/p&gt; &#xA;&lt;p&gt;The format of the client IP blacklist and whitelist file is as follows:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;192.168.1.1  &#xA;192.168.*.*  &#xA;192.168.1?.*  &#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Description:&lt;/p&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;One domain name per domain, domain name writing supports wildcards &lt;code&gt;*&lt;/code&gt; and &lt;code&gt;?&lt;/code&gt;, &lt;code&gt;*&lt;/code&gt; represents any number of characters, &lt;code&gt;?&lt;/code&gt; represents an arbitrary character.&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;p&gt;2.&lt;code&gt;#&lt;/code&gt; at the beginning of the comment.&lt;/p&gt; &#xA;&lt;h3&gt;13. Protocol loading file&lt;/h3&gt; &#xA;&lt;p&gt;There are many places in the proxy&#39;s various proxy functions to set a file. For example: --blocked Specifies a domain name list file that goes directly to the upper level. The parameter value is the path of the file.&lt;/p&gt; &#xA;&lt;p&gt;If the parameter supports the protocol loading file, the file path can be not only the file path, but also:&lt;/p&gt; &#xA;&lt;p&gt;a. The base64 encoding at the beginning of &#34;base64://&#34; indicates the contents of the above file, for example: base64://ajfpoajsdfa=&lt;/p&gt; &#xA;&lt;p&gt;b. &#34;str://&#34; at the beginning of the English comma separated multiple, such as: str://xxx, yyy&lt;/p&gt; &#xA;&lt;p&gt;The proxy&#39;s blocked, direct, stop, only, hosts, resolve.rules, rewriter.rules, ip.allow, ip.deny files support protocol loading.&lt;/p&gt; &#xA;&lt;h3&gt;14.Concurrent client connections&lt;/h3&gt; &#xA;&lt;p&gt;socks5\sps\http proxies, the parameter that controls the number of concurrent client connections is: &lt;code&gt;--max-conns-rate&lt;/code&gt;, which controls the maximum number of client connections per second, default: 20, 0 is unlimited&lt;/p&gt; &#xA;&lt;h3&gt;15 Listen on multiple ports&lt;/h3&gt; &#xA;&lt;p&gt;&#34;tcp / http / socks / sps&#34; supports listen on multiple ports and range ports. Under normal circumstances, it is sufficient to listen on one port, but if you need to listen on multiple ports, the -p parameter is supported. The format is: &lt;code&gt;-p 0.0.0.0:80,0.0.0.0:443,.0.0.0.0:8000-9000,:5000-6000&lt;/code&gt;, more The bindings can be separated by commas.&lt;/p&gt; &#xA;&lt;h2&gt;1.HTTP Proxies&lt;/h2&gt; &#xA;&lt;h3&gt;1.1. Ordinary level HTTP proxy&lt;/h3&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/snail007/goproxy@master/doc/images/http-1.png&#34; alt=&#34;1.1&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy http -t tcp -p &#34;0.0.0.0:38080&#34;&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;Listen port argument &lt;code&gt;-p&lt;/code&gt; can be:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;  -p &#34;:8081&#34;  listen on 8081&#xA;  -p &#34;:8081,:8082&#34;  listen on 8081 and 8082&#xA;  -p &#34;:8081,:8082,:9000-9999&#34; listen on 8081 and 8082 and 9000 and 9001 to 9999, 1002 total ports  &#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h3&gt;1.2. Ordinary secondary HTTP proxy&lt;/h3&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/snail007/goproxy@master/doc/images/http-2.png&#34; alt=&#34;1.2&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;Use local port 8090, assuming the upstream HTTP proxy is &lt;code&gt;22.22.22.22:8080&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy http -t tcp -p &#34;0.0.0.0:8090&#34; -T tcp -P &#34;22.22.22.22:8080&#34; &lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;We can also specify the black and white list file of the website domain name, one domain name per line, the matching rule is the rightmost match, for example: baidu.com, the match is &lt;em&gt;.&lt;/em&gt;.baidu.com, the blacklist domain name goes directly to the upstream agent, whitelist The domain name does not go to the upstream agent.&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy http -p &#34;0.0.0.0:8090&#34; -T tcp -P &#34;22.22.22.22:8080&#34; -b blocked.txt -d direct.txt&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h3&gt;1.3.HTTP secondary agent (encryption)&lt;/h3&gt; &#xA;&lt;blockquote&gt; &#xA; &lt;p&gt;Note: The &lt;code&gt;proxy.crt&lt;/code&gt; and &lt;code&gt;proxy.key&lt;/code&gt; used by the secondary proxy should be consistent with the primary proxy.&lt;/p&gt; &#xA;&lt;/blockquote&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/snail007/goproxy@master/doc/images/http-tls-2.png&#34; alt=&#34;1.3&#34;&gt;&lt;br&gt; Level 1 HTTP proxy (VPS, IP: 22.22.22.22)&lt;br&gt; &lt;code&gt;proxy http -t tls -p &#34;:38080&#34; -C proxy.crt -K proxy.key&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;Secondary HTTP proxy (local Linux)&lt;br&gt; &lt;code&gt;proxy http -t tcp -p &#34;:8080&#34; -T tls -P &#34;22.22.22.22:38080&#34; -C proxy.crt -K proxy.key&lt;/code&gt;&lt;br&gt; Then access the local port 8080 is to access the proxy port 38080 on the VPS.&lt;/p&gt; &#xA;&lt;p&gt;Secondary HTTP proxy (local windows)&lt;br&gt; &lt;code&gt;proxy.exe http -t tcp -p &#34;:8080&#34; -T tls -P &#34;22.22.22.22:38080&#34; -C proxy.crt -K proxy.key&lt;/code&gt;&lt;br&gt; Then set your windos system, the proxy that needs to go through the proxy Internet program is http mode, the address is: 127.0.0.1, the port is: 8080, the program can access the Internet through vps through the encrypted channel.&lt;/p&gt; &#xA;&lt;h3&gt;1.4.HTTP Level 3 Agent (Encryption)&lt;/h3&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/snail007/goproxy@master/doc/images/http-tls-3.png&#34; alt=&#34;1.3&#34;&gt;&lt;br&gt; Level 1 HTTP proxy VPS_01, IP: 22.22.22.22&lt;br&gt; &lt;code&gt;proxy http -t tls -p &#34;:38080&#34; -C proxy.crt -K proxy.key&lt;/code&gt;&lt;br&gt; Secondary HTTP proxy VPS_02, IP: 33.33.33.33&lt;br&gt; &lt;code&gt;proxy http -t tls -p &#34;:28080&#34; -T tls -P &#34;22.22.22.22:38080&#34; -C proxy.crt -K proxy.key&lt;/code&gt;&lt;br&gt; Level 3 HTTP proxy (local)&lt;br&gt; &lt;code&gt;proxy http -t tcp -p &#34;:8080&#34; -T tls -P &#34;33.33.33.33:28080&#34; -C proxy.crt -K proxy.key&lt;/code&gt;&lt;br&gt; Then accessing the local port 8080 is to access the proxy port 38080 on the primary HTTP proxy.&lt;/p&gt; &#xA;&lt;h3&gt;1.5.Basic certification&lt;/h3&gt; &#xA;&lt;p&gt;For the proxy HTTP protocol, we can perform Basic authentication. The authenticated username and password can be specified on the command line.&lt;br&gt; &lt;code&gt;proxy http -t tcp -p &#34;:33080&#34; -a &#34;user1:pass1&#34; -a &#34;user2:pass2&#34;&lt;/code&gt;&lt;br&gt; For multiple users, repeat the -a parameter.&lt;br&gt; It can also be placed in a file in the format of a &#34;username:password&#34; and then specified with -F.&lt;br&gt; &lt;code&gt;proxy http -t tcp -p &#34;:33080&#34; -F auth-file.txt&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;In addition, the http(s) proxy also integrates external HTTP API authentication. We can specify an http url interface address with the --auth-url parameter.&lt;br&gt; Then when there is a user connection, the proxy will request the url in GET mode, and bring the following four parameters. If the HTTP status code 204 is returned, the authentication is successful.&lt;br&gt; In other cases, the authentication failed.&lt;br&gt; For example:&lt;br&gt; &lt;code&gt;proxy http -t tcp -p &#34;:33080&#34; --auth-url &#34;http://test.com/auth.php&#34;&lt;/code&gt;&lt;br&gt; When the user connects, the proxy will request the url (&#34;&lt;a href=&#34;http://test.com/auth.php&#34;&gt;http://test.com/auth.php&lt;/a&gt;&#34;) in GET mode.&lt;br&gt; Take five parameters: user, pass, ip, local_ip, target:&lt;br&gt; &lt;a href=&#34;Http://test.com/auth.php?user=%7BUSER%7D&amp;amp;pass=%7BPASS%7D&amp;amp;ip=%7BIP%7D&amp;amp;local_ip=%7BLOCAL_IP%7D&amp;amp;target=%7BTARGET%7D&#34;&gt;Http://test.com/auth.php?user={USER}&amp;amp;pass={PASS}&amp;amp;ip={IP}&amp;amp;local_ip={LOCAL_IP}&amp;amp;target={TARGET}&lt;/a&gt;&lt;br&gt; User: username&lt;br&gt; Pass: password&lt;br&gt; Ip: User&#39;s IP, for example: 192.168.1.200&lt;br&gt; Local_ip: IP of the server accessed by the user, for example: 3.3.3.3&lt;br&gt; Target: URL accessed by the user, for example: &lt;a href=&#34;http://demo.com:80/1.html&#34;&gt;http://demo.com:80/1.html&lt;/a&gt; or &lt;a href=&#34;https://www.baidu.com:80&#34;&gt;https://www.baidu.com:80&lt;/a&gt;&lt;/p&gt; &#xA;&lt;p&gt;If there is no -a or -F or --auth-url parameter, the Basic authentication is turned off.&lt;/p&gt; &#xA;&lt;h3&gt;1.6. HTTP proxy traffic is forced to go to the upper HTTP proxy&lt;/h3&gt; &#xA;&lt;p&gt;By default, the proxy will intelligently determine whether a website domain name is inaccessible. If it is not accessible, it will go to the upper level HTTP proxy. With --always, all HTTP proxy traffic can be forced to go to the upper HTTP proxy.&lt;br&gt; &lt;code&gt;proxy http --always -t tls -p &#34;:28080&#34; -T tls -P &#34;22.22.22.22:38080&#34; -C proxy.crt -K proxy.key&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h3&gt;1.7.HTTP(S) via SSH relay&lt;/h3&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/snail007/goproxy@master/doc/images/http-ssh-1.png&#34; alt=&#34;1.7&#34;&gt;&lt;br&gt; Description: The principle of ssh transfer is to use the forwarding function of ssh, that is, after you connect to ssh, you can access the target address through ssh proxy.&lt;br&gt; Suppose there is: vps&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;IP is 2.2.2.2, ssh port is 22, ssh username is: user, ssh user password is: demo&lt;/li&gt; &#xA; &lt;li&gt;The user&#39;s ssh private key name is user.key&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h4&gt;&lt;em&gt;1.7.1 How to ssh username and password&lt;/em&gt;&lt;/h4&gt; &#xA;&lt;p&gt;Local HTTP(S) proxy port 28080, executing:&lt;br&gt; &lt;code&gt;proxy http -T ssh -P &#34;2.2.2.2:22&#34; -u user -D demo -t tcp -p &#34;:28080&#34;&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h4&gt;&lt;em&gt;1.7.2 How to ssh username and key&lt;/em&gt;&lt;/h4&gt; &#xA;&lt;p&gt;Local HTTP(S) proxy port 28080, executing:&lt;br&gt; &lt;code&gt;proxy http -T ssh -P &#34;2.2.2.2:22&#34; -u user -S user.key -t tcp -p &#34;:28080&#34;&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h3&gt;1.8.KCP protocol transmission&lt;/h3&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/snail007/goproxy@master/doc/images/http-kcp.png&#34; alt=&#34;1.8&#34;&gt;&lt;br&gt; The KCP protocol requires the --kcp-key parameter to set a password for encrypting and decrypting data.&lt;/p&gt; &#xA;&lt;p&gt;Level 1 HTTP proxy (VPS, IP: 22.22.22.22)&lt;br&gt; &lt;code&gt;proxy http -t kcp -p &#34;:38080&#34; --kcp-key mypassword&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;Secondary HTTP proxy (local Linux)&lt;br&gt; &lt;code&gt;proxy http -t tcp -p &#34;:8080&#34; -T kcp -P &#34;22.22.22.22:38080&#34; --kcp-key mypassword&lt;/code&gt;&lt;br&gt; Then access the local port 8080 is to access the proxy port 38080 on the VPS, the data is transmitted through the kcp protocol, note that the kcp is the udp protocol, so the firewall needs to release the 380p udp protocol.&lt;/p&gt; &#xA;&lt;h3&gt;1.9 HTTP(S) Reverse Proxy&lt;/h3&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/snail007/goproxy@master/doc/images/fxdl.png&#34; alt=&#34;1.9&#34;&gt;&lt;br&gt; The proxy not only supports the proxy setting in other software, but also provides proxy services for other software. It also supports directly parsing the requested website domain name to the proxy listening ip, and then the proxy listens to the 80 and 443 ports, then the proxy will automatically You proxy access to the HTTP(S) website you need to access.&lt;/p&gt; &#xA;&lt;p&gt;How to use:&lt;br&gt; On the &#34;last level proxy proxy&#34; machine, because the proxy is to be disguised as all websites, the default HTTP port of the website is 80, HTTPS is 443, and the proxy can listen to ports 80 and 443. Parameters -p multiple addresses with commas segmentation.&lt;br&gt; &lt;code&gt;proxy http -t tcp -p :80,:443&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;This command starts a proxy agent on the machine, and listens to ports 80 and 443 at the same time. It can be used as a normal proxy, or directly resolve the domain name that needs to be proxyed to the IP of this machine.&lt;/p&gt; &#xA;&lt;p&gt;If there is a upstream agent, then refer to the above tutorial to set the upstream, the use is exactly the same.&lt;br&gt; &lt;code&gt;proxy http -t tcp -p :80,:443 -T tls -P &#34;2.2.2.2:33080&#34; -C proxy.crt -K proxy.key&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;Note:&lt;br&gt; The DNS resolution result of the server where the proxy is located cannot be affected by the custom resolution, otherwise it will be infinite loop. The proxy proxy should specify the &lt;code&gt;--dns 8.8.8.8&lt;/code&gt; parameter.&lt;/p&gt; &#xA;&lt;h3&gt;1.10 HTTP(S) Transparent Proxy&lt;/h3&gt; &#xA;&lt;p&gt;This mode needs to have a certain network foundation. If the related concepts are not understood, please search for it yourself.&lt;br&gt; Assuming the proxy is now running on the router, the startup command is as follows:&lt;br&gt; &lt;code&gt;proxy http -t tcp -p :33080 -T tls -P &#34;2.2.2.2:33090&#34; -C proxy.crt -K proxy.key&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;Then add the iptables rule, here are the reference rules:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;#Upper proxy server IP address:  &#xA;Proxy_server_ip=2.2.2.2  &#xA;&#xA;#路由器Running port for proxy listening:  &#xA;Proxy_local_port=33080  &#xA;&#xA;#The following does not need to be modified  &#xA;#create a new chain named PROXY  &#xA;Iptables -t nat -N PROXY  &#xA;&#xA;# Ignore your PROXY server&#39;s addresses  &#xA;# It&#39;s very IMPORTANT, just be careful.  &#xA;&#xA;Iptables -t nat -A PROXY -d $proxy_server_ip -j RETURN  &#xA;&#xA;# Ignore LANs IP address  &#xA;Iptables -t nat -A PROXY -d 0.0.0.0/8 -j RETURN  &#xA;Iptables -t nat -A PROXY -d 10.0.0.0/8 -j RETURN  &#xA;Iptables -t nat -A PROXY -d 127.0.0.0/8 -j RETURN  &#xA;Iptables -t nat -A PROXY -d 169.254.0.0/16 -j RETURN  &#xA;Iptables -t nat -A PROXY -d 172.16.0.0/12 -j RETURN  &#xA;Iptables -t nat -A PROXY -d 192.168.0.0/16 -j RETURN  &#xA;Iptables -t nat -A PROXY -d 224.0.0.0/4 -j RETURN  &#xA;Iptables -t nat -A PROXY -d 240.0.0.0/4 -j RETURN  &#xA;&#xA;# Anything to port 80 443 should be redirected to PROXY&#39;s local port  &#xA;Iptables -t nat -A PROXY -p tcp --dport 80 -j REDIRECT --to-ports $proxy_local_port  &#xA;Iptables -t nat -A PROXY -p tcp --dport 443 -j REDIRECT --to-ports $proxy_local_port  &#xA;&#xA;# Apply the rules to nat client  &#xA;Iptables -t nat -A PREROUTING -p tcp -j PROXY  &#xA;# Apply the rules to localhost  &#xA;Iptables -t nat -A OUTPUT -p tcp -j PROXY  &#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Clear the entire chain iptables -F Chain names such as iptables -t nat -F PROXY&lt;/li&gt; &#xA; &lt;li&gt;Delete the specified user-defined chain iptables -X chain name such as iptables -t nat -X PROXY&lt;/li&gt; &#xA; &lt;li&gt;Remove rules from the selected chain iptables -D chain name Rule details such as iptables -t nat -D PROXY -d 223.223.192.0/255.255.240.0 -j RETURN&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h3&gt;1.11 Custom DNS&lt;/h3&gt; &#xA;&lt;p&gt;--dns-address and --dns-ttl parameters, used to specify the dns (--dns-address) used by the proxy to access the domain name.&lt;br&gt; And the analysis result cache time (--dns-ttl) seconds, to avoid system dns interference to the proxy, in addition to the cache function can also reduce the dns resolution time to improve access speed.&lt;br&gt; For example:&lt;br&gt; &lt;code&gt;proxy http -p &#34;:33080&#34; --dns-address &#34;8.8.8.8:53&#34; --dns-ttl 300&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h3&gt;1.12 Custom encryption&lt;/h3&gt; &#xA;&lt;p&gt;The proxy&#39;s http(s) proxy can encrypt tcp data via tls standard encryption and kcp protocol on top of tcp, in addition to support customization after tls and kcp.&lt;br&gt; Encryption, that is to say, custom encryption and tls|kcp can be used in combination. The internal use of AES256 encryption, you only need to define a password when you use it.&lt;br&gt; Encryption is divided into two parts, one is whether the local (-z) encryption and decryption, and the other is whether the transmission with the upstream (-Z) is encrypted or decrypted.&lt;br&gt; Custom encryption requires both ends to be proxy. The following two levels and three levels are used as examples:&lt;/p&gt; &#xA;&lt;p&gt;Secondary instance&lt;/p&gt; &#xA;&lt;p&gt;Execute on level 1 vps (ip: 2.2.2.2):&lt;br&gt; &lt;code&gt;proxy http -t tcp -z demo_password -p :7777&lt;/code&gt;&lt;br&gt; Local secondary execution:&lt;br&gt; &lt;code&gt;proxy http -T tcp -P 2.2.2.2:777 -Z demo_password -t tcp -p :8080&lt;/code&gt;&lt;br&gt; In this way, when the website is accessed through the local agent 8080, the target website is accessed through encrypted transmission with the upstream.&lt;/p&gt; &#xA;&lt;p&gt;Three-level instance&lt;/p&gt; &#xA;&lt;p&gt;Execute on level 1 vps (ip: 2.2.2.2):&lt;br&gt; &lt;code&gt;proxy http -t tcp -z demo_password -p :7777&lt;/code&gt;&lt;br&gt; Execute on the secondary vps (ip: 3.3.3.3):&lt;br&gt; &lt;code&gt;proxy http -T tcp -P 2.2.2.2:7777 -Z demo_password -t tcp -z other_password -p :8888&lt;/code&gt;&lt;br&gt; Local three-level execution:&lt;br&gt; &lt;code&gt;proxy http -T tcp -P 3.3.3.3:8888 -Z other_password -t tcp -p :8080&lt;/code&gt;&lt;br&gt; In this way, when the website is accessed through the local agent 8080, the target website is accessed through encrypted transmission with the upstream.&lt;/p&gt; &#xA;&lt;h3&gt;1.13 Compressed transmission&lt;/h3&gt; &#xA;&lt;p&gt;The proxy http(s) proxy can encrypt tcp data through tls standard encryption and kcp protocol on top of tcp, and can also compress data before custom encryption.&lt;br&gt; That is to say, compression and custom encryption and tls|kcp can be used in combination. Compression is divided into two parts, one part is local (-m) compression transmission.&lt;br&gt; Part of it is compressed with the upstream (-M) transmission.&lt;br&gt; Compression requires both sides to be proxy. Compression also protects (encrypted) data to a certain extent. The following uses Level 2 and Level 3 as examples:&lt;/p&gt; &#xA;&lt;p&gt;Secondary instance&lt;/p&gt; &#xA;&lt;p&gt;Execute on level 1 vps (ip: 2.2.2.2):&lt;br&gt; &lt;code&gt;proxy http -t tcp -m -p :7777&lt;/code&gt;&lt;br&gt; Local secondary execution:&lt;br&gt; &lt;code&gt;proxy http -T tcp -P 2.2.2.2:777 -M -t tcp -p :8080&lt;/code&gt;&lt;br&gt; In this way, when the website is accessed through the local agent 8080, the target website is accessed through compression with the upstream.&lt;/p&gt; &#xA;&lt;p&gt;Three-level instance&lt;/p&gt; &#xA;&lt;p&gt;Execute on level 1 vps (ip: 2.2.2.2):&lt;br&gt; &lt;code&gt;proxy http -t tcp -m -p :7777&lt;/code&gt;&lt;br&gt; Execute on the secondary vps (ip: 3.3.3.3):&lt;br&gt; &lt;code&gt;proxy http -T tcp -P 2.2.2.2:7777 -M -t tcp -m -p :8888&lt;/code&gt;&lt;br&gt; Local three-level execution:&lt;br&gt; &lt;code&gt;proxy http -T tcp -P 3.3.3.3:8888 -M -t tcp -p :8080&lt;/code&gt;&lt;br&gt; In this way, when the website is accessed through the local agent 8080, the target website is accessed through compression with the upstream.&lt;/p&gt; &#xA;&lt;h3&gt;1.14 Load Balancing&lt;/h3&gt; &#xA;&lt;p&gt;The HTTP(S) proxy supports upper-level load balancing, and multiple upstream repeat-P parameters can be used.&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy http --lb-method=hash -T tcp -P 1.1.1.1:33080 -P 2.1.1.1:33080 -P 3.1.1.1:33080&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h3&gt;1.14.1 Setting the retry interval and timeout time&lt;/h3&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy http --lb-method=leastconn --lb-retrytime 300 --lb-timeout 300 -T tcp -P 1.1.1.1:33080 -P 2.1.1.1:33080 -P 3.1.1.1:33080 -t tcp - p :33080&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h3&gt;1.14.2 Setting weights&lt;/h3&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy http --lb-method=weight -T tcp -P 1.1.1.1:33080?w=1 -P 2.1.1.1:33080?w=2 -P 3.1.1.1:33080?w=1 -t tcp - p :33080&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h3&gt;1.14.3 Use the target address to select the upstream&lt;/h3&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy http --lb-hashtarget --lb-method=hash -T tcp -P 1.1.1.1:33080 -P 2.1.1.1:33080 -P 3.1.1.1:33080 -t tcp -p :33080&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h3&gt;1.15 Speed limit&lt;/h3&gt; &#xA;&lt;p&gt;The speed limit is 100K, which can be specified by the &lt;code&gt;-l&lt;/code&gt; parameter, for example: 100K 2000K 1M . 0 means no limit.&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy http -t tcp -p 2.2.2.2:33080 -l 100K&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h3&gt;1.16 Specifying Outgoing IP&lt;/h3&gt; &#xA;&lt;p&gt;The &lt;code&gt;--bind-listen&lt;/code&gt; parameter can be used to open the client connection with the portal IP, and use the portal IP as the outgoing IP to access the target website. If the incorrect IP is bound, the proxy will not work. At this point, the proxy will try to bind the target without binding the IP, and the log will prompt.&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy http -t tcp -p 2.2.2.2:33080 --bind-listen&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h4&gt;Flexible Outgoing IP&lt;/h4&gt; &#xA;&lt;p&gt;Although the above &lt;code&gt;--bind-listen&lt;/code&gt; parameter can specify the outgoing IP, the &lt;code&gt;entry IP&lt;/code&gt; and the &lt;code&gt;outgoing IP&lt;/code&gt; cannot be referenced artificially. If you want the ingress IP and the egress IP to be different, you can use the &lt;code&gt;--bind-ip&lt;/code&gt; parameter, format: &lt;code&gt;IP:port&lt;/code&gt;, for example: &lt;code&gt;1.1.1.1:8080&lt;/code&gt;, &lt;code&gt;[2000:0:0:0:0 :0:0:1]:8080&lt;/code&gt;. For multiple binding requirements, the &lt;code&gt;--bind-ip&lt;/code&gt; parameter can be repeated.&lt;/p&gt; &#xA;&lt;p&gt;For example, this machine has IP &lt;code&gt;5.5.5.5&lt;/code&gt;, &lt;code&gt;6.6.6.6&lt;/code&gt;, and monitors two ports &lt;code&gt;8888&lt;/code&gt; and &lt;code&gt;7777&lt;/code&gt;, the command is as follows:&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;Proxy tcp -t tcp -p :8888,:7777 --bind-ip 5.5.5.5:7777 --bind-ip 6.6.6.6:8888 -T tcp -P 2.2.2.2:3322&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;Then the client access port &lt;code&gt;7777&lt;/code&gt;, the outgoing IP is &lt;code&gt;5.5.5.5&lt;/code&gt;, access port &lt;code&gt;8888&lt;/code&gt;, the outgoing IP is &lt;code&gt;6.6.6.6&lt;/code&gt;, if both &lt;code&gt;--bind-ip&lt;/code&gt; and &lt;code&gt;--bind- are set at the same time listen&lt;/code&gt;,&lt;code&gt;--bind-ip&lt;/code&gt; has higher priority. s In addition, the &lt;code&gt;IP&lt;/code&gt; part of the &lt;code&gt;--bind-ip&lt;/code&gt; parameter supports specifying the &lt;code&gt;network interface name&lt;/code&gt;, &lt;code&gt;wildcards&lt;/code&gt;, and more than one can be specified. The detailed description is as follows:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Specify the network interface name, such as: &lt;code&gt;--bind-ip eth0:7777&lt;/code&gt;, and then the client accesses the &lt;code&gt;7777&lt;/code&gt; port, and the egress IP is the IP of the eth0 network interface.&lt;/li&gt; &#xA; &lt;li&gt;The network interface name supports wildcards, such as: &lt;code&gt;--bind-ip eth0.*:7777&lt;/code&gt;, then the client accesses the port &lt;code&gt;7777&lt;/code&gt;, and the egress IP is randomly selected from the IP of the network interface starting with &lt;code&gt;eth0.&lt;/code&gt;.&lt;/li&gt; &#xA; &lt;li&gt;IP supports wildcards, such as: &lt;code&gt;--bind-ip 192.168.?.*:777&lt;/code&gt;, then the client accesses the &lt;code&gt;7777&lt;/code&gt; port, the outgoing IP is all the IPs of the machine, and matches the IP of &lt;code&gt;192.168.?.*&lt;/code&gt; A randomly selected one.&lt;/li&gt; &#xA; &lt;li&gt;It can also be several combinations of network interface name and IP, and several selective divisions using half-width, such as: &lt;code&gt;-bind-ip pppoe??,192.168.?.*:7777&lt;/code&gt;, and then the client accesses the &lt;code&gt;7777&lt;/code&gt; port , The outgoing IP is the machine&#39;s network interface name matching &lt;code&gt;pppoe??&lt;/code&gt; It is randomly selected from the IP matching &lt;code&gt;192.168.?.*&lt;/code&gt; in the machine IP.&lt;/li&gt; &#xA; &lt;li&gt;The wildcard character &lt;code&gt;*&lt;/code&gt; represents 0 to any character, &lt;code&gt;? &lt;/code&gt;Represents 1 character.&lt;/li&gt; &#xA; &lt;li&gt;If the IP of the network interface changes, it will take effect in real time.&lt;/li&gt; &#xA; &lt;li&gt;You can use the &lt;code&gt;--bind-refresh&lt;/code&gt; parameter to specify the interval to refresh the local network interface information, the default is &lt;code&gt;5&lt;/code&gt;, the unit is second.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h3&gt;1.17 Certificate parameters use base64 data&lt;/h3&gt; &#xA;&lt;p&gt;By default, the -C, -K parameter is the path to the crt certificate and the key file.&lt;/p&gt; &#xA;&lt;p&gt;If it is the beginning of base64://, then the latter data is considered to be base64 encoded and will be used after decoding.&lt;/p&gt; &#xA;&lt;h3&gt;1.18 Intelligent mode&lt;/h3&gt; &#xA;&lt;p&gt;Intelligent mode setting, can be one of intelligent|direct|parent.&lt;br&gt; The default is: parent.&lt;br&gt; The meaning of each value is as follows:&lt;br&gt; &lt;code&gt;--intelligent=direct&lt;/code&gt;, the targets in the blocked are not directly connected.&lt;br&gt; &lt;code&gt;--intelligent=parent&lt;/code&gt;, the target that is not in the direct is going to the higher level.&lt;br&gt; &lt;code&gt;--intelligent=intelligent&lt;/code&gt;, blocked and direct have no targets, intelligently determine whether to use the upstream access target.&lt;/p&gt; &#xA;&lt;h3&gt;1.19 Help&lt;/h3&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy help http&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h2&gt;2.TCP Proxies&lt;/h2&gt; &#xA;&lt;h3&gt;2.1. Ordinary level TCP proxy&lt;/h3&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/snail007/goproxy@master/doc/images/tcp-1.png&#34; alt=&#34;2.1&#34;&gt;&lt;br&gt; Local execution:&lt;br&gt; &lt;code&gt;proxy tcp -p &#34;:33080&#34; -T tcp -P &#34;192.168.22.33:22&#34;&lt;/code&gt;&lt;br&gt; Then access the local port 33080 is to access port 22 of 192.168.22.33.&lt;/p&gt; &#xA;&lt;p&gt;The &lt;code&gt;-p&lt;/code&gt; parameter supports :&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;-p &#34;:8081&#34; listen on 8081&#xA;-p &#34;:8081,:8082&#34; listen on 8081 and 8082&#xA;-p &#34;:8081,:8082,:9000-9999&#34; listen on 8081 and 8082 and 9000, 9001 to 9999 for a total of 1002 ports&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;If the number of local listening ports is greater than 1, the corresponding upper port corresponding to the local port will be connected, and the port in &lt;code&gt;-P&lt;/code&gt; will be ignored.&lt;/p&gt; &#xA;&lt;p&gt;If you need a connection from all ports, connect to the upper specified port, you can add the parameter &lt;code&gt;--lock-port&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;p&gt;such as:&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy tcp -p &#34;:33080-33085&#34; -T tcp -P &#34;192.168.22.33:0&#34;&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;Then the connection of the &lt;code&gt;33080&lt;/code&gt; port will connect to the &lt;code&gt;33080&lt;/code&gt; port of 192.168.22.33, and the other ports are similar. The local and upper ports are the same. At this time, the port in the parameter &lt;code&gt;-P&lt;/code&gt; uses &lt;code&gt;0&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;p&gt;If you want to connect the ports of &lt;code&gt;33080&lt;/code&gt;, &lt;code&gt;33081&lt;/code&gt;, etc. to the &lt;code&gt;22&lt;/code&gt; port of 192.168.22.33, you can add the parameter &lt;code&gt;--lock-port&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy tcp -p &#34;:33080-33085&#34; -T tcp -P &#34;192.168.22.33:22&#34; --lock-port&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h3&gt;2.2. Ordinary secondary TCP proxy&lt;/h3&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/snail007/goproxy@master/doc/images/tcp-2.png&#34; alt=&#34;2.2&#34;&gt;&lt;br&gt; VPS (IP: 22.22.2.33) is executed:&lt;br&gt; &lt;code&gt;proxy tcp -p &#34;:33080&#34; -T tcp -P &#34;127.0.0.1:8080&#34;&lt;/code&gt;&lt;br&gt; Local execution:&lt;br&gt; &lt;code&gt;proxy tcp -p &#34;:23080&#34; -T tcp -P &#34;22.22.22.33:33080&#34;&lt;/code&gt;&lt;br&gt; Then access the local port 23080 is to access port 8020 of 22.22.22.33.&lt;/p&gt; &#xA;&lt;h3&gt;2.3. Ordinary three-level TCP proxy&lt;/h3&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/snail007/goproxy@master/doc/images/tcp-3.png&#34; alt=&#34;2.3&#34;&gt;&lt;br&gt; Primary TCP proxy VPS_01, IP: 22.22.22.22&lt;br&gt; &lt;code&gt;proxy tcp -p &#34;:38080&#34; -T tcp -P &#34;66.66.66.66:8080&#34;&lt;/code&gt;&lt;br&gt; Secondary TCP proxy VPS_02, IP: 33.33.33.33&lt;br&gt; &lt;code&gt;proxy tcp -p &#34;:28080&#34; -T tcp -P &#34;22.22.22.22:38080&#34;&lt;/code&gt;&lt;br&gt; Level 3 TCP proxy (local)&lt;br&gt; &lt;code&gt;proxy tcp -p &#34;:8080&#34; -T tcp -P &#34;33.33.33.33:28080&#34;&lt;/code&gt;&lt;br&gt; Then access the local port 8080 is to access the port 8080 of 66.66.66.66 through the encrypted TCP tunnel.&lt;/p&gt; &#xA;&lt;h3&gt;2.4. Encrypting secondary TCP proxy&lt;/h3&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/snail007/goproxy@master/doc/images/tcp-tls-2.png&#34; alt=&#34;2.4&#34;&gt;&lt;br&gt; VPS (IP: 22.22.2.33) is executed:&lt;br&gt; &lt;code&gt;proxy tcp -t tls -p &#34;:33080&#34; -T tcp -P &#34;127.0.0.1:8080&#34; -C proxy.crt -K proxy.key&lt;/code&gt;&lt;br&gt; Local execution:&lt;br&gt; &lt;code&gt;proxy tcp -p &#34;:23080&#34; -T tls -P &#34;22.22.22.33:33080&#34; -C proxy.crt -K proxy.key&lt;/code&gt;&lt;br&gt; Then access the local port 23080 is to access the port 8080 of 22.22.22.33 through the encrypted TCP tunnel.&lt;/p&gt; &#xA;&lt;h3&gt;2.5.Encrypting Level 3 TCP Agent&lt;/h3&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/snail007/goproxy@master/doc/images/tcp-tls-3.png&#34; alt=&#34;2.5&#34;&gt;&lt;br&gt; Primary TCP proxy VPS_01, IP: 22.22.22.22&lt;br&gt; &lt;code&gt;proxy tcp -t tls -p &#34;:38080&#34; -T tcp -P &#34;66.66.66.66:8080&#34; -C proxy.crt -K proxy.key&lt;/code&gt;&lt;br&gt; Secondary TCP proxy VPS_02, IP: 33.33.33.33&lt;br&gt; &lt;code&gt;proxy tcp -t tls -p &#34;:28080&#34; -T tls -P &#34;22.22.22.22:38080&#34; -C proxy.crt -K proxy.key&lt;/code&gt;&lt;br&gt; Level 3 TCP proxy (local)&lt;br&gt; &lt;code&gt;proxy tcp -p &#34;:8080&#34; -T tls -P &#34;33.33.33.33:28080&#34; -C proxy.crt -K proxy.key&lt;/code&gt;&lt;br&gt; Then access the local port 8080 is to access the port 8080 of 66.66.66.66 through the encrypted TCP tunnel.&lt;/p&gt; &#xA;&lt;h3&gt;2.6 Connecting to a upstream through a proxy&lt;/h3&gt; &#xA;&lt;p&gt;Sometimes the network where the proxy is located cannot directly access the external network. You need to use an https or socks5 proxy to access the Internet. Then this time&lt;br&gt; The -J parameter can help you to connect the proxy to the peer-P through the https or socks5 proxy when mapping the proxy tcp port, mapping the external port to the local.&lt;br&gt; The -J parameter format is as follows:&lt;/p&gt; &#xA;&lt;p&gt;Https proxy writing:&lt;br&gt; The proxy needs authentication, username: username password: password&lt;br&gt; &lt;a href=&#34;Https://username:password@host:port&#34;&gt;Https://username:password@host:port&lt;/a&gt;&lt;br&gt; Agent does not require authentication&lt;br&gt; &lt;a href=&#34;Https://host:port&#34;&gt;Https://host:port&lt;/a&gt;&lt;/p&gt; &#xA;&lt;p&gt;Socks5 proxy writing:&lt;br&gt; The proxy needs authentication, username: username password: password&lt;br&gt; Socks5://username:password@host:port&lt;br&gt; Agent does not require authentication&lt;br&gt; Socks5://host:port&lt;/p&gt; &#xA;&lt;p&gt;Host: the IP or domain name of the proxy&lt;br&gt; Port: the port of the proxy&lt;/p&gt; &#xA;&lt;h3&gt;2.7 Specify Outgoing IP&lt;/h3&gt; &#xA;&lt;p&gt;When the TCP proxy is a superior type (parameter: -T) is tcp, it supports the specified exit IP. Using the &lt;code&gt;--bind-listen&lt;/code&gt; parameter, you can open the client to connect with the portal IP, and use the portal IP as the outgoing IP to access the target website. If an incorrect IP is bound, the proxy will not work, the proxy will try to bind the target without binding the IP, and the log will prompt.&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy tcp -p &#34;:33080&#34; -T tcp -P&#34; 192.168.22.33:22&#34; -B&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h4&gt;Flexible Outgoing IP&lt;/h4&gt; &#xA;&lt;p&gt;Although the above &lt;code&gt;--bind-listen&lt;/code&gt; parameter can specify the outgoing IP, the &lt;code&gt;entry IP&lt;/code&gt; and the &lt;code&gt; outgoing IP&lt;/code&gt; cannot be referenced artificially. If you want the ingress IP to be different from the egress IP, you can use the &lt;code&gt;--bind-ip&lt;/code&gt; parameter, format: &lt;code&gt;IP:port&lt;/code&gt;, for example: &lt;code&gt;1.1.1.1:8080&lt;/code&gt; , &lt;code&gt;[2000:0:0:0:0:0:0:1]:8080&lt;/code&gt;. For multiple binding requirements, you can repeat the &lt;code&gt;--bind-ip&lt;/code&gt; parameter identification.&lt;/p&gt; &#xA;&lt;p&gt;For example, this machine has IP &lt;code&gt;5.5.5.5&lt;/code&gt;, &lt;code&gt;6.6.6.6&lt;/code&gt;, and monitors two ports &lt;code&gt;8888&lt;/code&gt; and &lt;code&gt;7777&lt;/code&gt;, the command is as follows:&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;Proxy tcp -t tcp -p :8888,:7777 --bind-ip 5.5.5.5:7777 --bind-ip 6.6.6.6:8888 -T tcp -P 2.2.2.2:3322&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;Then the client access port &lt;code&gt;7777&lt;/code&gt;, the outgoing IP is &lt;code&gt;5.5.5.5&lt;/code&gt;, access port &lt;code&gt;8888&lt;/code&gt;, the outgoing IP is &lt;code&gt;6.6.6.6&lt;/code&gt;, if both &lt;code&gt;--bind-ip&lt;/code&gt; and &lt;code&gt;--bind- are set at the same time listen&lt;/code&gt;,&lt;code&gt;--bind-ip&lt;/code&gt; has higher priority.&lt;/p&gt; &#xA;&lt;p&gt;In addition, the &lt;code&gt;IP&lt;/code&gt; part of the &lt;code&gt;--bind-ip&lt;/code&gt; parameter supports specifying the &lt;code&gt;network interface name&lt;/code&gt;, &lt;code&gt;wildcards&lt;/code&gt;, and more than one can be specified. The detailed description is as follows:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Specify the network interface name, such as: &lt;code&gt;--bind-ip eth0:7777&lt;/code&gt;, then the client accesses the &lt;code&gt;7777&lt;/code&gt; port, and the egress IP is the IP of the eth0 network interface.&lt;/li&gt; &#xA; &lt;li&gt;The network interface name supports wildcards, for example: &lt;code&gt;--bind-ip eth0.*:7777&lt;/code&gt;, then the client accesses the &lt;code&gt;7777&lt;/code&gt; port, and the egress IP is a randomly selected one of the network interface IPs starting with &lt;code&gt;eth0.&lt;/code&gt;.&lt;/li&gt; &#xA; &lt;li&gt;IP supports wildcards, such as: &lt;code&gt;--bind-ip 192.168.?.*:7777&lt;/code&gt;, then the client accesses the &lt;code&gt;7777&lt;/code&gt; port, and the exit IP is all the IPs of the machine, matching the IP of &lt;code&gt;192.168.?.*&lt;/code&gt; A randomly selected one.&lt;/li&gt; &#xA; &lt;li&gt;It can also be multiple combinations of network interface name and IP, separated by half-width commas, such as: &lt;code&gt;--bind-ip pppoe??,192.168.?.*:7777&lt;/code&gt;, then the client accesses the port &lt;code&gt;7777&lt;/code&gt;, The outgoing IP is the machine&#39;s network interface name matching &lt;code&gt;pppoe??&lt;/code&gt; It is a randomly selected one among all IPs of the machine that matches &lt;code&gt;192.168.?.*&lt;/code&gt;.&lt;/li&gt; &#xA; &lt;li&gt;The wildcard character &lt;code&gt;*&lt;/code&gt; represents 0 to any number of characters, and &lt;code&gt;?&lt;/code&gt; represents 1 character.&lt;/li&gt; &#xA; &lt;li&gt;If the IP of the network interface changes, it will take effect in real time.&lt;/li&gt; &#xA; &lt;li&gt;You can use the &lt;code&gt;--bind-refresh&lt;/code&gt; parameter to specify the interval to refresh the local network interface information, the default is &lt;code&gt;5&lt;/code&gt;, the unit is second.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h3&gt;2.8 Speed limit, connections limit&lt;/h3&gt; &#xA;&lt;p&gt;The parameter &lt;code&gt;--max-conns&lt;/code&gt; can limit the maximum number of connections per port.&lt;br&gt; For example, limit the maximum number of connections per port:&lt;br&gt; &lt;code&gt;proxy tcp -p &#34;:33080&#34; -T tcp -P &#34;192.168.22.33:22&#34; --max-conns 1000&lt;/code&gt;&lt;br&gt; The parameter &lt;code&gt;--rate-limit&lt;/code&gt; can limit the rate of each tcp connection.&lt;br&gt; For example, limit the connection rate of each tcp to 100k/s:&lt;br&gt; &lt;code&gt;proxy tcp -p &#34;:33080&#34; -T tcp -P &#34;192.168.22.33:22&#34; --rate-limit 100k&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h3&gt;2.9 Compressed transmission&lt;/h3&gt; &#xA;&lt;p&gt;&lt;code&gt;--c&lt;/code&gt; controls whether to compress transmission between local and client, default false;&lt;code&gt; --C&lt;/code&gt; controls whether to compress transmission between local and upstream, default false.&lt;/p&gt; &#xA;&lt;p&gt;Examples:&lt;/p&gt; &#xA;&lt;p&gt;VPS (IP: 22.22.22.33) implementation: &lt;code&gt;proxy tcp -t tcp --c -p &#34;:33080&#34; -T tcp -P &#34;127.0.0.1:8080&#34;&lt;/code&gt; Local execution: &lt;code&gt;proxy tcp -t tcp -p &#34;:23080&#34; -T tcp -P &#34;22.22.22.33:33080&#34; --C&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h3&gt;2.10 View Help&lt;/h3&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy help tcp&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h2&gt;3.UDP Proxies&lt;/h2&gt; &#xA;&lt;h3&gt;3.1. Ordinary UDP proxy&lt;/h3&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/snail007/goproxy@master/doc/images/udp-1.png&#34; alt=&#34;3.1&#34;&gt;&lt;br&gt; Local execution:&lt;br&gt; &lt;code&gt;proxy udp -p &#34;:5353&#34; -T udp -P &#34;8.8.8.8:53&#34;&lt;/code&gt;&lt;br&gt; Then access the local UDP: 5353 port is to access 8.8.8.8 UDP: 53 port.&lt;/p&gt; &#xA;&lt;p&gt;The &lt;code&gt;-p&lt;/code&gt; parameter supports :&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;-p &#34;:8081&#34; listen on 8081&#xA;-p &#34;:8081,:8082&#34; listen on 8081 and 8082&#xA;-p &#34;:8081,:8082,:9000-9999&#34; listen on 8081 and 8082 and 9000, 9001 to 9999 for a total of 1002 ports&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;If the number of local listening ports is greater than 1, the corresponding upper port corresponding to the local port will be connected, and the port in &lt;code&gt;-P&lt;/code&gt; will be ignored.&lt;/p&gt; &#xA;&lt;p&gt;If you need a connection from all ports, connect to the upper specified port, you can add the parameter &lt;code&gt;--lock-port&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;p&gt;such as:&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy udp -p &#34;:33080-33085&#34; -T udp -P &#34;192.168.22.33:0&#34;&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;Then the connection of the &lt;code&gt;33080&lt;/code&gt; port will connect to the &lt;code&gt;33080&lt;/code&gt; port of 192.168.22.33, and the other ports are similar. The local and upper ports are the same. At this time, the port in the parameter &lt;code&gt;-P&lt;/code&gt; uses &lt;code&gt;0&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;p&gt;If you want to connect the ports of &lt;code&gt;33080&lt;/code&gt;, &lt;code&gt;33081&lt;/code&gt;, etc. to the &lt;code&gt;2222&lt;/code&gt; port of 192.168.22.33, you can add the parameter &lt;code&gt;--lock-port&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy udp -p &#34;:33080-33085&#34; -T udp -P &#34;192.168.22.33:2222&#34; --lock-port&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h3&gt;3.2. Ordinary secondary UDP proxy&lt;/h3&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/snail007/goproxy@master/doc/images/udp-2.png&#34; alt=&#34;3.2&#34;&gt;&lt;br&gt; VPS (IP: 22.22.2.33) is executed:&lt;br&gt; &lt;code&gt;proxy tcp -p &#34;:33080&#34; -T udp -P &#34;8.8.8.8:53&#34;&lt;/code&gt;&lt;br&gt; Local execution:&lt;br&gt; &lt;code&gt;proxy udp -p &#34;:5353&#34; -T tcp -P &#34;22.22.22.33:33080&#34;&lt;/code&gt;&lt;br&gt; Then access the local UDP: 5353 port is through the TCP tunnel, through the VPS access 8.8.8.8 UDP: 53 port.&lt;/p&gt; &#xA;&lt;h3&gt;3.3. Ordinary three-level UDP proxy&lt;/h3&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/snail007/goproxy@master/doc/images/udp-3.png&#34; alt=&#34;3.3&#34;&gt;&lt;br&gt; Primary TCP proxy VPS_01, IP: 22.22.22.22&lt;br&gt; &lt;code&gt;proxy tcp -p &#34;:38080&#34; -T udp -P &#34;8.8.8.8:53&#34;&lt;/code&gt;&lt;br&gt; Secondary TCP proxy VPS_02, IP: 33.33.33.33&lt;br&gt; &lt;code&gt;proxy tcp -p &#34;:28080&#34; -T tcp -P &#34;22.22.22.22:38080&#34;&lt;/code&gt;&lt;br&gt; Level 3 TCP proxy (local)&lt;br&gt; &lt;code&gt;proxy udp -p &#34;:5353&#34; -T tcp -P &#34;33.33.33.33:28080&#34;&lt;/code&gt;&lt;br&gt; Then access to the local 5353 port is through the TCP tunnel, through the VPS to access port 8.8.8.8.&lt;/p&gt; &#xA;&lt;h3&gt;3.4. Encrypting secondary UDP proxy&lt;/h3&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/snail007/goproxy@master/doc/images/udp-tls-2.png&#34; alt=&#34;3.4&#34;&gt;&lt;br&gt; VPS (IP: 22.22.2.33) is executed:&lt;br&gt; &lt;code&gt;proxy tcp -t tls -p &#34;:33080&#34; -T udp -P &#34;8.8.8.8:53&#34; -C proxy.crt -K proxy.key&lt;/code&gt;&lt;br&gt; Local execution:&lt;br&gt; &lt;code&gt;proxy udp -p &#34;:5353&#34; -T tls -P &#34;22.22.22.33:33080&#34; -C proxy.crt -K proxy.key&lt;/code&gt;&lt;br&gt; Then access the local UDP: 5353 port is through the encrypted TCP tunnel, through the VPS access 8.8.8.8 UDP: 53 port.&lt;/p&gt; &#xA;&lt;h3&gt;3.5. Encryption Level 3 UDP Agent&lt;/h3&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/snail007/goproxy@master/doc/images/udp-tls-3.png&#34; alt=&#34;3.5&#34;&gt;&lt;br&gt; Primary TCP proxy VPS_01, IP: 22.22.22.22&lt;br&gt; &lt;code&gt;proxy tcp -t tls -p &#34;:38080&#34; -T udp -P &#34;8.8.8.8:53&#34; -C proxy.crt -K proxy.key&lt;/code&gt;&lt;br&gt; Secondary TCP proxy VPS_02, IP: 33.33.33.33&lt;br&gt; &lt;code&gt;proxy tcp -t tls -p &#34;:28080&#34; -T tls -P &#34;22.22.22.22:38080&#34; -C proxy.crt -K proxy.key&lt;/code&gt;&lt;br&gt; Level 3 TCP proxy (local)&lt;br&gt; &lt;code&gt;proxy udp -p &#34;:5353&#34; -T tls -P &#34;33.33.33.33:28080&#34; -C proxy.crt -K proxy.key&lt;/code&gt;&lt;br&gt; Then access the local 5353 port is to access the 8.8.8.8 port 53 through VPS_01 through the encrypted TCP tunnel.&lt;/p&gt; &#xA;&lt;h3&gt;3.6 Specify Outgoing IP&lt;/h3&gt; &#xA;&lt;p&gt;When the UDP upstream proxies (parameter: -T) is udp, it supports the specified outgoing IP. Using the &lt;code&gt;--bind-listen&lt;/code&gt; parameter, you can open the client to connect with the server IP, and use the server IP as the outgoing IP to access the target. If an incorrect IP is bound, the proxy will not work.&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy udp -p &#34;:33080&#34; -T udp -P &#34;192.168.22.33:2222&#34; -B&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h3&gt;3.7 Help&lt;/h3&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy help udp&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h2&gt;4. Expose Intranet&lt;/h2&gt; &#xA;&lt;h3&gt;4.1 principle description&lt;/h3&gt; &#xA;&lt;p&gt;Intranet penetration, divided into two versions, &#34;multi-link version&#34; and &#34;multiplexed version&#34;, generally like a web service, this service is not a long-term connection, it is recommended to use &#34;multi-link version&#34;, if it is to keep long The time connection suggests using a &#34;multiplexed version.&#34;&lt;/p&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;Multi-link version, the corresponding sub-command is tserver, tclient, tbridge.&lt;/li&gt; &#xA; &lt;li&gt;Multiplexed version, the corresponding subcommand is server, client, bridge.&lt;/li&gt; &#xA; &lt;li&gt;The parameters of the multi-link version and the multiplex version are exactly the same.&lt;/li&gt; &#xA; &lt;li&gt;The multiplexed version of the server, client can open the compressed transmission, the parameter is --c.&lt;/li&gt; &#xA; &lt;li&gt;server, client either open compression, or not open, can not open only one.&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;p&gt;The following tutorial uses the &#34;multiplexed version&#34; as an example to illustrate how to use it.&lt;br&gt; The intranet penetration consists of three parts: client, server, and bridge; client and server actively connect to the bridge for bridging.&lt;/p&gt; &#xA;&lt;h3&gt;4.2 TCP common usage&lt;/h3&gt; &#xA;&lt;p&gt;Background:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Company Machine A provides web service port 80&lt;/li&gt; &#xA; &lt;li&gt;There is a VPS, public network IP: 22.22.22.22&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;Demand:&lt;br&gt; At home, you can access the port 80 of company machine A by accessing port 28080 of the VPS.&lt;/p&gt; &#xA;&lt;p&gt;Steps:&lt;br&gt; Execute on vps&lt;br&gt; &lt;code&gt;proxy bridge -p &#34;:33080&#34; -C proxy.crt -K proxy.key&lt;/code&gt;&lt;br&gt; &lt;code&gt;proxy server -r &#34;:28080@:80&#34; -P &#34;127.0.0.1:33080&#34; -C proxy.crt -K proxy.key&lt;/code&gt;&lt;/p&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;Execute on company machine A&lt;br&gt; &lt;code&gt;proxy client -P &#34;22.22.22.22:33080&#34; -C proxy.crt -K proxy.key&lt;/code&gt;&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;p&gt;Complete&lt;/p&gt; &#xA;&lt;h3&gt;4.3 WeChat interface local development&lt;/h3&gt; &#xA;&lt;p&gt;Background:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Your own notebook provides nginx service port 80&lt;/li&gt; &#xA; &lt;li&gt;There is a VPS, public network IP: 22.22.22.22&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;Demand:&lt;br&gt; Fill in the address in the webpage callback interface configuration of WeChat&#39;s development account: &lt;a href=&#34;http://22.22.22.22/calback.php&#34;&gt;http://22.22.22.22/calback.php&lt;/a&gt;&lt;br&gt; Then you can access the calback.php under the 80 port of the notebook. If you need to bind the domain name, you can use your own domain name.&lt;br&gt; For example: wx-dev.xxx.com resolves to 22.22.22.22, and then in your own notebook nginx&lt;br&gt; Configure the domain name wx-dev.xxx.com to the specific directory.&lt;/p&gt; &#xA;&lt;p&gt;Steps:&lt;/p&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt; &lt;p&gt;Execute on vps to ensure that port 80 of vps is not occupied by other programs.&lt;br&gt; &lt;code&gt;proxy bridge -p &#34;:33080&#34; -C proxy.crt -K proxy.key&lt;/code&gt;&lt;br&gt; &lt;code&gt;proxy server -r &#34;:80@:80&#34; -P &#34;22.22.22.22:33080&#34; -C proxy.crt -K proxy.key&lt;/code&gt;&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;Execute on your laptop&lt;br&gt; &lt;code&gt;proxy client -P &#34;22.22.22.22:33080&#34; -C proxy.crt -K proxy.key&lt;/code&gt;&lt;/p&gt; &lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;p&gt;Complete&lt;/p&gt; &#xA;&lt;h3&gt;4.4 UDP common usage&lt;/h3&gt; &#xA;&lt;p&gt;Background:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Company Machine A provides DNS resolution service, UDP: port 53&lt;/li&gt; &#xA; &lt;li&gt;There is a VPS, public network IP: 22.22.22.22&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;Demand:&lt;br&gt; At home, you can use the company machine A to perform domain name resolution services by setting the local dns to 22.22.22.22.&lt;/p&gt; &#xA;&lt;p&gt;Steps:&lt;br&gt; Execute on vps&lt;br&gt; &lt;code&gt;proxy bridge -p &#34;:33080&#34; -C proxy.crt -K proxy.key&lt;/code&gt;&lt;br&gt; &lt;code&gt;proxy server --udp -r &#34;:53@:53&#34; -P &#34;127.0.0.1:33080&#34; -C proxy.crt -K proxy.key&lt;/code&gt;&lt;/p&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;Execute on company machine A&lt;br&gt; &lt;code&gt;proxy client -P &#34;22.22.22.22:33080&#34; -C proxy.crt -K proxy.key&lt;/code&gt;&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;p&gt;Complete&lt;/p&gt; &#xA;&lt;h3&gt;4.5 advanced usage one&lt;/h3&gt; &#xA;&lt;p&gt;Background:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Company Machine A provides web service port 80&lt;/li&gt; &#xA; &lt;li&gt;There is a VPS, public network IP: 22.22.22.22&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;Demand:&lt;br&gt; In order to be safe, I don&#39;t want to have access to the company machine A on the VPS, and I can access the port 28080 of the machine at home.&lt;br&gt; Access to port 80 of company machine A via an encrypted tunnel.&lt;/p&gt; &#xA;&lt;p&gt;Steps:&lt;br&gt; Execute on vps&lt;br&gt; &lt;code&gt;proxy bridge -p &#34;:33080&#34; -C proxy.crt -K proxy.key&lt;/code&gt;&lt;/p&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt; &lt;p&gt;Execute on company machine A&lt;br&gt; &lt;code&gt;proxy client -P &#34;22.22.22.22:33080&#34; -C proxy.crt -K proxy.key&lt;/code&gt;&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;Execute on your home computer&lt;br&gt; &lt;code&gt;proxy server -r &#34;:28080@:80&#34; -P &#34;22.22.22.22:33080&#34; -C proxy.crt -K proxy.key&lt;/code&gt;&lt;/p&gt; &lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;p&gt;Complete&lt;/p&gt; &#xA;&lt;h3&gt;4.6 Advanced Usage II&lt;/h3&gt; &#xA;&lt;p&gt;Tip:&lt;br&gt; If multiple clients are connected to the same bridge at the same time, you need to specify a different key, which can be set by the --k parameter, and --k can be any unique string.&lt;br&gt; Just be the only one on the same bridge.&lt;br&gt; When the server is connected to the bridge, if there are multiple clients connecting to the same bridge at the same time, you need to use the --k parameter to select the client.&lt;br&gt; Expose multiple ports by repeating the -r parameter. The format of -r is: &#34;local IP: local port @clientHOST:client port&#34;.&lt;/p&gt; &#xA;&lt;p&gt;Background:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Company Machine A provides web service port 80, ftp service port 21&lt;/li&gt; &#xA; &lt;li&gt;There is a VPS, public network IP: 22.22.22.22&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;Demand:&lt;br&gt; At home, you can access the port 80 of company machine A by accessing port 28080 of the VPS.&lt;br&gt; At home, I can access the 21 port of company machine A by accessing port 29090 of the VPS.&lt;/p&gt; &#xA;&lt;p&gt;Steps:&lt;br&gt; Execute on vps&lt;br&gt; &lt;code&gt;proxy bridge -p &#34;:33080&#34; -C proxy.crt -K proxy.key&lt;/code&gt;&lt;br&gt; &lt;code&gt;proxy server -r &#34;:28080@:80&#34; -r &#34;:29090@:21&#34; --k test -P &#34;127.0.0.1:33080&#34; -C proxy.crt -K proxy.key&lt;/code&gt;&lt;/p&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;Execute on company machine A&lt;br&gt; &lt;code&gt;proxy client --k test -P &#34;22.22.22.22:33080&#34; -C proxy.crt -K proxy.key&lt;/code&gt;&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;p&gt;Complete&lt;/p&gt; &#xA;&lt;h3&gt;4.7.server -r parameter&lt;/h3&gt; &#xA;&lt;p&gt;The full format of -r is: &lt;code&gt;PROTOCOL://LOCAL_IP:LOCAL_PORT@[CLIENT_KEY]CLIENT_LOCAL_HOST:CLIENT_LOCAL_PORT&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;4.7.1. Protocol PROTOCOL: tcp or udp.&lt;br&gt; For example: &lt;code&gt;-r &#34;udp://:10053@:53&#34; -r &#34;tcp://:10800@:1080&#34; -r &#34;:8080@:80&#34;&lt;/code&gt;&lt;br&gt; If the --udp parameter is specified, PROTOCOL defaults to udp, then:&lt;code&gt;-r &#34;:8080@:80&#34;&lt;/code&gt; defaults to udp;&lt;br&gt; If the --udp parameter is not specified, PROTOCOL defaults to tcp, then: &lt;code&gt;-r &#34;:8080@:80&#34;&lt;/code&gt; defaults to tcp;&lt;/p&gt; &#xA;&lt;p&gt;4.7.2. CLIENT_KEY: The default is default.&lt;br&gt; For example: -r &#34;udp://:10053@[test1]:53&#34; -r &#34;tcp://:10800@[test2]:1080&#34; -r &#34;:8080@:80&#34;&lt;br&gt; If the --k parameter is specified, such as --k test, then: &lt;code&gt;-r &#34;:8080@:80&#34;&lt;/code&gt;CLIENT_KEY defaults to test;&lt;br&gt; If the --k parameter is not specified, then: &lt;code&gt;-r &#34;:8080@:80&#34;&lt;/code&gt;CLIENT_KEY defaults to default;&lt;/p&gt; &#xA;&lt;p&gt;4.7.3. LOCAL_IP is empty. The default is: &lt;code&gt;0.0.0.0&lt;/code&gt;, CLIENT_LOCAL_HOST is empty. The default is: &lt;code&gt;127.0.0.1&lt;/code&gt;;&lt;/p&gt; &#xA;&lt;h3&gt;4.8.server and client connect bridge through proxy&lt;/h3&gt; &#xA;&lt;p&gt;Sometimes the network where the server or client is located cannot directly access the external network. You need to use an https or socks5 proxy to access the Internet. Then this time&lt;br&gt; The -J parameter can help you to connect the server or client to the bridge via https or socks5.&lt;br&gt; The -J parameter format is as follows:&lt;/p&gt; &#xA;&lt;p&gt;Https proxy writing:&lt;br&gt; The proxy needs authentication, username: username password: password&lt;br&gt; &lt;a href=&#34;Https://username:password@host:port&#34;&gt;Https://username:password@host:port&lt;/a&gt;&lt;br&gt; Agent does not require authentication&lt;br&gt; &lt;a href=&#34;Https://host:port&#34;&gt;Https://host:port&lt;/a&gt;&lt;/p&gt; &#xA;&lt;p&gt;Socks5 proxy writing:&lt;br&gt; The proxy needs authentication, username: username password: password&lt;br&gt; Socks5://username:password@host:port&lt;br&gt; Agent does not require authentication&lt;br&gt; Socks5://host:port&lt;/p&gt; &#xA;&lt;p&gt;Host: the IP or domain name of the proxy&lt;br&gt; Port: the port of the proxy&lt;/p&gt; &#xA;&lt;h3&gt;4.9. Expose HTTP service&lt;/h3&gt; &#xA;&lt;p&gt;Usually the HTTP request client will use the server&#39;s ip and port to set the HOST field, but it is not the same as the expected backend actual HOST, which causes tcp to be passed.However, the backend relies on the HOST field to locate the virtual host and it will not work. Now use the &lt;code&gt;--http-host&lt;/code&gt; parameter to force the HOST field value of the http header to be the actual value of the backend.Domain names and ports can be easily solved. After using the &lt;code&gt;--http-host&lt;/code&gt; parameter, two headers will be added to the header of each HTTP request. The &lt;code&gt;X-Forwarded-For&lt;/code&gt; and &lt;code&gt;X-Real-IP&lt;/code&gt; values are the client IP, so the backend http service can easily obtain the real IP address of the client.&lt;/p&gt; &#xA;&lt;p&gt;The format of the &lt;code&gt;server&lt;/code&gt;-http-host parameter is as follows:&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;--http-host www.test.com:80@2200&lt;/code&gt;, if the server listens to multiple ports, just repeat the &lt;code&gt;--http-host&lt;/code&gt; parameter to set the HOST for each port.&lt;/p&gt; &#xA;&lt;p&gt;Example:&lt;/p&gt; &#xA;&lt;p&gt;For example, the client local nginx, 127.0.0.1:80 provides a web service, which is bound to a domain name &lt;code&gt;local.com&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;p&gt;Then the server startup parameters can be as follows:&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy server -P :30000 -r :2500@127.0.0.1:80 --http-host local.com@2500&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;Explanation:&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;-r :2500@127.0.0.1:80&lt;/code&gt; and &lt;code&gt;--http-host local.com:80@2500&lt;/code&gt; The 2500 port is the port that the server listens locally.&lt;/p&gt; &#xA;&lt;p&gt;When the http protocol is used to request the ip:2500 port of the server, the header HOST field of http will be set to &lt;code&gt;local.com&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;h3&gt;4.10 About traffic statistics&lt;/h3&gt; &#xA;&lt;p&gt;If you start a server docking peer separately, it is the proxy-admin control panel. You need to create a new mapping in the upper-level control panel to obtain the ID of the mapping rule.&lt;/p&gt; &#xA;&lt;p&gt;Then start the server and add the parameter --server-id=the ID of the mapping rule to count the traffic.&lt;/p&gt; &#xA;&lt;h3&gt;4.11 About p2p&lt;/h3&gt; &#xA;&lt;p&gt;Intranet penetration support When the server and client network conditions are met, the server and client are directly connected through p2p. The opening method is:&lt;/p&gt; &#xA;&lt;p&gt;When starting the bridge, server, client, add the &lt;code&gt;--p2p&lt;/code&gt; parameter. The server&#39;s -r parameter can be used to enable p2p (ptcp and pudp) for the port.&lt;/p&gt; &#xA;&lt;p&gt;If the p2p hole fails between the server and the client, the bridge transfer data is automatically switched.&lt;/p&gt; &#xA;&lt;h3&gt;4.12 Client key whitelist&lt;/h3&gt; &#xA;&lt;p&gt;The intranet penetrating bridge can set the client key whitelist. The parameter is --client-keys. The format can be:&lt;/p&gt; &#xA;&lt;p&gt;a. File name, file content One client key can only contain the alphanumeric underscore, which is the value of the client startup parameter --k. Only the client key can connect to the whitelist client. The line starting with # is a comment.&lt;/p&gt; &#xA;&lt;p&gt;b. The base64 encoding at the beginning of &#34;base64://&#34; is the content of the file described in a above, for example: base64://ajfpoajsdfa=&lt;/p&gt; &#xA;&lt;p&gt;c. &#34;str://&#34; multiple keywords separated by a comma at the beginning, such as: str://default,company,school&lt;/p&gt; &#xA;&lt;p&gt;The default is empty, allowing all keys.&lt;/p&gt; &#xA;&lt;h3&gt;4.13 Network NAT Type Judgment&lt;/h3&gt; &#xA;&lt;p&gt;Senat type judgment, easy to check whether the network supports p2p, you can execute: &lt;code&gt;proxy tools -a nattype&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h3&gt;4.14 Help&lt;/h3&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy help bridge&lt;/code&gt;&lt;br&gt; &lt;code&gt;proxy help server&lt;/code&gt;&lt;br&gt; &lt;code&gt;proxy help client&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h2&gt;5.SOCKS5 Proxies&lt;/h2&gt; &#xA;&lt;p&gt;prompt:&lt;/p&gt; &#xA;&lt;p&gt;SOCKS5 proxy, support CONNECT, UDP protocol, does not support BIND, supports username and password authentication.&lt;/p&gt; &#xA;&lt;p&gt;***The udp function of socks5 is turned off by default, and can be turned on by &lt;code&gt;--udp&lt;/code&gt;. The default is a random port for handshake, and performance can be improved by fixing a port. Set by parameter &lt;code&gt;--udp-port 0&lt;/code&gt;, &lt;code&gt;0&lt;/code&gt; represents a free port is randomly selected, or you can manually specify a specific port. ***&lt;/p&gt; &#xA;&lt;h3&gt;5.1. Ordinary SOCKS5 Agent&lt;/h3&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy socks -t tcp -p &#34;0.0.0.0:38080&#34;&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;Listen port argument &lt;code&gt;-p&lt;/code&gt; can be:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;  -p &#34;:8081&#34;  listen on 8081&#xA;  -p &#34;:8081,:8082&#34;  listen on 8081 and 8082&#xA;  -p &#34;:8081,:8082,:9000-9999&#34; listen on 8081 and 8082 and 9000 and 9001 to 9999, 1002 total ports  &#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h3&gt;5.2. Ordinary secondary SOCKS5 agent&lt;/h3&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/snail007/goproxy@master/doc/images/socks-2.png&#34; alt=&#34;5.2&#34;&gt;&lt;br&gt; Use local port 8090, assuming the upstream SOCKS5 proxy is &lt;code&gt;22.22.22.22:8080&lt;/code&gt;&lt;br&gt; &lt;code&gt;proxy socks -t tcp -p &#34;0.0.0.0:8090&#34; -T tcp -P &#34;22.22.22.22:8080&#34; &lt;/code&gt;&lt;br&gt; We can also specify the black and white list file of the website domain name, one domain name and one domain name, the matching rule is the rightmost match, for example: baidu.com, the match is &lt;em&gt;.&lt;/em&gt;.baidu.com, the blacklist domain name domain name goes directly to the upstream agent, white The domain name of the list does not go to the upstream agent; if the domain name is in the blacklist and in the whitelist, the blacklist works.&lt;br&gt; &lt;code&gt;proxy socks -p &#34;0.0.0.0:8090&#34; -T tcp -P &#34;22.22.22.22:8080&#34; -b blocked.txt -d direct.txt&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h3&gt;5.3. SOCKS Level 2 Agent (Encryption)&lt;/h3&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/snail007/goproxy@master/doc/images/socks-tls-2.png&#34; alt=&#34;5.3&#34;&gt;&lt;br&gt; Level 1 SOCKS proxy (VPS, IP: 22.22.22.22)&lt;br&gt; &lt;code&gt;proxy socks -t tls -p &#34;:38080&#34; -C proxy.crt -K proxy.key&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;Secondary SOCKS proxy (local Linux)&lt;br&gt; &lt;code&gt;proxy socks -t tcp -p &#34;:8080&#34; -T tls -P &#34;22.22.22.22:38080&#34; -C proxy.crt -K proxy.key&lt;/code&gt;&lt;br&gt; Then access the local port 8080 is to access the proxy port 38080 on the VPS.&lt;/p&gt; &#xA;&lt;p&gt;Secondary SOCKS proxy (local windows)&lt;br&gt; &lt;code&gt;proxy.exe socks -t tcp -p &#34;:8080&#34; -T tls -P &#34;22.22.22.22:38080&#34; -C proxy.crt -K proxy.key&lt;/code&gt;&lt;br&gt; Then set your windos system, the proxy that needs to go through the proxy Internet program is the socks5 mode, the address is: 127.0.0.1, the port is: 8080, the program can access the Internet through vps through the encrypted channel.&lt;/p&gt; &#xA;&lt;h3&gt;5.4. SOCKS Level 3 Agent (Encryption)&lt;/h3&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/snail007/goproxy@master/doc/images/socks-tls-3.png&#34; alt=&#34;5.4&#34;&gt;&lt;br&gt; Level 1 SOCKS proxy VPS_01, IP: 22.22.22.22&lt;br&gt; &lt;code&gt;proxy socks -t tls -p &#34;:38080&#34; -C proxy.crt -K proxy.key&lt;/code&gt;&lt;br&gt; Secondary SOCKS proxy VPS_02, IP: 33.33.33.33&lt;br&gt; &lt;code&gt;proxy socks -t tls -p &#34;:28080&#34; -T tls -P &#34;22.22.22.22:38080&#34; -C proxy.crt -K proxy.key&lt;/code&gt;&lt;br&gt; Level 3 SOCKS proxy (local)&lt;br&gt; &lt;code&gt;proxy socks -t tcp -p &#34;:8080&#34; -T tls -P &#34;33.33.33.33:28080&#34; -C proxy.crt -K proxy.key&lt;/code&gt;&lt;br&gt; Then accessing the local port 8080 is to access the proxy port 38080 on the first-level SOCKS proxy.&lt;/p&gt; &#xA;&lt;h3&gt;5.5. SOCKS proxy traffic is forced to go to the upper level SOCKS proxy&lt;/h3&gt; &#xA;&lt;p&gt;By default, the proxy will intelligently determine whether a website domain name is inaccessible. If it is not accessible, it will go to the upstream SOCKS proxy. With --always, all SOCKS proxy traffic can be forced to go to the upper SOCKS proxy.&lt;br&gt; &lt;code&gt;proxy socks --always -t tls -p &#34;:28080&#34; -T tls -P &#34;22.22.22.22:38080&#34; -C proxy.crt -K proxy.key&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h3&gt;5.6. SOCKS via SSH relay&lt;/h3&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/snail007/goproxy@master/doc/images/socks-ssh.png&#34; alt=&#34;5.6&#34;&gt;&lt;br&gt; Description: The principle of ssh transfer is to use the forwarding function of ssh, that is, after you connect to ssh, you can access the target address through ssh proxy.&lt;br&gt; Suppose there is: vps&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;IP is 2.2.2.2, ssh port is 22, ssh username is: user, ssh user password is: demo&lt;/li&gt; &#xA; &lt;li&gt;The user&#39;s ssh private key name is user.key&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h4&gt;&lt;em&gt;5.6.1 How to ssh username and password&lt;/em&gt;&lt;/h4&gt; &#xA;&lt;p&gt;Local SOCKS5 proxy port 28080, execute:&lt;br&gt; &lt;code&gt;proxy socks -T ssh -P &#34;2.2.2.2:22&#34; -u user -D demo -t tcp -p &#34;:28080&#34;&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h4&gt;&lt;em&gt;5.6.2 How to ssh username and key&lt;/em&gt;&lt;/h4&gt; &#xA;&lt;p&gt;Local SOCKS5 proxy port 28080, execute:&lt;br&gt; &lt;code&gt;proxy socks -T ssh -P &#34;2.2.2.2:22&#34; -u user -S user.key -t tcp -p &#34;:28080&#34;&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;Then access the local port 28080 is to access the target address through the VPS.&lt;/p&gt; &#xA;&lt;h3&gt;5.7. Certification&lt;/h3&gt; &#xA;&lt;p&gt;For the socks5 proxy protocol, we can perform username and password authentication. The authenticated username and password can be specified on the command line.&lt;br&gt; &lt;code&gt;proxy socks -t tcp -p &#34;:33080&#34; -a &#34;user1:pass1&#34; -a &#34;user2:pass2&#34;&lt;/code&gt;&lt;br&gt; For multiple users, repeat the -a parameter.&lt;br&gt; It can also be placed in a file in the format of a &#34;username:password&#34; and then specified with -F.&lt;br&gt; &lt;code&gt;proxy socks -t tcp -p &#34;:33080&#34; -F auth-file.txt&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;In addition, the socks5 agent also integrates external HTTP API authentication. We can specify an http url interface address with the --auth-url parameter.&lt;br&gt; Then when there is a user connection, the proxy will request the url in GET mode, with the following three parameters. If the HTTP status code 204 is returned, the authentication is successful.&lt;br&gt; In other cases, the authentication failed.&lt;br&gt; For example:&lt;br&gt; &lt;code&gt;proxy socks -t tcp -p &#34;:33080&#34; --auth-url &#34;http://test.com/auth.php&#34;&lt;/code&gt;&lt;br&gt; When the user connects, the proxy will request the url (&#34;&lt;a href=&#34;http://test.com/auth.php&#34;&gt;http://test.com/auth.php&lt;/a&gt;&#34;) in GET mode.&lt;br&gt; Bring four parameters: user, pass, ip, local_ip:&lt;br&gt; &lt;a href=&#34;Http://test.com/auth.php?user=%7BUSER%7D&amp;amp;pass=%7BPASS%7D&amp;amp;ip=%7BIP%7D&amp;amp;local_ip=%7BLOCAL_IP%7D&#34;&gt;Http://test.com/auth.php?user={USER}&amp;amp;pass={PASS}&amp;amp;ip={IP}&amp;amp;local_ip={LOCAL_IP}&lt;/a&gt;&lt;br&gt; User: username&lt;br&gt; Pass: password&lt;br&gt; Ip: User&#39;s IP, for example: 192.168.1.200&lt;br&gt; Local_ip: IP of the server accessed by the user, for example: 3.3.3.3&lt;/p&gt; &#xA;&lt;p&gt;If there is no -a or -F or --auth-url parameter, the authentication is turned off.&lt;/p&gt; &#xA;&lt;h3&gt;5.8.KCP protocol transmission&lt;/h3&gt; &#xA;&lt;p&gt;The KCP protocol requires the --kcp-key parameter to set a password for encrypting and decrypting data.&lt;/p&gt; &#xA;&lt;p&gt;Level 1 HTTP proxy (VPS, IP: 22.22.22.22)&lt;br&gt; &lt;code&gt;proxy socks -t kcp -p &#34;:38080&#34; --kcp-key mypassword&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;Secondary HTTP proxy (local Linux)&lt;br&gt; &lt;code&gt;proxy socks -t tcp -p &#34;:8080&#34; -T kcp -P &#34;22.22.22.22:38080&#34; --kcp-key mypassword&lt;/code&gt;&lt;br&gt; Then access the local port 8080 is to access the proxy port 38080 on the VPS, the data is transmitted through the kcp protocol.&lt;/p&gt; &#xA;&lt;h3&gt;5.9. Custom DNS&lt;/h3&gt; &#xA;&lt;p&gt;--dns-address and --dns-ttl parameters, used to specify the dns (--dns-address) used by the proxy to access the domain name.&lt;br&gt; And the analysis result cache time (--dns-ttl) seconds, to avoid system dns interference to the proxy, in addition to the cache function can also reduce the dns resolution time to improve access speed.&lt;br&gt; For example:&lt;br&gt; &lt;code&gt;proxy socks -p &#34;:33080&#34; --dns-address &#34;8.8.8.8:53&#34; --dns-ttl 300&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h3&gt;5.10 Custom Encryption&lt;/h3&gt; &#xA;&lt;p&gt;The proxy&#39;s socks proxy can encrypt tcp data through tls standard encryption and kcp protocol on top of tcp. In addition, it supports custom encryption after tls and kcp, which means that custom encryption and tls|kcp can be used together. The internal use of AES256 encryption, you only need to define a password when you use it.&lt;br&gt; Encryption is divided into two parts, one is whether the local (-z) encryption and decryption, and the other is whether the transmission with the upstream (-Z) is encrypted or decrypted.&lt;/p&gt; &#xA;&lt;p&gt;Custom encryption requires both sides to be proxy.&lt;/p&gt; &#xA;&lt;p&gt;The following two levels, three levels for example:&lt;/p&gt; &#xA;&lt;p&gt;Secondary instance&lt;br&gt; Execute on level 1 vps (ip: 2.2.2.2):&lt;br&gt; &lt;code&gt;proxy socks -t tcp -z demo_password -p :7777&lt;/code&gt;&lt;br&gt; Local secondary execution:&lt;br&gt; &lt;code&gt;proxy socks -T tcp -P 2.2.2.2:777 -Z demo_password -t tcp -p :8080&lt;/code&gt;&lt;br&gt; In this way, when the website is accessed through the local agent 8080, the target website is accessed through encrypted transmission with the upstream.&lt;/p&gt; &#xA;&lt;p&gt;Three-level instance&lt;br&gt; Execute on level 1 vps (ip: 2.2.2.2):&lt;br&gt; &lt;code&gt;proxy socks -t tcp -z demo_password -p :7777&lt;/code&gt;&lt;br&gt; Execute on the secondary vps (ip: 3.3.3.3):&lt;br&gt; &lt;code&gt;proxy socks -T tcp -P 2.2.2.2:7777 -Z demo_password -t tcp -z other_password -p :8888&lt;/code&gt;&lt;br&gt; Local three-level execution:&lt;br&gt; &lt;code&gt;proxy socks -T tcp -P 3.3.3.3:8888 -Z other_password -t tcp -p :8080&lt;/code&gt;&lt;br&gt; In this way, when the website is accessed through the local agent 8080, the target website is accessed through encrypted transmission with the upstream.&lt;/p&gt; &#xA;&lt;h3&gt;5.11 Compressed transmission&lt;/h3&gt; &#xA;&lt;p&gt;The proxy&#39;s socks proxy can encrypt tcp data through custom encryption and tls standard encryption and kcp protocol on top of tcp. It can also be used before custom encryption.&lt;br&gt; Compress the data, that is, the compression function and the custom encryption and tls|kcp can be used in combination, and the compression is divided into two parts.&lt;br&gt; Part of it is local (-m) compression transmission, and part is whether the transmission with the upstream (-M) is compressed.&lt;/p&gt; &#xA;&lt;p&gt;Compression requires both sides to be proxy, and compression also protects (encrypts) data to some extent.&lt;/p&gt; &#xA;&lt;p&gt;The following two levels, three levels for example:&lt;/p&gt; &#xA;&lt;p&gt;Secondary instance&lt;/p&gt; &#xA;&lt;p&gt;Execute on level 1 vps (ip: 2.2.2.2):&lt;br&gt; &lt;code&gt;proxy socks -t tcp -m -p :7777&lt;/code&gt;&lt;br&gt; Local secondary execution:&lt;br&gt; &lt;code&gt;proxy socks -T tcp -P 2.2.2.2:777 -M -t tcp -p :8080&lt;/code&gt;&lt;br&gt; In this way, when the website is accessed through the local agent 8080, the target website is accessed through compression with the upstream.&lt;/p&gt; &#xA;&lt;p&gt;Three-level instance&lt;/p&gt; &#xA;&lt;p&gt;Execute on level 1 vps (ip: 2.2.2.2):&lt;br&gt; &lt;code&gt;proxy socks -t tcp -m -p :7777&lt;/code&gt;&lt;br&gt; Execute on the secondary vps (ip: 3.3.3.3):&lt;br&gt; &lt;code&gt;proxy socks -T tcp -P 2.2.2.2:7777 -M -t tcp -m -p :8888&lt;/code&gt;&lt;br&gt; Local three-level execution:&lt;br&gt; &lt;code&gt;proxy socks -T tcp -P 3.3.3.3:8888 -M -t tcp -p :8080&lt;/code&gt;&lt;br&gt; In this way, when the website is accessed through the local agent 8080, the target website is accessed through compression with the upstream.&lt;/p&gt; &#xA;&lt;h3&gt;5.12 Load Balancing&lt;/h3&gt; &#xA;&lt;p&gt;The SOCKS proxy supports the upper-level load balancing, and multiple upstream repeat-P parameters can be used.&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy socks --lb-method=hash -T tcp -P 1.1.1.1:33080 -P 2.1.1.1:33080 -P 3.1.1.1:33080 -p :33080 -t tcp&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h3&gt;5.12.1 Setting the retry interval and timeout time&lt;/h3&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy socks --lb-method=leastconn --lb-retrytime 300 --lb-timeout 300 -T tcp -P 1.1.1.1:33080 -P 2.1.1.1:33080 -P 3.1.1.1:33080 -p :33080 -t tcp&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h3&gt;5.12.2 Setting weights&lt;/h3&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy socks --lb-method=weight -T tcp -P 1.1.1.1:33080?w=1 -P 2.1.1.1:33080?w=2 -P 3.1.1.1:33080?w=1 -p :33080 -t tcp&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h3&gt;5.12.3 Use the target address to select the upstream&lt;/h3&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy socks --lb-hashtarget --lb-method=hash -T tcp -P 1.1.1.1:33080 -P 2.1.1.1:33080 -P 3.1.1.1:33080 -p :33080 -t tcp&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h3&gt;5.13 Speed limit&lt;/h3&gt; &#xA;&lt;p&gt;The speed limit is 100K, which can be specified by the &lt;code&gt;-l&lt;/code&gt; parameter, for example: 100K 2000K 1M . 0 means no limit.&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy socks -t tcp -p 2.2.2.2:33080 -l 100K&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h3&gt;5.14 Specifying Outgoing IP&lt;/h3&gt; &#xA;&lt;p&gt;The &lt;code&gt;--bind-listen&lt;/code&gt; parameter can be used to open the client connection with the portal IP, and use the portal IP as the outgoing IP to access the target website. If the ingress IP is an intranet IP, the egress IP does not use the ingress IP.&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy socks -t tcp -p 2.2.2.2:33080 --bind-listen&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h4&gt;Flexible Outgoing IP&lt;/h4&gt; &#xA;&lt;p&gt;Although the above &lt;code&gt;--bind-listen&lt;/code&gt; parameter can specify the outgoing IP, the &lt;code&gt;entry IP&lt;/code&gt; and &lt;code&gt; outgoing IP&lt;/code&gt; cannot be interfered by humans. If you want the ingress IP to be different from the egress IP, you can use the &lt;code&gt;--bind-ip&lt;/code&gt; parameter, format: &lt;code&gt;IP:port&lt;/code&gt;, for example: &lt;code&gt;1.1.1.1:8080&lt;/code&gt; , &lt;code&gt;[2000:0:0:0:0:0:0:1]:8080&lt;/code&gt;. For multiple binding requirements, you can repeat the &lt;code&gt;--bind-ip&lt;/code&gt; parameter.&lt;/p&gt; &#xA;&lt;p&gt;For example, the machine has IP &lt;code&gt;5.5.5.5&lt;/code&gt;, &lt;code&gt;6.6.6.6&lt;/code&gt;, and monitors two ports &lt;code&gt;8888&lt;/code&gt; and &lt;code&gt;7777&lt;/code&gt;, the command is as follows:&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy socks -t tcp -p :8888,:7777 --bind-ip 5.5.5.5:7777 --bind-ip 6.6.6.6:8888&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;Then the client access port &lt;code&gt;7777&lt;/code&gt;, the outgoing IP is &lt;code&gt;5.5.5.5&lt;/code&gt;, access port &lt;code&gt;8888&lt;/code&gt;, the outgoing IP is &lt;code&gt;6.6.6.6&lt;/code&gt;, if both &lt;code&gt;--bind-ip&lt;/code&gt; and &lt;code&gt;--bind- are set at the same time listen&lt;/code&gt;,&lt;code&gt;--bind-ip&lt;/code&gt; has higher priority.&lt;/p&gt; &#xA;&lt;p&gt;In addition, the &lt;code&gt;IP&lt;/code&gt; part of the &lt;code&gt;--bind-ip&lt;/code&gt; parameter supports specifying the &lt;code&gt;network interface name&lt;/code&gt;, &lt;code&gt;wildcards&lt;/code&gt;, and more than one. The details are as follows:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Specify the network interface name, such as: &lt;code&gt;--bind-ip eth0:7777&lt;/code&gt;, then the client accesses the &lt;code&gt;7777&lt;/code&gt; port, and the egress IP is the IP of the eth0 network interface.&lt;/li&gt; &#xA; &lt;li&gt;The network interface name supports wildcards, for example: &lt;code&gt;--bind-ip eth0.*:7777&lt;/code&gt;, then the client accesses the &lt;code&gt;7777&lt;/code&gt; port, and the egress IP is a randomly selected one of the network interface IPs starting with &lt;code&gt;eth0.&lt;/code&gt;.&lt;/li&gt; &#xA; &lt;li&gt;IP supports wildcards, such as: &lt;code&gt;--bind-ip 192.168.?.*:7777&lt;/code&gt;, then the client accesses the &lt;code&gt;7777&lt;/code&gt; port, and the exit IP is all the IPs of the machine, matching the IP of &lt;code&gt;192.168.?.*&lt;/code&gt; A randomly selected one.&lt;/li&gt; &#xA; &lt;li&gt;It can also be multiple combinations of network interface name and IP, separated by half-width commas, such as: &lt;code&gt;--bind-ip pppoe??,192.168.?.*:7777&lt;/code&gt;, then the client accesses the port &lt;code&gt;7777&lt;/code&gt;, The outgoing IP is the machine&#39;s network interface name matching &lt;code&gt;pppoe??&lt;/code&gt; It is a randomly selected one among all IPs of the machine that matches &lt;code&gt;192.168.?.*&lt;/code&gt;.&lt;/li&gt; &#xA; &lt;li&gt;The wildcard character &lt;code&gt;*&lt;/code&gt; represents 0 to any number of characters, and &lt;code&gt;?&lt;/code&gt; represents 1 character.&lt;/li&gt; &#xA; &lt;li&gt;If the IP of the network interface changes, it will take effect in real time.&lt;/li&gt; &#xA; &lt;li&gt;You can use the &lt;code&gt;--bind-refresh&lt;/code&gt; parameter to specify the interval to refresh the local network interface information, the default is &lt;code&gt;5&lt;/code&gt;, the unit is second.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h3&gt;5.15 Cascade Certification&lt;/h3&gt; &#xA;&lt;p&gt;SOCKS5 supports cascading authentication, and -A can set upstream authentication information.&lt;/p&gt; &#xA;&lt;p&gt;upstream:&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy socks -t tcp -p 2.2.2.2:33080 -a user:pass&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;local:&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy socks -T tcp -P 2.2.2.2:33080 -A user:pass -t tcp -p :33080&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h3&gt;5.16 Certificate parameters use base64 data&lt;/h3&gt; &#xA;&lt;p&gt;By default, the -C, -K parameter is the path to the crt certificate and the key file.&lt;/p&gt; &#xA;&lt;p&gt;If it is the beginning of base64://, then the latter data is considered to be base64 encoded and will be used after decoding.&lt;/p&gt; &#xA;&lt;h3&gt;5.17 Intelligent mode&lt;/h3&gt; &#xA;&lt;p&gt;Intelligent mode setting, can be one of intelligent|direct|parent.&lt;br&gt; The default is: parent.&lt;br&gt; The meaning of each value is as follows:&lt;br&gt; &lt;code&gt;--intelligent=direct&lt;/code&gt;, the targets in the blocked are not directly connected.&lt;br&gt; &lt;code&gt;--intelligent=parent&lt;/code&gt;, the target that is not in the direct is going to the higher level.&lt;br&gt; &lt;code&gt;--intelligent=intelligent&lt;/code&gt;, blocked and direct have no targets, intelligently determine whether to use the upstream access target.&lt;/p&gt; &#xA;&lt;h3&gt;5.18 Fixed UDP PORT&lt;/h3&gt; &#xA;&lt;p&gt;By default, the port number of the UDP function of socks5, the proxy is installed in the &lt;code&gt;rfc1982 draft&lt;/code&gt; request, which is randomly specified during the protocol handshake process and does not need to be specified in advance.&lt;/p&gt; &#xA;&lt;p&gt;However, in some cases, you need to fix the UDP function port. You can use the parameter &lt;code&gt;--udp-port port number&lt;/code&gt; to fix the port number of the UDP function. For example:&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy socks -t tcp -p &#34;0.0.0.0:38080&#34; --udp-port 38080&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h3&gt;5.19 Help&lt;/h3&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy help socks&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h2&gt;6.SPS Protocol Convert&lt;/h2&gt; &#xA;&lt;h3&gt;6.1 Function introduction&lt;/h3&gt; &#xA;&lt;p&gt;The proxy protocol conversion uses the sps subcommand. The sps itself does not provide the proxy function. It only accepts the proxy request to &#34;convert and forward&#34; to the existing http(s) proxy or the socks5 proxy or ss proxy; the sps can put the existing http(s) proxy or socks5 proxy or ss proxy is converted to a port that supports both http(s) and socks5 and ss proxies, and the http(s) proxy supports forward proxy and reverse proxy (SNI), converted SOCKS5 proxy, UDP function is still supported when the upper level is SOCKS5 or SS; in addition, for the existing http(s) proxy or socks5 proxy, three modes of tls, tcp, and kcp are supported, and chain connection is supported, that is, multiple sps node levels can be supported. The connection builds an encrypted channel.&lt;/p&gt; &#xA;&lt;p&gt;The encryption methods supported by the &lt;code&gt;ss&lt;/code&gt; function are: aes-128-cfb, aes-128-ctr, aes-128-gcm, aes-192-cfb, aes-192-ctr, aes-192-gcm, aes-256- Cfb , aes-256-ctr , aes-256-gcm , bf-cfb , cast5-cfb , chacha20 , chacha20-ietf , chacha20-ietf-poly1305 , des-cfb , rc4-md5 , rc4-md5-6 , salsa20 , Xchacha20&lt;/p&gt; &#xA;&lt;p&gt;Listen port argument &lt;code&gt;-p&lt;/code&gt; can be:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;  -p &#34;:8081&#34;  listen on 8081&#xA;  -p &#34;:8081,:8082&#34;  listen on 8081 and 8082&#xA;  -p &#34;:8081,:8082,:9000-9999&#34; listen on 8081 and 8082 and 9000 and 9001 to 9999, 1002 total ports  &#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;The udp function of ss is turned off by default and can be turned on by &lt;code&gt;--ssudp&lt;/code&gt;. The udp function of socks5 is turned off by default and can be turned on by &lt;code&gt;--udp&lt;/code&gt;, The default is a random port for handshake, and performance can be improved by fixing a port. Set by parameter &lt;code&gt;--udp-port 0&lt;/code&gt;, &lt;code&gt;0&lt;/code&gt; represents a free port is randomly selected, or you can manually specify a specific port.&lt;/p&gt; &#xA;&lt;h3&gt;6.2 HTTP(S) to HTTP(S)+SOCKS5+SS&lt;/h3&gt; &#xA;&lt;p&gt;Suppose there is already a normal http(s) proxy: 127.0.0.1:8080. Now we turn it into a common proxy that supports both http(s) and socks5 and ss. The converted local port is 18080, ss encryption: Aes-192-cfb, ss password: pass.&lt;br&gt; The command is as follows:&lt;br&gt; &lt;code&gt;proxy sps -S http -T tcp -P 127.0.0.1:8080 -t tcp -p :18080 -h aes-192-cfb -j pass&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;Suppose there is already a tls http(s) proxy: 127.0.0.1:8080. Now we turn it into a normal proxy that supports both http(s) and socks5 and ss. The converted local port is 18080, and tls requires a certificate file. , ss encryption: aes-192-cfb, ss password: pass.&lt;br&gt; The command is as follows:&lt;br&gt; &lt;code&gt;proxy sps -S http -T tls -P 127.0.0.1:8080 -t tcp -p :18080 -C proxy.crt -K proxy.key -h aes-192-cfb -j pass&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;Suppose there is already a kcp http(s) proxy (password is: demo123): 127.0.0.1:8080, now we turn it into a normal proxy that supports both http(s) and socks5 and ss. The converted local port is 18080, ss encryption: aes-192-cfb, ss password: pass.&lt;br&gt; The command is as follows:&lt;br&gt; &lt;code&gt;proxy sps -S http -T kcp -P 127.0.0.1:8080 -t tcp -p :18080 --kcp-key demo123 -h aes-192-cfb -j pass&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h3&gt;6.3 SOCKS5 to HTTP(S)+SOCKS5+SS&lt;/h3&gt; &#xA;&lt;p&gt;Suppose there is already a normal socks5 proxy: 127.0.0.1:8080, now we turn it into a common proxy that supports both http(s) and socks5 and ss. The converted local port is 18080, ss encryption: aes-192 -cfb, ss password: pass.&lt;br&gt; The command is as follows:&lt;br&gt; &lt;code&gt;proxy sps -S socks -T tcp -P 127.0.0.1:8080 -t tcp -p :18080 -h aes-192-cfb -j pass&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;Suppose there is already a tls socks5 proxy: 127.0.0.1:8080, now we turn it into a common proxy that supports both http(s) and socks5 and ss. The converted local port is 18080, tls requires certificate file, ss encryption Mode: aes-192-cfb, ss password: pass.&lt;br&gt; The command is as follows:&lt;br&gt; &lt;code&gt;proxy sps -S socks -T tls -P 127.0.0.1:8080 -t tcp -p :18080 -C proxy.crt -K proxy.key -h aes-192-cfb -j pass&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;Suppose there is already a kcp socks5 proxy (password: demo123): 127.0.0.1:8080, now we turn it into a common proxy that supports both http(s) and socks5 and ss. The converted local port is 18080, ss Encryption method: aes-192-cfb, ss password: pass.&lt;br&gt; The command is as follows:&lt;br&gt; &lt;code&gt;proxy sps -S socks -T kcp -P 127.0.0.1:8080 -t tcp -p :18080 --kcp-key demo123 -h aes-192-cfb -j pass&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h3&gt;6.4 SS to HTTP(S)+SOCKS5+SS&lt;/h3&gt; &#xA;&lt;p&gt;SPS upstream and local support ss protocol, the upstream can be SPS or standard ss service.&lt;br&gt; SPS locally provides HTTP(S)\SOCKS5\SPS three defaults. When the upstream is SOCKS5, the converted SOCKS5 and SS support UDP.&lt;br&gt; Suppose there is already a normal SS or SPS proxy (ss is enabled, encryption: aes-256-cfb, password: demo): 127.0.0.1:8080, now we turn it to support both http(s) and socks5 and The ordinary proxy of ss, the converted local port is 18080, the converted ss encryption mode: aes-192-cfb, ss password: pass.&lt;br&gt; The command is as follows:&lt;br&gt; &lt;code&gt;proxy sps -S ss -H aes-256-cfb -J pass -T tcp -P 127.0.0.1:8080 -t tcp -p :18080 -h aes-192-cfb -j pass&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;h3&gt;6.5 Chained connection&lt;/h3&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/snail007/goproxy@master/doc/images/sps-tls.png&#34; alt=&#34;6.4&#34;&gt;&lt;br&gt; The above mentioned multiple sps nodes can be connected to build encrypted channels in a hierarchical connection, assuming the following vps and the home PC.&lt;br&gt; Vps01:2.2.2.2&lt;br&gt; Vps02:3.3.3.3&lt;br&gt; Now we want to use pc and vps01 and vps02 to build an encrypted channel. This example uses tls encryption or kcp. Accessing local 18080 port on the PC is to access the local 8080 port of vps01.&lt;br&gt; First on vps01 (2.2.2.2) we run a locally accessible http(s) proxy and execute:&lt;br&gt; &lt;code&gt;proxy http -t tcp -p 127.0.0.1:8080&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;Then run a sps node on vps01 (2.2.2.2) and execute:&lt;br&gt; &lt;code&gt;proxy sps -S http -T tcp -P 127.0.0.1:8080 -t tls -p :8081 -C proxy.crt -K proxy.key&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;Then run a sps node on vps02 (3.3.3.3) and execute:&lt;br&gt; &lt;code&gt;proxy sps -S http -T tls -P 2.2.2.2:8081 -t tls -p :8082 -C proxy.crt -K proxy.key&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;Then run a sps node on the pc and execute:&lt;br&gt; &lt;code&gt;proxy sps -S http -T tls -P 3.3.3.3:8082 -t tcp -p :18080 -C proxy.crt -K proxy.key&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;carry out.&lt;/p&gt; &#xA;&lt;h3&gt;6.6 Authentication&lt;/h3&gt; &#xA;&lt;p&gt;Sps supports http(s)\socks5 proxy authentication, which can be cascaded and has four important pieces of information:&lt;br&gt; 1: The user sends the authentication information &lt;code&gt;user-auth&lt;/code&gt;.&lt;br&gt; 2: Set the local authentication information &lt;code&gt;local-auth&lt;/code&gt;.&lt;br&gt; 3: Set the connection authentication information &#39;parent-auth&lt;code&gt;used by the upstream. 4: The authentication information&lt;/code&gt;auth-info-to-parent` that is finally sent to the upstream.&lt;br&gt; Their situation is as follows:&lt;/p&gt; &#xA;&lt;table&gt; &#xA; &lt;thead&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;th&gt;User-auth&lt;/th&gt; &#xA;   &lt;th&gt;local-auth&lt;/th&gt; &#xA;   &lt;th&gt;parent-auth&lt;/th&gt; &#xA;   &lt;th&gt;auth-info-to-paren&lt;/th&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/thead&gt; &#xA; &lt;tbody&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;Yes / No&lt;/td&gt; &#xA;   &lt;td&gt;Yes&lt;/td&gt; &#xA;   &lt;td&gt;Yes&lt;/td&gt; &#xA;   &lt;td&gt;From parent-auth&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;Yes / No&lt;/td&gt; &#xA;   &lt;td&gt;No&lt;/td&gt; &#xA;   &lt;td&gt;Yes&lt;/td&gt; &#xA;   &lt;td&gt;From parent-auth&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;Yes / No&lt;/td&gt; &#xA;   &lt;td&gt;Yes&lt;/td&gt; &#xA;   &lt;td&gt;No&lt;/td&gt; &#xA;   &lt;td&gt;No&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;No&lt;/td&gt; &#xA;   &lt;td&gt;No&lt;/td&gt; &#xA;   &lt;td&gt;No&lt;/td&gt; &#xA;   &lt;td&gt;No&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;Yes&lt;/td&gt; &#xA;   &lt;td&gt;No&lt;/td&gt; &#xA;   &lt;td&gt;No&lt;/td&gt; &#xA;   &lt;td&gt;From user-auth&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/tbody&gt; &#xA;&lt;/table&gt; &#xA;&lt;p&gt;For the sps proxy we can perform username and password authentication. The authenticated username and password can be specified on the command line.&lt;br&gt; &lt;code&gt;proxy sps -S http -T tcp -P 127.0.0.1:8080 -t tcp -p &#34;:33080&#34; -a &#34;user1:pass1:0:0:&#34; -a &#34;user2:pass2:0:0: &#34;&lt;/code&gt;&lt;br&gt; For multiple users, repeat the -a parameter.&lt;br&gt; Can also be placed in a file, the format is one line a &lt;code&gt;username: password: number of connections: rate: upstream&lt;/code&gt;, and then specified with -F.&lt;br&gt; &lt;code&gt;proxy sps -S http -T tcp -P 127.0.0.1:8080 -t tcp -p &#34;:33080&#34; -F auth-file.txt&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;If the upstream has authentication, the lower level can set the authentication information with the -A parameter, for example:&lt;br&gt; upstream: &lt;code&gt;proxy sps -S http -T tcp -P 127.0.0.1:8080 -t tcp -p &#34;:33080&#34; -a &#34;user1:pass1:0:0:&#34; -a &#34;user2:pass2:0: 0:&#34;&lt;/code&gt;&lt;br&gt; Subordinate: &lt;code&gt;proxy sps -S http -T tcp -P 127.0.0.1:8080 -A &#34;user1:pass1&#34; -t tcp -p &#34;:33080&#34; &lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;For more details on certification, please refer to &lt;code&gt;9.API Certification&lt;/code&gt; and &lt;code&gt;10.Local Certification&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h3&gt;6.7 Multiple Upstream&lt;/h3&gt; &#xA;&lt;p&gt;If there are multiple upstreams, they can be specified by multiple -Ps.&lt;/p&gt; &#xA;&lt;p&gt;such as:&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy sps -P http://127.0.0.1:3100 -P socks5://127.0.0.1:3200&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;The complete format of &lt;code&gt;-P&lt;/code&gt; is as follows:&lt;/p&gt; &#xA;&lt;p&gt;&amp;nbsp;&lt;code&gt;protocol://a:b@2.2.2.2:33080#1&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;Each section is explained below:&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;protocol://&lt;/code&gt; is the protocol type, possible types and contains the following:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;Http is equivalent to -S http -T tcp  &#xA;Https is equivalent to -S http -T tls --parent-tls-single , which is http(s) proxy over TLS  &#xA;Https2 is equivalent to -S http -T tls  &#xA;Socks5 is equivalent to -S socks -T tcp  &#xA;Socks5s is equivalent to -S socks -T tls --parent-tls-single , which is socks over TLS  &#xA;Socks5s2 is equivalent to -S socks -T tls  &#xA;Ss is equivalent to -S ss -T tcp  &#xA;Httpws is equivalent to -S http -T ws  &#xA;Httpwss is equivalent to -S http -T wss  &#xA;Socks5ws is equivalent to -S socks -T ws  &#xA;Socks5wss is equivalent to -S socks -T wss  &#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;&lt;code&gt;a:b&lt;/code&gt; is the username and password of the proxy authentication. If it is ss, &lt;code&gt;a&lt;/code&gt; is the encryption method, &lt;code&gt;b&lt;/code&gt; is the password, and no username password can be left blank, for example: &lt;code&gt;http://2.2.2.2:33080&lt;/code&gt; If the username and password are protected, special symbols can be encoded using urlencode.&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;2.2.2.2:33080&lt;/code&gt; is the upstream address, the format is: &lt;code&gt;IP (or domain name): port &lt;/code&gt;, if the underlying is ws/wss protocol can also bring the path, such as: &lt;code&gt;2.2.2.2: 33080/ws&lt;/code&gt;;&lt;br&gt; You can also set the &lt;code&gt;encryption method&lt;/code&gt; and &lt;code&gt;password&lt;/code&gt; of &lt;code&gt;ws\wss&lt;/code&gt; by appending the query parameters &lt;code&gt;m&lt;/code&gt; and &lt;code&gt;k&lt;/code&gt;, for example: &lt;code&gt;2.2.2.2:33080/ws?m=aes-192-cfb&amp;amp;k=password&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;#1&lt;/code&gt; When multiple upper-level load balancing is a weighting strategy, the weights are rarely used.&lt;/p&gt; &#xA;&lt;h3&gt;6.8 Custom Encryption&lt;/h3&gt; &#xA;&lt;p&gt;The proxy sps proxy can encrypt tcp data through tls standard encryption and kcp protocol on top of tcp, in addition to support after tls and kcp&lt;br&gt; Custom encryption, that is, custom encryption and tls|kcp can be used in combination, internally using AES256 encryption, only need to define it when using&lt;br&gt; A password can be used, the encryption is divided into two parts, one part is whether the local (-z) encryption and decryption, and the part is the encryption and decryption with the upstream (-Z) transmission.&lt;/p&gt; &#xA;&lt;p&gt;Custom encryption requires both sides to be proxy.&lt;/p&gt; &#xA;&lt;p&gt;The following two levels, three levels for example:&lt;/p&gt; &#xA;&lt;p&gt;Suppose there is already an http(s) proxy: &lt;code&gt;6.6.6.6:6666&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;Secondary instance&lt;/p&gt; &#xA;&lt;p&gt;Execute on level 1 vps (ip: 2.2.2.2):&lt;br&gt; &lt;code&gt;proxy sps -S http -T tcp -P 6.6.6.6:6666 -t tcp -z demo_password -p :7777&lt;/code&gt;&lt;br&gt; Local secondary execution:&lt;br&gt; &lt;code&gt;proxy sps -T tcp -P 2.2.2.2:777 -Z demo_password -t tcp -p :8080&lt;/code&gt;&lt;br&gt; In this way, when the website is accessed through the local agent 8080, the target website is accessed through encrypted transmission with the upstream.&lt;/p&gt; &#xA;&lt;p&gt;Three-level instance&lt;/p&gt; &#xA;&lt;p&gt;Execute on level 1 vps (ip: 2.2.2.2):&lt;br&gt; &lt;code&gt;proxy sps -S http -T tcp -P 6.6.6.6:6666 -t tcp -z demo_password -p :7777&lt;/code&gt;&lt;br&gt; Execute on the secondary vps (ip: 3.3.3.3):&lt;br&gt; &lt;code&gt;proxy sps -T tcp -P 2.2.2.2:7777 -Z demo_password -t tcp -z other_password -p :8888&lt;/code&gt;&lt;br&gt; Local three-level execution:&lt;br&gt; &lt;code&gt;proxy sps -T tcp -P 3.3.3.3:8888 -Z other_password -t tcp -p :8080&lt;/code&gt;&lt;br&gt; In this way, when the website is accessed through the local agent 8080, the target website is accessed through encrypted transmission with the upstream.&lt;/p&gt; &#xA;&lt;h3&gt;6.9 Compressed transmission&lt;/h3&gt; &#xA;&lt;p&gt;The proxy sps proxy can encrypt tcp data through custom encryption and tls standard encryption and kcp protocol on top of tcp. It can also be used before custom encryption.&lt;br&gt; Compress the data, that is, the compression function and the custom encryption and tls|kcp can be used in combination, and the compression is divided into two parts.&lt;br&gt; Part of it is local (-m) compression transmission, and part is whether the transmission with the upstream (-M) is compressed.&lt;/p&gt; &#xA;&lt;p&gt;Compression requires both sides to be proxy, and compression also protects (encrypts) data to some extent.&lt;/p&gt; &#xA;&lt;p&gt;The following two levels, three levels for example:&lt;/p&gt; &#xA;&lt;p&gt;Secondary instance&lt;/p&gt; &#xA;&lt;p&gt;Execute on level 1 vps (ip: 2.2.2.2):&lt;br&gt; &lt;code&gt;proxy sps -t tcp -m -p :7777&lt;/code&gt;&lt;br&gt; Local secondary execution:&lt;br&gt; &lt;code&gt;proxy sps -T tcp -P 2.2.2.2:777 -M -t tcp -p :8080&lt;/code&gt;&lt;br&gt; In this way, when the website is accessed through the local agent 8080, the target website is accessed through compression with the upstream.&lt;/p&gt; &#xA;&lt;p&gt;Three-level instance&lt;/p&gt; &#xA;&lt;p&gt;Execute on level 1 vps (ip: 2.2.2.2):&lt;br&gt; &lt;code&gt;proxy sps -t tcp -m -p :7777&lt;/code&gt;&lt;br&gt; Execute on the secondary vps (ip: 3.3.3.3):&lt;br&gt; &lt;code&gt;proxy sps -T tcp -P 2.2.2.2:7777 -M -t tcp -m -p :8888&lt;/code&gt;&lt;br&gt; Local three-level execution:&lt;br&gt; &lt;code&gt;proxy sps -T tcp -P 3.3.3.3:8888 -M -t tcp -p :8080&lt;/code&gt;&lt;br&gt; In this way, when the website is accessed through the local agent 8080, the target website is accessed through compression with the upstream.&lt;/p&gt; &#xA;&lt;h3&gt;6.10 Disabling the protocol&lt;/h3&gt; &#xA;&lt;p&gt;By default, SPS supports http(s) and socks5 two proxy protocols. We can disable a protocol by parameter.&lt;br&gt; For example:&lt;/p&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt; &lt;p&gt;Disable the HTTP(S) proxy function to retain only the SOCKS5 proxy function, parameter: &lt;code&gt;--disable-http&lt;/code&gt;.&lt;br&gt; &lt;code&gt;proxy sps -T tcp -P 3.3.3.3:8888 -M -t tcp -p :8080 --disable-http&lt;/code&gt;&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;Disable the SOCKS5 proxy function to retain only the HTTP(S) proxy function, parameter: &lt;code&gt;--disable-socks&lt;/code&gt;.&lt;br&gt; &lt;code&gt;proxy sps -T tcp -P 3.3.3.3:8888 -M -t tcp -p :8080 --disable-socks&lt;/code&gt;&lt;/p&gt; &lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;h3&gt;6.11 Speed limit&lt;/h3&gt; &#xA;&lt;p&gt;Suppose there is a SOCKS5 upstream:&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy socks -p 2.2.2.2:33080 -z password -t tcp&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;SPS lower level, speed limit 100K&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy sps -S socks -P 2.2.2.2:33080 -T tcp -Z password -l 100K -t tcp -p :33080&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;It can be specified by the &lt;code&gt;-l&lt;/code&gt; parameter, for example: 100K 2000K 1M . 0 means no limit.&lt;/p&gt; &#xA;&lt;h3&gt;6.12 Specifying Outgoing IP&lt;/h3&gt; &#xA;&lt;p&gt;The &lt;code&gt;--bind-listen&lt;/code&gt; parameter can be used to open the client connection with the portal IP, and use the portal IP as the outgoing IP to access the target website. If the ingress IP is an intranet IP, the egress IP does not use the ingress IP.&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy sps -S socks -P 2.2.2.2:33080 -T tcp -Z password -l 100K -t tcp --bind-listen -p :33080&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h4&gt;Flexible Outgoing IP&lt;/h4&gt; &#xA;&lt;p&gt;Although the above &lt;code&gt;--bind-listen&lt;/code&gt; parameter can specify the outgoing IP, the &lt;code&gt;entry IP&lt;/code&gt; and &lt;code&gt; outgoing IP&lt;/code&gt; cannot be interfered by humans. If you want the ingress IP to be different from the egress IP, you can use the &lt;code&gt;--bind-ip&lt;/code&gt; parameter, format: &lt;code&gt;IP:port&lt;/code&gt;, for example: &lt;code&gt;1.1.1.1:8080&lt;/code&gt; , &lt;code&gt;[2000:0:0:0:0:0:0:1]:8080&lt;/code&gt;. For multiple binding requirements, you can repeat the &lt;code&gt;--bind-ip&lt;/code&gt; parameter.&lt;/p&gt; &#xA;&lt;p&gt;For example, the machine has IP &lt;code&gt;5.5.5.5&lt;/code&gt;, &lt;code&gt;6.6.6.6&lt;/code&gt;, and monitors two ports &lt;code&gt;8888&lt;/code&gt; and &lt;code&gt;7777&lt;/code&gt;, the command is as follows:&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy sps -t tcp -p :8888,:7777 --bind-ip 5.5.5.5:7777 --bind-ip 6.6.6.6:8888&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;Then the client access port &lt;code&gt;7777&lt;/code&gt;, the outgoing IP is &lt;code&gt;5.5.5.5&lt;/code&gt;, access port &lt;code&gt;8888&lt;/code&gt;, the outgoing IP is &lt;code&gt;6.6.6.6&lt;/code&gt;, if both &lt;code&gt;--bind-ip&lt;/code&gt; and &lt;code&gt;--bind- are set at the same time listen&lt;/code&gt;,&lt;code&gt;--bind-ip&lt;/code&gt; has higher priority.&lt;/p&gt; &#xA;&lt;p&gt;In addition, the &lt;code&gt;IP&lt;/code&gt; part of the &lt;code&gt;--bind-ip&lt;/code&gt; parameter supports specifying the &lt;code&gt;network interface name&lt;/code&gt;, &lt;code&gt;wildcards&lt;/code&gt;, and more than one. The details are as follows:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Specify the network interface name, such as: &lt;code&gt;--bind-ip eth0:7777&lt;/code&gt;, then the client accesses the &lt;code&gt;7777&lt;/code&gt; port, and the egress IP is the IP of the eth0 network interface.&lt;/li&gt; &#xA; &lt;li&gt;The network interface name supports wildcards, for example: &lt;code&gt;--bind-ip eth0.*:7777&lt;/code&gt;, then the client accesses the &lt;code&gt;7777&lt;/code&gt; port, and the egress IP is a randomly selected one of the network interface IPs starting with &lt;code&gt;eth0.&lt;/code&gt;.&lt;/li&gt; &#xA; &lt;li&gt;IP supports wildcards, such as: &lt;code&gt;--bind-ip 192.168.?.*:7777&lt;/code&gt;, then the client accesses the &lt;code&gt;7777&lt;/code&gt; port, and the exit IP is all the IPs of the machine, matching the IP of &lt;code&gt;192.168.?.*&lt;/code&gt; A randomly selected one.&lt;/li&gt; &#xA; &lt;li&gt;It can also be multiple combinations of network interface name and IP, separated by half-width commas, such as: &lt;code&gt;--bind-ip pppoe??,192.168.?.*:7777&lt;/code&gt;, then the client accesses the port &lt;code&gt;7777&lt;/code&gt;, The outgoing IP is the machine&#39;s network interface name matching &lt;code&gt;pppoe??&lt;/code&gt; It is a randomly selected one among all IPs of the machine that matches &lt;code&gt;192.168.?.*&lt;/code&gt;.&lt;/li&gt; &#xA; &lt;li&gt;The wildcard character &lt;code&gt;*&lt;/code&gt; represents 0 to any number of characters, and &lt;code&gt;?&lt;/code&gt; represents 1 character.&lt;/li&gt; &#xA; &lt;li&gt;If the IP of the network interface changes, it will take effect in real time.&lt;/li&gt; &#xA; &lt;li&gt;You can use the &lt;code&gt;--bind-refresh&lt;/code&gt; parameter to specify the interval to refresh the local network interface information, the default is &lt;code&gt;5&lt;/code&gt;, the unit is second.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h3&gt;6.13 Certificate parameters use base64 data&lt;/h3&gt; &#xA;&lt;p&gt;By default, the -C, -K parameter is the path to the crt certificate and the key file.&lt;/p&gt; &#xA;&lt;p&gt;If it is the beginning of base64://, then the latter data is considered to be base64 encoded and will be used after decoding.&lt;/p&gt; &#xA;&lt;h3&gt;6.14 Independent Service&lt;/h3&gt; &#xA;&lt;p&gt;A sps port can complete the full-featured proxy &lt;code&gt;http\socks\ss&lt;/code&gt; function.&lt;br&gt; The following command is to open the http(s)\ss\socks service with one click, and enable the udp of socks5 and the udp of ss at the same time.&lt;br&gt; &lt;code&gt;proxy sps -p: 33080 --ssudp --udp --udp-port 0&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h3&gt;6.15 Target Redirection&lt;/h3&gt; &#xA;&lt;p&gt;The https(s)\socks5\ss proxy function provided by the sps function, the client connects to the specified &#34;target&#34; through the sps proxy. This &#34;target&#34; is generally a website or an arbitrary tcp address.&lt;br&gt; The website &#34;target&#34; is generally foo.com: 80, foo.com: 443, sps supports the use of the --rewrite parameter to specify a &#34;target&#34; redirection rule file, redirect the target, the client is non-perceived,&lt;br&gt; For example, if you redirect to &#34;target&#34;: demo.com:80 to 192.168.0.12:80, then the client visits the website demo.com, in fact, the website service provided by 192.168.0.12.&lt;br&gt; Example of a &#34;target&#34; redirection rule file:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;# example  &#xA;Www.a.com:80 10.0.0.2:8080  &#xA;**.b.com:80 10.0.0.2:80  &#xA;192.168.0.11:80 10.0.0.2:8080  &#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;When sps is an independent service, an additional local socks5 service will be opened to occupy a random port. Now the parameter &lt;code&gt;--self-port&lt;/code&gt; can be manually specified when needed. The default is 0 to use random.&lt;/p&gt; &#xA;&lt;h3&gt;6.16 Fixed UDP PORT&lt;/h3&gt; &#xA;&lt;p&gt;By default, the port number of the UDP function of ss&#39;s socks5 is specified by the &lt;code&gt;rfc1982 draft&lt;/code&gt;. It is randomly specified during the protocol handshake process and does not need to be specified in advance.&lt;/p&gt; &#xA;&lt;p&gt;However, in some cases, you need to fix the UDP function port. You can fix the port number of the UDP function by the parameter &lt;code&gt;--udp-port port_number&lt;/code&gt;, for example:&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy sps -t tcp -p &#34;0.0.0.0:38080&#34; --udp-port 38081&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;It should be noted that the ss function of sps also has UDP function, and the UDP port of ss is the same as the tcp port, so avoid the conflict between the UDP port of socks5 and the UDP port of ss.&lt;/p&gt; &#xA;&lt;p&gt;To specify a port that is different from the tcp port.&lt;/p&gt; &#xA;&lt;h3&gt;6.17 iptables 透明代理&lt;/h3&gt; &#xA;&lt;p&gt;The sps mode supports the iptables transparent forwarding support of the Linux system, which is commonly referred to as the iptables transparent proxy. If a iptables transparent proxy is performed on the gateway device, the device that is connected through the gateway can realize a non-aware proxy.&lt;/p&gt; &#xA;&lt;p&gt;Example start command:&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy sps --redir -p :8888 -P httpws: //1.1.1.1:33080&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;Here it is assumed that there is an http superior proxy 1.1.1.1:33080, which uses ws to transmit data.&lt;/p&gt; &#xA;&lt;p&gt;Then add iptables rules, here are the reference rules:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;#upstream proxy server IP address:&#xA;proxy_server_ip = 1.1.1.1&#xA;&#xA;#Router running proxy listening port:&#xA;proxy_local_port = 33080&#xA;&#xA;#There is no need to modify the following&#xA;#create a new chain named PROXY&#xA;iptables -t nat -N PROXY&#xA;&#xA;#Ignore your PROXY server&#39;s addresses  &#xA;#It&#39;s very IMPORTANT， just be careful。  &#xA;&#xA;iptables -t nat -A PROXY -d $proxy_server_ip -j RETURN  &#xA;&#xA;#Ignore LANs IP address  &#xA;iptables -t nat -A PROXY -d 0.0.0.0/8 -j RETURN  &#xA;iptables -t nat -A PROXY -d 10.0.0.0/8 -j RETURN  &#xA;iptables -t nat -A PROXY -d 127.0.0.0/8 -j RETURN  &#xA;iptables -t nat -A PROXY -d 169.254.0.0/16 -j RETURN  &#xA;iptables -t nat -A PROXY -d 172.16.0.0/12 -j RETURN  &#xA;iptables -t nat -A PROXY -d 192.168.0.0/16 -j RETURN  &#xA;iptables -t nat -A PROXY -d 224.0.0.0/4 -j RETURN  &#xA;iptables -t nat -A PROXY -d 240.0.0.0/4 -j RETURN  &#xA;&#xA;#Anything to port 80 443 should be redirected to PROXY&#39;s local port  &#xA;iptables -t nat -A PROXY -p tcp  -j REDIRECT --to-ports $proxy_local_port&#xA;#Apply the rules to nat client  &#xA;iptables -t nat -A PREROUTING -p tcp -j PROXY  &#xA;#Apply the rules to localhost  &#xA;iptables -t nat -A OUTPUT -p tcp -j PROXY  &#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Clear the entire chain iptables -F chain name such as iptables -t nat -F PROXY&lt;/li&gt; &#xA; &lt;li&gt;Delete the specified user-defined chain iptables -X chain name e.g. iptables -t nat -X PROXY&lt;/li&gt; &#xA; &lt;li&gt;Delete rule from selected chain iptables -D chain name rule details e.g. iptables -t nat -D PROXY -d 223.223.192.0/255.255.240.0 -j RETURN&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h3&gt;6.18 Help&lt;/h3&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy help sps&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h2&gt;7.KCP Configuration&lt;/h2&gt; &#xA;&lt;h3&gt;7.1 Configuration Introduction&lt;/h3&gt; &#xA;&lt;p&gt;Many functions of the proxy support the kcp protocol. Any function that uses the kcp protocol supports the configuration parameters described here.&lt;br&gt; Therefore, the KCP configuration parameters are introduced here.&lt;/p&gt; &#xA;&lt;h3&gt;7.2 Detailed configuration&lt;/h3&gt; &#xA;&lt;p&gt;There are a total of 17 KCP configuration parameters, you can not set them, they have default values, if for the best effect,&lt;br&gt; You need to configure the parameters according to your own network conditions. Because the kcp configuration is complex, it requires a certain network basics.&lt;br&gt; If you want to get more detailed configuration and explanation of kcp parameters, please search for yourself. The command line name for each parameter, along with the default values and simple function descriptions are as follows:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;--kcp-key=&#34;secrect&#34; pre-shared secret between client and server  &#xA;--kcp-method=&#34;aes&#34; encrypt/decrypt method, can be: aes, aes-128, aes-192, salsa20, blowfish,  &#xA;&amp;nbsp;Twofish, cast5, 3des, tea, xtea, xor, sm4, none  &#xA;--kcp-mode=&#34;fast&#34; profiles: fast3, fast2, fast, normal, manual  &#xA;--kcp-mtu=1350 set maximum transmission unit for UDP packets  &#xA;--kcp-sndwnd=1024 set send window size(num of packets)  &#xA;--kcp-rcvwnd=1024 set receive window size(num of packets)  &#xA;--kcp-ds=10 set reed-solomon erasure coding - datashard  &#xA;--kcp-ps=3 set reed-solomon erasure coding - parityshard  &#xA;--kcp-dscp=0 set DSCP(6bit)  &#xA;--kcp-nocomp disable compression  &#xA;--kcp-acknodelay be carefull! flush ack immediately when a packet is received  &#xA;--kcp-nodelay=0 be carefull!  &#xA;--kcp-interval=50 be carefull!  &#xA;--kcp-resend=0 be carefull!  &#xA;--kcp-nc=0 be carefull! no congestion  &#xA;--kcp-sockbuf=4194304 be carefull!  &#xA;--kcp-keepalive=10 be carefull!  &#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Tip:&lt;br&gt; Parameters: -- four fast3, fast2, fast, normal modes in kcp-mode,&lt;br&gt; Equivalent to setting the following four parameters:&lt;br&gt; Normal:&lt;code&gt;--nodelay=0 --interval=40 --resend=2 --nc=1&lt;/code&gt;&lt;br&gt; Fast :&lt;code&gt;--nodelay=0 --interval=30 --resend=2 --nc=1&lt;/code&gt;&lt;br&gt; Fast2:&lt;code&gt;--nodelay=1 --interval=20 --resend=2 --nc=1&lt;/code&gt;&lt;br&gt; Fast3:&lt;code&gt;--nodelay=1 --interval=10 --resend=2 --nc=1&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h2&gt;8. Security DNS&lt;/h2&gt; &#xA;&lt;h3&gt;8.1 Introduction&lt;/h3&gt; &#xA;&lt;p&gt;DNS is known as the service provided by UDP port 53, but with the development of the network, some well-known DNS servers also support TCP mode dns query, such as Google&#39;s 8.8.8.8, the DNS anti-pollution server principle of the proxy is to start a proxy DNS proxy locally. Server, which uses TCP to perform dns query through the upstream agent. If it communicates with the upstream agent, it can perform secure and pollution-free DNS resolution. It also supports independent services, concurrent parsing, and enhanced enhanced hosts file function to support flexible concurrent parsing and forwarding.&lt;/p&gt; &#xA;&lt;p&gt;Dns resolution order:&lt;/p&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;Use the parameter --hosts to parse.&lt;/li&gt; &#xA; &lt;li&gt;If the domain name to be resolved is not found in 1, it is parsed using the parameter --forward rule.&lt;/li&gt; &#xA; &lt;li&gt;The domain name to be resolved is not found in 1 and 2, and the default --default parsing is used. The default default behavior parameter values are three: proxy, direct, and system.&lt;br&gt; The three parameter values are explained as follows:&lt;br&gt; Proxy: The domain name is resolved by the dns server specified by the -q parameter.&lt;br&gt; Direct: Connect to the dns server specified by the -q parameter to resolve the domain name through the local network.&lt;br&gt; System: resolves the domain name through the system dns.&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;p&gt;Tip:&lt;br&gt; The host file format specified by the --hosts parameter is the same as the system hosts file, and the domain name supports wildcards. You can refer to the hosts file.&lt;br&gt; The parsing forwarding rule file specified by the --forward parameter can be referenced to the resolve.rules file. The domain name supports wildcards. It supports multiple dns servers for each domain name to be parsed concurrently. Whoever resolves the fastest resolution will use the resolution result.&lt;br&gt; The -q parameter can specify multiple remote dns servers to perform concurrent parsing. Whoever resolves the fastest parsing success, the default is: 1.1.1.1, 8.8.8.8, 9.9.9.9, multiple comma-separated,&lt;br&gt; &amp;nbsp;For example, you can also bring ports: 1.1.1.1, 8.8.8.8#53, 9.9.9.9&lt;/p&gt; &#xA;&lt;p&gt;If you are a standalone service, you don&#39;t need a upstream:&lt;br&gt; Can perform:&lt;br&gt; &lt;code&gt;proxy dns --default system -p :5353&lt;/code&gt;&lt;br&gt; Or&lt;br&gt; &lt;code&gt;proxy dns --default direct -p :5353&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h3&gt;8.2 Example of use&lt;/h3&gt; &#xA;&lt;h4&gt;8.2.1 Normal HTTP(S) upstream agent&lt;/h4&gt; &#xA;&lt;p&gt;Suppose there is a upstream agent: 2.2.2.2:33080&lt;br&gt; Local execution:&lt;br&gt; &lt;code&gt;proxy dns -S http -T tcp -P 2.2.2.2:33080 -p :53&lt;/code&gt;&lt;br&gt; Then the local UDP port 53 provides DNS resolution.&lt;/p&gt; &#xA;&lt;h4&gt;8.2.2 Ordinary SOCKS5 upstream agent&lt;/h4&gt; &#xA;&lt;p&gt;Suppose there is a upstream agent: 2.2.2.2:33080&lt;br&gt; Local execution:&lt;br&gt; &lt;code&gt;proxy dns -S socks -T tcp -P 2.2.2.2:33080 -p :53&lt;/code&gt;&lt;br&gt; Then the local UDP port 53 provides DNS resolution.&lt;/p&gt; &#xA;&lt;h4&gt;8.2.3 TLS encrypted HTTP(S) upstream agent&lt;/h4&gt; &#xA;&lt;p&gt;Suppose there is a upstream agent: 2.2.2.2:33080&lt;br&gt; The commands executed by the upstream agent are:&lt;br&gt; &lt;code&gt;proxy http -t tls -C proxy.crt -K proxy.key -p :33080&lt;/code&gt;&lt;br&gt; Local execution:&lt;br&gt; &lt;code&gt;proxy dns -S http -T tls -P 2.2.2.2:33080 -C proxy.crt -K proxy.key -p :53&lt;/code&gt;&lt;br&gt; Then the local UDP port 53 provides a secure anti-pollution DNS resolution function.&lt;/p&gt; &#xA;&lt;h4&gt;8.2.4 TLS-encrypted SOCKS5 upstream agent&lt;/h4&gt; &#xA;&lt;p&gt;Suppose there is a upstream agent: 2.2.2.2:33080&lt;br&gt; The commands executed by the upstream agent are:&lt;br&gt; &lt;code&gt;proxy socks -t tls -C proxy.crt -K proxy.key -p :33080&lt;/code&gt;&lt;br&gt; Local execution:&lt;br&gt; &lt;code&gt;proxy dns -S socks -T tls -P 2.2.2.2:33080 -C proxy.crt -K proxy.key -p :53&lt;/code&gt;&lt;br&gt; Then the local UDP port 53 provides a secure anti-pollution DNS resolution function.&lt;/p&gt; &#xA;&lt;h4&gt;8.2.5 KCP encrypted HTTP(S) upstream agent&lt;/h4&gt; &#xA;&lt;p&gt;Suppose there is a upstream agent: 2.2.2.2:33080&lt;br&gt; The commands executed by the upstream agent are:&lt;br&gt; &lt;code&gt;proxy http -t kcp -p :33080&lt;/code&gt;&lt;br&gt; Local execution:&lt;br&gt; &lt;code&gt;proxy dns -S http -T kcp -P 2.2.2.2:33080 -p :53&lt;/code&gt;&lt;br&gt; Then the local UDP port 53 provides a secure anti-pollution DNS resolution function.&lt;/p&gt; &#xA;&lt;h4&gt;8.2.6 KCP encrypted SOCKS5 upstream agent&lt;/h4&gt; &#xA;&lt;p&gt;Suppose there is a upstream agent: 2.2.2.2:33080&lt;br&gt; The commands executed by the upstream agent are:&lt;br&gt; &lt;code&gt;proxy socks -t kcp -p :33080&lt;/code&gt;&lt;br&gt; Local execution:&lt;br&gt; &lt;code&gt;proxy dns -S socks -T kcp -P 2.2.2.2:33080 -p :53&lt;/code&gt;&lt;br&gt; Then the local UDP port 53 provides a secure anti-pollution DNS resolution function.&lt;/p&gt; &#xA;&lt;h4&gt;8.2.7 Custom encrypted HTTP(S) upstream agent&lt;/h4&gt; &#xA;&lt;p&gt;Suppose there is a upstream agent: 2.2.2.2:33080&lt;br&gt; The commands executed by the upstream agent are:&lt;br&gt; &lt;code&gt;proxy http -t tcp -p :33080 -z password&lt;/code&gt;&lt;br&gt; Local execution:&lt;br&gt; &lt;code&gt;proxy dns -S http -T tcp -Z password -P 2.2.2.2:33080 -p :53&lt;/code&gt;&lt;br&gt; Then the local UDP port 53 provides a secure anti-pollution DNS resolution function.&lt;/p&gt; &#xA;&lt;h4&gt;8.2.8 Custom encrypted SOCKS5 upstream agent&lt;/h4&gt; &#xA;&lt;p&gt;Suppose there is a upstream agent: 2.2.2.2:33080&lt;br&gt; The commands executed by the upstream agent are:&lt;br&gt; &lt;code&gt;proxy socks -t kcp -p :33080 -z password&lt;/code&gt;&lt;br&gt; Local execution:&lt;br&gt; &lt;code&gt;proxy dns -S socks -T tcp -Z password -P 2.2.2.2:33080 -p :53&lt;/code&gt;&lt;br&gt; Then the local UDP port 53 provides a secure anti-pollution DNS resolution function.&lt;/p&gt; &#xA;&lt;h2&gt;9.API Authentication&lt;/h2&gt; &#xA;&lt;p&gt;The proxy&#39;s http(s)/socks5/sps proxy function supports user-to-agent access via the API.&lt;/p&gt; &#xA;&lt;h3&gt;What can I do through the API?&lt;/h3&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;User dimension, which controls the single connection rate and controls the maximum number of connections, max connections count per seconds (QPS).&lt;/li&gt; &#xA; &lt;li&gt;IP dimension, which controls the single connection rate and controls the maximum number of connections, max connections count per seconds (QPS).&lt;/li&gt; &#xA; &lt;li&gt;Dynamic upstream, can dynamically obtain its upstream from the API according to the user or client IP, and support http(s)/socks5/ss upstream.&lt;/li&gt; &#xA; &lt;li&gt;Authenticate every connection, regardless of whether client authentication is required.&lt;/li&gt; &#xA; &lt;li&gt;Cache authentication results, time can be set to reduce API pressure.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h4&gt;Specific use&lt;/h4&gt; &#xA;&lt;p&gt;The proxy&#39;s http(s)/socks5/sps proxy API function is controlled by three parameters: &lt;code&gt;--auth-url&lt;/code&gt; and &lt;code&gt;--auth-nouser&lt;/code&gt; and &lt;code&gt;--auth-cache&lt;/code&gt;.&lt;br&gt; The parameter &lt;code&gt;--auth-url&lt;/code&gt; is the HTTP API interface address. When the client connects, the proxy will request the url in GET mode, with the following parameters. If the HTTP status code 204 is returned, the authentication is successful. In other cases, the authentication fails.&lt;/p&gt; &#xA;&lt;p&gt;An example of a complete request API:&lt;br&gt; &lt;code&gt;http://test.com/auth.php?user=a&amp;amp;pass=b&amp;amp;client_addr=127.0.0.1:49892&amp;amp;local_addr=127.0.0.1:8100&amp;amp;target=http%3A%2F%2Fwww.baidu.com&amp;amp;service=http&amp;amp;sps=0&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h4&gt;Parameter Description&lt;/h4&gt; &#xA;&lt;p&gt;&lt;code&gt;user and pass&lt;/code&gt; When the proxy turns on authentication, here is the username and password provided by the client.&lt;br&gt; &lt;code&gt;client_addr&lt;/code&gt; The address used by the client to access the proxy, format IP: port.&lt;br&gt; &lt;code&gt;local_addr&lt;/code&gt; The proxy address accessed by the client, format IP: port.&lt;br&gt; &lt;code&gt;service&lt;/code&gt; Proxy type, divided into: http, socks.&lt;br&gt; Whether the &lt;code&gt;sps&lt;/code&gt; proxy is provided by sps, 1: yes, 0: no.&lt;br&gt; &lt;code&gt;target&lt;/code&gt; The target to be accessed by the client. If it is an http(s) proxy, the target is the specific url accessed; if it is a socks5 proxy, the target is empty.&lt;/p&gt; &#xA;&lt;h4&gt;Example&lt;/h4&gt; &#xA;&lt;p&gt;Suppose --auth-url &lt;a href=&#34;http://127.0.0.1:333/auth.php&#34;&gt;http://127.0.0.1:333/auth.php&lt;/a&gt; points to a php interface address.&lt;br&gt; The contents of auth.php are as follows:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-php&#34;&gt;&amp;lt;?php  &#xA;#all users and password  &#xA;$alluser=[&#xA;    &#34;user1&#34;=&amp;gt;&#34;pass1&#34;,&#xA;    &#34;user2&#34;=&amp;gt;&#34;pass2&#34;,&#xA;    &#34;user3&#34;=&amp;gt;&#34;pass3&#34;,&#xA;    &#34;user4&#34;=&amp;gt;&#34;pass4&#34;,&#xA;];&#xA;$proxy_ip=$_GET[&#39;local_addr&#39;];  &#xA;$user_ip=$_GET[&#39;client_addr&#39;];  &#xA;$service=$_GET[&#39;service&#39;];  &#xA;$is_sps=$_GET[&#39;sps&#39;]==&#39;1&#39;;  &#xA;$user=$_GET[&#39;user&#39;];  &#xA;$pass=$_GET[&#39;pass&#39;];  &#xA;$target=$_GET[&#39;target&#39;];  &#xA;&#xA;//business checking&#xA;//....  &#xA;$ok=false;&#xA;foreach ($alluser as $dbuser =&amp;gt; $dbpass) {&#xA;    if ($user==$dbuser&amp;amp;&amp;amp;$pass==$dbpass){&#xA;        $ok=true;&#xA;        break;&#xA;    }&#xA;}&#xA;&#xA;//set the authentication result  &#xA;if($ok){&#xA;    header(&#34;userconns:1000&#34;);  &#xA;    header(&#34;ipconns:2000&#34;);  &#xA;    header(&#34;userrate:3000&#34;);  &#xA;    header(&#34;iprate:8000&#34;);  &#xA;    header(&#34;userqps:5&#34;);&#xA;    header(&#34;ipqps:2&#34;);&#xA;    header(&#34;upstream:http://127.0.0.1:3500?parent-type=tcp&#34;);  &#xA;    header(&#34;outgoing:1.1.1.1&#34;);  &#xA;    header(&#34;HTTP/1.1 204 No Content&#34;);  &#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h4&gt;HTTP HEADER Explanation&lt;/h4&gt; &#xA;&lt;p&gt;&lt;code&gt;userconns&lt;/code&gt;: The maximum number of connections for the user, not limited to 0 or not set this header.&lt;br&gt; &lt;code&gt;ipcons&lt;/code&gt;: The maximum number of connections for the user IP, not limited to 0 or not set this header.&lt;br&gt; &lt;code&gt;userrate&lt;/code&gt;: User&#39;s single TCP connection rate limit, in bytes/second, is not limited to 0 or does not set this header.&lt;br&gt; &lt;code&gt;iprate&lt;/code&gt;: The single TCP connection rate limit of the client IP, in bytes/second, not limited to 0 or not set this header.&lt;br&gt; &lt;code&gt;userqps&lt;/code&gt;: The maximum number of connections per second (QPS) for the user, not limited to 0 or not set this header.&lt;br&gt; &lt;code&gt;ipqps&lt;/code&gt;: The maximum number of connections per second (QPS) for the client IP, not limited to 0 or not set this header.&lt;br&gt; &lt;code&gt;upstream&lt;/code&gt;: The upstream used, not empty, or not set this header.&lt;br&gt; &lt;code&gt;outgoing&lt;/code&gt;: The outgoing ip，this option only working which upstream is empty. And the IP must belong to the machine running proxy。&lt;/p&gt; &#xA;&lt;h4&gt;Tips&lt;/h4&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;By default, &lt;code&gt;--auth-url&lt;/code&gt; is required to provide the user name and password. If you do not need the client to provide the username and password, and authenticate, you can add &lt;code&gt;--auth-nouser&lt;/code&gt;. The visit will still access the authentication address &lt;code&gt;--auth-url&lt;/code&gt; for authentication. Only the $user authentication username and the $pass authentication password received in the php interface are empty when client didn&#39;t send username and password.&lt;/li&gt; &#xA; &lt;li&gt;Connection limit priority: User authentication file limit - &#34;File ip.limit limit -&#34; API user limit - &#34;API IP limit -&#34; command line global connection limit.&lt;/li&gt; &#xA; &lt;li&gt;Rate Limit Priority: User Authentication File Rate Limit - &#34;File ip.limit Rate Limit -&#34; API User Rate Limit - &#34;API IP Rate Limit - &#34;Command Line Global Rate Limit.&lt;/li&gt; &#xA; &lt;li&gt;The upstream obtains the priority: the upstream of the user authentication file - the file ip.limit upstream-&#34;API upstream-&#34; command line specifies the upstream.&lt;br&gt; 4.&lt;code&gt;--auth-cache&lt;/code&gt; authentication cache, cache the authentication result for a certain period of time, improve performance, reduce the pressure on the authentication interface, --auth-cache unit seconds, default 0, set 0 to close the cache.&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;h4&gt;upstream detailed description&lt;/h4&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;When the parameter &lt;code&gt;sps&lt;/code&gt; is 0.&lt;br&gt; When the service is http, upstream only supports http(s) proxy, and does not support authentication. If authentication is required, it can be replaced by sps. Format:&lt;br&gt; &lt;code&gt;http://127.0.0.1:3100?argk=argv&lt;/code&gt;&lt;br&gt; When the service is a socks, the upstream only supports the socks5 proxy. The format is:&lt;br&gt; &lt;code&gt;socks5://127.0.0.1:3100?argk=argv&lt;/code&gt;&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;p&gt;Explanation: &lt;code&gt;http://&lt;/code&gt;,&lt;code&gt;socks5://&lt;/code&gt; is fixed, &lt;code&gt;127.0.0.1:3100&lt;/code&gt; is the address of the upstream&lt;/p&gt; &#xA;&lt;ol start=&#34;2&#34;&gt; &#xA; &lt;li&gt; &lt;p&gt;When &lt;code&gt;sps&lt;/code&gt; is 1.&lt;br&gt; Upstream supports socks5, http(s) proxy, support authentication, format: &lt;code&gt;protocol://a:b@2.2.2.2:33080?argk=argv&lt;/code&gt;, please refer to SPS chapter for details, &lt;strong&gt;multiple upstreams&lt;/strong&gt; , the description of the &lt;code&gt;-P&lt;/code&gt; parameter.&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;Parameters, &lt;code&gt;?&lt;/code&gt; followed by &lt;code&gt;argk=argv&lt;/code&gt; are parameters: parameter name = parameter value, multiple parameters are connected with &lt;code&gt;&amp;amp;&lt;/code&gt;.&lt;br&gt; All the supported parameters are as follows, and the meaning of the command line with the same name is the same.&lt;/p&gt; &#xA;  &lt;ol&gt; &#xA;   &lt;li&gt;parent-type : upper-level transport type, support tcp, tls, ws, wss&lt;/li&gt; &#xA;   &lt;li&gt;parent-ws-method: The encryption method of the upper-level ws transmission type, the supported value is the same as the value range supported by the command line.&lt;/li&gt; &#xA;   &lt;li&gt;parent-ws-password: The upper-level ws transmission type encryption password, the alphanumeric password&lt;/li&gt; &#xA;   &lt;li&gt;parent-tls-single : Whether the upper-level tls transport type is a one-way tls, which can be: true | false&lt;/li&gt; &#xA;   &lt;li&gt;timeout : timeout for establishing tcp connection, number, in milliseconds&lt;/li&gt; &#xA;   &lt;li&gt;ca : The base64-encoded string of the upper-level tls transport type ca certificate file.&lt;/li&gt; &#xA;   &lt;li&gt;cert : The base64 encoded string of the higher level tls transport type certificate file.&lt;/li&gt; &#xA;   &lt;li&gt;key : The base64 encoded string of the higher-level tls transport type certificate key file.&lt;/li&gt; &#xA;   &lt;li&gt;luminati:if upstram is luminati proxies，value can be: true or false。&lt;/li&gt; &#xA;  &lt;/ol&gt; &lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;h3&gt;Traffic report / Traffic limit / Traffic statistics&lt;/h3&gt; &#xA;&lt;p&gt;The proxy&#39;s http (s) / socks5 / sps / tcp / udp proxy function supports traffic reporting. You can set an http interface address through the parameter &lt;code&gt;--traffic-url&lt;/code&gt;. The proxy will report the traffic used for this connection to this address.Specifically, the proxy sends an HTTP to GET request to the HTTP URL address set by &lt;code&gt;--traffic-url&lt;/code&gt;. There are two reporting modes, which can be specified by the &lt;code&gt;--traffic-mode&lt;/code&gt; parameter. It can be reported in the normal mode or in the fast mode.&lt;/p&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt; &lt;p&gt;Report in &lt;code&gt;normal&lt;/code&gt; normal mode&lt;br&gt; When the connection is released, the proxy will report the traffic used for this connection to this &lt;code&gt;--traffic-url&lt;/code&gt; address.&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;Report in &lt;code&gt;fast&lt;/code&gt; mode&lt;br&gt; For each connection that has been established, the proxy will &lt;code&gt;timely&lt;/code&gt; report the traffic generated by this connection to this&lt;code&gt; --traffic-url&lt;/code&gt; address.&lt;br&gt; &lt;code&gt;Timing&lt;/code&gt; defaults to 5 seconds, and you can modify&lt;code&gt; Timing&lt;/code&gt; to the appropriate number of seconds via the parameter &lt;code&gt;--traffic-interval&lt;/code&gt;.&lt;/p&gt; &lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;p&gt;The traffic reporting function combined with the above API authentication function can control the user&#39;s traffic usage in real time. The traffic is reported to the interface. The interface writes the traffic data to the database, and then the authentication API queries the database to determine the traffic usage and determine whether the user can be successfully authenticated.&lt;/p&gt; &#xA;&lt;p&gt;The following is a complete URL request example:&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;http://127.0.0.1:33088/user/traffic?bytes=337&amp;amp;client_addr=127.0.0.1%3A51035&amp;amp;id=http&amp;amp;server_addr =127.0.0.1%3A33088&amp;amp;target_addr=myip.ipip.net%3A80&amp;amp;username=a&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;Request parameter description: id: service id flag. server_addr: proxies&#39;s address requested by the client, format: IP: port. client_addr: client address, format: IP: port. target_addr: target address, format: &#34;IP: port&#34;, when tcp / udp proxy, this is empty. User name: proxy authentication user name, this is empty when tcp / udp proxy. bytes: the number of traffic bytes used by the user. out_local_addr: outgoing tcp connection&#39;s local address,format: IP: port. out_remote_addr: outgoing tcp connection&#39;s remote address,format: IP: port. upstream: upstream used by outgoing tcp connection, if none upstream be used, it&#39;s empty.&lt;/p&gt; &#xA;&lt;h4&gt;Tips&lt;/h4&gt; &#xA;&lt;p&gt;The &lt;code&gt;--traffic-url&lt;/code&gt; URL must response the HTTP status code&lt;code&gt; 204&lt;/code&gt;. Only when the traffic is reported will the report be considered successful, and if it response other status codes, it will be considered that the reported traffic failed, and the log will be output.&lt;/p&gt; &#xA;&lt;h4&gt;traffic flow&lt;/h4&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/snail007/goproxy@master/doc/images/traffic.png&#34; alt=&#34;traffic&#34;&gt;&lt;/p&gt; &#xA;&lt;h3&gt;Disconnect the user&#39;s connection&lt;/h3&gt; &#xA;&lt;p&gt;The proxy&#39;s http (s) / socks5 / sps proxy function supports a control interface, which can be specified by the parameter --control-url http interface address, Then the proxy will interval send all the usernames or client IPs currently connected to the proxy to this URL. Specifically, the proxy sends an HTTP to POST request to the HTTP URL address set by --control-url.&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;interval&lt;/code&gt; defaults to 30 seconds, this value can be modified via the --control-sleep parameter.&lt;/p&gt; &#xA;&lt;p&gt;When the user expires, or the user&#39;s traffic has been used up, the authentication API can only control the user cannot create a new connection, but the connection with the proxy has been established and the connection cannot be immediately disconnected. Then this problem can be solved through the control interface. The control interface will return the content through the control interface in the slowest &lt;code&gt;interval&lt;/code&gt; time, and the end is invalid when the user establishes the connection.&lt;/p&gt; &#xA;&lt;h4&gt;Request Description&lt;/h4&gt; &#xA;&lt;p&gt;An HTTP POST request will be sent to the control. The interface &lt;code&gt;form&lt;/code&gt; has three fields: interface, ip, conns, and the &lt;code&gt;conns&lt;/code&gt; field requires a user whose proxy version is greater than proxy &lt;code&gt;12.2&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;user&lt;/code&gt; The username currently connected to the agent, multiple separated by commas, for example: user1, user2&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;ip&lt;/code&gt; The client IP is connected to the proxy, and multiple clients using English are split addresses, for example: 1.1.1.1, 2.2.2.2&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;conns&lt;/code&gt; The tcp connection information currently connecting to the proxy port to transmit data. The conns value is a json string, the format is a sequence of connections, the element is an object, the object contains the details of the connection, conns format: &lt;code&gt;[{&#34;id&#34;:&#34;ab7bf1f10501d6f7&#34;,&#34;client&#34;:&#34;127.0.0.1:62112&#34;,&#34;server&#34;:&#34;127.0.0.1:9092&#34;,&#34;user&#34;:&#34;&#34;}]&lt;/code&gt; Object field description: id: connection id, client: client&#39;s unique IP address and port, server: client&#39;s IP and no port access, user&#39;s connection authentication (null if any)&lt;/p&gt; &#xA;&lt;h4&gt;Response Data Description&lt;/h4&gt; &#xA;&lt;p&gt;The data returned by the control interface is invalid user and IP or connection. The format is a json object data. There are three fields user, ip, and conns. The &lt;code&gt;conns&lt;/code&gt; field requires the proxy version greater than or equal to &lt;code&gt;12.2&lt;/code&gt;. Format: &lt;code&gt;{&#34;user&#34;:&#34;a,b&#34;,&#34;ip&#34;:&#34;&#34;,conns:[&#34;ab7bf1f10501d6f7&#34;,&#34;cb7bf1f10501d6f7&#34;]}&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;user&lt;/code&gt;: The username currently connected to the proxy, multiple separated by commas, not left blank, for example: user1, user2&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;ip&lt;/code&gt;: The ip address of the client currently connected to the proxy, multiple separated by commas, not left blank, for example: 1.1.1.1, 2.2.2.2&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;conns&lt;/code&gt;: is an array, the element is a connection id, this id is the id field of the connection object in conns in the above &lt;code&gt;Request Description&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;p&gt;Introduce:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;The connection established by the returned user and ip will be disconnected by the proxy.&lt;/li&gt; &#xA; &lt;li&gt;Connections matching the returned conns will be disconnected by the proxy.&lt;/li&gt; &#xA; &lt;li&gt;If the returned data contains both: user or ip, and conns, then the user or ip will be ignored, and only the connection matching conns will be disconnected.&lt;/li&gt; &#xA; &lt;li&gt;When the connection is closed, if the authentication cache is enabled, the &lt;code&gt;user&lt;/code&gt; or &lt;code&gt;IP&lt;/code&gt; authentication cache will be cleared.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h4&gt;Example&lt;/h4&gt; &#xA;&lt;p&gt;Suppose --control-url &lt;code&gt;http://127.0.0.1:33088/user/control.php&lt;/code&gt; points to a PHP interface address. The content of control.php is as follows:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-php&#34;&gt;&amp;lt;?php  &#xA;#revcieve proxy post data&#xA;$userArr=explode(&#34;,&#34;,$_POST[&#39;user&#39;]);   &#xA;$ipArr=$_GET[&#39;ip&#39;];  &#xA;&#xA;//invalid users array&#xA;$badUsers=[]; &#xA;&#xA;foreach ($userArr as $user) {  &#xA;    //logic business, push invalid user into $badUsers&#xA;    $badUsers[]=$user;&#xA;}  &#xA;$data=[&#34;user&#34;=&amp;gt;implode(&#34;,&#34;$badUsers),&#34;ip&#34;=&amp;gt;&#34;&#34;,&#34;conns&#34;=&amp;gt;[]];&#xA;&#xA;echo json_encode($data);&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h2&gt;10. Authentication&lt;/h2&gt; &#xA;&lt;p&gt;The proxy http(s)/socks5/sps proxy function supports the user to access the proxy pair through the configuration file, and supports the http(s) proxy ``Proxy Basic proxy authentication` and the socks5 proxy authentication.&lt;/p&gt; &#xA;&lt;h3&gt;start using&lt;/h3&gt; &#xA;&lt;p&gt;The proxy&#39;s http(s)/socks5/sps proxy function can pass&lt;br&gt; &lt;code&gt;--auth-file&lt;/code&gt;, &lt;code&gt;--max-conns&lt;/code&gt;, &lt;code&gt;--ip-limit&lt;/code&gt;, &lt;code&gt;--rate-limit&lt;/code&gt;, &lt;code&gt;-a&lt;/code&gt; These five parameters control.&lt;/p&gt; &#xA;&lt;h4&gt;Detailed explanation of parameters&lt;/h4&gt; &#xA;&lt;h5&gt;&lt;code&gt;--auth-file&lt;/code&gt;&lt;/h5&gt; &#xA;&lt;p&gt;The authenticated user name and password file. This parameter specifies a file, one line per rule, in the format: &#34;username: password: number of connections: rate: upstream&#34;.&lt;br&gt; &lt;code&gt;Connection number&lt;/code&gt; is the maximum number of connections for the user. The &#39;rate&#39; is the maximum speed of each tcp connection of the user. The unit is: byte/second. The upper level is the upper level used by the user.&lt;br&gt; Not only can the authenticated user be set by &lt;code&gt;--auth-file&lt;/code&gt;, but also the &lt;code&gt;-a&lt;/code&gt; parameter can be set directly. Multiple users can repeat multiple &lt;code&gt;-a&lt;/code&gt; parameters.&lt;br&gt; For example: &lt;code&gt;proxy http -a a&lt;span&gt;🅱&lt;/span&gt;0:0: -a c:d:0:0:&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;Example explanation:&lt;br&gt; For example: &lt;code&gt;user:pass&lt;span&gt;💯&lt;/span&gt;10240:http://192.168.1.1:3100&lt;/code&gt;&lt;br&gt; &lt;code&gt;user&lt;/code&gt; is the authentication username&lt;br&gt; &lt;code&gt;pass&lt;/code&gt; is the authentication user password (cannot contain a colon:)&lt;br&gt; &lt;code&gt;100&lt;/code&gt; is the maximum number of connections for this user, not limited to write 0&lt;br&gt; &lt;code&gt;10240&lt;/code&gt; is the rate limit of this user&#39;s single tcp connection, the unit is: byte / sec, no limit write 0&lt;br&gt; &lt;code&gt;http://192.168.1.1:3100&lt;/code&gt; is the upstream used by this user, no space is left blank&lt;/p&gt; &#xA;&lt;h5&gt;&lt;code&gt;--max-conns&lt;/code&gt;&lt;/h5&gt; &#xA;&lt;p&gt;Limit the maximum number of global connections for the proxy service, a number, 0 is unrestricted, default is 0.&lt;/p&gt; &#xA;&lt;h5&gt;&lt;code&gt;--ip-limit&lt;/code&gt;&lt;/h5&gt; &#xA;&lt;p&gt;Controls the number of connections and connection rate of the client IP. This parameter specifies a file, one rule per line, and the beginning of # is gaze.&lt;br&gt; The sample file ip.limit, the rule format is as follows:&lt;br&gt; &lt;code&gt;127.0.0.1&lt;span&gt;💯&lt;/span&gt;10240:http://192.168.1.1:3100&lt;/code&gt;&lt;br&gt; Rule interpretation:&lt;br&gt; &lt;code&gt;127.0.0.1&lt;/code&gt; is the IP to be restricted&lt;br&gt; &lt;code&gt;100&lt;/code&gt; is the maximum number of connections for this IP, not limited to write 0&lt;br&gt; &lt;code&gt;10240&lt;/code&gt; is the rate limit of IP single tcp connection, the unit is: byte / s, no limit write 0&lt;br&gt; &lt;code&gt;http://192.168.1.1:3100&lt;/code&gt; is the upstream used by this IP, and it is not left blank.&lt;/p&gt; &#xA;&lt;h5&gt;&lt;code&gt;--rate-limit&lt;/code&gt;&lt;/h5&gt; &#xA;&lt;p&gt;Limit the speed of each tcp connection of the service, for example: 100K 2000K 1M . 0 means unlimited, default 0.&lt;/p&gt; &#xA;&lt;h2&gt;11. Cluster&lt;/h2&gt; &#xA;&lt;p&gt;The proxy supports the cluster management. The proxy is installed on each machine node as an agent, with the control panel [&lt;code&gt;proxyadmin cluster edition&lt;/code&gt;] (&lt;a href=&#34;https://github.com/snail007/proxy-admin-cluster&#34;&gt;https://github.com/snail007/proxy-admin-cluster&lt;/a&gt;) Unified management of proxy services on massive machines.&lt;/p&gt; &#xA;&lt;p&gt;If the proxy is to be run as an agent, assume that the cluster port address of the control panel is: &lt;code&gt;1.1.1.1: 55333&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;p&gt;The command example is as follows:&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;proxy agent -k xxx -c 1.1.1.1:55333 -i test&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;Command explanation:&lt;/p&gt; &#xA;&lt;p&gt;agent: is a function parameter, which means running agent mode.&lt;/p&gt; &#xA;&lt;p&gt;-k : The encryption and decryption key for communication with &lt;code&gt;proxyadmin cluster edition&lt;/code&gt;. This key is set in the configuration file of&lt;code&gt; proxyadmin cluster edition&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;p&gt;-c : The cluster port address of &lt;code&gt;proxyadmin cluster edition&lt;/code&gt;, format: IP:port.&lt;/p&gt; &#xA;&lt;p&gt;-i ： The unique identifier of the agent ensures that each agent is different. The &#34;unique identifier&#34; specified here is used when adding a node to the control panel. The IP is filled with this &#34;unique identifier&#34;. If -i is not specified, the default is empty, and the control panel adds the IP field to fill in: the agent&#39;s internet IP.&lt;/p&gt; &#xA;&lt;p&gt;-u: proxy parameter, empty by default. You can specify an agent, and the agent will communicate with the cluster through this agent.&lt;br&gt; The format is the same as that of &lt;code&gt;--jumper&lt;/code&gt;. For details, please refer to the &lt;code&gt;--jumper&lt;/code&gt; part of the manual.&lt;/p&gt; &#xA;&lt;p&gt;notice:&lt;/p&gt; &#xA;&lt;p&gt;When the client service is configured in the control panel, all nodes use the same key, which leads to only one client working. To solve this problem, Client service parameters can use placeholders: &lt;code&gt;{AGENT_ID}&lt;/code&gt; to refer to the agent’s id as the client’s key, so as to ensure that each client has a unique key.&lt;/p&gt; &#xA;&lt;p&gt;For example, client service parameters:&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;client -T tcp -P 1.1.1.1:30000 --k {AGENT_ID}&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h2&gt;12. http, https website reverse proxy&lt;/h2&gt; &#xA;&lt;p&gt;The proxy can reverse proxy http and https websites.&lt;/p&gt; &#xA;&lt;p&gt;The supported features are as follows:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;http and https are converted to each other.&lt;/li&gt; &#xA; &lt;li&gt;multiple upstream.&lt;/li&gt; &#xA; &lt;li&gt;upstream load balance.&lt;/li&gt; &#xA; &lt;li&gt;upstream high available.&lt;/li&gt; &#xA; &lt;li&gt;path mapping.&lt;/li&gt; &#xA; &lt;li&gt;path protection.&lt;/li&gt; &#xA; &lt;li&gt;alias names of bindings.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;Example, configure file:&lt;code&gt;rhttp.toml&lt;/code&gt;。&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;proxy rhttp -c rhttp.toml&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;For detail usage, please refer to the configuration file &lt;a href=&#34;https://github.com/snail007/goproxy/raw/master/rhttp.toml&#34;&gt;rhttp.toml&lt;/a&gt;, which has a complete configuration description.&lt;/p&gt;</summary>
  </entry>
</feed>