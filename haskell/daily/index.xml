<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom">
  <title>GitHub Haskell Daily Trending</title>
  <id>http://mshibanami.github.io/GitHubTrendingRSS</id>
  <updated>2024-10-02T01:31:03Z</updated>
  <subtitle>Daily Trending of Haskell in GitHub</subtitle>
  <link href="http://mshibanami.github.io/GitHubTrendingRSS"></link>
  <entry>
    <title>barrucadu/dejafu</title>
    <updated>2024-10-02T01:31:03Z</updated>
    <id>tag:github.com,2024-10-02:/barrucadu/dejafu</id>
    <link href="https://github.com/barrucadu/dejafu" rel="alternate"></link>
    <summary type="html">&lt;p&gt;Systematic concurrency testing meets Haskell.&lt;/p&gt;&lt;hr&gt;&lt;h1&gt;dejafu&lt;/h1&gt; &#xA;&lt;blockquote&gt; &#xA; &lt;p&gt;[Déjà Fu is] A martial art in which the user&#39;s limbs move in time as well as space, […] It is best described as &#34;the feeling that you have been kicked in the head this way before&#34;&lt;/p&gt; &#xA; &lt;p&gt;-- Terry Pratchett, Thief of Time&lt;/p&gt; &#xA;&lt;/blockquote&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/barrucadu/dejafu/master/#installation&#34;&gt;Installation&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/barrucadu/dejafu/master/#quick-start-guide&#34;&gt;Quick start guide&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/barrucadu/dejafu/master/#why-d%C3%A9j%C3%A0-fu&#34;&gt;Why Déjà Fu?&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/barrucadu/dejafu/master/#contributing&#34;&gt;Contributing&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/barrucadu/dejafu/master/#release-notes&#34;&gt;Release notes&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/barrucadu/dejafu/master/#questions-feedback-discussion&#34;&gt;Questions, feedback, discussion&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/barrucadu/dejafu/master/#bibliography&#34;&gt;Bibliography&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;strong&gt;&lt;a href=&#34;https://dejafu.docs.barrucadu.co.uk/&#34;&gt;The website!&lt;/a&gt;&lt;/strong&gt;&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;Déjà Fu is a unit-testing library for concurrent Haskell programs. Tests are deterministic and expressive, making it easy and convenient to test your threaded code.&lt;/p&gt; &#xA;&lt;p&gt;Available on &lt;a href=&#34;https://github.com/barrucadu/dejafu&#34;&gt;GitHub&lt;/a&gt;, &lt;a href=&#34;https://hackage.haskell.org/package/dejafu&#34;&gt;Hackage&lt;/a&gt;, and &lt;a href=&#34;https://www.stackage.org/package/dejafu&#34;&gt;Stackage&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;p&gt;Features:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;An abstraction over the concurrency functionality in &lt;code&gt;IO&lt;/code&gt;&lt;/li&gt; &#xA; &lt;li&gt;Deterministic testing of nondeterministic code&lt;/li&gt; &#xA; &lt;li&gt;Both complete (slower) and incomplete (faster) modes&lt;/li&gt; &#xA; &lt;li&gt;A unit-testing-like approach to writing test cases&lt;/li&gt; &#xA; &lt;li&gt;A property-testing-like approach to comparing stateful operations&lt;/li&gt; &#xA; &lt;li&gt;Testing of potentially nonterminating programs&lt;/li&gt; &#xA; &lt;li&gt;Integration with &lt;a href=&#34;https://hackage.haskell.org/package/HUnit&#34;&gt;HUnit&lt;/a&gt; and &lt;a href=&#34;https://hackage.haskell.org/package/tasty&#34;&gt;tasty&lt;/a&gt;&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;There are a few different packages under the Déjà Fu umbrella:&lt;/p&gt; &#xA;&lt;table&gt; &#xA; &lt;thead&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;th&gt;&lt;/th&gt; &#xA;   &lt;th&gt;Version&lt;/th&gt; &#xA;   &lt;th&gt;Summary&lt;/th&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/thead&gt; &#xA; &lt;tbody&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;&lt;a href=&#34;https://hackage.haskell.org/package/concurrency&#34;&gt;concurrency&lt;/a&gt;&lt;/td&gt; &#xA;   &lt;td&gt;1.11.0.3&lt;/td&gt; &#xA;   &lt;td&gt;Typeclasses, functions, and data types for concurrency and STM.&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;&lt;a href=&#34;https://hackage.haskell.org/package/dejafu&#34;&gt;dejafu&lt;/a&gt;&lt;/td&gt; &#xA;   &lt;td&gt;2.4.0.5&lt;/td&gt; &#xA;   &lt;td&gt;Systematic testing for Haskell concurrency.&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;&lt;a href=&#34;https://hackage.haskell.org/package/hunit-dejafu&#34;&gt;hunit-dejafu&lt;/a&gt;&lt;/td&gt; &#xA;   &lt;td&gt;2.0.0.6&lt;/td&gt; &#xA;   &lt;td&gt;Deja Fu support for the HUnit test framework.&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;&lt;a href=&#34;https://hackage.haskell.org/package/tasty-dejafu&#34;&gt;tasty-dejafu&lt;/a&gt;&lt;/td&gt; &#xA;   &lt;td&gt;2.1.0.1&lt;/td&gt; &#xA;   &lt;td&gt;Deja Fu support for the Tasty test framework.&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/tbody&gt; &#xA;&lt;/table&gt; &#xA;&lt;p&gt;See &lt;a href=&#34;https://dejafu.docs.barrucadu.co.uk/packages/&#34;&gt;the latest package documentation&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;p&gt;Each package has its own README and CHANGELOG in its subdirectory.&lt;/p&gt; &#xA;&lt;p&gt;There is also dejafu-tests, the test suite for dejafu. This is in a separate package due to Cabal being bad with test suite transitive dependencies.&lt;/p&gt; &#xA;&lt;h2&gt;Installation&lt;/h2&gt; &#xA;&lt;p&gt;Install from Hackage globally:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;$ cabal install dejafu&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Or add it to your cabal file:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;build-depends: ...&#xA;             , dejafu&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Or to your package.yaml:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;dependencies:&#xA;  ...&#xA;  - dejafu&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h2&gt;Quick start guide&lt;/h2&gt; &#xA;&lt;p&gt;Déjà Fu supports unit testing, and comes with a helper function called &lt;code&gt;autocheck&lt;/code&gt; to look for some common issues. Let&#39;s see it in action:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-haskell&#34;&gt;import Control.Concurrent.Classy&#xA;&#xA;myFunction :: MonadConc m =&amp;gt; m String&#xA;myFunction = do&#xA;  var &amp;lt;- newEmptyMVar&#xA;  fork (putMVar var &#34;hello&#34;)&#xA;  fork (putMVar var &#34;world&#34;)&#xA;  readMVar var&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;That &lt;code&gt;MonadConc&lt;/code&gt; is a typeclass abstraction over concurrency, but we&#39;ll get onto that shortly. First, the result of testing:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;&amp;gt; autocheck myFunction&#xA;[pass] Never Deadlocks&#xA;[pass] No Exceptions&#xA;[fail] Consistent Result&#xA;    &#34;hello&#34; S0----S1--S0--&#xA;&#xA;    &#34;world&#34; S0----S2--S0--&#xA;False&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;There are no deadlocks or uncaught exceptions, which is good; but the program is (as you probably spotted) nondeterministic!&lt;/p&gt; &#xA;&lt;p&gt;Along with each result, Déjà Fu gives us a representative execution trace in an abbreviated form. &lt;code&gt;Sn&lt;/code&gt; means that thread &lt;code&gt;n&lt;/code&gt; started executing, and &lt;code&gt;Pn&lt;/code&gt; means that thread &lt;code&gt;n&lt;/code&gt; pre-empted the previously running thread.&lt;/p&gt; &#xA;&lt;h2&gt;Why Déjà Fu?&lt;/h2&gt; &#xA;&lt;p&gt;Testing concurrent programs is difficult, because in general they are nondeterministic. This leads to people using work-arounds like running their testsuite many thousands of times; or running their testsuite while putting their machine under heavy load.&lt;/p&gt; &#xA;&lt;p&gt;These approaches are inadequate for a few reasons:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;strong&gt;How many runs is enough?&lt;/strong&gt; When you are just hopping to spot a bug by coincidence, how do you know to stop?&lt;/li&gt; &#xA; &lt;li&gt;&lt;strong&gt;How do you know if you&#39;ve fixed a bug you saw previously?&lt;/strong&gt; Because the scheduler is a black box, you don&#39;t know if the previously buggy schedule has been re-run.&lt;/li&gt; &#xA; &lt;li&gt;&lt;strong&gt;You won&#39;t get that much scheduling variety!&lt;/strong&gt; Operating systems and language runtimes like to run threads for long periods of time, which reduces the variety you get (and so drives up the number of runs you need).&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;Déjà Fu addresses these points by offering &lt;em&gt;complete&lt;/em&gt; testing. You can run a test case and be guaranteed to find all results with some bounds. These bounds can be configured, or even disabled! The underlying approach used is smarter than merely trying all possible executions, and will in general explore the state-space quickly.&lt;/p&gt; &#xA;&lt;p&gt;If your test case is just too big for complete testing, there is also a random scheduling mode, which is necessarily &lt;em&gt;incomplete&lt;/em&gt;. However, Déjà Fu will tend to produce much more schedule variety than just running your test case in &lt;code&gt;IO&lt;/code&gt; the same number of times, and so bugs will tend to crop up sooner. Furthermore, as you get execution traces out, you can be certain that a bug has been fixed by simply following the trace by eye.&lt;/p&gt; &#xA;&lt;h2&gt;Contributing&lt;/h2&gt; &#xA;&lt;p&gt;See the &#34;contributing&#34; page on &lt;a href=&#34;https://dejafu.docs.barrucadu.co.uk/dev-docs/contributing.html&#34;&gt;the website&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;p&gt;&lt;strong&gt;If you&#39;d like to get involved with Déjà Fu&lt;/strong&gt;, check out &lt;a href=&#34;https://github.com/barrucadu/dejafu/issues?q=is%3Aissue+is%3Aopen+label%3A%22good+first+issue%22&#34;&gt;the &#34;good first issue&#34; label on the issue tracker&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;h2&gt;Release notes&lt;/h2&gt; &#xA;&lt;p&gt;See the CHANGELOG.markdown file.&lt;/p&gt; &#xA;&lt;h2&gt;Questions, feedback, discussion&lt;/h2&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;For general help talk to me in IRC (barrucadu in #haskell) or shoot me an email (&lt;a href=&#34;mailto:mike@barrucadu.co.uk&#34;&gt;mike@barrucadu.co.uk&lt;/a&gt;)&lt;/li&gt; &#xA; &lt;li&gt;For bugs, issues, or requests, please &lt;a href=&#34;https://github.com/barrucadu/dejafu/issues&#34;&gt;file an issue&lt;/a&gt;.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;Bibliography&lt;/h2&gt; &#xA;&lt;p&gt;These libraries wouldn&#39;t be possible without prior research, which I mention in the documentation. Haddock comments get the full citation, whereas in-line comments just get the shortened name:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt; &lt;p&gt;[BPOR] &lt;a href=&#34;http://research.microsoft.com/pubs/202164/bpor-oopsla-2013.pdf&#34;&gt;Bounded partial-order reduction&lt;/a&gt;, K. Coons, M. Musuvathi, and K. McKinley (2013)&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;[RDPOR] &lt;a href=&#34;http://www.faculty.ece.vt.edu/chaowang/pubDOC/ZhangKW15.pdf&#34;&gt;Dynamic Partial Order Reduction for Relaxed Memory Models&lt;/a&gt;, N. Zhang, M. Kusano, and C. Wang (2015)&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;[Empirical] &lt;a href=&#34;http://www.doc.ic.ac.uk/~afd/homepages/papers/pdfs/2014/PPoPP.pdf&#34;&gt;Concurrency Testing Using Schedule Bounding: an Empirical Study&lt;/a&gt;, P. Thompson, A. Donaldson, and A. Betts (2014)&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;[RMMVerification] &lt;a href=&#34;https://orbi.ulg.ac.be/bitstream/2268/158670/1/thesis.pdf&#34;&gt;On the Verification of Programs on Relaxed Memory Models&lt;/a&gt;, A. Linden (2014)&lt;/p&gt; &lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;There are also a few papers on dejafu itself:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt; &lt;p&gt;&lt;a href=&#34;https://www.barrucadu.co.uk/publications/dejafu-hs15.pdf&#34;&gt;Déjà Fu: A Concurrency Testing Library for Haskell&lt;/a&gt;, M. Walker and C. Runciman (2015)&lt;/p&gt; &lt;p&gt;This details dejafu-0.1, and was presented at the 2015 Haskell Symposium.&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;&lt;a href=&#34;https://www.barrucadu.co.uk/publications/YCS-2016-503.pdf&#34;&gt;Déjà Fu: A Concurrency Testing Library for Haskell&lt;/a&gt;, M. Walker and C. Runciman (2016)&lt;/p&gt; &lt;p&gt;This is a more in-depth technical report, written between the dejafu-0.2 and dejafu-0.3 releases.&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;&lt;a href=&#34;https://www.barrucadu.co.uk/publications/thesis.pdf&#34;&gt;Revealing Behaviours of Concurrent Functional Programs by Systematic Testing&lt;/a&gt;, M. Walker (2018)&lt;/p&gt; &lt;p&gt;This is my Ph.D thesis, which discusses dejafu and my other research projects.&lt;/p&gt; &lt;/li&gt; &#xA;&lt;/ul&gt;</summary>
  </entry>
</feed>