<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom">
  <title>GitHub XSLT Daily Trending</title>
  <id>http://mshibanami.github.io/GitHubTrendingRSS</id>
  <updated>2022-06-08T02:02:37Z</updated>
  <subtitle>Daily Trending of XSLT in GitHub</subtitle>
  <link href="http://mshibanami.github.io/GitHubTrendingRSS"></link>
  <entry>
    <title>idealista/solr_role</title>
    <updated>2022-06-08T02:02:37Z</updated>
    <id>tag:github.com,2022-06-08:/idealista/solr_role</id>
    <link href="https://github.com/idealista/solr_role" rel="alternate"></link>
    <summary type="html">&lt;p&gt;Ansible role to install an Apache Solr (Cloud) server/cluster&lt;/p&gt;&lt;hr&gt;&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/idealista/solr_role/master/logo.gif&#34; alt=&#34;Logo&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://travis-ci.com/idealista/solr_role&#34;&gt;&lt;img src=&#34;https://travis-ci.com/idealista/solr_role.png&#34; alt=&#34;Build Status&#34;&gt;&lt;/a&gt;&lt;/p&gt; &#xA;&lt;h1&gt;Solr Ansible role&lt;/h1&gt; &#xA;&lt;p&gt;This ansible role installs a Solr server in a debian environment.&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/idealista/solr_role/master/#Solr-ansible-role&#34;&gt;Solr Ansible role&lt;/a&gt; &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/idealista/solr_role/master/#getting-started&#34;&gt;Getting Started&lt;/a&gt; &#xA;    &lt;ul&gt; &#xA;     &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/idealista/solr_role/master/#prerequisities&#34;&gt;Prerequisities&lt;/a&gt;&lt;/li&gt; &#xA;     &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/idealista/solr_role/master/#installing&#34;&gt;Installing&lt;/a&gt;&lt;/li&gt; &#xA;    &lt;/ul&gt; &lt;/li&gt; &#xA;   &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/idealista/solr_role/master/#usage&#34;&gt;Usage&lt;/a&gt; &#xA;    &lt;ul&gt; &#xA;     &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/idealista/solr_role/master/#add-jvm-agent-to-your-installation&#34;&gt;Add JVM Agent to your installation&lt;/a&gt;&lt;/li&gt; &#xA;    &lt;/ul&gt; &lt;/li&gt; &#xA;   &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/idealista/solr_role/master/#prometheus-exporter&#34;&gt;Prometheus Exporter&lt;/a&gt;&lt;/li&gt; &#xA;   &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/idealista/solr_role/master/#testing&#34;&gt;Testing&lt;/a&gt;&lt;/li&gt; &#xA;   &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/idealista/solr_role/master/#built-with&#34;&gt;Built With&lt;/a&gt;&lt;/li&gt; &#xA;   &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/idealista/solr_role/master/#versioning&#34;&gt;Versioning&lt;/a&gt;&lt;/li&gt; &#xA;   &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/idealista/solr_role/master/#authors&#34;&gt;Authors&lt;/a&gt;&lt;/li&gt; &#xA;   &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/idealista/solr_role/master/#license&#34;&gt;License&lt;/a&gt;&lt;/li&gt; &#xA;   &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/idealista/solr_role/master/#contributing&#34;&gt;Contributing&lt;/a&gt;&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;Getting Started&lt;/h2&gt; &#xA;&lt;p&gt;These instructions will get you a copy of the role for your ansible playbook. Once launched, it will install a &lt;a href=&#34;https://cwiki.apache.org/confluence/display/solr/SolrCloud&#34;&gt;Solr&lt;/a&gt; server in a Debian system.&lt;/p&gt; &#xA;&lt;p&gt;This role is tested on:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Debian &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;stretch (java 8 and 11)&lt;/li&gt; &#xA;   &lt;li&gt;buster (java 11)&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA; &lt;li&gt;Ubuntu &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;focal (java 8 and 14)&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h3&gt;Prerequisities&lt;/h3&gt; &#xA;&lt;p&gt;Ansible 2.8.8 version installed. Inventory destination should be a Debian environment.&lt;/p&gt; &#xA;&lt;p&gt;For testing purposes, &lt;a href=&#34;https://molecule.readthedocs.io/&#34;&gt;Molecule&lt;/a&gt; with &lt;a href=&#34;https://www.docker.com/&#34;&gt;Docker&lt;/a&gt; as driver.&lt;/p&gt; &#xA;&lt;h3&gt;Installing&lt;/h3&gt; &#xA;&lt;p&gt;Create or add to your roles dependency file (e.g requirements.yml):&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;- src: idealista.solr_role&#xA;  version: x.x.x&#xA;  name: solr&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Install the role with ansible-galaxy command:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;ansible-galaxy install -p roles -r requirements.yml -f&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Use in a playbook:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;---&#xA;- hosts: someserver&#xA;  roles:&#xA;    - { role: solr }&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Playbook example below showing how to provision from scratch a SolrCloud cluster with two nodes plus create an example (and empty) collection called &lt;code&gt;sample_techproducts_configs&lt;/code&gt;, using idealista &lt;a href=&#34;https://github.com/idealista/java-role&#34;&gt;java&lt;/a&gt;, &lt;a href=&#34;https://github.com/idealista/zookeeper-role&#34;&gt;zookeeper&lt;/a&gt; and &lt;a href=&#34;https://github.com/idealista/solr_role&#34;&gt;solr&lt;/a&gt; roles:&lt;/p&gt; &#xA;&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; Assuming that &#39;solrcloud&#39; group has two nodes (&lt;code&gt;solrcloud1&lt;/code&gt; and &lt;code&gt;solrcloud2&lt;/code&gt;) as is declared in &lt;a href=&#34;https://github.com/idealista/solr_role/tree/master/molecule/default/molecule.yml&#34;&gt;molecule.yml&lt;/a&gt;, collection will have two shards, one replica and one shard per node as is declared in group vars file called &lt;a href=&#34;https://github.com/idealista/solr_role/tree/master/molecule/default/group_vars/solrcloud.yml&#34;&gt;solrcloud.yml&lt;/a&gt; and configuration files are stored under directory called &lt;code&gt;sample_techproducts_configs&lt;/code&gt; under template directory.&lt;/p&gt; &#xA;&lt;blockquote&gt; &#xA; &lt;p&gt;&lt;span&gt;âš &lt;/span&gt; Use the example below just as a reference, requires inventory host groups &lt;code&gt;solr&lt;/code&gt; and &lt;code&gt;zookeeper&lt;/code&gt; to be correctly defined&lt;/p&gt; &#xA;&lt;/blockquote&gt; &#xA;&lt;pre&gt;&lt;code&gt;---&#xA;&#xA;- hosts: zookeeper&#xA;  roles:&#xA;    - role: zookeeper&#xA;  pre_tasks:&#xA;    - name: installing required libs&#xA;      apt:&#xA;        pkg: &#34;{{ item }}&#34;&#xA;        state: present&#xA;      with_items:&#xA;        - net-tools&#xA;        - netcat&#xA;&#xA;- hosts: solrcloud&#xA;  roles:&#xA;    - role: solr_role&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h2&gt;Usage&lt;/h2&gt; &#xA;&lt;p&gt;Look to the defaults properties file to see the possible configuration properties.&lt;/p&gt; &#xA;&lt;h3&gt;Add JVM Agent to your installation&lt;/h3&gt; &#xA;&lt;p&gt;This role supports JVM agents (such as &lt;a href=&#34;https://newrelic.com/&#34;&gt;Newrelic&lt;/a&gt;, &lt;a href=&#34;https://www.datadoghq.com/&#34;&gt;Datadog&lt;/a&gt;, etc.) to be used inside your installation. You can view an example with JVM Agents in the molecule tests section --&amp;gt; &lt;a href=&#34;https://raw.githubusercontent.com/idealista/solr_role/master/molecule/setup_with_agent&#34;&gt;example_setup_with_agent&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;p&gt;Its very simple, must follow this steps (in this case we will add config for &lt;a href=&#34;https://newrelic.com/&#34;&gt;Newrelic&#39;s agent&lt;/a&gt;):&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Just add the config in your group_vars. &lt;pre&gt;&lt;code class=&#34;language-yml&#34;&gt;solr_agents_required_libs:&#xA;  - unzip&#xA;  - apt-transport-https&#xA;solr_agents_config:&#xA;  - name: &#34;newrelic&#34;&#xA;    download_url: &#34;http://download.newrelic.com/newrelic/java-agent/newrelic-agent/current/newrelic-java.zip&#34;&#xA;    vm_opts:&#xA;      - &#39;-javaagent:{{ solr_installation_dir }}/newrelic/newrelic.jar&#39;&#xA;    configuration_files:&#xA;      - &#34;newrelic.yml&#34;&#xA;    params: {&#xA;      application_name: &#34;application_sample_name&#34;,&#xA;      license_key: &#34;your_license_key&#34;&#xA;    }&#xA;&lt;/code&gt;&lt;/pre&gt; &lt;/li&gt; &#xA; &lt;li&gt;&lt;strong&gt;Optional&lt;/strong&gt;: Place the configuration files in the templates folder using this order &#34;templates/{{ agent_name }}/{{ file names specified in solr_agents_config.configuration_files }}.j2. In this case we have the newrelic.yml.j2 in &lt;a href=&#34;https://raw.githubusercontent.com/idealista/solr_role/master/molecule/setup_with_agent/templates/agents/newrelic/newrelic.yml.j2&#34;&gt;templates/agents/newrelic/newrelic.yml.j2&lt;/a&gt;.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;Prometheus Exporter&lt;/h2&gt; &#xA;&lt;p&gt;If you want to scrape metrics from Solr using &lt;a href=&#34;https://github.com/idealista/prometheus_server-role&#34;&gt;Prometheus&lt;/a&gt;, you will need to &lt;a href=&#34;https://lucene.apache.org/solr/guide/7_7/monitoring-solr-with-prometheus-and-grafana.html&#34;&gt;configure a exporter&lt;/a&gt;. We have a &lt;a href=&#34;https://github.com/idealista/prometheus_solr_exporter_role&#34;&gt;Prometheus Solr Exporter role&lt;/a&gt; that will make configuration easier for you, just keep in mind that the variables &lt;code&gt;solr_version&lt;/code&gt; and &lt;code&gt;prometheus_solr_exporter_version&lt;/code&gt; must have the same value.&lt;/p&gt; &#xA;&lt;h2&gt;Testing&lt;/h2&gt; &#xA;&lt;pre&gt;&lt;code&gt;$ pipenv sync&#xA;$ pipenv shell&#xA;&#xA;# This will execute tests but doesn&#39;t destroy created environment (because of --destroy=never)&#xA;$ molecule test --destroy=never -s setup_with_collections&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Solr Admin UI should be accessible from docker container host at URL:&lt;/p&gt; &#xA;&lt;p&gt;&lt;a href=&#34;http://localhost:8983/solr/#/&#34;&gt;http://localhost:8983/solr/#/&lt;/a&gt; (node: &lt;code&gt;solrcloud1&lt;/code&gt;)&lt;/p&gt; &#xA;&lt;p&gt;or&lt;/p&gt; &#xA;&lt;p&gt;&lt;a href=&#34;http://localhost:8984/solr/#/&#34;&gt;http://localhost:8984/solr/#/&lt;/a&gt; (node: &lt;code&gt;solrcloud2&lt;/code&gt;)&lt;/p&gt; &#xA;&lt;img src=&#34;https://raw.githubusercontent.com/idealista/solr_role/master/assets/solr_admin_ui.png&#34; alt=&#34;Solr Admin UI example&#34; style=&#34;width: 600px;&#34;&gt; &#xA;&lt;p&gt;See &lt;a href=&#34;https://github.com/idealista/solr_role/raw/master/molecule/default/molecule.yml&#34;&gt;molecule.yml&lt;/a&gt; to check possible testing platforms.&lt;/p&gt; &#xA;&lt;h2&gt;Built With&lt;/h2&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://img.shields.io/badge/ansible-2.8.8-green.svg?sanitize=true&#34; alt=&#34;Ansible&#34;&gt; &lt;img src=&#34;https://img.shields.io/badge/molecule-3.0.4-green.svg?sanitize=true&#34; alt=&#34;Molecule&#34;&gt; &lt;img src=&#34;https://img.shields.io/badge/goss-0.3.11-green.svg?sanitize=true&#34; alt=&#34;Goss&#34;&gt;&lt;/p&gt; &#xA;&lt;h2&gt;Versioning&lt;/h2&gt; &#xA;&lt;p&gt;For the versions available, see the &lt;a href=&#34;https://github.com/idealista/solr_role/tags&#34;&gt;tags on this repository&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;p&gt;Additionaly you can see what change in each version in the &lt;a href=&#34;https://github.com/idealista/solr_role/raw/master/CHANGELOG.md&#34;&gt;CHANGELOG.md&lt;/a&gt; file.&lt;/p&gt; &#xA;&lt;h2&gt;Authors&lt;/h2&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;strong&gt;Idealista&lt;/strong&gt; - &lt;em&gt;Work with&lt;/em&gt; - &lt;a href=&#34;https://github.com/idealista&#34;&gt;idealista&lt;/a&gt;&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;See also the list of &lt;a href=&#34;https://github.com/idealista/solr_role/contributors&#34;&gt;contributors&lt;/a&gt; who participated in this project.&lt;/p&gt; &#xA;&lt;h2&gt;License&lt;/h2&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://img.shields.io/hexpm/l/plug.svg?sanitize=true&#34; alt=&#34;Apache 2.0 License&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;This project is licensed under the &lt;a href=&#34;https://www.apache.org/licenses/LICENSE-2.0&#34;&gt;Apache 2.0&lt;/a&gt; license - see the &lt;a href=&#34;https://raw.githubusercontent.com/idealista/solr_role/master/LICENSE&#34;&gt;LICENSE&lt;/a&gt; file for details.&lt;/p&gt; &#xA;&lt;h2&gt;Contributing&lt;/h2&gt; &#xA;&lt;p&gt;Please read &lt;a href=&#34;https://github.com/idealista/solr_role/raw/master/.github/CONTRIBUTING.md&#34;&gt;CONTRIBUTING.md&lt;/a&gt; for details on our code of conduct, and the process for submitting pull requests to us.&lt;/p&gt;</summary>
  </entry>
</feed>