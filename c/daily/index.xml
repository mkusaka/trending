<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom">
  <title>GitHub C Daily Trending</title>
  <id>http://mshibanami.github.io/GitHubTrendingRSS</id>
  <updated>2024-05-18T01:27:14Z</updated>
  <subtitle>Daily Trending of C in GitHub</subtitle>
  <link href="http://mshibanami.github.io/GitHubTrendingRSS"></link>
  <entry>
    <title>mcknly/breadboard-os</title>
    <updated>2024-05-18T01:27:14Z</updated>
    <id>tag:github.com,2024-05-18:/mcknly/breadboard-os</id>
    <link href="https://github.com/mcknly/breadboard-os" rel="alternate"></link>
    <summary type="html">&lt;p&gt;A firmware platform aimed at quick prototyping, built around FreeRTOS and a feature-packed CLI&lt;/p&gt;&lt;hr&gt;&lt;h1&gt;[ B r e a d b o a r d O S ]&lt;/h1&gt; &#xA;&lt;pre&gt;&lt;code&gt;                             ___          ___&#xA;    _____       _____       /  /\        /  /\&#xA;   /  /::\     /  /::\     /  /::\      /  /:/_&#xA;  /  /:/\:\   /  /:/\:\   /  /:/\:\    /  /:/ /\&#xA; /  /:/~/::\ /  /:/~/::\ /  /:/  \:\  /  /:/ /::\&#xA;/__/:/ /:/\:/__/:/ /:/\:/__/:/ \__\:\/__/:/ /:/\:\&#xA;\  \:\/:/~/:|  \:\/:/~/:|  \:\ /  /:/\  \:\/:/~/:/&#xA; \  \::/ /:/ \  \::/ /:/ \  \:\  /:/  \  \::/ /:/&#xA;  \  \:\/:/   \  \:\/:/   \  \:\/:/    \__\/ /:/&#xA;   \  \::/     \  \::/     \  \::/       /__/:/&#xA;    \__\/       \__\/       \__\/        \__\/&#xA;&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;&lt;strong&gt;BreadboardOS&lt;/strong&gt; (BBOS, if you like) - as its namesake implies - is a firmware platform aimed at quick prototyping. BBOS was built around the following principles:&lt;/p&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;&lt;strong&gt;&lt;em&gt;Every project should start with a CLI.&lt;/em&gt;&lt;/strong&gt; A command line interface makes prototyping, debugging, and testing about 1000% easier, especially over the lifespan of multiple projects with re-used pieces.&lt;/li&gt; &#xA; &lt;li&gt;&lt;strong&gt;&lt;em&gt;Write it once.&lt;/em&gt;&lt;/strong&gt; Don&#39;t waste time writing and re-writing the basic infrastructure for your projects. Modularize, duplicate, and profit!&lt;/li&gt; &#xA; &lt;li&gt;&lt;strong&gt;&lt;em&gt;Get running QUICKLY.&lt;/em&gt;&lt;/strong&gt; The faster you can bring up a project, the faster you can find out that you need to re-tool the whole dang thing. &lt;em&gt;But at least you don&#39;t have to write a CLI again!&lt;/em&gt;&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;h2&gt;Functional Description&lt;/h2&gt; &#xA;&lt;p&gt;BreadboardOS is built on top of FreeRTOS, enabling fast integration of new functional blocks and allowing for task concurrency without breaking the base system. Existing knowledge of RTOS is not necessarily required.&lt;/p&gt; &#xA;&lt;p&gt;The central component of BBOS is the fantastic &lt;a href=&#34;https://microshell.pl/&#34;&gt;microshell&lt;/a&gt; project, which provides CLI functionality. Currently, a &lt;a href=&#34;https://github.com/mcknly/microshell&#34;&gt;fork&lt;/a&gt; of microshell is used, which includes some additional customization. The CLI implementation is organized into POSIX-style folders/files providing a recognizable user-interface for interacting with MCU hardware.&lt;/p&gt; &#xA;&lt;p&gt;As of the first release, BBOS is implemented on a single MCU platform - the Raspberry Pi RP2040 (Pico, Pico W, etc). However, the project has been structured such that all hardware-specific code resides in a single directory, with a header file providing HAL functionality. The platform was built with porting in mind.&lt;/p&gt; &#xA;&lt;h3&gt;&lt;em&gt;Notable Features&lt;/em&gt;&lt;/h3&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Rich set of informational tools for checking system resources on the fly, a&#39;la: &lt;code&gt;ps top free df&lt;/code&gt;&lt;/li&gt; &#xA; &lt;li&gt;RTOS task manager for dynamically controlling system services at runtime&lt;/li&gt; &#xA; &lt;li&gt;Onboard flash filesystem with wear-leveling (thanks to &lt;a href=&#34;https://github.com/littlefs-project/littlefs&#34;&gt;littlefs&lt;/a&gt;)&lt;/li&gt; &#xA; &lt;li&gt;Selective peripheral hardware initialization routines&lt;/li&gt; &#xA; &lt;li&gt;Interacting with chip I/O and serial buses directly from command line&lt;/li&gt; &#xA; &lt;li&gt;Watchdog service for system failsafe recovery&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h3&gt;&lt;em&gt;Demo&lt;/em&gt;&lt;/h3&gt; &#xA;&lt;p&gt;As they say, a Youtube video is worth 10^6 words.&lt;br&gt; &lt;a href=&#34;https://www.youtube.com/watch?v=fQiYE_wlPt0&#34;&gt;https://www.youtube.com/watch?v=fQiYE_wlPt0&lt;/a&gt;&lt;/p&gt; &#xA;&lt;h2&gt;Getting started&lt;/h2&gt; &#xA;&lt;p&gt;The following build instructions for BreadboardOS assume a GNU/Linux environment, or alternatively WSL under Windows. Building in other environments may be possible but is not covered here.&lt;/p&gt; &#xA;&lt;h3&gt;Prerequisites&lt;/h3&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;A basic embedded ARM development enviroment: &lt;code&gt;build-essential gcc-arm-none-eabi newlib-arm-none-eabi cmake&lt;/code&gt;&lt;/li&gt; &#xA; &lt;li&gt;The &lt;a href=&#34;https://github.com/FreeRTOS/FreeRTOS-Kernel&#34;&gt;FreeRTOS Kernel&lt;/a&gt; in an accessible location on the system&lt;/li&gt; &#xA; &lt;li&gt;The Raspberry Pi &lt;a href=&#34;https://github.com/raspberrypi/pico-sdk&#34;&gt;Pico SDK&lt;/a&gt; in an accessible location on the system&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;Ensure that the environment variables &lt;code&gt;$FREERTOS_KERNEL_PATH&lt;/code&gt; and &lt;code&gt;$PICO_SDK_PATH&lt;/code&gt; are set and contain the absolute paths to those projects:&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;export FREERTOS_KERNEL_PATH=/path/to/freertos/kernel&lt;/code&gt;&lt;br&gt; &lt;code&gt;export PICO_SDK_PATH=/path/to/pico/sdk&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;It is suggested to add these commands to the user&#39;s &lt;code&gt;~/.profile&lt;/code&gt;, &lt;code&gt;~/.bashrc&lt;/code&gt;, etc depending on the system.&lt;/p&gt; &#xA;&lt;h3&gt;Setting up BreadboardOS&lt;/h3&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Clone the repository: &lt;code&gt;git clone https://github.com/mcknly/breadboard-os.git&lt;/code&gt;&lt;/li&gt; &#xA; &lt;li&gt;Enter the project folder: &lt;code&gt;cd breadboard-os&lt;/code&gt;&lt;/li&gt; &#xA; &lt;li&gt;Pull in submodules: &lt;code&gt;git submodule update --init&lt;/code&gt;&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;Open the root &lt;code&gt;CMakeLists.txt&lt;/code&gt; and edit the following parameters:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;### PROJECT SETTINGS ###&#xA;&#xA;# PROJECT NAME - in quotes, no spaces&#xA;set(PROJ_NAME &#34;my-bbos-proj&#34;)&#xA;# PROJECT VERSION - in quotes, no spaces, can contain alphanumeric if necessary&#xA;set(PROJ_VER &#34;0.0&#34;)&#xA;# CLI INTERFACE - 0: use UART for CLI (default), 1: use USB for CLI&#xA;set(CLI_IFACE 0)&#xA;# BOARD TYPE - set the RP2040 &#34;board&#34; being used (i.e. &#39;pico&#39;, &#39;pico_w&#39;, etc)&#xA;set(PICO_BOARD pico)&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Using CLI over USB requires no additional hardware; using CLI over UART will require a USB-UART adapter (i.e. FTDI FT232 or SiLabs CP2102). Using CLI/UART enables some additional early boot status prints.&lt;/p&gt; &#xA;&lt;h3&gt;Building&lt;/h3&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Create &amp;amp; enter build folder: &lt;code&gt;mkdir build &amp;amp;&amp;amp; cd build&lt;/code&gt;&lt;/li&gt; &#xA; &lt;li&gt;Generate the build files with cmake: &lt;code&gt;cmake ..&lt;/code&gt; (note: this will default to a &#39;Release&#39; build)&lt;/li&gt; &#xA; &lt;li&gt;Compile the project: &lt;code&gt;make -j4&lt;/code&gt; (# cores can be altered)&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;This should generate firmware image formats &lt;code&gt;.bin&lt;/code&gt;, &lt;code&gt;.hex&lt;/code&gt;, &lt;code&gt;.uf2&lt;/code&gt;, to be programmed to flash via your preferred method.&lt;/p&gt; &#xA;&lt;h3&gt;Debugging&lt;/h3&gt; &#xA;&lt;p&gt;For a full debugging-enabled IDE-like experience (recommended), using MS VS Code plus the &lt;code&gt;C/C++&lt;/code&gt;, &lt;code&gt;CMake&lt;/code&gt;, and &lt;code&gt;Cortex-Debug&lt;/code&gt; extensions with your debug probe of choice (Pi Debug Probe, J-Link, etc) is the widely preferred method. See &lt;a href=&#34;https://www.digikey.com/en/maker/projects/raspberry-pi-pico-and-rp2040-cc-part-2-debugging-with-vs-code/470abc7efb07432b82c95f6f67f184c0&#34;&gt;this&lt;/a&gt; great tutorial by DigiKey.&lt;/p&gt; &#xA;&lt;h2&gt;Usage - building your own application&lt;/h2&gt; &#xA;&lt;p&gt;Creating your own application on the BreadboardOS platform entails adding one or more new &#34;services&#34; - which are essentially standalone FreeRTOS tasks. An example of this is given in the &lt;code&gt;services/heartbeat_service.c&lt;/code&gt; file, the structure of which can be used as a basis for your new service/application. See &lt;code&gt;services/services.h&lt;/code&gt; which includes extensive documentation on how services/tasks are implemented on BBOS.&lt;/p&gt; &#xA;&lt;p&gt;To understand how your new service can interact with the system, refer to the function implementations in the file nodes within the &lt;code&gt;cli&lt;/code&gt; directory - these have been provided as a test bed for the underlying system functionality, and the intention is for any new services/tasks to also have their functions mapped into new CLI folders &amp;amp; files - think of this as a test menu system for your project. The CLI could also be leveraged as an automated production test interface!&lt;/p&gt; &#xA;&lt;h2&gt;Code Organization &amp;amp; Technical Detail&lt;/h2&gt; &#xA;&lt;p&gt;Project directory structure:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;code&gt;cli/&lt;/code&gt; - directory/file structure for the CLI, and interface to the microshell submodule&lt;/li&gt; &#xA; &lt;li&gt;&lt;code&gt;driver_lib/&lt;/code&gt; - drivers for external peripheral hardware - library to grow over time&lt;/li&gt; &#xA; &lt;li&gt;&lt;code&gt;hardware_pico/&lt;/code&gt; - all hardware-specific (HAL) functional implementation for RP2040&lt;/li&gt; &#xA; &lt;li&gt;&lt;code&gt;littlefs/&lt;/code&gt; - contains the &#39;littlefs&#39; submodule and CMake wrapper&lt;/li&gt; &#xA; &lt;li&gt;&lt;code&gt;rtos/&lt;/code&gt; - FreeRTOS interface &amp;amp; configuration files&lt;/li&gt; &#xA; &lt;li&gt;&lt;code&gt;services/&lt;/code&gt; - where the main application elements (FreeRTOS tasks) reside&lt;/li&gt; &#xA; &lt;li&gt;&lt;code&gt;git_version/&lt;/code&gt; - submodule for adding GIT repo metadata into the binary&lt;/li&gt; &#xA; &lt;li&gt;&lt;code&gt;microshell/&lt;/code&gt; - submodule for microshell&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;Contributing&lt;/h2&gt; &#xA;&lt;p&gt;Contributions to the project are welcome! Here are some specific ways to contribute:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Use the project! build cool things, identify bugs, submit issues&lt;/li&gt; &#xA; &lt;li&gt;Add additional peripheral hardware drivers to &lt;code&gt;driver_lib&lt;/code&gt;&lt;/li&gt; &#xA; &lt;li&gt;Create useful utility services&lt;/li&gt; &#xA; &lt;li&gt;Port the project to a new MCU platform&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;To contribute - fork the project, make enhancements, submit a PR.&lt;/p&gt; &#xA;&lt;h2&gt;Acknowledgements&lt;/h2&gt; &#xA;&lt;p&gt;BreadboardOS is built in no small part upon the substantial work of others:&lt;br&gt; &lt;a href=&#34;https://github.com/marcinbor85/microshell&#34;&gt;microshell&lt;/a&gt;&lt;br&gt; &lt;a href=&#34;https://github.com/littlefs-project/littlefs&#34;&gt;littlefs&lt;/a&gt;&lt;br&gt; &lt;a href=&#34;https://github.com/andrew-hardin/cmake-git-version-tracking&#34;&gt;cmake-git-version-tracking&lt;/a&gt;&lt;br&gt; &lt;a href=&#34;https://github.com/FreeRTOS/FreeRTOS-Kernel&#34;&gt;freertos&lt;/a&gt;&lt;br&gt; &lt;a href=&#34;https://github.com/raspberrypi/pico-sdk&#34;&gt;pico-sdk&lt;/a&gt;&lt;/p&gt; &#xA;&lt;h2&gt;License&lt;/h2&gt; &#xA;&lt;p&gt;This project is released under the &lt;a href=&#34;https://opensource.org/license/mit/&#34;&gt;MIT License&lt;/a&gt;.&lt;br&gt; In lieu of including the full license text in every source file, the following tag is used:&lt;br&gt; &lt;code&gt;// SPDX-License-Identifier: MIT&lt;/code&gt;&lt;/p&gt; &#xA;&lt;hr&gt; &#xA;&lt;hr&gt; &#xA;&lt;div align=&#34;center&#34;&gt; &#xA; &lt;img src=&#34;https://raw.githubusercontent.com/mcknly/breadboard-os/main/breadboard.png&#34; alt=&#34;breadboard&#34; width=&#34;600&#34; align=&#34;center/&#34;&gt; &#xA; &lt;br&gt; it&#39;s fresh &#xA;&lt;/div&gt;</summary>
  </entry>
</feed>