<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom">
  <title>GitHub Perl Daily Trending</title>
  <id>http://mshibanami.github.io/GitHubTrendingRSS</id>
  <updated>2025-06-23T01:34:44Z</updated>
  <subtitle>Daily Trending of Perl in GitHub</subtitle>
  <link href="http://mshibanami.github.io/GitHubTrendingRSS"></link>
  <entry>
    <title>derf/travelynx</title>
    <updated>2025-06-23T01:34:44Z</updated>
    <id>tag:github.com,2025-06-23:/derf/travelynx</id>
    <link href="https://github.com/derf/travelynx" rel="alternate"></link>
    <summary type="html">&lt;p&gt;Traewelling-inspired journey logger with realtime data&lt;/p&gt;&lt;hr&gt;&lt;h2&gt;travelynx - Railway Travel Logger&lt;/h2&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://finalrewind.org/projects/travelynx/&#34;&gt;travelynx&lt;/a&gt; allows checking into individual public transit vehicles (e.g. buses, ferries, trams, trains) across most of Germany, Switzerland, Austria, Luxembourg, Ireland, and parts of the USA. Thus, it provides a log of your railway journeys annotated with real-time delays and service messages, if available. It supports german railways and trains exposed by the Deutsche Bahn &lt;a href=&#34;https://finalrewind.org/projects/Travel-Status-DE-IRIS/&#34;&gt;IRIS Interface&lt;/a&gt; as well as regional and local transit exposed by supported &lt;a href=&#34;https://finalrewind.org/projects/Travel-Status-DE-HAFAS/&#34;&gt;HAFAS Instances&lt;/a&gt;. Support for EFA instances and bahn.de is under way.&lt;/p&gt; &#xA;&lt;p&gt;You can use the public instance on &lt;a href=&#34;https://travelynx.de&#34;&gt;travelynx.de&lt;/a&gt; or host your own. See the Installation and Setup notes below.&lt;/p&gt; &#xA;&lt;h2&gt;Dependencies&lt;/h2&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;perl â‰¥ 5.20&lt;/li&gt; &#xA; &lt;li&gt;carton&lt;/li&gt; &#xA; &lt;li&gt;build-essential&lt;/li&gt; &#xA; &lt;li&gt;libpq-dev&lt;/li&gt; &#xA; &lt;li&gt;git&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;Installation&lt;/h2&gt; &#xA;&lt;p&gt;travelynx depends on a set of Perl modules which are documented in &lt;code&gt;cpanfile&lt;/code&gt;. After installing the dependencies mentioned above, you can use carton to install Perl depenencies locally. You may alsobe able to use cpanminus; however this method is untested.&lt;/p&gt; &#xA;&lt;p&gt;In the project root directory (where &lt;code&gt;cpanfile&lt;/code&gt; resides), run&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;carton install --deployment&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;and set &lt;code&gt;PERL5LIB=.../local/lib/perl5&lt;/code&gt; before executing any travelynx commands (see configs in the examples directory) or wrap them with &lt;code&gt;carton exec&lt;/code&gt;, e.g. &lt;code&gt;carton exec hypnotoad index.pl&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h2&gt;Setup&lt;/h2&gt; &#xA;&lt;p&gt;First, you need to set up a PostgreSQL database so that travelynx can store user accounts and journeys. It must be at least version 9.4 and must use a UTF-8 locale. The following steps describe setup on a Debian 9 system; setup on other distributions should be similar.&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Write down a strong random password&lt;/li&gt; &#xA; &lt;li&gt;Create a postgres user for travelynx: &lt;code&gt;sudo -u postgres createuser -P travelynx&lt;/code&gt; (enter password when prompted)&lt;/li&gt; &#xA; &lt;li&gt;Create the database: &lt;code&gt;sudo -u postgres createdb -O travelynx travelynx&lt;/code&gt;&lt;/li&gt; &#xA; &lt;li&gt;Copy &lt;code&gt;examples/travelynx.conf&lt;/code&gt; to the application root directory (the one in which &lt;code&gt;index.pl&lt;/code&gt; resides) and edit it. Make sure to configure db, cache, mail, and secrets.&lt;/li&gt; &#xA; &lt;li&gt;Initialize the database: &lt;code&gt;carton exec perl index.pl database migrate&lt;/code&gt; or &lt;code&gt;PERL5LIB=local/lib/perl5 perl index.pl database migrate&lt;/code&gt;&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;Your server also needs to be able to send mail. Set up your MTA of choice and make sure that the sendmail binary can be used for outgoing mails. Mail reception on the server is not required.&lt;/p&gt; &#xA;&lt;p&gt;Finally, configure the web service:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Set up a travelynx service using the service supervisor of your choice (see &lt;code&gt;examples/travelynx.service&lt;/code&gt; for a systemd unit file)&lt;/li&gt; &#xA; &lt;li&gt;Configure your web server to reverse-provy requests to the travelynx instance. See &lt;code&gt;examples/nginx-site&lt;/code&gt; for an nginx config.&lt;/li&gt; &#xA; &lt;li&gt;Install a &lt;code&gt;timeout 5m perl index.pl work -m production&lt;/code&gt; cronjob. It is used to update realtime data and perform automatic checkout and should run every three minutes or so, see &lt;code&gt;examples/cron&lt;/code&gt;.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;You can now start the travelynx service, navigate to the website and register your first account. There is no admin account, all management is performed via cron or (in non-standard cases) on the command line.&lt;/p&gt; &#xA;&lt;p&gt;Please open an issue on &lt;a href=&#34;https://github.com/derf/travelynx/issues&#34;&gt;https://github.com/derf/travelynx/issues&lt;/a&gt; or send a mail to &lt;a href=&#34;mailto:derf+travelynx@finalrewind.org&#34;&gt;derf+travelynx@finalrewind.org&lt;/a&gt; if there is anything missing or ambiguous in this setup manual.&lt;/p&gt; &#xA;&lt;p&gt;Note that Deutsche Bahn have put parts of their API behind an IP reputation filter. In general, checkins with the bahn.de backend will only be possible if travelynx is accessing it from a residential (non-server) IP range. See the dbris bahn.de proxy / proxies setting in &lt;code&gt;example/travelynx.conf&lt;/code&gt; for workarounds.&lt;/p&gt; &#xA;&lt;h2&gt;Updating&lt;/h2&gt; &#xA;&lt;p&gt;It is recommended to run travelynx directly from the git repository. When updating, the workflow depends on whether schema updates need to be applied or not.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;git pull&#xA;carton install --deployment # if you are using carton: update dependencies&#xA;chmod -R a+rX . # only needed if travelynx is running under a different user&#xA;if perl index.pl database has-current-schema; then&#xA;    systemctl reload travelynx&#xA;else&#xA;    systemctl stop travelynx&#xA;    perl index.pl database migrate&#xA;    systemctl start travelynx&#xA;fi&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Note that this is subject to change -- the application may perform schema updates automatically in the future. If you used carton for installation, use &lt;code&gt;carton exec perl ...&lt;/code&gt; in the snippet above; otherwise, export &lt;code&gt;PERL5LIB=.../local/lib/perl5&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;h2&gt;Setup with Docker&lt;/h2&gt; &#xA;&lt;p&gt;Note that travelynx Docker support is experimental and, in its current form, far from best practices. Pull requests are appreciated.&lt;/p&gt; &#xA;&lt;p&gt;First, you need to set up a PostgreSQL database so that travelynx can store user accounts and journeys. It must be at least version 9.4 and must use a UTF-8 locale. See above (or &lt;code&gt;examples/docker/postgres-init.sh&lt;/code&gt;) for database initialization. You do not need to perform the &lt;code&gt;database migrate&lt;/code&gt; step.&lt;/p&gt; &#xA;&lt;p&gt;Next, you need to prepare three files that will be mounted into the travelynx container: travelynx configuration, e-mail configuration, and imprint and privacy policy. For the sake of this readme, we assume that you are using the &lt;code&gt;local/&lt;/code&gt; directory to store these&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;code&gt;mkdir local&lt;/code&gt;&lt;/li&gt; &#xA; &lt;li&gt;copy examples/travelynx.conf to local/travelynx.conf and configure it.&lt;/li&gt; &#xA; &lt;li&gt;copy examples/docker/email-transport.sh to local/email-transport.sh and configure it. The travelynx container does not contain a mail server, so it needs a separate SMTP server to send mail. It does not receive mail.&lt;/li&gt; &#xA; &lt;li&gt;create local/imprint.html.ep and enter imprint as well as privacy policy data.&lt;/li&gt; &#xA; &lt;li&gt;create local/terms-of-service.html.ep and enter your terms of service.&lt;/li&gt; &#xA; &lt;li&gt;Configure your web server to reverse-provy requests to the travelynx instance. See &lt;code&gt;examples/nginx-site&lt;/code&gt; for an nginx config.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;travelynx consists of two runtimes: the web application and a background worker. Your service supervisor (or docker compose / docker stack / kubernetes setup) should orchestrate them somewhere along these lines.&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;code&gt;docker pull derfnull/travelynx:latest&lt;/code&gt;&lt;/li&gt; &#xA; &lt;li&gt;Start web application: &lt;code&gt;docker run -p 8093:8093 -v ${PWD}/local:/local:ro travelynx:latest&lt;/code&gt;&lt;/li&gt; &#xA; &lt;li&gt;Wait until localhost:8093 responds to requests&lt;/li&gt; &#xA; &lt;li&gt;Start worker: &lt;code&gt;docker run -v ${PWD}/local:/local:ro travelynx:latest worker&lt;/code&gt;&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;To install an update: stop worker and web application, update the travelynx image, and start them again. Database migrations will be performed automatically. Note that downgrades are not supported.&lt;/p&gt; &#xA;&lt;h2&gt;Usage&lt;/h2&gt; &#xA;&lt;p&gt;For the sake of this manual, we will assume your travelynx instance is running on &lt;code&gt;travelynx.de&lt;/code&gt;&lt;/p&gt; &#xA;&lt;p&gt;travelynx journey logging is based on checkin and checkout actions: You check into a train when boarding it, select a destination, and are automatically checked out when you arrive. Real-time data is saved on both occasions and continuously updated while in transit, providing an accurate overview of both scheduled and actual journey times.&lt;/p&gt; &#xA;&lt;h2&gt;Checking in&lt;/h2&gt; &#xA;&lt;p&gt;You can check into a train up to 30 minutes before its scheduled departure and up to two hours after its actual departure (including delays).&lt;/p&gt; &#xA;&lt;p&gt;First, you need to select the station you want to check in from. Navigate to &lt;code&gt;travelynx.de&lt;/code&gt; or click/tap on the travelynx text in the navigation bar. You will see a list of the five stations closest to your current location (as reported by your browser). Select the station you&#39;re at or enter its name or DS100 code manually.&lt;/p&gt; &#xA;&lt;p&gt;As soon as you select a train, you will be checked in and travelynx will switch to the journey / checkout view. If you already know where you&#39;re headed, you should click/tap on the destination station in the station list now. You can change the destination by selecting a new one anytime.&lt;/p&gt; &#xA;&lt;h2&gt;Checking out&lt;/h2&gt; &#xA;&lt;p&gt;You are automatically checked out a few minutes after arrival at your destination. If the train has already arrived when you select a destination and its arrival was less than two hours ago, you are checked out immediately. If it&#39;s more than two hours, you need to perform a manual checkout (without arrival data) using the link at the bottom of the checkin menu&#39;s station list.&lt;/p&gt; &#xA;&lt;h2&gt;Testing&lt;/h2&gt; &#xA;&lt;p&gt;The test scripts assume that travelynx.conf contains a valid database connection. They will create a test-specific schema, perform all operations in it, and then drop the schema. As such, the database specified in the config is not affected.&lt;/p&gt; &#xA;&lt;p&gt;Nevertheless, bugs may happen. Do NOT run tests on your production database. Please use a separate development database instead.&lt;/p&gt; &#xA;&lt;p&gt;Run the tests by executing &lt;code&gt;prove&lt;/code&gt;. Use &lt;code&gt;prove -v&lt;/code&gt; for debug output and &lt;code&gt;DBI_TRACE=SQL prove -v&lt;/code&gt; to monitor SQL queries.&lt;/p&gt; &#xA;&lt;h2&gt;Licensing&lt;/h2&gt; &#xA;&lt;p&gt;The copyright of individual files is documented in the file&#39;s header or in .reuse/dep5. The referenced licenses are stored in the LICENSES directory.&lt;/p&gt; &#xA;&lt;p&gt;The program code of travelynx is licensed under the terms of the GNU AGPL v3. HTML Templates and SASS/CSS layout are licensed under the terms of the MIT License. This means that you are free to host your own travelynx instance, both for personal/internal and public use, under the following conditions.&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;You are free to change HTML/SASS/CSS templates as you see fit (though you must not remove the copyright headers).&lt;/li&gt; &#xA; &lt;li&gt;If you make changes to the program code, that is, a file below lib/ or a travelynx javascript file below public/static/js/, you must make those changes available to the public.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;The easiest way of making changes available is by maintaining a public fork of the Git repository. A tarball is also acceptable. Please change the &lt;code&gt;source&lt;/code&gt; ref in travelynx.conf if you are using a fork with custom changes.&lt;/p&gt; &#xA;&lt;h2&gt;References&lt;/h2&gt; &#xA;&lt;p&gt;Mirrors of the travelynx repository are maintained at the following locations:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://chaosdorf.de/git/derf/travelynx&#34;&gt;Chaosdorf&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://git.finalrewind.org/travelynx/&#34;&gt;git.finalrewind.org&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/derf/travelynx&#34;&gt;GitHub&lt;/a&gt;&lt;/li&gt; &#xA;&lt;/ul&gt;</summary>
  </entry>
</feed>