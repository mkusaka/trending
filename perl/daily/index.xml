<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom">
  <title>GitHub Perl Daily Trending</title>
  <id>http://mshibanami.github.io/GitHubTrendingRSS</id>
  <updated>2023-04-09T01:40:54Z</updated>
  <subtitle>Daily Trending of Perl in GitHub</subtitle>
  <link href="http://mshibanami.github.io/GitHubTrendingRSS"></link>
  <entry>
    <title>silecs/mirabel-koha</title>
    <updated>2023-04-09T01:40:54Z</updated>
    <id>tag:github.com,2023-04-09:/silecs/mirabel-koha</id>
    <link href="https://github.com/silecs/mirabel-koha" rel="alternate"></link>
    <summary type="html">&lt;p&gt;Import into Koha the services declared in Mirabel&lt;/p&gt;&lt;hr&gt;&lt;h1&gt;Webservice Mir@bel pour Koha&lt;/h1&gt; &#xA;&lt;p&gt;Documentation v.1 Juin 2011 - v2. Mars 2014&lt;/p&gt; &#xA;&lt;h2&gt;Objet du script&lt;/h2&gt; &#xA;&lt;p&gt;Le webservice interroge le service REST de Mir@bel, insère et met à jour les champs Koha correspondant aux différents services dans les notices bibliographiques&amp;nbsp;; il permet également l&#39;effacement des champs des notices lorsque les services sont supprimés de &lt;a href=&#34;http://www.reseau-mirabel.info/&#34;&gt;Mir@bel&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;p&gt;Ce script met à jour des champs d&#39;une notice existante, et ne crée pas de notices bibliographiques ; les biblionumber de Koha (identifiant des notices) doivent être saisis dans Mir@bel. Les champs et sous-champs doivent être préalablement définis dans la grille de catalogage afin que l&#39;information ajoutée soit visible.&lt;/p&gt; &#xA;&lt;p&gt;Pour des informations sur Mi@bel : &lt;a href=&#34;http://www.reseau-mirabel.info/&#34;&gt;http://www.reseau-mirabel.info/&lt;/a&gt;&lt;/p&gt; &#xA;&lt;p&gt;Le service REST de Mir@bel n&#39;est accessible qu&#39;à partir d&#39;adresses IP déclarées auprès des administrateurs de Mir@bel. Par conséquent le script ne fonctionnera qu&#39;à partir de ces IP.&lt;/p&gt; &#xA;&lt;h3&gt;Installation&lt;/h3&gt; &#xA;&lt;p&gt;Ce script est librement accessible sur &lt;a href=&#34;https://github.com/silecs/mirabel-koha&#34;&gt;https://github.com/silecs/mirabel-koha&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;p&gt;La version initiale du script est disponible sur le dépôt git de BibLibre : &lt;a href=&#34;http://git.biblibre.com/?p=mirabel;a=summary&#34;&gt;http://git.biblibre.com/?p=mirabel;a=summary&lt;/a&gt;&lt;/p&gt; &#xA;&lt;p&gt;Le script peut être installé dans /home/koha par exemple, en fonction de votre installation.&lt;/p&gt; &#xA;&lt;h2&gt;Configuration&lt;/h2&gt; &#xA;&lt;h3&gt;config.yml&lt;/h3&gt; &#xA;&lt;p&gt;&lt;code&gt;config.yml&lt;/code&gt; paramètre la correspondance entre les balises XML fournies par le service REST et les champs et sous-champs Koha. Un exemple de tel fichier est donné par &lt;code&gt;config.yml.dist&lt;/code&gt;. Vous devez au préalable définir ces zones Marc dans vos grilles Marc, un champ par type de service : texte intégral, sommaire, résumé et indexation.&lt;/p&gt; &#xA;&lt;h4&gt;Exemple commenté de config.yml&lt;/h4&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-yml&#34;&gt;# URL d&#39;accès au webservice de Mir@bel&#xA;base_url: &#39;http://www.reseau-mirabel.info/site/service&#39;&#xA;type:&#xA;&#x9;# [...] liste des types d&#39;accès déclarés par Mir@bel (généralement, ne pas modifier ceci)&#xA;#&#xA;# Configuration pour l&#39;ajout et la modification&#xA;update:&#xA;    # Type d&#39;accès (cf &#34;types&#34; ci-dessus pour la liste des types)&#xA;    texteint:&#xA;        field: 857&#xA;        # Les clés seront les noms des attributs de Koha pour ce champ (857.a etc).&#xA;        # Les valeurs peuvent être :&#xA;        #&#xA;        #  * un champ du webservice Mir@bel (&#34;acces&#34;)&#xA;        #  * un champ du webservice Mir@bel pour le titre/revue (&#34;titre.issn&#34;)&#xA;        #  * alternative (&#34;urldirecte|urlservice&#34; : si &#34;urldirecte&#34; est vide, alors &#34;urlservice&#34;)&#xA;        #  * concaténation (&#34;debut fin&#34; : champs &#34;debut&#34; concaténé avec &#34;fin&#34; via un espace de séparation)&#xA;        #  * concaténation par un filtre &#34;periode&#34; ou &#34;dates&#34; (&#34;debut fin :(periode)&#34; appliquera le filtre &#34;periode&#34; aux 2 dates)&#xA;        #&#xA;        a: &#34;urldirecte|urlservice&#34;&#xA;        b: &#34;nom&#34;&#xA;        c: &#34;acces&#34;&#xA;        d: &#34;debut fin :(periode)&#34;&#xA;        e: &#34;couverture&#34;&#xA;        3: &#34;id&#34;&#xA;    som:&#xA;        field: 388&#xA;        a: &#34;urldirecte|urlservice&#34;&#xA;        b: &#34;nom&#34;&#xA;        c: &#34;acces&#34;&#xA;        d: &#34;debut fin :(periode)&#34;&#xA;        e: &#34;couverture&#34;&#xA;        3: &#34;id&#34;&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Les champs disponibles sont ceux du webservice Mir@bel :&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;id&lt;/li&gt; &#xA; &lt;li&gt;nom&lt;/li&gt; &#xA; &lt;li&gt;acces&lt;/li&gt; &#xA; &lt;li&gt;type&lt;/li&gt; &#xA; &lt;li&gt;couverture&lt;/li&gt; &#xA; &lt;li&gt;lacunaire&lt;/li&gt; &#xA; &lt;li&gt;selection&lt;/li&gt; &#xA; &lt;li&gt;urlservice&lt;/li&gt; &#xA; &lt;li&gt;urldirecte&lt;/li&gt; &#xA; &lt;li&gt;debut&lt;/li&gt; &#xA; &lt;li&gt;fin&lt;/li&gt; &#xA; &lt;li&gt;titre.issn&lt;/li&gt; &#xA; &lt;li&gt;titre.url&lt;/li&gt; &#xA; &lt;li&gt;titre.idmirabel&lt;/li&gt; &#xA; &lt;li&gt;titre.idpartenairerevue&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;&lt;strong&gt;Attention à la syntaxe dans le fichier yml&lt;/strong&gt;, les espaces ont de l&#39;importance ; ne pas mettre de tabulation à la place d&#39;un espace.&lt;/p&gt; &#xA;&lt;p&gt;L&#39;URL du service REST de Mir@bel est en première ligne de &lt;code&gt;config.yml&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;h2&gt;Exécution du script&lt;/h2&gt; &#xA;&lt;p&gt;Le script est exécuté avec les options en fonction des services à importer ou mettre à jour :&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;perl mirabel_to_koha.pl [options]&#xA;&#xA;    --help          -h&#xA;    --man&#xA;&#xA;    --partenaire=   -p   Identifiant numérique du partenaire&#xA;    --issn=         -s   ISSN&#xA;    --issnl=        -l   ISSNl&#xA;    --issne=        -e   ISSNe&#xA;    --type=         -t   Type, parmi (texte ; sommaire ; resume ; indexation ; tout)&#xA;    --acces=        -a   Accès, parmi (libre ; restreint ; tout)&#xA;    --all&#xA;    --pas-lacunaire      Exclut les accès lacunaires (certains numéros manquent)&#xA;    --pas-selection      Exclut les accès sélections (certains articles manquent)&#xA;    --revue=             Seulement les accès de la revue : liste d&#39;ID séparés par &#34;,&#34;&#xA;    --ressource=    -r   Seulement les accès de la ressource : liste d&#39;ID séparés par &#34;,&#34;&#xA;    --collection=   -c   Seulement les accès de la collection : liste d&#39;ID séparés par &#34;,&#34;&#xA;    --mesressources      Seulement pour les ressources suivies par ce partenaire&#xA;&#xA;    --simulation&#xA;    --config=&#xA;    --config-koha=&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h3&gt;Chemins et fichiers&lt;/h3&gt; &#xA;&lt;p&gt;Par défaut, le script suppose que la configuration de Koha contient un paramètre &#34;mirabel&#34; avec le chemin vers la configuration. Si ce n&#39;est pas le cas, il faut passer le paramètre &lt;code&gt;--config&lt;/code&gt;. Par exemple, pour indiquer qu&#39;il faut utiliser la configuration du répertoire /home/koha/mirabel&amp;nbsp;: &lt;code&gt;./mirabel_to_koha.pl --config=/home/koha/mirabel&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;p&gt;Par ailleurs, le script utilise les bibliothèques Perl fournies par Koha. Pour les rendre accessibles, il est recommander d&#39;ajouter à &lt;code&gt;~/.profile&lt;/code&gt; une ligne&amp;nbsp;:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;export PERL5LIB=&#34;/home/koha/mon-instance-koha/lib&#34;&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Le répertoire ci dessus contient notamment un sous-répertoire &#34;C4/&#34;.&lt;/p&gt; &#xA;&lt;h3&gt;Exemple&lt;/h3&gt; &#xA;&lt;p&gt;Pour mettre à jour Koha avec tous les accès (libre + restreints, tous types) du partenaire d&#39;identifiant 2&amp;nbsp;:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;# syntaxe étendue&#xA;perl mirabel_to_koha.pl --config=config.yml --config-koha= --partenaire=2 --type=tout --acces=tout&#xA; &#xA;# syntaxe brève&#xA;./mirabel_to_koha.pl -p 2 -t tout -a tout&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h2&gt;Services supprimés&lt;/h2&gt; &#xA;&lt;p&gt;Le script &lt;code&gt;delete_services.pl&lt;/code&gt; permet de supprimer les champs correspondant aux services supprimés dans Mir@bel.&lt;/p&gt; &#xA;&lt;p&gt;Lancé sans option, il interroge l&#39;url &lt;a href=&#34;http://www.reseau-mirabel.info/site/service?suppr&#34;&gt;http://www.reseau-mirabel.info/site/service?suppr&lt;/a&gt; et supprime les champs correspondants aux services supprimés depuis 24 heures, en se basant sur l&#39;identifiant du service.&lt;/p&gt; &#xA;&lt;p&gt;On peut également forcer la suppression de tous les champs alimentés par Mir@bel.&lt;/p&gt; &#xA;&lt;p&gt;Sa documentation détaillée est consultable par la commande &lt;code&gt;perl delete_services.pl --man&lt;/code&gt;.&lt;/p&gt;</summary>
  </entry>
</feed>