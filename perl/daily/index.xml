<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom">
  <title>GitHub Perl Daily Trending</title>
  <id>http://mshibanami.github.io/GitHubTrendingRSS</id>
  <updated>2023-01-13T01:42:40Z</updated>
  <subtitle>Daily Trending of Perl in GitHub</subtitle>
  <link href="http://mshibanami.github.io/GitHubTrendingRSS"></link>
  <entry>
    <title>elmar/aptitude-robot</title>
    <updated>2023-01-13T01:42:40Z</updated>
    <id>tag:github.com,2023-01-13:/elmar/aptitude-robot</id>
    <link href="https://github.com/elmar/aptitude-robot" rel="alternate"></link>
    <summary type="html">&lt;p&gt;&lt;/p&gt;&lt;hr&gt;&lt;h1&gt;Aptitude Robot&lt;/h1&gt; &#xA;&lt;p&gt;Automate package choice management&lt;/p&gt; &#xA;&lt;h2&gt;Introduction&lt;/h2&gt; &#xA;&lt;p&gt;On an individual Debian host it is most convenient to select packages for installation and removal within the interactive mode of aptitude. If you do the same for several machines the task becomes repetitive. If you like to maintain certain standard package choices across those machines this is not only tedious but error prone.&lt;/p&gt; &#xA;&lt;p&gt;The solution is to write some scripts that automate the installation/removal of packages. Either apt-get or the command line interface of aptitude allow you to do this. &lt;code&gt;aptitude-robot&lt;/code&gt; is such a configurable script. It is a thin layer that reads in some configuration files and calls aptitude via the command line interface with the appropriate parameters. The configuration files allow you to separate out common packages from host specific ones. This way you can keep the list packages simple to read rather than having to write custom versions of the script for each host.&lt;/p&gt; &#xA;&lt;h2&gt;Installation&lt;/h2&gt; &#xA;&lt;p&gt;The simplest way to install is via a Debian package&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;aptitude install aptitude-robot&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;This works when &lt;code&gt;aptitude-robot&lt;/code&gt; is available for your version in one of the repositories (you may need to check out the backports). If it is not in one of the repositories you use or if you want to install a newer version follow the instructions below on how to &lt;a href=&#34;https://raw.githubusercontent.com/elmar/aptitude-robot/master/#building-from-source&#34;&gt;build from source&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;h2&gt;Configuration&lt;/h2&gt; &#xA;&lt;p&gt;With the exception of &lt;code&gt;/etc/default/aptitude-robot&lt;/code&gt; the configuration files are in the directory &lt;code&gt;/etc/aptitude-robot&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;h3&gt;Package Lists&lt;/h3&gt; &#xA;&lt;p&gt;In &lt;code&gt;/etc/aptitude-robot/pkglist.d/&lt;/code&gt; you can add one or more package lists. Their names should conform to the run-parts(8) conventions (e.g., a dot in the file name will disable it). These files should contain one package name per line preceded by an action you want to perform with this package. The actions are specified with the characters used by aptitude, i.e., &lt;code&gt;+&lt;/code&gt; for install, &lt;code&gt;-&lt;/code&gt; for removal, etc. Read the aptitude(8) man page under &#34;override specifier&#34; for a complete list. Comments starting with &lt;code&gt;#&lt;/code&gt; are allowed.&lt;/p&gt; &#xA;&lt;p&gt;If you have more than one package list file they are concatenated according to the rules of run-parts(8). If a package appears more than once the last action mentioned applies.&lt;/p&gt; &#xA;&lt;p&gt;Example&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;#example: /etc/aptitude-robot/pkglist.d/10_mypackages&#xA;+ less&#xA;+ htop&#xA;+ build-essential&#xA;- ppp&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;If you install additional packages via aptitude-robot it is up to you to set up the configuration for those packages beforehand. If you call &lt;code&gt;aptitude-robot&lt;/code&gt; on the command line it will ask for missing configuration information the same way aptitude would. The automatic invocations of &lt;code&gt;aptitude-robot&lt;/code&gt; by cron or init try to always choose the default configuration non-interactively. Make sure you provide the appropriate configuration files and debconf preseeds for the packages you intend to install.&lt;/p&gt; &#xA;&lt;h3&gt;Options&lt;/h3&gt; &#xA;&lt;p&gt;The directory &lt;code&gt;/etc/aptitude-robot/options.d/&lt;/code&gt; may contain files in which you can specify additional command-line options for aptitude. List one option per line. Typical options might be:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;--without-recommends&#xA;--add-user-tag-to &#34;aptitude-robot,?action(install)&#34;&#xA;-o &#39;Aptitude::ProblemResolver::Remove-Level=maximum&#39;&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;See &lt;a href=&#34;http://aptitude.alioth.debian.org/doc/en/ch02s03s05.html&#34;&gt;Configuring the interactive dependency resolver&lt;/a&gt; for documentation about influencing automatic conflict resolution with aptitude.&lt;/p&gt; &#xA;&lt;p&gt;The files in this directory must adhere to &lt;code&gt;run-parts(8)&lt;/code&gt; conventions.&lt;/p&gt; &#xA;&lt;h3&gt;Triggers&lt;/h3&gt; &#xA;&lt;p&gt;The directories &lt;code&gt;/etc/aptitude-robot/triggers.pre&lt;/code&gt; and &lt;code&gt;/etc/aptitude-robot/triggers.post&lt;/code&gt; may contain scripts that will be run by aptitude-robot before and after aptitude, respectively. They are run by &lt;code&gt;run-parts(8)&lt;/code&gt; via &lt;a href=&#34;https://metacpan.org/pod/Run::Parts&#34;&gt;&lt;code&gt;Run::Parts&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;p&gt;By default there are no trigger scripts. Be careful placing scripts in these directories as they are always run whether or not aptitude performs some action. For scripts that should only run upon installation, removal, or upgrade of a specific package the relevant preinst, postinst, etc. scripts of the package would be the right place.&lt;/p&gt; &#xA;&lt;p&gt;In &lt;code&gt;/etc/aptitude-robot/triggers.post/90-cleanup.example&lt;/code&gt; you can find an example of the trigger script that cleans up after upgrading/installing/removing. Remove the &lt;code&gt;.example&lt;/code&gt; suffix to enable it.&lt;/p&gt; &#xA;&lt;h3&gt;Cron and Init Defaults&lt;/h3&gt; &#xA;&lt;p&gt;In &lt;code&gt;/etc/default/aptitude-robot&lt;/code&gt; you can control the execution of aptitude-robot by setting some variables.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;# set to &#34;no&#34; to prevent the daily cron run&#xA;RUN_DAILY=yes&#xA;# set to &#34;no&#34; to prevent the init run at boot time&#xA;RUN_ON_BOOT=yes&#xA;# location for the session log (will be deleted after aptitude-robot has ended)&#xA;LOG_SESSION=/var/log/aptitude-robot.session.log&#xA;# log file to keep the output of aptitude-robot&#xA;LOGFILE=/var/log/aptitude-robot.log&#xA;# (optional) mail address to send the session log to&#xA;MAIL_TO=&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h2&gt;Running and Deployment&lt;/h2&gt; &#xA;&lt;p&gt;A default installation of aptitude-robot will run &lt;code&gt;aptitude full-upgrade &#39;~U !~ahold&#39;&lt;/code&gt; each time it is run. Out of the box aptitude-robot will run daily and at each boot. You can call &lt;code&gt;aptitude-robot&lt;/code&gt; manually whenever you need. You may also call &lt;code&gt;aptitude-robot-session&lt;/code&gt; which in addition deals with writing to the log file and performing the installations non-interactively.&lt;/p&gt; &#xA;&lt;p&gt;If you want to run &lt;code&gt;aptitude-robot&lt;/code&gt; periodically more often than daily you can write your own crontab entry, e.g., in &lt;code&gt;/etc/cron.d/aptitude-robot&lt;/code&gt;. In your own cron job you most likely want to call &lt;code&gt;aptitude-robot-session&lt;/code&gt;. You may then want to disable the daily cron jobs by setting &lt;code&gt;RUN_DAILY=no&lt;/code&gt; in &lt;code&gt;/etc/default/aptitude-robot&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;h2&gt;Scenarios&lt;/h2&gt; &#xA;&lt;h3&gt;Server with Mostly Unattended Upgrades&lt;/h3&gt; &#xA;&lt;p&gt;By default aptitude-robot will upgrade all packages daily. On a server you want to have security upgrades deployed as soon as possible but for some critical packages you want to test them first with your configuration before installing an upgrade. With aptitude-robot you can choose to keep some packages while automatically upgrading all the others. E.g., on a web server with a complex configuration you may add a package list in &lt;code&gt;/etc/aptitude-robots/pkglist.d/90_keep_web&lt;/code&gt; with the contents:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;: apache2&#xA;: apache2-mpm-prefork&#xA;: apache2-utils&#xA;: apache2.2-bin&#xA;: apache2.2-common&#xA;: libapache2-mod-php5&#xA;#etc.&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;You can then concentrate on the security announcement for apache and its plugins. All other security announcement you can read at you leisure for educational purposes only.&lt;/p&gt; &#xA;&lt;h3&gt;Standardized Deployments&lt;/h3&gt; &#xA;&lt;p&gt;On a development host you can build up and test package lists. You can then use these lists to deploy (and maintain) hosts with a standard set of packages. By splitting up the package list into several files according to usage patterns you can arrange for optional installs too.&lt;/p&gt; &#xA;&lt;p&gt;If you want to prevent automatic upgrade of certain packages but still have them installed on initial deployment you can specify both actions, as follows:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;+ foo&#xA;: foo&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;During the initial deployment you would run &lt;code&gt;aptitude-robot&lt;/code&gt; with the &lt;code&gt;--force-install&lt;/code&gt; option to ignore the keep action.&lt;/p&gt; &#xA;&lt;h2&gt;Related Packages&lt;/h2&gt; &#xA;&lt;h3&gt;Just automatic upgrades or notifications&lt;/h3&gt; &#xA;&lt;p&gt;If you are just interested in automatic upgrades you should look into &lt;a href=&#34;http://packages.debian.org/unattended-upgrades&#34;&gt;unattended-upgrades&lt;/a&gt;, &lt;a href=&#34;http://packages.debian.org/cron-apt&#34;&gt;cron-apt&lt;/a&gt;, or &lt;a href=&#34;http://packages.debian.org/apticron&#34;&gt;apticron&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;h3&gt;Restarting services as needed&lt;/h3&gt; &#xA;&lt;p&gt;After the upgrade you may need to restart some processes. See the &lt;a href=&#34;http://packages.debian.org/stable/needrestart&#34;&gt;needrestart&lt;/a&gt; package for a way to automatically restart affected services.&lt;/p&gt; &#xA;&lt;p&gt;If you also have desktop users, you may be also interested in the &lt;a href=&#34;http://packages.debian.org/sid/needrestart-session&#34;&gt;needrestart-session&lt;/a&gt; package which informs logged in desktop users about the necessity to restart some of their running programs.&lt;/p&gt; &#xA;&lt;p&gt;If you&#39;re just interested in a list of programs which should be restarted with automatically doing so, have a look &lt;code&gt;checkrestart&lt;/code&gt; from the &lt;a href=&#34;http://packages.debian.org/sid/debian-goodies&#34;&gt;debian-goodies&lt;/a&gt; package. There exists also a post-install trigger script named &lt;a href=&#34;https://github.com/tpo/debian-goodies/raw/master/restart-services&#34;&gt;restart-services&lt;/a&gt; which parses the output of &lt;code&gt;checkrestart&lt;/code&gt; to automatically restart services. See also the &lt;a href=&#34;https://bugs.debian.org/676509&#34;&gt;wishlist bug #676509&lt;/a&gt; of debian-goodies.&lt;/p&gt; &#xA;&lt;h3&gt;Checking for severe bugs before installing updates&lt;/h3&gt; &#xA;&lt;p&gt;To prevent automatically upgrading packages to versions which are known to be severely broken, you can use &lt;a href=&#34;http://packages.debian.org/apt-listbugs&#34;&gt;apt-listbugs&lt;/a&gt;. If apt-listbugs finds release-critical bugs it will prevent aptitude-robot from updating &lt;em&gt;any&lt;/em&gt; package.&lt;/p&gt; &#xA;&lt;p&gt;Please be aware that you need to &lt;em&gt;manually&lt;/em&gt; upgrade the remaining packages in this case.&lt;/p&gt; &#xA;&lt;p&gt;Example:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;The following packages will be upgraded:&#xA;  chromium chromium-browser chromium-inspector icedove iceowl-extension&#xA;  libmysqlclient-dev libmysqlclient18 mysql-client mysql-client-5.5&#xA;  mysql-common openjdk-7-jre openjdk-7-jre-headless openjdk-7-jre-lib&#xA;  openjdk-7-jre-zero&#xA;14 packages upgraded, 0 newly installed, 0 to remove and 0 not upgraded.&#xA;Need to get 0 B/123 MB of archives. After unpacking 2,011 kB will be used.&#xA;Writing extended state information...&#xA;grave bugs of chromium (34.0.1847.116-1~deb7u1 -&amp;gt; 34.0.1847.132-1~deb7u1)&#xA; #745794 - chromium: Missing build dep[…] (Fixed: chromium-browser/34.0.1847.132-1)&#xA;grave bugs of icedove (24.4.0-1~deb7u1 -&amp;gt; 24.5.0-1~deb7u1)&#xA; #743748 - Folders are not listed, blank folder pane&#xA;Summary:&#xA; icedove(1 bug), chromium(1 bug)&#xA;**********************************************************************&#xA;****** Exiting with an error in order to stop the installation. ******&#xA;**********************************************************************&#xA;E: Sub-process /usr/sbin/apt-listbugs apt || exit 10 returned an error code (10)&#xA;E: Failure running script /usr/sbin/apt-listbugs apt || exit 10&#xA;A package failed to install.  Trying to recover:&#xA;Reading package lists...&#xA;Building dependency tree...&#xA;Reading state information...&#xA;Reading extended state information...&#xA;Initializing package states...&#xA;aptitude exited with value 255&#xA;aptitude-robot ended at 2014-05-07 03:37:17+02:00&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h3&gt;Monitoring and Reporting&lt;/h3&gt; &#xA;&lt;p&gt;In &lt;code&gt;/usr/share/aptitude-robot/&lt;/code&gt; there are two reporting scripts which can report &lt;code&gt;aptitude-robot-session&lt;/code&gt;&#39;s result either to a &lt;a href=&#34;http://www.xymon.com/&#34;&gt;Xymon&lt;/a&gt; (formerly called Hobbit) monitoring server (&lt;code&gt;xymon-report&lt;/code&gt;) or by e-mail (&lt;code&gt;mail-log-on-error&lt;/code&gt;).&lt;/p&gt; &#xA;&lt;p&gt;If you need to, you can configure in &lt;code&gt;/etc/default/aptitude-robot&lt;/code&gt; what goes into the report and what not:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;# (optional) exclude some rather verbose output from the reporting&#xA;REPORT_LOG_DROP=&#39;is (currently )?not installed, so it will not be|is already installed at the requested version|cannot be marked/unmarked as automatically installed&#39;&#xA;# (optional) Don&#39;t treat some specific warnings or errors as such&#xA;REPORT_LOG_IGNORE=&#39;uses weak digest algorithm&#39;&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;The values are used as pattern parameter to &lt;code&gt;egrep -v&lt;/code&gt; on the log file and default to the empty string.&lt;/p&gt; &#xA;&lt;h2&gt;Building from Source&lt;/h2&gt; &#xA;&lt;p&gt;You can build &lt;code&gt;aptitude-robot&lt;/code&gt; from the GIT repository as follows:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;sudo apt-get -y install autoconf autotools-dev build-essential devscripts git&#xA;sudo apt-get -y install libmouse-perl librun-parts-perl perl-doc&#xA;git clone https://github.com/elmar/aptitude-robot.git&#xA;cd aptitude-robot&#xA;autoreconf --force --install&#xA;./configure&#xA;make dist&#xA;mv *.tar.gz ../$(echo *.tar.gz | sed -e &#39;s/robot-/robot_/&#39; -e &#39;s/\.tar/.orig.tar/&#39;)&#xA;make distclean&#xA;debuild -uc -us&#xA;debclean&#xA;cd ..&#xA;ls -l *.deb&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;This will generate a Debian package that you can install with dpkg:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;sudo dpkg -i *.deb&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h2&gt;Version Numbers&lt;/h2&gt; &#xA;&lt;p&gt;aptitude-robot tries to follow &lt;a href=&#34;http://semver.org/&#34;&gt;Semantic Versioning&lt;/a&gt;, but usually omits the patch/micro version if it is a zero, i.e. version &#34;1.5&#34; is equivalent to &#34;1.5.0&#34;.&lt;/p&gt; &#xA;&lt;h2&gt;Thanks&lt;/h2&gt; &#xA;&lt;p&gt;aptitude-robot was created as a more general version of a local maintenance script called &lt;a href=&#34;http://nic.phys.ethz.ch/projects/dphys-admin/&#34;&gt;dphys-admin&lt;/a&gt;. As such various people contributed in various forms, from code to bug reports to discussions.&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Axel Beckert &lt;a href=&#34;mailto:abe@debian.org&#34;&gt;abe@debian.org&lt;/a&gt; (co-maintainer of aptitude-robot, last maintainer of dphys-admin)&lt;/li&gt; &#xA; &lt;li&gt;Neil Franklin &lt;a href=&#34;mailto:neil@franklin.ch.remove&#34;&gt;neil@franklin.ch.remove&lt;/a&gt; (original author of dphys-admin)&lt;/li&gt; &#xA; &lt;li&gt;Gürkan Myczko &lt;a href=&#34;mailto:myczko@phys.ethz.ch&#34;&gt;myczko@phys.ethz.ch&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;Claude Becker &lt;a href=&#34;mailto:becker@phys.ethz.ch&#34;&gt;becker@phys.ethz.ch&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;Tomas Pospisek &lt;a href=&#34;mailto:tpo@sourcepole.ch&#34;&gt;tpo@sourcepole.ch&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;Daniel Hartwig &lt;a href=&#34;mailto:mandyke@gmail.com&#34;&gt;mandyke@gmail.com&lt;/a&gt;&lt;/li&gt; &#xA;&lt;/ul&gt;</summary>
  </entry>
  <entry>
    <title>hhru/repo-activity</title>
    <updated>2023-01-13T01:42:40Z</updated>
    <id>tag:github.com,2023-01-13:/hhru/repo-activity</id>
    <link href="https://github.com/hhru/repo-activity" rel="alternate"></link>
    <summary type="html">&lt;p&gt;&lt;/p&gt;&lt;hr&gt;&lt;p&gt;Утилита для подсчёта активности в репозитории по модулям и пакетам&lt;/p&gt; &#xA;&lt;p&gt;По мотивам &lt;a href=&#34;https://jira.hh.ru/browse/HH-89381&#34;&gt;HH-89381&lt;/a&gt;&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;--chdir                Директория с проектом, если отличается от текущей&#xA;--debug                Отладочный режим&#xA;--exclude              Не учитывать файлы, попадающие под regexp&#xA;--nogroup              Не группировать по родительским директориям&#xA;--include              Учитывать только файлы, попадающие под regexp&#xA;--maxdepth             Скрывать записи с уровнем вложенности более N&#xA;--shift                Заменять предыдущую часть на отступы&#xA;--since                Начинать с коммита или даты, в формате git, например @{5.days.ago}&#xA;--splitmodule          Строка для разделения модуля и пакета&#xA;--wchange              Вес изменения для сортировки&#xA;--wcommit              Вес коммита для сортировки&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Актуальные опции можно уточнить с ключом --help&lt;/p&gt; &#xA;&lt;h2&gt;Пример использования&lt;/h2&gt; &#xA;&lt;pre&gt;&lt;code&gt;% ./repo-activity --chdir ~/hh.ru --since &#34;2 days&#34;&#xA;commits    changes    module:package&#xA;7          154        hh-webapp:com&#xA;7          154        hh-webapp:com/headhunter&#xA;7          154        hh-webapp:com/headhunter/webapp&#xA;7          154        hh-webapp:com/headhunter/webapp/headhunter&#xA;7          154        hh-webapp:com/headhunter/webapp/headhunter/scheduling&#xA;5          120        hh-webapp:com/headhunter/webapp/headhunter/scheduling/commands&#xA;1          69         hh-webapp:com/headhunter/webapp/headhunter/scheduling/commands/PandoraMailingContentStrategy.java&#xA;1          16         hh-webapp:com/headhunter/webapp/headhunter/scheduling/commands/DatabaseMailingContentStrategy.java&#xA;1          15         hh-webapp:com/headhunter/webapp/headhunter/scheduling/commands/MailingBlockStrategy.java&#xA;1          15         hh-webapp:com/headhunter/webapp/headhunter/scheduling/commands/MassMailingTestMailCommand.java&#xA;1          5          hh-webapp:com/headhunter/webapp/headhunter/scheduling/commands/MassMailingMailCommand.java&#xA;1          30         hh-webapp:com/headhunter/webapp/headhunter/scheduling/MassMailingService.java&#xA;1          4          hh-webapp:com/headhunter/webapp/headhunter/scheduling/MassSendingJobService.java&#xA;4          295        hh-core:ru&#xA;4          295        hh-core:ru/hh&#xA;3          282        hh-core:ru/hh/core&#xA;2          236        hh-core:ru/hh/core/persistence&#xA;1          180        hh-core:ru/hh/core/persistence/InitializingEntityTuplizer.java&#xA;2          56         hh-core:ru/hh/core/persistence/SpringAwareEntityTuplizerFactory.java&#xA;1          46         hh-core:ru/hh/core/config&#xA;1          46         hh-core:ru/hh/core/config/HibernateListenersConfig.java&#xA;1          13         hh-core:ru/hh/resume&#xA;1          13         hh-core:ru/hh/resume/ResumeLoader.java&#xA;&lt;/code&gt;&lt;/pre&gt;</summary>
  </entry>
</feed>