<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom">
  <title>GitHub Perl Daily Trending</title>
  <id>http://mshibanami.github.io/GitHubTrendingRSS</id>
  <updated>2024-04-30T01:29:19Z</updated>
  <subtitle>Daily Trending of Perl in GitHub</subtitle>
  <link href="http://mshibanami.github.io/GitHubTrendingRSS"></link>
  <entry>
    <title>monarco/monarco-hat-firmware-bin</title>
    <updated>2024-04-30T01:29:19Z</updated>
    <id>tag:github.com,2024-04-30:/monarco/monarco-hat-firmware-bin</id>
    <link href="https://github.com/monarco/monarco-hat-firmware-bin" rel="alternate"></link>
    <summary type="html">&lt;p&gt;Firmware binary files and tools for the Monarco HAT - Add-on board for Raspberry Pi&lt;/p&gt;&lt;hr&gt;&lt;h1&gt;Monarco HAT Firmware Images and Tools&lt;/h1&gt; &#xA;&lt;p&gt;Firmware version history and roadmap: &lt;a href=&#34;https://github.com/monarco/monarco-hat-documentation/raw/master/Monarco_HAT_Firmware_Roadmap.md&#34;&gt;https://github.com/monarco/monarco-hat-documentation/blob/master/Monarco_HAT_Firmware_Roadmap.md&lt;/a&gt;&lt;/p&gt; &#xA;&lt;p&gt;Latest firmware version: 2.008&lt;/p&gt; &#xA;&lt;h2&gt;Other Resources&lt;/h2&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://www.monarco.io/&#34;&gt;Monarco Homepage - https://www.monarco.io/&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/monarco/monarco-hat-documentation&#34;&gt;Repository - Documentation for the Monarco HAT&lt;/a&gt;&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;Firmware Update&lt;/h2&gt; &#xA;&lt;h3&gt;Prepare Environment and Clone Repository&lt;/h3&gt; &#xA;&lt;p&gt;Install dependencies - on Debian/Raspbian:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;$ sudo apt update&#xA;$ sudo apt install git perl-base libdigest-crc-perl libdevice-serialport-perl&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Clone repository:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;$ git clone https://github.com/monarco/monarco-hat-firmware-bin&#xA;$ cd monarco-hat-firmware-bin&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Disable Linux console on UART - on Raspberry Pi edit &lt;code&gt;/boot/cmdline.txt&lt;/code&gt;:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;$ sudo sed &#39;s/ console=serial0,[0-9]\+//&#39; -i /boot/cmdline.txt&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;and reboot to apply the settings.&lt;/p&gt; &#xA;&lt;h3&gt;Flashing Firmware&lt;/h3&gt; &#xA;&lt;p&gt;Stop any application which use UART with the Monarco HAT (&lt;code&gt;/dev/ttyAMA0&lt;/code&gt; on Raspberry Pi). For example, the REX Control System &lt;code&gt;RexCore&lt;/code&gt; service can be stopped by:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;$ sudo service rexcore stop&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Run firmware downloader with path to the most recent firmware image:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;$ sudo ./monarco-flash.pl flash ./firmware-bin/fw-monarco-hat-2008.bin&#xA;Monarco HAT Flash Firmware Downloader, version 1.1&#xA;(c) REX Controls 2016, http://www.rexcontrols.com&#xA;&#xA;HAT ID detected:&#xA;  Vendor: REX Controls&#xA;  Product: Monarco HAT&#xA;  Product ID: 0x0001&#xA;  Product VER: 0x0103&#xA;  UUID: fe0f39bf-7c03-4eb6-9a91-df861ae5abcd&#xA;&#xA;Serial device /dev/ttyAMA0 check OK.&#xA;&#xA;MCU Bootloader ID: [1.60 ChipID: 247DBC0257516B45]&#xA;&#xA;Press ENTER to continue ...&#xA;XModem: Start, waiting for handshake&#xA;XModem: Handshake success&#xA;XModem: Sending: .................................................................................................................................................................&#xA;&#xA;CRC RESULT: [18] c--CRC: 00009C5C--&#xA;&#xA;OK!&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h3&gt;Quick Help&lt;/h3&gt; &#xA;&lt;pre&gt;&lt;code&gt;$ sudo ./monarco-flash.pl&#xA;Monarco HAT Flash Firmware Downloader, version 1.1&#xA;(c) REX Controls 2016, http://www.rexcontrols.com&#xA;&#xA;Usage:&#xA;    ./monarco-flash.pl [options] flash &amp;lt;firmware-image-file&amp;gt;&#xA;    ./monarco-flash.pl [options] getserial&#xA;&#xA;Options defaults: --uart_device=/dev/ttyAMA0 --gpio_reset=21 --gpio_bootloader=20&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h3&gt;Checking Monarco HAT MCU ID&lt;/h3&gt; &#xA;&lt;pre&gt;&lt;code&gt;$ sudo ./monarco-flash.pl getserial&#xA;Monarco HAT Flash Firmware Downloader, version 1.1&#xA;(c) REX Controls 2016, http://www.rexcontrols.com&#xA;&#xA;MCU Bootloader ID: [1.60 ChipID: 247DBC0257516B45]&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h2&gt;ID EEPROM Update&lt;/h2&gt; &#xA;&lt;p&gt;ID EEPROM on the Monarco HAT contains device-tree-overlay according to the HAT standard which is automatically loaded by Raspberry Pi bootloader.&lt;/p&gt; &#xA;&lt;p&gt;The EEPROM update is normally not needed as it contains only hardware description. However, if there is some incompatible change in Linux kernel related to the device-tree format, EEPROM should be updated for correct operation with new kernel version.&lt;/p&gt; &#xA;&lt;p&gt;Recently, this was the case when Raspbian upgraded kernel from 4.4 to 4.9, which led to broken UART remapping.&lt;/p&gt; &#xA;&lt;p&gt;&lt;strong&gt;If you have Monarco HAT series E and older (shipped before 10/2017), and want to use it with current Raspbian, you should update the EEPROM by:&lt;/strong&gt;&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;$ sudo ./monarco-eeprom.sh update&#xA;Monarco HAT ID EEPROM flash tool, version 1.1&#xA;(c) REX Controls 2018, http://www.rexcontrols.com&#xA;&#xA;KERNEL_MAJOR: &#34;4&#34; KERNEL_MINOR: &#34;14&#34;&#xA;HAT_VER_DT: &#34;0&#34; HAT_VER_HW: &#34;105&#34;&#xA;&#xA;EEPROM NEEDS UPGRADE, CONTINUE? TYPE yes: yes&#xA;# Writing EEPROM:&#xA;1536 bytes (1.5 kB, 1.5 KiB) copied, 6.57705 s, 0.2 kB/s&#xA;3+1 records in&#xA;3+1 records out&#xA;1809 bytes (1.8 kB, 1.8 KiB) copied, 7.75253 s, 0.2 kB/s&#xA;&#xA;# Checking EEPROM:&#xA;8+0 records in&#xA;8+0 records out&#xA;4096 bytes (4.1 kB, 4.0 KiB) copied, 0.281417 s, 14.6 kB/s&#xA;&#xA;EEPROM FLASH FINISHED OK!&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h2&gt;Runtime Requirements&lt;/h2&gt; &#xA;&lt;p&gt;Debian packages:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;code&gt;perl&lt;/code&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;code&gt;libdigest-crc-perl&lt;/code&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;code&gt;libdevice-serialport-perl&lt;/code&gt;&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;Common Problems&lt;/h2&gt; &#xA;&lt;p&gt;Do not use GPIOs 0 (ID_SD), 1 (ID_SC), 2 (SDA), 3 (SCL), 8 (CE0), 9 (MISO), 10 (MOSI), 11 (SCLK), 14 (TXD), 15 (RXD), 20, 21, 26 for any custom applications with Monarco HAT! You could break correct operation of the Monarco HAT. Using colliding GPIOs can break the operation until complete power cycling is performed.&lt;/p&gt; &#xA;&lt;h2&gt;License&lt;/h2&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;code&gt;monarco-flash.pl&lt;/code&gt;, &lt;code&gt;monarco-eeprom.sh&lt;/code&gt; - BSD 3-Clause License - see LICENSE.txt&lt;/li&gt; &#xA; &lt;li&gt;firmware binary images under &lt;code&gt;firmware-bin/&lt;/code&gt; - not open source, binary form can be redistributed without any restriction&lt;/li&gt; &#xA; &lt;li&gt;device tree files under &lt;code&gt;device-tree/&lt;/code&gt; - GNU General Public License version 2 (as Linux Kernel)&lt;/li&gt; &#xA; &lt;li&gt;libraries under &lt;code&gt;libperl/&lt;/code&gt; (&lt;code&gt;Fuser&lt;/code&gt;, &lt;code&gt;Device::SerialPort::XModem&lt;/code&gt;) - the same terms as Perl itself&lt;/li&gt; &#xA;&lt;/ul&gt;</summary>
  </entry>
</feed>