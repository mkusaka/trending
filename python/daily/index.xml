<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom">
  <title>GitHub Python Daily Trending</title>
  <id>http://mshibanami.github.io/GitHubTrendingRSS</id>
  <updated>2024-06-24T01:35:40Z</updated>
  <subtitle>Daily Trending of Python in GitHub</subtitle>
  <link href="http://mshibanami.github.io/GitHubTrendingRSS"></link>
  <entry>
    <title>casualsnek/onthespot</title>
    <updated>2024-06-24T01:35:40Z</updated>
    <id>tag:github.com,2024-06-24:/casualsnek/onthespot</id>
    <link href="https://github.com/casualsnek/onthespot" rel="alternate"></link>
    <summary type="html">&lt;p&gt;qt based music downloader written in python&lt;/p&gt;&lt;hr&gt;&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/casualsnek/onthespot/main/src/onthespot/resources/icon.png&#34; alt=&#34;Logo&#34;&gt;&lt;/p&gt; &#xA;&lt;h1&gt;Onthespot&lt;/h1&gt; &#xA;&lt;p&gt;qt based music downloader written in python.&lt;/p&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/C4V94gy.png&#34; alt=&#34;Screenshot&#34;&gt;&lt;/p&gt; &#xA;&lt;h3&gt;Discord for discussions: &lt;a href=&#34;https://discord.gg/hz4mAwSujH&#34;&gt;Discord Invite&lt;/a&gt;&lt;/h3&gt; &#xA;&lt;p&gt;If you have an idea for an improvement or feature, create a issue or join the discord server to discuss!&lt;/p&gt; &#xA;&lt;h1&gt;1. Installing/launching application:&lt;/h1&gt; &#xA;&lt;h2&gt;1.1. Launch without installing - from source&lt;/h2&gt; &#xA;&lt;p&gt;Make sure &lt;a href=&#34;https://ffmpeg.org/&#34;&gt;ffmpeg&lt;/a&gt;, &lt;a href=&#34;https://www.python.org/downloads&#34;&gt;python3&lt;/a&gt; and &lt;a href=&#34;https://git-scm.com/downloads&#34;&gt;Git&lt;/a&gt; are installed and available on your &lt;code&gt;$PATH&lt;/code&gt;. If you are on windows, you also need to install the &lt;a href=&#34;https://visualstudio.microsoft.com/visual-cpp-build-tools/&#34;&gt;Microsoft C++ build tools&lt;/a&gt; and restart your computer before starting the build process.&lt;/p&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;Download or Clone the repo &lt;code&gt;git clone https://github.com/casualsnek/onthespot&lt;/code&gt;&lt;/li&gt; &#xA; &lt;li&gt;Navigate to the onthespot directory &lt;code&gt;cd onthespot&lt;/code&gt;&lt;/li&gt; &#xA; &lt;li&gt;Install the package &lt;code&gt;pip install -r requirements.txt&lt;/code&gt;&lt;/li&gt; &#xA; &lt;li&gt;Navigate to source directory &lt;code&gt;cd src&lt;/code&gt;&lt;/li&gt; &#xA; &lt;li&gt;Launch the application with &lt;code&gt;python3 -m onthespot&lt;/code&gt;&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;h2&gt;1.2. Launch with installing - from source&lt;/h2&gt; &#xA;&lt;p&gt;The requirements are the same as &#34;Launching without installing&#34; above.&lt;/p&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;Download or Clone the repo &lt;code&gt;git clone https://github.com/casualsnek/onthespot&lt;/code&gt;&lt;/li&gt; &#xA; &lt;li&gt;Navigate to the onthespot directory &lt;code&gt;cd onthespot&lt;/code&gt;&lt;/li&gt; &#xA; &lt;li&gt;Build the package &lt;code&gt;python -m build&lt;/code&gt;&lt;/li&gt; &#xA; &lt;li&gt;Install the package &lt;code&gt;pip install ./dist/*.whl&lt;/code&gt;&lt;/li&gt; &#xA; &lt;li&gt;Launch the application with &lt;code&gt;onthespot_gui&lt;/code&gt;&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;h2&gt;1.3. Using portable prebuilt binaries&lt;/h2&gt; &#xA;&lt;h3&gt;On Linux&lt;/h3&gt; &#xA;&lt;h4&gt;Arch Linux&lt;/h4&gt; &#xA;&lt;p&gt;&lt;code&gt;onthespot&lt;/code&gt; is available for arch linux and arch linux based distributions in arch user repository (aur) as &lt;a href=&#34;https://aur.archlinux.org/packages/onthespot-git&#34;&gt;onthespot-git&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;p&gt;You can install &lt;code&gt;onthespot&lt;/code&gt; using your favourite aur helper.&lt;/p&gt; &#xA;&lt;p&gt;For eg: using yay&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;yay -Sy onthespot-git&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h4&gt;Other Distributions&lt;/h4&gt; &#xA;&lt;p&gt;Download Latest &#39;onthespot_linux&#39; from the release section and execute with&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;chmod +x onthespot_linux&#xA;./onethespot_linux&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h3&gt;On Windows&lt;/h3&gt; &#xA;&lt;p&gt;Download Latest &#39;onthespot_win_ffm.exe&#39; or &#39;onthespot_win.exe&#39; from the Release section and execute by double-clicking the downloaded file.&lt;/p&gt; &#xA;&lt;p&gt;The binaries with filename ending with &#39;_ffm&#39; have ffmpeg bundled and should not require manual installation.&lt;/p&gt; &#xA;&lt;p&gt;If you are using binaries that does not bundle ffmpeg and downloads gets stuck at 99% with &lt;code&gt;Converting&lt;/code&gt; on progress text, you are missing ffmpeg ! Please install it by following the instructions below&lt;/p&gt; &#xA;&lt;h4&gt;Installing ffmpeg in windows&lt;/h4&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Open Windows Explorer and Navigate to &lt;code&gt;C:\&lt;/code&gt; Drive and make a folder name &lt;code&gt;ffmpeg&lt;/code&gt; there&lt;/li&gt; &#xA; &lt;li&gt;Download ffmpeg zip from &lt;a href=&#34;https://www.gyan.dev/ffmpeg/builds/ffmpeg-release-full.7z&#34;&gt;https://www.gyan.dev/ffmpeg/builds/ffmpeg-release-full.7z&lt;/a&gt; then copy the &lt;code&gt;bin&lt;/code&gt; folder from zip to &lt;code&gt;C:\ffmpeg&lt;/code&gt;&lt;/li&gt; &#xA; &lt;li&gt;Open CMD as administrator and run the command: &lt;code&gt;setx /m PATH &#34;C:\ffmpeg\bin;%PATH%&#34;&lt;/code&gt;&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;Now the application should work as expected.&lt;/p&gt; &#xA;&lt;h1&gt;2. Building/packaging manually&lt;/h1&gt; &#xA;&lt;p&gt;Building or packaging on any OS requires Git, Python3 and Pip installed. Make sure you have them installed !&lt;/p&gt; &#xA;&lt;h2&gt;2.1. Building portable binaries&lt;/h2&gt; &#xA;&lt;h3&gt;2.1.1 On Linux/nix&lt;/h3&gt; &#xA;&lt;p&gt;Open terminal emulator and run the following command to clone the repository and build.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;git clone https://github.com/casualsnek/onthespot&#xA;cd onthespot&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;If you want builds with ffmpeg embedded download ffmpeg binaries for your os from &lt;a href=&#34;https://www.gyan.dev/ffmpeg/builds/ffmpeg-release-full.7z&#34;&gt;Here&lt;/a&gt;. Create a new directory named &#39;ffbin_nix&#39; in repository root directory. Copy three files &#39;ffmpeg&#39;, &#39;ffprobe&#39;, &#39;ffplay&#39; from downloaded archive to just created &#39;ffbin_nix&#39; directory then run;&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;bash ./build_linux.sh&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;After the command completes, you should have a &#39;dist&#39; directory in repository root containing built &#39;onthespot_linux&#39; binary.&lt;/p&gt; &#xA;&lt;h3&gt;2.1.2. On Windows&lt;/h3&gt; &#xA;&lt;p&gt;Open cmd and run the following command to clone the repository and build.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;git clone https://github.com/casualsnek/onthespot&#xA;cd onthespot&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;If you do not have git installed you can also download the Project source zip from github, extract it and open cmd on repository root. If you want builds with ffmpeg embedded download ffmpeg binaries for your os from &lt;a href=&#34;https://www.gyan.dev/ffmpeg/builds/ffmpeg-release-full.7z&#34;&gt;Here&lt;/a&gt;. Create a new directory named &#39;ffbin_win&#39; in repository root directory. Copy three files &#39;ffmpeg.exe&#39;, &#39;ffprobe.exe&#39;, &#39;ffplay.exe&#39; from downloaded archive to just created &#39;ffbin_win&#39; directory then run;&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;build_winC1.bat&#xA;build_winC2.bat&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;After the command completes, you should have a &#39;dist&#39; directory in repository root containing built &#39;onthespot_win.exe&#39; binary.&lt;/p&gt; &#xA;&lt;h3&gt;2.1.3. On MacOS&lt;/h3&gt; &#xA;&lt;p&gt;&lt;strong&gt;NOTE :&lt;/strong&gt; This only builds an app for the specific processor architecture you are on. It does not build a universal binary&lt;/p&gt; &#xA;&lt;p&gt;Open terminal emulator and run the following command to clone the repository and build.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;git clone https://github.com/casualsnek/onthespot&#xA;cd onthespot&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;If you want builds with ffmpeg embedded download ffmpeg binaries for your os from &lt;a href=&#34;https://www.gyan.dev/ffmpeg/builds/ffmpeg-release-full.7z&#34;&gt;Here&lt;/a&gt;. Create a new directory named &#39;ffbin_mac&#39; in repository root directory. Copy three files &#39;ffmpeg&#39;, &#39;ffprobe&#39;, &#39;ffplay&#39; from the downloaded archive to the newly created &#39;ffbin_mac&#39; directory then run:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;./build_mac.sh&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;After the command completes, you should have a &#39;dist&#39; directory in repository root containing the &#39;onthespot_mac.app&#39; binary.&lt;/p&gt; &#xA;&lt;h2&gt;2.2. Building wheel for installing with pip&lt;/h2&gt; &#xA;&lt;p&gt;You can also build onthespot as wheel and install it as python module via pip in your system. It provides better integration with system, like using your system&#39;s Qt style and themes as well as you can use provided icon and .desktop file for better integration under linux systems.&lt;/p&gt; &#xA;&lt;p&gt;Make sure you have set up tools installed !&lt;/p&gt; &#xA;&lt;p&gt;Open terminal emulator and run the following command to clone the repository and build.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;git clone https://github.com/casualsnek/onthespot&#xA;cd onthespot&#xA;python -m build&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;This will create a dist directory containing .whl file that can now be installed with pip, the application can be launched with the command &lt;code&gt;onthespot_gui&lt;/code&gt; or &lt;code&gt;python3 -m onthespot&lt;/code&gt; after installing !&lt;/p&gt; &#xA;&lt;p&gt;&lt;strong&gt;NOTE :&lt;/strong&gt; If you are packaging onthespot for distribution, copy &lt;code&gt;src/onthespot/resources/icon.svg&lt;/code&gt; to either &lt;code&gt;/usr/share/icons/hicolor/scalable/apps/casual_onthespot.svg&lt;/code&gt; or &lt;code&gt;$HOME/.local/share/icons/hicolor/scalable/apps/casual_onthespot.svg&lt;/code&gt;, and &lt;code&gt; src/onthespot/resources/org.eu.casualsnek.onthespot.desktop&lt;/code&gt; to either &lt;code&gt;/usr/share/applications/org.eu.casualsnek.onthespot.desktop&lt;/code&gt; or &lt;code&gt;$HOME/.local/share/applications/org.eu.casualsnek.onthespot.desktop&lt;/code&gt;. This allows application to be better integrated to desktop environments !&lt;/p&gt; &#xA;&lt;br&gt; If you have ideas for improvement/features create an issue or join discord server for discussion ! &#xA;&lt;h1&gt;3. Basic Usage&lt;/h1&gt; &#xA;&lt;h2&gt;Getting started&lt;/h2&gt; &#xA;&lt;p&gt;When launching the application for the first time, you will get a warning that no spotify accounts are added. Dismiss the warning, and add your account(s) at the bottom of the configuration tab. Having multiple accounts will let you download multiple songs at a time.&lt;/p&gt; &#xA;&lt;h2&gt;Searching/Downloading via query&lt;/h2&gt; &#xA;&lt;p&gt;In the &#39;Search&#39; tab, you can enter your query click &lt;code&gt;search&lt;/code&gt; to search for songs/artists/albums/playlists. You can then download media in the resulting list by clicking on the &lt;code&gt;download&lt;/code&gt; button. Optionally, you can bulk download by clicking on any of the buttons on the below the table. &lt;em&gt;Note that Media Type other than &#39;Tracks&#39; can take a little longer to parse and download. The application may appear to be frozen in this state !&lt;/em&gt;&lt;/p&gt; &#xA;&lt;h2&gt;Downloading by URL&lt;/h2&gt; &#xA;&lt;p&gt;Enter the url in the search field then click download. You can also enter path of text file containing URL, and it will queue all url(s) in it ! &lt;em&gt;Note that Media Type other than &#39;Tracks&#39; can take a little longer to parse and download. Application may appear to be frozen in this state !&lt;/em&gt;&lt;/p&gt; &#xA;&lt;h2&gt;Download status&lt;/h2&gt; &#xA;&lt;p&gt;The download status and progress can be viewed by navigating to the &#39;Progress&#39; tab.&lt;/p&gt; &#xA;&lt;h1&gt;4. Configuration&lt;/h1&gt; &#xA;&lt;h3&gt;4.1. General Configuration options&lt;/h3&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;strong&gt;Max download workers&lt;/strong&gt; : It is the number of threads to be used for media downloads. Set this to the number of accounts you added. Changing this setting requires an application restart to take effect.&lt;/li&gt; &#xA; &lt;li&gt;&lt;strong&gt;Parsing Account SN&lt;/strong&gt; : It is the number shown at left side of the username in the accounts table. The number is the account responsible for providing search results and parsing download url(s).&lt;/li&gt; &#xA; &lt;li&gt;&lt;strong&gt;Download Location&lt;/strong&gt; : The root folder where downloaded media are placed in.&lt;/li&gt; &#xA; &lt;li&gt;&lt;strong&gt;Download delay&lt;/strong&gt; : Time in seconds to wait before next download after a successful download.&lt;/li&gt; &#xA; &lt;li&gt;&lt;strong&gt;Max retries&lt;/strong&gt; : Number of times to retry a download before moving on.&lt;/li&gt; &#xA; &lt;li&gt;&lt;strong&gt;Max search results&lt;/strong&gt; : The number of items to show in search result for each type of media. Example: setting it to &#39;1&#39; shows one result for artist, album, track and playlist resulting in 4 total search results.&lt;/li&gt; &#xA; &lt;li&gt;&lt;strong&gt;Raw media download&lt;/strong&gt; : Downloads files (they will be .ogg) to disk without converting to set media format, it also disables metadata writing and thumbnail embedding.&lt;/li&gt; &#xA; &lt;li&gt;&lt;strong&gt;Force premium&lt;/strong&gt; : Use this if your premium accounts shows FREE in accounts table, this applies to all added accounts so it&#39;s not recommeded to use with a combination of free and premium accounts. Don&#39;t use if account isn&#39;t premium.&lt;/li&gt; &#xA; &lt;li&gt;&lt;strong&gt;Enable desktop app play to download&lt;/strong&gt; : Enabling will automatically download songs you play on spotify desktop application. (Supported: Linux/Windows)&lt;/li&gt; &#xA; &lt;li&gt;&lt;strong&gt;Show/Hide Advanced Configuration&lt;/strong&gt;: Enable/Disables the Advanced configuration tab.&lt;/li&gt; &#xA; &lt;li&gt;&lt;strong&gt;Save setting&lt;/strong&gt;: Saves/Applies the settings&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h3&gt;4.2. Advanced Configuration&lt;/h3&gt; &#xA;&lt;p&gt;Default track names are &lt;code&gt;AlbumFormatter/TrackName&lt;/code&gt;&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;strong&gt;Track name formatter&lt;/strong&gt;: This option allows you to set the naming scheme of downloaded tracks. Variables can be used by enclosing them between &lt;code&gt;{}&lt;/code&gt;. A few variables are available to use in the naming scheme: &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;artist : Name of artist of track&lt;/li&gt; &#xA;   &lt;li&gt;album : Name of album the track is in *&lt;/li&gt; &#xA;   &lt;li&gt;name : Name of track&lt;/li&gt; &#xA;   &lt;li&gt;rel_year : Release year of track&lt;/li&gt; &#xA;   &lt;li&gt;disc_number : Disk number in which track lies *&lt;/li&gt; &#xA;   &lt;li&gt;track_number : Serial Number of track in album *&lt;/li&gt; &#xA;   &lt;li&gt;playlist_name : Name of playlist if the track is being downloaded as part of playlist *&lt;/li&gt; &#xA;   &lt;li&gt;playlist_owner : Name of playlist if the track is being downloaded as part of playlist *&lt;/li&gt; &#xA;   &lt;li&gt;playlist_desc : Description of playlist if the track is being downloaded as part of playlist *&lt;/li&gt; &#xA;   &lt;li&gt;genre : Genre of song *&lt;/li&gt; &#xA;   &lt;li&gt;label : Name of record label&lt;/li&gt; &#xA;   &lt;li&gt;explicit : &#39;Explicit&#39; if the song is marked explicit else it will be blank&lt;/li&gt; &#xA;   &lt;li&gt;trackcount : Total number of tracks on the album this track is in&lt;/li&gt; &#xA;   &lt;li&gt;disccount : Total number of discs on the album this track is in&lt;/li&gt; &#xA;   &lt;li&gt;spotid : Spotify ID&lt;/li&gt; &#xA;   &lt;li&gt;Example: &lt;code&gt;Song: {name} of album: {album} Released in {rel_year}&lt;/code&gt;.&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;The value of variables with their description ending in * maybe empty in some cases. This can also be a path.&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;strong&gt;Album directory name formatter&lt;/strong&gt;: This option allows you set the naming scheme of the directories for downloaded tracks. Variables can be used by enclosing them between &lt;code&gt;{}&lt;/code&gt;. A few variables are available to use in the naming scheme: &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;artist : name of the main artist of the album&lt;/li&gt; &#xA;   &lt;li&gt;rel_year: the release year of the album *&lt;/li&gt; &#xA;   &lt;li&gt;album: name of the album&lt;/li&gt; &#xA;   &lt;li&gt;playlist_name : Name of playlist if the track is being downloaded as part of playlist *&lt;/li&gt; &#xA;   &lt;li&gt;playlist_owner : Name of playlist if the track is being downloaded as part of playlist *&lt;/li&gt; &#xA;   &lt;li&gt;playlist_desc : Description of playlist if the track is being downloaded as part of playlist *&lt;/li&gt; &#xA;   &lt;li&gt;genre : Genre of song *&lt;/li&gt; &#xA;   &lt;li&gt;label : Name of record label&lt;/li&gt; &#xA;   &lt;li&gt;Example: &lt;code&gt;{artist}/{rel_year}/{album}&lt;/code&gt;.&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;The value of variables with their description ending in * maybe empty in some cases. This can be a path too.&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Download chunk size&lt;/strong&gt;: Size of chunks (bytes) used for downloading.&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Disable bulk download notice&lt;/strong&gt;: Enabling this will disable popup dialogs about status when using bulk downloads.&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Recoverable downloads retry delay&lt;/strong&gt;: Time to wait before attempting another download after failed attempt.&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Skip bytes at the end (download end skip bytes)&lt;/strong&gt;: Sometimes the last few bytes of a track can&#39;t be downloaded, leading to a &#39;PD Error&#39; which causes the downloads to fail constantly. This option sets the number of bytes to skip downloading when this happens. The value might change but the current working value is &#39;167&#39; bytes. If you get &#39;decode errors&#39; or incomplete song downloads, try setting it to 0.&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Force Artist/Album dir for track/playlist items&lt;/strong&gt;: If this is disabled the tracks downloaded will be placed in the root of download directory instead of artist/album directories. Enabling this might cause slower download parsing but makes organising music easier.&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Media Format&lt;/strong&gt;: Format of media you want your final music download to be in. Do not include &#39;.&#39; in it. This setting will be ignored while using the raw media download option.&lt;/p&gt; &lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h1&gt;5. Issues&lt;/h1&gt; &#xA;&lt;p&gt;Decode error: If you are receiving this error, your account might have gotten restricted. Wait some time or try a different account. The application may crash frequently as there is no proper exception handling yet. You can help by opening a new issue with the error message displayed in your console window after the application misbehaves.&lt;/p&gt; &#xA;&lt;h1&gt;6. Contributing/Supporting&lt;/h1&gt; &#xA;&lt;p&gt;You can write code to include additional feature or bug fixes or make a issue regarding bugs and features or just spread the work about the application :) If you want to support financially, you can visit &lt;a href=&#34;https://github.com/casualsnek/casualsnek&#34;&gt;Here&lt;/a&gt; and support through open collective or BTC If you like the project, show your support by giving it a star :) !&lt;/p&gt;</summary>
  </entry>
  <entry>
    <title>Kosinkadink/ComfyUI-AnimateDiff-Evolved</title>
    <updated>2024-06-24T01:35:40Z</updated>
    <id>tag:github.com,2024-06-24:/Kosinkadink/ComfyUI-AnimateDiff-Evolved</id>
    <link href="https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved" rel="alternate"></link>
    <summary type="html">&lt;p&gt;Improved AnimateDiff for ComfyUI and Advanced Sampling Support&lt;/p&gt;&lt;hr&gt;&lt;h1&gt;AnimateDiff for ComfyUI&lt;/h1&gt; &#xA;&lt;p&gt;Improved &lt;a href=&#34;https://github.com/guoyww/AnimateDiff/&#34;&gt;AnimateDiff&lt;/a&gt; integration for ComfyUI, as well as advanced sampling options dubbed Evolved Sampling usable outside of AnimateDiff. Please read the AnimateDiff repo README and Wiki for more information about how it works at its core.&lt;/p&gt; &#xA;&lt;p&gt;AnimateDiff workflows will often make use of these helpful node packs:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/FizzleDorf/ComfyUI_FizzNodes&#34;&gt;ComfyUI_FizzNodes&lt;/a&gt; for prompt-travel functionality with the BatchPromptSchedule node. Maintained by FizzleDorf.&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/Kosinkadink/ComfyUI-Advanced-ControlNet&#34;&gt;ComfyUI-Advanced-ControlNet&lt;/a&gt; for making ControlNets work with Context Options and controlling which latents should be affected by the ControlNet inputs. Includes SparseCtrl support. Maintained by me.&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/Kosinkadink/ComfyUI-VideoHelperSuite&#34;&gt;ComfyUI-VideoHelperSuite&lt;/a&gt; for loading videos, combining images into videos, and doing various image/latent operations like appending, splitting, duplicating, selecting, or counting. Actively maintained by AustinMroz and I.&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/Fannovel16/comfyui_controlnet_aux&#34;&gt;comfyui_controlnet_aux&lt;/a&gt; for ControlNet preprocessors not present in vanilla ComfyUI. Maintained by Fannovel16.&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/cubiq/ComfyUI_IPAdapter_plus&#34;&gt;ComfyUI_IPAdapter_plus&lt;/a&gt; for IPAdapter support. Maintained by cubiq (matt3o).&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/kijai/ComfyUI-KJNodes&#34;&gt;ComfyUI-KJNodes&lt;/a&gt; for miscellaneous nodes including selecting coordinates for animated GLIGEN. Maintained by kijai.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h1&gt;Installation&lt;/h1&gt; &#xA;&lt;h2&gt;If using ComfyUI Manager:&lt;/h2&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;Look for &lt;code&gt;AnimateDiff Evolved&lt;/code&gt;, and be sure the author is &lt;code&gt;Kosinkadink&lt;/code&gt;. Install it. &lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/2c7f29e1-d024-49e1-9eb0-d38070142584&#34; alt=&#34;image&#34;&gt;&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;h2&gt;If installing manually:&lt;/h2&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;Clone this repo into &lt;code&gt;custom_nodes&lt;/code&gt; folder.&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;h1&gt;Model Setup:&lt;/h1&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;Download motion modules. You will need at least 1. Different modules produce different results. &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;Original models &lt;code&gt;mm_sd_v14&lt;/code&gt;, &lt;code&gt;mm_sd_v15&lt;/code&gt;, &lt;code&gt;mm_sd_v15_v2&lt;/code&gt;, &lt;code&gt;v3_sd15_mm&lt;/code&gt;: &lt;a href=&#34;https://huggingface.co/guoyww/animatediff/tree/cd71ae134a27ec6008b968d6419952b0c0494cf2&#34;&gt;HuggingFace&lt;/a&gt; | &lt;a href=&#34;https://drive.google.com/drive/folders/1EqLC65eR1-W-sGD0Im7fkED6c8GkiNFI&#34;&gt;Google Drive&lt;/a&gt; | &lt;a href=&#34;https://civitai.com/models/108836&#34;&gt;CivitAI&lt;/a&gt;&lt;/li&gt; &#xA;   &lt;li&gt;Stabilized finetunes of mm_sd_v14, &lt;code&gt;mm-Stabilized_mid&lt;/code&gt; and &lt;code&gt;mm-Stabilized_high&lt;/code&gt;, by &lt;strong&gt;manshoety&lt;/strong&gt;: &lt;a href=&#34;https://huggingface.co/manshoety/AD_Stabilized_Motion/tree/main&#34;&gt;HuggingFace&lt;/a&gt;&lt;/li&gt; &#xA;   &lt;li&gt;Finetunes of mm_sd_v15_v2, &lt;code&gt;mm-p_0.5.pth&lt;/code&gt; and &lt;code&gt;mm-p_0.75.pth&lt;/code&gt;, by &lt;strong&gt;manshoety&lt;/strong&gt;: &lt;a href=&#34;https://huggingface.co/manshoety/beta_testing_models/tree/main&#34;&gt;HuggingFace&lt;/a&gt;&lt;/li&gt; &#xA;   &lt;li&gt;Higher resolution finetune,&lt;code&gt;temporaldiff-v1-animatediff&lt;/code&gt; by &lt;strong&gt;CiaraRowles&lt;/strong&gt;: &lt;a href=&#34;https://huggingface.co/CiaraRowles/TemporalDiff/tree/main&#34;&gt;HuggingFace&lt;/a&gt;&lt;/li&gt; &#xA;   &lt;li&gt;FP16/safetensor versions of vanilla motion models, hosted by &lt;strong&gt;continue-revolution&lt;/strong&gt; (takes up less storage space, but uses up the same amount of VRAM as ComfyUI loads models in fp16 by default): &lt;a href=&#34;https://huggingface.co/conrevo/AnimateDiff-A1111/tree/main&#34;&gt;HuffingFace&lt;/a&gt;&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA; &lt;li&gt;Place models in one of these locations (you can rename models if you wish): &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;&lt;code&gt;ComfyUI/custom_nodes/ComfyUI-AnimateDiff-Evolved/models&lt;/code&gt;&lt;/li&gt; &#xA;   &lt;li&gt;&lt;code&gt;ComfyUI/models/animatediff_models&lt;/code&gt;&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA; &lt;li&gt;Optionally, you can use Motion LoRAs to influence movement of v2-based motion models like mm_sd_v15_v2. &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;&lt;a href=&#34;https://drive.google.com/drive/folders/1EqLC65eR1-W-sGD0Im7fkED6c8GkiNFI?usp=sharing&#34;&gt;Google Drive&lt;/a&gt; | &lt;a href=&#34;https://huggingface.co/guoyww/animatediff&#34;&gt;HuggingFace&lt;/a&gt; | &lt;a href=&#34;https://civitai.com/models/108836/animatediff-motion-modules&#34;&gt;CivitAI&lt;/a&gt;&lt;/li&gt; &#xA;   &lt;li&gt;Place Motion LoRAs in one of these locations (you can rename Motion LoRAs if you wish): &#xA;    &lt;ul&gt; &#xA;     &lt;li&gt;&lt;code&gt;ComfyUI/custom_nodes/ComfyUI-AnimateDiff-Evolved/motion_lora&lt;/code&gt;&lt;/li&gt; &#xA;     &lt;li&gt;&lt;code&gt;ComfyUI/models/animatediff_motion_lora&lt;/code&gt;&lt;/li&gt; &#xA;    &lt;/ul&gt; &lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA; &lt;li&gt;Get creative! If it works for normal image generation, it (probably) will work for AnimateDiff generations. Latent upscales? Go for it. ControlNets, one or more stacked? You betcha. Masking the conditioning of ControlNets to only affect part of the animation? Sure. Try stuff and you will be surprised by what you can do. Samples with workflows are included below.&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;p&gt;NOTE: you can also use custom locations for models/motion loras by making use of the ComfyUI &lt;code&gt;extra_model_paths.yaml&lt;/code&gt; file. The id for motion model folder is &lt;code&gt;animatediff_models&lt;/code&gt; and the id for motion lora folder is &lt;code&gt;animatediff_motion_lora&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;h1&gt;Features&lt;/h1&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Compatible with almost any vanilla or custom KSampler node.&lt;/li&gt; &#xA; &lt;li&gt;ControlNet, SparseCtrl, and IPAdapter support&lt;/li&gt; &#xA; &lt;li&gt;Infinite animation length support via sliding context windows across whole unet (Context Options) and/or within motion module (View Options)&lt;/li&gt; &#xA; &lt;li&gt;Scheduling Context Options to change across different points in the sampling process&lt;/li&gt; &#xA; &lt;li&gt;FreeInit and FreeNoise support (FreeInit is under iteration opts, FreeNoise is in SampleSettings&#39; noise_type dropdown)&lt;/li&gt; &#xA; &lt;li&gt;Mixable Motion LoRAs from &lt;a href=&#34;https://github.com/guoyww/animatediff/&#34;&gt;original AnimateDiff repository&lt;/a&gt; implemented. Caveat: the original loras really only work on v2-based motion models like &lt;code&gt;mm_sd_v15_v2&lt;/code&gt;, &lt;code&gt;mm-p_0.5.pth&lt;/code&gt;, and &lt;code&gt;mm-p_0.75.pth&lt;/code&gt;. &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;UPDATE: New motion LoRAs without the v2 limitation can now be trained via the &lt;a href=&#34;https://github.com/ExponentialML/AnimateDiff-MotionDirector&#34;&gt;AnimateDiff-MotionDirector repo&lt;/a&gt;. Shoutout to ExponentialML for implementing MotionDirector for AnimateDiff purposes!&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA; &lt;li&gt;Prompt travel using BatchPromptSchedule node from &lt;a href=&#34;https://github.com/FizzleDorf/ComfyUI_FizzNodes&#34;&gt;ComfyUI_FizzNodes&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;Scale and Effect multival inputs to control motion amount and motion model influence on generation. &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;Can be float, list of floats, or masks&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA; &lt;li&gt;Custom noise scheduling via Noise Types, Noise Layers, and seed_override/seed_offset/batch_offset in Sample Settings and related nodes&lt;/li&gt; &#xA; &lt;li&gt;AnimateDiff model v1/v2/v3 support&lt;/li&gt; &#xA; &lt;li&gt;Using multiple motion models at once via Gen2 nodes (each supporting&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://huggingface.co/hotshotco/Hotshot-XL/tree/main&#34;&gt;HotshotXL&lt;/a&gt; support (an SDXL motion module arch), &lt;code&gt;hsxl_temporal_layers.safetensors&lt;/code&gt;. &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;NOTE: You will need to use &lt;code&gt;autoselect&lt;/code&gt; or &lt;code&gt;linear (HotshotXL/default)&lt;/code&gt; beta_schedule, the sweetspot for context_length or total frames (when not using context) is 8 frames, and you will need to use an SDXL checkpoint.&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/guoyww/AnimateDiff/&#34;&gt;AnimateDiff-SDXL&lt;/a&gt; support, with corresponding model. Still in beta after several months. &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;NOTE: You will need to use &lt;code&gt;autoselect&lt;/code&gt; or &lt;code&gt;linear (AnimateDiff-SDXL)&lt;/code&gt; beta_schedule. Other than that, same rules of thumb apply to AnimateDiff-SDXL as AnimateDiff.&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://huggingface.co/wangfuyun/AnimateLCM&#34;&gt;AnimateLCM&lt;/a&gt; support &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;NOTE: You will need to use &lt;code&gt;autoselect&lt;/code&gt; or &lt;code&gt;lcm&lt;/code&gt; or &lt;code&gt;lcm[100_ots]&lt;/code&gt; beta_schedule. To use fully with LCM, be sure to use appropriate LCM lora, use the &lt;code&gt;lcm&lt;/code&gt; sampler_name in KSampler nodes, and lower cfg to somewhere around 1.0 to 2.0. Don&#39;t forget to decrease steps (minimum = ~4 steps), since LCM converges faster (less steps). Increase step count to increase detail as desired.&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://huggingface.co/wangfuyun/AnimateLCM-I2V&#34;&gt;AnimateLCM-I2V&lt;/a&gt; support, big thanks to &lt;a href=&#34;https://github.com/G-U-N&#34;&gt;Fu-Yun Wang&lt;/a&gt; for providing me the original diffusers code he created during his work on the paper &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;NOTE: Requires same settings as described for AnimateLCM above. Requires &lt;code&gt;Apply AnimateLCM-I2V Model&lt;/code&gt; Gen2 node usage so that &lt;code&gt;ref_latent&lt;/code&gt; can be provided; use &lt;code&gt;Scale Ref Image and VAE Encode&lt;/code&gt; node to preprocess input images. While this was intended as an img2video model, I found it works best for vid2vid purposes with &lt;code&gt;ref_drift=0.0&lt;/code&gt;, and to use it for only at least 1 step before switching over to other models via chaining with toher Apply AnimateDiff Model (Adv.) nodes. The &lt;code&gt;apply_ref_when_disabled&lt;/code&gt; can be set to True to allow the img_encoder to do its thing even when the &lt;code&gt;end_percent&lt;/code&gt; is reached. AnimateLCM-I2V is also extremely useful for maintaining coherence at higher resolutions (with ControlNet and SD LoRAs active, I could easily upscale from 512x512 source to 1024x1024 in a single pass). TODO: add examples&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/hehao13/CameraCtrl&#34;&gt;CameraCtrl&lt;/a&gt; support, with the pruned model you must use here: &lt;a href=&#34;https://huggingface.co/Kosinkadink/CameraCtrl/tree/main&#34;&gt;CameraCtrl_pruned.safetensors&lt;/a&gt; &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;NOTE: Requires AnimateDiff SD1.5 models, and was specifically trained for v3 model. Gen2 only, with helper nodes provided under Gen2/CameraCtrl submenu.&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/open-mmlab/PIA&#34;&gt;PIA&lt;/a&gt; support, with the model &lt;a href=&#34;https://huggingface.co/Leoxing/PIA/tree/main&#34;&gt;pia.ckpt&lt;/a&gt; &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;NOTE: You will need to use &lt;code&gt;autoselect&lt;/code&gt; or &lt;code&gt;sqrt_linear (AnimateDiff)&lt;/code&gt; beta_schedule. Requires &lt;code&gt;Apply AnimateDiff-PIA Model&lt;/code&gt; Gen2 node usage if you want to actually provide input images. The &lt;code&gt;pia_input&lt;/code&gt; can be provided via the paper&#39;s presets (&lt;code&gt;PIA Input [Paper Presets]&lt;/code&gt;) or by manually entering values (&lt;code&gt;PIA Input [Multival]&lt;/code&gt;).&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA; &lt;li&gt;AnimateDiff Keyframes to change Scale and Effect at different points in the sampling process.&lt;/li&gt; &#xA; &lt;li&gt;fp8 support; requires newest ComfyUI and torch &amp;gt;= 2.1 (decreases VRAM usage, but changes outputs)&lt;/li&gt; &#xA; &lt;li&gt;Mac M1/M2/M3 support&lt;/li&gt; &#xA; &lt;li&gt;Usage of Context Options and Sample Settings outside of AnimateDiff via Gen2 Use Evolved Sampling node&lt;/li&gt; &#xA; &lt;li&gt;Maskable and Schedulable SD LoRA (and Models as LoRA) for both AnimateDiff and StableDiffusion usage via LoRA Hooks&lt;/li&gt; &#xA; &lt;li&gt;Per-frame GLIGEN coordinates control &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;Currently requires GLIGENTextBoxApplyBatch from KJNodes to do so, but I will add native nodes to do this soon.&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA; &lt;li&gt;Image Injection mid-sampling&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;Upcoming Features&lt;/h2&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Example workflows for &lt;strong&gt;every feature&lt;/strong&gt; in AnimateDiff-Evolved repo, and hopefully a long Youtube video showing all features (Goal: before Elden Ring DLC releases. Working on it right now.)&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/XuweiyiChen/UniCtrl&#34;&gt;UniCtrl&lt;/a&gt; support&lt;/li&gt; &#xA; &lt;li&gt;Unet-Ref support so that a bunch of papers can be ported over&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/HVision-NKU/StoryDiffusion&#34;&gt;StoryDiffusion&lt;/a&gt; implementation&lt;/li&gt; &#xA; &lt;li&gt;Merging motion model weights/components, including per block customization&lt;/li&gt; &#xA; &lt;li&gt;Maskable Motion LoRA&lt;/li&gt; &#xA; &lt;li&gt;Timestep schedulable GLIGEN coordinates&lt;/li&gt; &#xA; &lt;li&gt;Dynamic memory management for motion models that load/unload at different start/end_percents&lt;/li&gt; &#xA; &lt;li&gt;Built-in prompt travel implementation&lt;/li&gt; &#xA; &lt;li&gt;Anything else AnimateDiff-related that comes out&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h1&gt;Basic Usage And Nodes&lt;/h1&gt; &#xA;&lt;p&gt;There are two families of nodes that can be used to use AnimateDiff/Evolved Sampling - &lt;strong&gt;Gen1&lt;/strong&gt; and &lt;strong&gt;Gen2&lt;/strong&gt;. Other than nodes marked specifically for Gen1/Gen2, all other nodes can be used for both Gen1 and Gen2.&lt;/p&gt; &#xA;&lt;p&gt;Gen1 and Gen2 produce the exact same results (the backend code is identical), the only difference is in how the modes are used. Overall, Gen1 is the simplest way to use basic AnimateDiff features, while Gen2 separates model loading and application from the Evolved Sampling features. This means in practice, Gen2&#39;s Use Evolved Sampling node can be used without a model model, letting Context Options and Sample Settings be used without AnimateDiff.&lt;/p&gt; &#xA;&lt;p&gt;In the following documentation, inputs/outputs will be color coded as follows:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;🟩 - required inputs&lt;/li&gt; &#xA; &lt;li&gt;🟨 - optional inputs&lt;/li&gt; &#xA; &lt;li&gt;🟦 - start as widgets, can be converted to inputs&lt;/li&gt; &#xA; &lt;li&gt;🟪 - output&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;Gen1/Gen2 Nodes&lt;/h2&gt; &#xA;&lt;table&gt; &#xA; &lt;thead&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;th&gt;① Gen1 ①&lt;/th&gt; &#xA;   &lt;th&gt;② Gen2 ②&lt;/th&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/thead&gt; &#xA; &lt;tbody&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;- All-in-One node&lt;br&gt; - If same model is loaded by multiple Gen1 nodes, duplicates RAM usage.&lt;/td&gt; &#xA;   &lt;td&gt;- Separates model loading from application and Evolved Sampling&lt;br&gt; - Enables no motion model usage while preserving Evolved Sampling features&lt;br&gt; - Enables multiple motion model usage with Apply AnimateDiff Model (Adv.) Node&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/a94029fd-5e74-467b-853c-c3ec4cf8a321&#34; alt=&#34;image&#34;&gt;&lt;/td&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/8c050151-6cfb-4350-932d-a105af78a1ec&#34; alt=&#34;image&#34;&gt;&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/c7ae9ef3-b5cd-4800-b249-da2cb73c4c1e&#34; alt=&#34;image&#34;&gt;&lt;/td&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/cffa21f7-0e33-45d1-9950-ad22eb229134&#34; alt=&#34;image&#34;&gt;&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/tbody&gt; &#xA;&lt;/table&gt; &#xA;&lt;h3&gt;Inputs&lt;/h3&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;🟩&lt;em&gt;model&lt;/em&gt;: StableDiffusion (SD) Model input.&lt;/li&gt; &#xA; &lt;li&gt;🟦&lt;em&gt;model_name&lt;/em&gt;: AnimateDiff (AD) model to load and/or apply during the sampling process. Certain motion models work with SD1.5, while others work with SDXL.&lt;/li&gt; &#xA; &lt;li&gt;🟦&lt;em&gt;beta_schedule&lt;/em&gt;: Applies selected beta_schedule to SD model; &lt;code&gt;autoselect&lt;/code&gt; will automatically select the recommended beta_schedule for selected motion models - or will use_existing if no motion model selected for Gen2.&lt;/li&gt; &#xA; &lt;li&gt;🟨&lt;em&gt;context_options&lt;/em&gt;: Context Options node from the context_opts submenu - should be used when needing to go back the sweetspot of an AnimateDiff model. Works with no motion models as well (Gen2 only).&lt;/li&gt; &#xA; &lt;li&gt;🟨&lt;em&gt;sample_settings&lt;/em&gt;: Sample Settings node input - used to apply custom sampling options such as FreeNoise (noise_type), FreeInit (iter_opts), custom seeds, Noise Layers, etc. Works with no motion models as well (Gen2 only).&lt;/li&gt; &#xA; &lt;li&gt;🟨&lt;em&gt;motion_lora&lt;/em&gt;: For v2-based models, Motion LoRA will influence the generated movement. Only a few official motion LoRAs were released - soon, I will be working with some community members to create training code to create (and test) new Motion LoRAs that might work with non-v2 models.&lt;/li&gt; &#xA; &lt;li&gt;🟨&lt;em&gt;ad_settings&lt;/em&gt;: Modifies motion models during loading process, allowing the Positional Encoders (PEs) to be adjusted to extend a model&#39;s sweetspot or modify overall motion.&lt;/li&gt; &#xA; &lt;li&gt;🟨&lt;em&gt;ad_keyframes&lt;/em&gt;: Allows scheduling of &lt;code&gt;scale_multival&lt;/code&gt; and &lt;code&gt;effect_multival&lt;/code&gt; inputs across sampling timesteps.&lt;/li&gt; &#xA; &lt;li&gt;🟨&lt;em&gt;scale_multival&lt;/em&gt;: Uses a &lt;code&gt;Multival&lt;/code&gt; input (defaults to &lt;code&gt;1.0&lt;/code&gt;). Previously called motion_scale, it directly influences the amount of motion generated by the model. With the Multival nodes, it can accept a float, list of floats, and/or mask inputs, allowing different scale to be applied to not only different frames, but different areas of frames (including per-frame).&lt;/li&gt; &#xA; &lt;li&gt;🟨&lt;em&gt;effect_multival&lt;/em&gt;: Uses a &lt;code&gt;Multival&lt;/code&gt; input (defaults to &lt;code&gt;1.0&lt;/code&gt;). Determines the influence of the motion models on the sampling process. Value of &lt;code&gt;0.0&lt;/code&gt; is equivalent to normal SD output with no AnimateDiff influence. With the Multival nodes, it can accept a float, list of floats, and/or mask inputs, allowing different effect amount to be applied to not only different frames, but different areas of frames (including per-frame).&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h4&gt;Gen2-Only Inputs&lt;/h4&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;🟨&lt;em&gt;motion_model&lt;/em&gt;: Input for loaded motion_model.&lt;/li&gt; &#xA; &lt;li&gt;🟨&lt;em&gt;m_models&lt;/em&gt;: One (or more) motion models outputted from Apply AnimateDiff Model nodes.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h4&gt;Gen2 Adv.-Only Inputs&lt;/h4&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;🟨&lt;em&gt;prev_m_models&lt;/em&gt;: Previous applied motion models to use alongside this one.&lt;/li&gt; &#xA; &lt;li&gt;🟨&lt;em&gt;start_percent&lt;/em&gt;: Determines when connected motion_model should take effect (supercedes any ad_keyframes).&lt;/li&gt; &#xA; &lt;li&gt;🟨&lt;em&gt;end_percent&lt;/em&gt;: Determines when connected motion_model should stop taking effect (supercedes any ad_keyframes).&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h4&gt;Gen1 (Legacy) Inputs&lt;/h4&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;🟦&lt;em&gt;motion_scale&lt;/em&gt;: legacy version of &lt;code&gt;scale_multival&lt;/code&gt;, can only be a float.&lt;/li&gt; &#xA; &lt;li&gt;🟦&lt;em&gt;apply_v2_models_properly&lt;/em&gt;: backwards compatible toggle for months-old workflows that used code that did not turn off groupnorm hack for v2 models. &lt;strong&gt;Only affects v2 models, nothing else.&lt;/strong&gt; All nodes default this value to &lt;code&gt;True&lt;/code&gt; now.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h3&gt;Outputs&lt;/h3&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;🟪&lt;em&gt;MODEL&lt;/em&gt;: Injected SD model with Evolved Sampling/AnimateDiff.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h4&gt;Gen2-Only Outputs&lt;/h4&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;🟪&lt;em&gt;MOTION_MODEL&lt;/em&gt;: Loaded motion model.&lt;/li&gt; &#xA; &lt;li&gt;🟪&lt;em&gt;M_MODELS&lt;/em&gt;: One (or more) applied motion models, to be either plugged into Use Evolved Sampling or another Apply AnimateDiff Model (Adv.) node.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;Multival Nodes&lt;/h2&gt; &#xA;&lt;p&gt;For Multival inputs, these nodes allow the use of floats, list of floats, and/or masks to use as input. Scaled Mask node allows customization of dark/light areas of masks in terms of what the values correspond to.&lt;/p&gt; &#xA;&lt;table&gt; &#xA; &lt;thead&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;th&gt;Node&lt;/th&gt; &#xA;   &lt;th&gt;Inputs&lt;/th&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/thead&gt; &#xA; &lt;tbody&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/d4c6a63f-703a-402b-989e-ab4d04141c7a&#34; alt=&#34;image&#34;&gt;&lt;/td&gt; &#xA;   &lt;td&gt;🟨&lt;em&gt;mask_optional&lt;/em&gt;: Mask for float values - black means 0.0, white means 1.0 (multiplied by float_val). &lt;br&gt; 🟦&lt;em&gt;float_val&lt;/em&gt;: Float multiplier.&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/bc100bec-0407-47c8-aebd-f74f2417711e&#34; alt=&#34;image&#34;&gt;&lt;/td&gt; &#xA;   &lt;td&gt;🟩&lt;em&gt;mask&lt;/em&gt;: Mask for float values. &lt;br&gt; 🟦&lt;em&gt;min_float_val&lt;/em&gt;: Minimum value. &lt;br&gt;🟦&lt;em&gt;max_float_val&lt;/em&gt;: Maximum value. &lt;br&gt; 🟦&lt;em&gt;scaling&lt;/em&gt;: When &lt;code&gt;absolute&lt;/code&gt;, black means min_float_val, white means max_float_val. When &lt;code&gt;relative&lt;/code&gt;, darkest area in masks (total) means min_float_val, lighest area in massk (total) means max_float_val.&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/tbody&gt; &#xA;&lt;/table&gt; &#xA;&lt;h2&gt;AnimateDiff Keyframe&lt;/h2&gt; &#xA;&lt;p&gt;Allows scheduling (in terms of timesteps) for scale_multival and effect_multival.&lt;/p&gt; &#xA;&lt;p&gt;The two settings to determine schedule are &lt;em&gt;&lt;strong&gt;start_percent&lt;/strong&gt;&lt;/em&gt; and &lt;em&gt;&lt;strong&gt;guarantee_steps&lt;/strong&gt;&lt;/em&gt;. When multiple keyframes have the same start_percent, they will be executed in the order they are connected, and run for guarantee_steps before moving on to the next node.&lt;/p&gt; &#xA;&lt;table&gt; &#xA; &lt;thead&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;th&gt;Node&lt;/th&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/thead&gt; &#xA; &lt;tbody&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/dca73cdc-157a-47db-bed2-6ba584dceccd&#34; alt=&#34;image&#34;&gt;&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/tbody&gt; &#xA;&lt;/table&gt; &#xA;&lt;h3&gt;Inputs&lt;/h3&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;🟨&lt;em&gt;prev_ad_keyframes&lt;/em&gt;: Chained keyframes to create schedule.&lt;/li&gt; &#xA; &lt;li&gt;🟨&lt;em&gt;scale_multival&lt;/em&gt;: Value of scale to use for this keyframe.&lt;/li&gt; &#xA; &lt;li&gt;🟨&lt;em&gt;effect_multival&lt;/em&gt;: Value of effect to use for this keyframe.&lt;/li&gt; &#xA; &lt;li&gt;🟦&lt;em&gt;start_percent&lt;/em&gt;: Percent of timesteps to start usage of this keyframe. If multiple keyframes have same start_percent, order of execution is determined by their chained order, and will last for guarantee_steps timesteps.&lt;/li&gt; &#xA; &lt;li&gt;🟦&lt;em&gt;guarantee_steps&lt;/em&gt;: Minimum amount of steps the keyframe will be used - when set to 0, this keyframe will only be used when no other keyframes are better matches for current timestep.&lt;/li&gt; &#xA; &lt;li&gt;🟦&lt;em&gt;inherit_missing&lt;/em&gt;: When set to &lt;code&gt;True&lt;/code&gt;, any missing scale_multival or effect_multival inputs will inherit the previous keyframe&#39;s values - if the previous keyframe also inherits missing, the last inherited value will be used.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;Context Options and View Options&lt;/h2&gt; &#xA;&lt;p&gt;These nodes provide techniques used to extend the lengths of animations to get around the sweetspot limitations of AnimateDiff models (typically 16 frames) and HotshotXL model (8 frames).&lt;/p&gt; &#xA;&lt;p&gt;Context Options works by diffusing portions of the animation at a time, including main SD diffusion, ControlNets, IPAdapters, etc., effectively limiting VRAM usage to be equivalent to be context_length latents.&lt;/p&gt; &#xA;&lt;p&gt;View Options, in contrast, work by portioning the latents seen by the motion model. This does NOT decrease VRAM usage, but in general is more stable and faster than Context Options, since the latents don&#39;t have to go through the whole SD unet.&lt;/p&gt; &#xA;&lt;p&gt;Context Options and View Options can be combined to get the best of both worlds - longer context_length can be used to gain more stable output, at the cost of using more VRAM (since context_length determines how much SD sampling is done at the same time on the GPU). Provided you have the VRAM, you could also use Views Only Context Options to use only View Options (and automatically make context_length equivalent to full latents) to get a speed boost in return for the higher VRAM usage.&lt;/p&gt; &#xA;&lt;p&gt;There are two types of Context/View Options: &lt;em&gt;&lt;strong&gt;Standard&lt;/strong&gt;&lt;/em&gt; and &lt;em&gt;&lt;strong&gt;Looped&lt;/strong&gt;&lt;/em&gt;. &lt;em&gt;&lt;strong&gt;Standard&lt;/strong&gt;&lt;/em&gt; options do not cause looping in the output. &lt;em&gt;&lt;strong&gt;Looped&lt;/strong&gt;&lt;/em&gt; options, as the name implies, causes looping in the output (from end to beginning). Prior to the code rework, the only context available was the looping kind.&lt;/p&gt; &#xA;&lt;p&gt;&lt;em&gt;&lt;strong&gt;I recommend using Standard Static at first when not wanting looped outputs.&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt; &#xA;&lt;p&gt;In the below animations, &lt;em&gt;&lt;strong&gt;green&lt;/strong&gt;&lt;/em&gt; shows the Contexts, and &lt;em&gt;&lt;strong&gt;red&lt;/strong&gt;&lt;/em&gt; shows the Views. TL;DR green is the amount of latents that are loaded into VRAM (and sampled), while red is the amount of latents that get passed into the motion model at a time.&lt;/p&gt; &#xA;&lt;h3&gt;Context Options◆Standard Static&lt;/h3&gt; &#xA;&lt;table&gt; &#xA; &lt;thead&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;th&gt;Behavior&lt;/th&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/thead&gt; &#xA; &lt;tbody&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/b26792d6-0f41-4f07-93aa-e5ee83f4d90e&#34; alt=&#34;anim__00005&#34;&gt; &lt;br&gt; (latent count: 64, context_length: 16, context_overlap: 4, total steps: 20)&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/tbody&gt; &#xA;&lt;/table&gt; &#xA;&lt;table&gt; &#xA; &lt;thead&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;th&gt;Node&lt;/th&gt; &#xA;   &lt;th&gt;Inputs&lt;/th&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/thead&gt; &#xA; &lt;tbody&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/a4a5f38e-3a1b-4328-9537-ad17567aed75&#34; alt=&#34;image&#34;&gt;&lt;/td&gt; &#xA;   &lt;td&gt;🟦&lt;em&gt;context_length&lt;/em&gt;: Amount of latents to diffuse at once.&lt;br&gt; 🟦&lt;em&gt;context_overlap&lt;/em&gt;: Minimum common latents between adjacent windows.&lt;br&gt; 🟦&lt;em&gt;fuse_method&lt;/em&gt;: Method for averaging results of windows.&lt;br&gt; 🟦&lt;em&gt;use_on_equal_length&lt;/em&gt;: When True, allows context to be used when latent count matches context_length.&lt;br&gt; 🟦&lt;em&gt;start_percent&lt;/em&gt;: When multiple Context Options are chained, allows scheduling.&lt;br&gt; 🟦&lt;em&gt;guarantee_steps&lt;/em&gt;: When scheduling contexts, determines the &lt;em&gt;minimum&lt;/em&gt; amount of sampling steps context should be used.&lt;br&gt; 🟦&lt;em&gt;context_length&lt;/em&gt;: Amount of latents to diffuse at once.&lt;br&gt; 🟨&lt;em&gt;prev_context&lt;/em&gt;: Allows chaining of contexts.&lt;br&gt; 🟨&lt;em&gt;view_options&lt;/em&gt;: When context_length &amp;gt; view_length (unless otherwise specified), allows view_options to be used within each context window.&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/tbody&gt; &#xA;&lt;/table&gt; &#xA;&lt;h3&gt;Context Options◆Standard Uniform&lt;/h3&gt; &#xA;&lt;table&gt; &#xA; &lt;thead&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;th&gt;Behavior&lt;/th&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/thead&gt; &#xA; &lt;tbody&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/69707e3d-f49e-4368-89d5-616af2631594&#34; alt=&#34;anim__00006&#34;&gt; &lt;br&gt; (latent count: 64, context_length: 16, context_overlap: 4, context_stride: 1, total steps: 20)&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/7fc083b4-406f-4809-94ca-b389784adcab&#34; alt=&#34;anim__00010&#34;&gt; &lt;br&gt; (latent count: 64, context_length: 16, context_overlap: 4, context_stride: 2, total steps: 20)&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/tbody&gt; &#xA;&lt;/table&gt; &#xA;&lt;table&gt; &#xA; &lt;thead&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;th&gt;Node&lt;/th&gt; &#xA;   &lt;th&gt;Inputs&lt;/th&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/thead&gt; &#xA; &lt;tbody&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/c2c8c7ea-66b6-408d-be46-1d805ecd64d1&#34; alt=&#34;image&#34;&gt;&lt;/td&gt; &#xA;   &lt;td&gt;🟦&lt;em&gt;context_length&lt;/em&gt;: Amount of latents to diffuse at once.&lt;br&gt; 🟦&lt;em&gt;context_overlap&lt;/em&gt;: Minimum common latents between adjacent windows.&lt;br&gt; 🟦&lt;em&gt;context_stride&lt;/em&gt;: Maximum 2^(stride-1) distance between adjacent latents.&lt;br&gt; 🟦&lt;em&gt;fuse_method&lt;/em&gt;: Method for averaging results of windows.&lt;br&gt; 🟦&lt;em&gt;use_on_equal_length&lt;/em&gt;: When True, allows context to be used when latent count matches context_length.&lt;br&gt; 🟦&lt;em&gt;start_percent&lt;/em&gt;: When multiple Context Options are chained, allows scheduling.&lt;br&gt; 🟦&lt;em&gt;guarantee_steps&lt;/em&gt;: When scheduling contexts, determines the &lt;em&gt;minimum&lt;/em&gt; amount of sampling steps context should be used.&lt;br&gt; 🟦&lt;em&gt;context_length&lt;/em&gt;: Amount of latents to diffuse at once.&lt;br&gt; 🟨&lt;em&gt;prev_context&lt;/em&gt;: Allows chaining of contexts.&lt;br&gt; 🟨&lt;em&gt;view_options&lt;/em&gt;: When context_length &amp;gt; view_length (unless otherwise specified), allows view_options to be used within each context window.&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/tbody&gt; &#xA;&lt;/table&gt; &#xA;&lt;h3&gt;Context Options◆Looped Uniform&lt;/h3&gt; &#xA;&lt;table&gt; &#xA; &lt;thead&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;th&gt;Behavior&lt;/th&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/thead&gt; &#xA; &lt;tbody&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/d08ac1c9-2cec-4c9e-b257-0a804448d41b&#34; alt=&#34;anim__00008&#34;&gt; &lt;br&gt; (latent count: 64, context_length: 16, context_overlap: 4, context_stride: 1, closed_loop: False, total steps: 20)&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/61e0311b-b623-423f-bbcb-eb4eb02e9002&#34; alt=&#34;anim__00009&#34;&gt; &lt;br&gt; (latent count: 64, context_length: 16, context_overlap: 4, context_stride: 1, closed_loop: True, total steps: 20)&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/tbody&gt; &#xA;&lt;/table&gt; &#xA;&lt;table&gt; &#xA; &lt;thead&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;th&gt;Node&lt;/th&gt; &#xA;   &lt;th&gt;Inputs&lt;/th&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/thead&gt; &#xA; &lt;tbody&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/c2c8c7ea-66b6-408d-be46-1d805ecd64d1&#34; alt=&#34;image&#34;&gt;&lt;/td&gt; &#xA;   &lt;td&gt;🟦&lt;em&gt;context_length&lt;/em&gt;: Amount of latents to diffuse at once.&lt;br&gt; 🟦&lt;em&gt;context_overlap&lt;/em&gt;: Minimum common latents between adjacent windows.&lt;br&gt; 🟦&lt;em&gt;context_stride&lt;/em&gt;: Maximum 2^(stride-1) distance between adjacent latents.&lt;br&gt; 🟦&lt;em&gt;closed_loop&lt;/em&gt;: When True, adds additional windows to enhance looping.&lt;br&gt; 🟦&lt;em&gt;fuse_method&lt;/em&gt;: Method for averaging results of windows.&lt;br&gt; 🟦&lt;em&gt;use_on_equal_length&lt;/em&gt;: When True, allows context to be used when latent count matches context_length - allows loops to be made when latent count == context_length.&lt;br&gt; 🟦&lt;em&gt;start_percent&lt;/em&gt;: When multiple Context Options are chained, allows scheduling.&lt;br&gt; 🟦&lt;em&gt;guarantee_steps&lt;/em&gt;: When scheduling contexts, determines the &lt;em&gt;minimum&lt;/em&gt; amount of sampling steps context should be used.&lt;br&gt; 🟦&lt;em&gt;context_length&lt;/em&gt;: Amount of latents to diffuse at once.&lt;br&gt; 🟨&lt;em&gt;prev_context&lt;/em&gt;: Allows chaining of contexts.&lt;br&gt; 🟨&lt;em&gt;view_options&lt;/em&gt;: When context_length &amp;gt; view_length (unless otherwise specified), allows view_options to be used within each context window.&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/tbody&gt; &#xA;&lt;/table&gt; &#xA;&lt;h3&gt;Context Options◆Views Only [VRAM⇈]&lt;/h3&gt; &#xA;&lt;table&gt; &#xA; &lt;thead&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;th&gt;Behavior&lt;/th&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/thead&gt; &#xA; &lt;tbody&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/f2e422a4-c894-4e89-8f35-1964b89f369d&#34; alt=&#34;anim__00011&#34;&gt; &lt;br&gt; (latent count: 64, view_length: 16, view_overlap: 4, View Options◆Standard Static, total steps: 20)&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/tbody&gt; &#xA;&lt;/table&gt; &#xA;&lt;table&gt; &#xA; &lt;thead&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;th&gt;Node&lt;/th&gt; &#xA;   &lt;th&gt;Inputs&lt;/th&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/thead&gt; &#xA; &lt;tbody&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/8cd6a0a4-ee8a-46c3-b04b-a100f87025b3&#34; alt=&#34;image&#34;&gt;&lt;/td&gt; &#xA;   &lt;td&gt;🟩&lt;em&gt;view_opts_req&lt;/em&gt;: View_options to be used across all latents. &lt;br&gt; 🟨&lt;em&gt;prev_context&lt;/em&gt;: Allows chaining of contexts.&lt;br&gt;&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/tbody&gt; &#xA;&lt;/table&gt; &#xA;&lt;p&gt;There are View Options equivalent of these schedules:&lt;/p&gt; &#xA;&lt;h3&gt;View Options◆Standard Static&lt;/h3&gt; &#xA;&lt;table&gt; &#xA; &lt;thead&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;th&gt;Behavior&lt;/th&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/thead&gt; &#xA; &lt;tbody&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/7aee4ccb-b669-42fd-a1b5-2005003d5f8d&#34; alt=&#34;anim__00012&#34;&gt; &lt;br&gt; (latent count: 64, view_length: 16, view_overlap: 4, Context Options◆Standard Static, context_length: 32, context_overlap: 8, total steps: 20)&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/tbody&gt; &#xA;&lt;/table&gt; &#xA;&lt;table&gt; &#xA; &lt;thead&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;th&gt;Node&lt;/th&gt; &#xA;   &lt;th&gt;Inputs&lt;/th&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/thead&gt; &#xA; &lt;tbody&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/4b22c73f-99cb-4781-bd33-e1b3db848207&#34; alt=&#34;image&#34;&gt;&lt;/td&gt; &#xA;   &lt;td&gt;🟦&lt;em&gt;view_length&lt;/em&gt;: Amount of latents in context to pass into motion model at a time.&lt;br&gt; 🟦&lt;em&gt;view_overlap&lt;/em&gt;: Minimum common latents between adjacent windows.&lt;br&gt; 🟦&lt;em&gt;fuse_method&lt;/em&gt;: Method for averaging results of windows.&lt;br&gt;&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/tbody&gt; &#xA;&lt;/table&gt; &#xA;&lt;h3&gt;View Options◆Standard Uniform&lt;/h3&gt; &#xA;&lt;table&gt; &#xA; &lt;thead&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;th&gt;Behavior&lt;/th&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/thead&gt; &#xA; &lt;tbody&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/faa2cd26-9f94-4fce-90b2-8acec84b444e&#34; alt=&#34;anim__00015&#34;&gt; &lt;br&gt; (latent count: 64, view_length: 16, view_overlap: 4, view_stride: 1, Context Options◆Standard Static, context_length: 32, context_overlap: 8, total steps: 20)&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/tbody&gt; &#xA;&lt;/table&gt; &#xA;&lt;table&gt; &#xA; &lt;thead&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;th&gt;Node&lt;/th&gt; &#xA;   &lt;th&gt;Inputs&lt;/th&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/thead&gt; &#xA; &lt;tbody&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/bbf017e6-3545-4043-ba41-fcbe2f54496a&#34; alt=&#34;image&#34;&gt;&lt;/td&gt; &#xA;   &lt;td&gt;🟦&lt;em&gt;view_length&lt;/em&gt;: Amount of latents in context to pass into motion model at a time.&lt;br&gt; 🟦&lt;em&gt;view_overlap&lt;/em&gt;: Minimum common latents between adjacent windows.&lt;br&gt; 🟦&lt;em&gt;view_stride&lt;/em&gt;: Maximum 2^(stride-1) distance between adjacent latents.&lt;br&gt; 🟦&lt;em&gt;fuse_method&lt;/em&gt;: Method for averaging results of windows.&lt;br&gt;&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/tbody&gt; &#xA;&lt;/table&gt; &#xA;&lt;h3&gt;View Options◆Looped Uniform&lt;/h3&gt; &#xA;&lt;table&gt; &#xA; &lt;thead&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;th&gt;Behavior&lt;/th&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/thead&gt; &#xA; &lt;tbody&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/8922b44b-cb19-4b2a-8486-2df8a46bf573&#34; alt=&#34;anim__00016&#34;&gt; &lt;br&gt; (latent count: 64, view_length: 16, view_overlap: 4, view_stride: 1, closed_loop: False, Context Options◆Standard Static, context_length: 32, context_overlap: 8, total steps: 20)&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;NOTE: this one is probably not going to come out looking well unless you are using this for a very specific reason.&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/tbody&gt; &#xA;&lt;/table&gt; &#xA;&lt;table&gt; &#xA; &lt;thead&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;th&gt;Node&lt;/th&gt; &#xA;   &lt;th&gt;Inputs&lt;/th&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/thead&gt; &#xA; &lt;tbody&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/c58fe4d4-81a8-436b-8028-9e81c2ace18a&#34; alt=&#34;image&#34;&gt;&lt;/td&gt; &#xA;   &lt;td&gt;🟦&lt;em&gt;view_length&lt;/em&gt;: Amount of latents in context to pass into motion model at a time.&lt;br&gt; 🟦&lt;em&gt;view_overlap&lt;/em&gt;: Minimum common latents between adjacent windows.&lt;br&gt; 🟦&lt;em&gt;view_stride&lt;/em&gt;: Maximum 2^(stride-1) distance between adjacent latents.&lt;br&gt; 🟦&lt;em&gt;closed_loop&lt;/em&gt;: When True, adds additional windows to enhance looping.&lt;br&gt; 🟦&lt;em&gt;use_on_equal_length&lt;/em&gt;: When True, allows context to be used when latent count matches context_length - allows loops to be made when latent count == context_length.&lt;br&gt; 🟦&lt;em&gt;fuse_method&lt;/em&gt;: Method for averaging results of windows.&lt;br&gt;&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/tbody&gt; &#xA;&lt;/table&gt; &#xA;&lt;h2&gt;Sample Settings&lt;/h2&gt; &#xA;&lt;p&gt;The Sample Settings node allows customization of the sampling process beyond what is exposed on most KSampler nodes. With its default values, it will NOT have any effect, and can safely be attached without changing any behavior.&lt;/p&gt; &#xA;&lt;p&gt;TL;DR To use FreeNoise, select &lt;code&gt;FreeNoise&lt;/code&gt; from the noise_type dropdown. FreeNoise does not decrease performance in any way. To use FreeInit, attach the FreeInit Iteration Options to the iteration_opts input. NOTE: FreeInit, despite it&#39;s name, works by resampling the latents &lt;code&gt;iterations&lt;/code&gt; amount of times - this means if you use iteration=2, total sampling time will be exactly twice as slow since it will be performing the sampling twice.&lt;/p&gt; &#xA;&lt;p&gt;Noise Layers with the inputs of the same name (or very close to same name) have same intended behavior as the ones for Sample Settings - refer to the inputs below.&lt;/p&gt; &#xA;&lt;table&gt; &#xA; &lt;thead&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;th&gt;Node&lt;/th&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/thead&gt; &#xA; &lt;tbody&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/563a13cf-7aed-4acc-9ce3-1556660a34c2&#34; alt=&#34;image&#34;&gt;&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/tbody&gt; &#xA;&lt;/table&gt; &#xA;&lt;h3&gt;Inputs&lt;/h3&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;🟨&lt;em&gt;noise_layers&lt;/em&gt;: Customizable, stackable noise to add to/modify initial noise.&lt;/li&gt; &#xA; &lt;li&gt;🟨&lt;em&gt;iteration_opts&lt;/em&gt;: Options for determining if (and how) sampling should be repeated consecutively; if you want to check out FreeInit, this is how to use it.&lt;/li&gt; &#xA; &lt;li&gt;🟨&lt;em&gt;seed_override&lt;/em&gt;: Accepts a single int to use a seed instead of the seed passed into the KSampler, or a list of ints (like via FizzNodes&#39; BatchedValueSchedule) to assign individual seeds to each latent in the batch.&lt;/li&gt; &#xA; &lt;li&gt;🟦&lt;em&gt;seed_offset&lt;/em&gt;: When not set to 0, adds value to current seed, predictably changing it, whatever the original seed may have been.&lt;/li&gt; &#xA; &lt;li&gt;🟦&lt;em&gt;batch_offset&lt;/em&gt;: When not set to 0, will &#39;offset&#39; the noise as if the first latent was actually the batch_offset-nth latent, shifting all the noises over.&lt;/li&gt; &#xA; &lt;li&gt;🟦&lt;em&gt;noise_type&lt;/em&gt;: Selects type of noise to be generated. Values include: &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;&lt;strong&gt;default&lt;/strong&gt;: generates different noise for all latents as usual.&lt;/li&gt; &#xA;   &lt;li&gt;&lt;strong&gt;constant&lt;/strong&gt;: generates exact same noise for all latents (based on seed).&lt;/li&gt; &#xA;   &lt;li&gt;&lt;strong&gt;empty&lt;/strong&gt;: generates no noise for all latents (as if noise was turned off).&lt;/li&gt; &#xA;   &lt;li&gt;&lt;strong&gt;repeated_context&lt;/strong&gt;: repeats noise every context_length (or view_length) amount of latents; stabilizes longer generations, but has very obvious repetition.&lt;/li&gt; &#xA;   &lt;li&gt;&lt;strong&gt;FreeNoise&lt;/strong&gt;: repeats noise such that it is repeated every context_length (or view_length), but the overlapped noise between contexts/views is shuffled to make repetition less prevelant while still achieving stabilization.&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA; &lt;li&gt;🟦&lt;em&gt;seed_gen&lt;/em&gt;: Allows choosing between ComfyUI and Auto1111 methods of noise generation. One is not better than the other (noise distributions are the same), they are just different methods. &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;&lt;strong&gt;comfy&lt;/strong&gt;: Noise is generated for the entire latent batch tensor at once based on the provided seed.&lt;/li&gt; &#xA;   &lt;li&gt;&lt;strong&gt;auto1111&lt;/strong&gt;: Noise is generated individually for each latent, with each latent receiving an increasing +1 seed offset (first latent uses seed, second latent uses seed+1, etc.).&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA; &lt;li&gt;🟦&lt;em&gt;adapt_denoise_steps&lt;/em&gt;: When True, KSamplers with a &#39;denoise&#39; input will automatically scale down the total steps to run like the default options in Auto1111. &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;&lt;strong&gt;True&lt;/strong&gt;: Steps will decrease with lower denoise, i.e. 20 steps with 0.5 denoise will be 10 total steps executed, but sigmas will be selected that still achieve 0.5 denoise. Trades speed for quality (since less steps are sampled).&lt;/li&gt; &#xA;   &lt;li&gt;&lt;strong&gt;False&lt;/strong&gt;: Default behavior; 20 steps with 0.5 denoise will execute 20 steps.&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;Iteration Options&lt;/h2&gt; &#xA;&lt;p&gt;These options allow KSamplers to re-sample the same latents without needing to chain multiple KSamplers together, and also allows specialized iteration behavior to implement features such as FreeInit.&lt;/p&gt; &#xA;&lt;h3&gt;Default Iteration Options&lt;/h3&gt; &#xA;&lt;p&gt;Simply re-runs the KSampler, plugging in the output of the previous iteration into the next one. At the dafault iterations=1, it is no different than not having this node plugged in at all.&lt;/p&gt; &#xA;&lt;table&gt; &#xA; &lt;thead&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;th&gt;Node&lt;/th&gt; &#xA;   &lt;th&gt;Inputs&lt;/th&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/thead&gt; &#xA; &lt;tbody&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/23c5e698-6eff-43cc-92e9-488e9b5ca96a&#34; alt=&#34;image&#34;&gt;&lt;/td&gt; &#xA;   &lt;td&gt;🟦&lt;em&gt;iterations&lt;/em&gt;: Total amount of times KSampler should run back-to-back. &lt;br&gt; 🟦&lt;em&gt;iter_batch_offset&lt;/em&gt;: batch_offset to apply on each subsequent iteration. &lt;br&gt; 🟦&lt;em&gt;iter_seed_offset&lt;/em&gt;: seed_offset to apply on each subsequent iteration.&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/tbody&gt; &#xA;&lt;/table&gt; &#xA;&lt;h3&gt;FreeInit Iteration Options&lt;/h3&gt; &#xA;&lt;p&gt;Implements &lt;a href=&#34;https://github.com/TianxingWu/FreeInit&#34;&gt;FreeInit&lt;/a&gt;, which is the idea that AnimateDiff was trained on latents of existing videos (images with temporal coherence between them) that were then noised rather than from random initial noise, and that when noising existing latents, low-frequency data still remains in the noised latents. It combines the low-frequency noise from existing videos (or, as is the default behavior, the previous iteration) with the high-frequency noise in randomly generated noise to run the subsequent iterations. &lt;em&gt;&lt;strong&gt;Each iteration is a full sample - 2 iterations means it will take twice as long to run as compared to having 1 iteration/no iteration_opts connected.&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt; &#xA;&lt;p&gt;When apply_to_1st_iter is False, the noising/low-freq/high-freq combination will not occur on the first iteration, with the assumption that there are no useful latents passed in to do the noise combining in the first place, thus requiring at least 2 iterations for FreeInit to take effect.&lt;/p&gt; &#xA;&lt;p&gt;If you have an existing set of latents to use to get low-freq noise from, you may set apply_to_1st_iter to True, and then even if you set iterations=1, FreeInit will still take effect.&lt;/p&gt; &#xA;&lt;table&gt; &#xA; &lt;thead&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;th&gt;Node&lt;/th&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/thead&gt; &#xA; &lt;tbody&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/21404e4f-ab67-44ed-8bf9-e510bc2571de&#34; alt=&#34;image&#34;&gt;&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/tbody&gt; &#xA;&lt;/table&gt; &#xA;&lt;h4&gt;Inputs&lt;/h4&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt; &lt;p&gt;🟦&lt;em&gt;iterations&lt;/em&gt;: Total amount of times KSampler should run back-to-back. Refer to explanation above why it is 2 by default (and when it can be set to 1 instead).&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;🟦&lt;em&gt;init_type&lt;/em&gt;: Code implementation for applying FreeInit.&lt;/p&gt; &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;&lt;em&gt;&lt;strong&gt;FreeInit [sampler sigma]&lt;/strong&gt;&lt;/em&gt;: likely closest to intended implementation, and gets the sigma for noising from the sampler instead of the model (when possible).&lt;/li&gt; &#xA;   &lt;li&gt;&lt;em&gt;&lt;strong&gt;FreeInit [model sigma]&lt;/strong&gt;&lt;/em&gt;: gets sigma for noising from the model; when using Custom KSampler, this is the method that will be used for both FreeInit options.&lt;/li&gt; &#xA;   &lt;li&gt;&lt;em&gt;&lt;strong&gt;DinkInit_v1&lt;/strong&gt;&lt;/em&gt;: my initial, flawed implementation of FreeInit before I figured out how to exactly copy the noising behavior. By sheer luck and trial and error, I managed to have it actually sort of work with this method. Mainly for backwards compatibility now, but might produce useful results too.&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;🟦&lt;em&gt;apply_to_1st_iter&lt;/em&gt;: When set to True, will do FreeInit low-freq/high-freq combo work even on the 1st iteration it runs Refer to explanation in the above FreeInit Iteration Options section for when this can be set to True.&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;🟦&lt;em&gt;init_type&lt;/em&gt;: Code implementation for applying FreeInit.&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;🟦&lt;em&gt;iter_batch_offset&lt;/em&gt;: batch_offset to apply on each subsequent iteration.&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;🟦&lt;em&gt;iter_seed_offset&lt;/em&gt;: seed_offset to apply on each subsequent iteration. Defaults to 1 so that new random noise is used for each iteration.&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;🟦&lt;em&gt;filter&lt;/em&gt;: Determines low-freq filter to apply to noise. Very technical, look into code/online resources to figure out how the individual filters act.&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;🟦&lt;em&gt;d_s&lt;/em&gt;: Spatial parameter of filter (within latents, I think); very technical. Look into code/online resources if you wish to know what exactly it does.&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;🟦&lt;em&gt;d_t&lt;/em&gt;: Temporal parameter of filter (across latents, I think); very technical. Look into code/online resources if you wish to know what exactly it does.&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;🟦&lt;em&gt;n_butterworth&lt;/em&gt;: Only applies to &lt;code&gt;butterworth&lt;/code&gt; filter; very technical. Look into code/online resources if you wish to know what exactly it does.&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;🟦&lt;em&gt;sigma_step&lt;/em&gt;: Noising step to use/emulate when noising latents to then get low-freq noise out of. 999 actually means last (-1), and any number under 999 will mean the distance away from last. Leave at 999 unless you know what you&#39;re trying to do with it.&lt;/p&gt; &lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;Noise Layers&lt;/h2&gt; &#xA;&lt;p&gt;These nodes allow initial noise to be added onto, weighted, or replaced. In near future, I will add the ability for masks to &#39;move&#39; the noise relative to the masks&#39; movement instead of just &#39;cutting and pasting&#39; the noise.&lt;/p&gt; &#xA;&lt;p&gt;The inputs that are shared with Sample Settings have the same exact effect - only new option is in seed_gen_override, which by default will use same seed_gen as Sample Settings (use existing). You can make a noise layer use a different seed_gen strategy at will, or use a different seed/set of seeds, etc.&lt;/p&gt; &#xA;&lt;p&gt;The &lt;code&gt;mask_optional&lt;/code&gt; parameter determines where on the initial noise the noise layer should be applied.&lt;/p&gt; &#xA;&lt;table&gt; &#xA; &lt;thead&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;th&gt;Node&lt;/th&gt; &#xA;   &lt;th&gt;Behavior + Inputs&lt;/th&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/thead&gt; &#xA; &lt;tbody&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/66487969-669d-47d3-9742-85ae26606903&#34; alt=&#34;image&#34;&gt;&lt;/td&gt; &#xA;   &lt;td&gt;[Add]; Adds noise directly on top. &lt;br&gt; 🟦&lt;em&gt;noise_weight&lt;/em&gt;: Multiplier for noise layer before being added on top.&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/52acb25c-9116-4594-b3fb-01b7b15bb79d&#34; alt=&#34;image&#34;&gt;&lt;/td&gt; &#xA;   &lt;td&gt;[Add Weighted]; Adds noise, but takes a weighted average between what is already there and itself. &lt;br&gt; 🟦&lt;em&gt;noise_weight&lt;/em&gt;: Weight of new noise in the weighted average with existing noise. &lt;br&gt; 🟦&lt;em&gt;balance_multipler&lt;/em&gt;: Scale for how much noise_weight should affect existing noise; 1.0 means normal weighted average, and below 1.0 will lessen the weighted reduction by that amount (i.e. if balance_multiplier is set to 0.5 and noise_weight is 0.25, existing noise will only be reduced by 0.125 instead of 0.25, but new noise will be added with the unmodified 0.25 weight).&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/4feb586e-9920-4f35-8f92-e2e36fabb2df&#34; alt=&#34;image&#34;&gt;&lt;/td&gt; &#xA;   &lt;td&gt;[Replace]; Directly replaces existing noise from layers underneath with itself.&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/tbody&gt; &#xA;&lt;/table&gt; &#xA;&lt;h1&gt;Samples (download or drag images of the workflows into ComfyUI to instantly load the corresponding workflows!)&lt;/h1&gt; &#xA;&lt;p&gt;NOTE: I&#39;ve scaled down the gifs to 0.75x size to make them take up less space on the README.&lt;/p&gt; &#xA;&lt;h3&gt;txt2img&lt;/h3&gt; &#xA;&lt;table&gt; &#xA; &lt;thead&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;th&gt;Result&lt;/th&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/thead&gt; &#xA; &lt;tbody&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/b615a4aa-db3e-4b24-b88f-b694e52f6364&#34; alt=&#34;readme_00006&#34;&gt;&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;Workflow&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/6eb47506-b503-482b-9baf-4c238f30a9c2&#34; alt=&#34;t2i_wf&#34;&gt;&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/tbody&gt; &#xA;&lt;/table&gt; &#xA;&lt;h3&gt;txt2img - (prompt travel)&lt;/h3&gt; &#xA;&lt;table&gt; &#xA; &lt;thead&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;th&gt;Result&lt;/th&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/thead&gt; &#xA; &lt;tbody&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/c27a2029-2c69-4272-b40f-64408e9e2ea6&#34; alt=&#34;readme_00010&#34;&gt;&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;Workflow&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/e5a72ea1-628d-423e-98ed-f20e1bcc5320&#34; alt=&#34;t2i_prompttravel_wf&#34;&gt;&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/tbody&gt; &#xA;&lt;/table&gt; &#xA;&lt;h3&gt;txt2img - 48 frame animation with 16 context_length (Context Options◆Standard Static) + FreeNoise&lt;/h3&gt; &#xA;&lt;table&gt; &#xA; &lt;thead&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;th&gt;Result&lt;/th&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/thead&gt; &#xA; &lt;tbody&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/684f6e79-d653-482f-899a-1900dc56cd8f&#34; alt=&#34;readme_00012&#34;&gt;&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;Workflow&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/9d0e53fa-49d6-483d-a660-3f41d7451002&#34; alt=&#34;t2i_context_freenoise_wf&#34;&gt;&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/tbody&gt; &#xA;&lt;/table&gt; &#xA;&lt;h1&gt;Old Samples (TODO: update all of these + add new ones when I get sleep)&lt;/h1&gt; &#xA;&lt;h3&gt;txt2img - 32 frame animation with 16 context_length (uniform) - PanLeft and ZoomOut Motion LoRAs&lt;/h3&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/41ec4141-389c-4ef4-ae3e-a963a0fa841f&#34; alt=&#34;t2i_context_mlora_wf&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/14abee9a-5500-4d14-8632-15ac77ba5709&#34; alt=&#34;aaa_readme_00094_&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/d730ae2e-188c-4a61-8a6d-bd48f60a2d07&#34;&gt;aaa_readme_00095_.webm&lt;/a&gt;&lt;/p&gt; &#xA;&lt;h3&gt;txt2img w/ latent upscale (partial denoise on upscale)&lt;/h3&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/521991dd-8e39-4fed-9970-514507c75067&#34; alt=&#34;t2i_lat_ups_wf&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/f4199e25-c839-41ed-8986-fb7dbbe2ac52&#34; alt=&#34;aaa_readme_up_00001_&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/2f44342f-3fd8-4863-8e3d-360377d608b7&#34;&gt;aaa_readme_up_00002_.webm&lt;/a&gt;&lt;/p&gt; &#xA;&lt;h3&gt;txt2img w/ latent upscale (partial denoise on upscale) - PanLeft and ZoomOut Motion LoRAs&lt;/h3&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/f34882de-7dd4-4264-8f59-e24da350be2a&#34; alt=&#34;t2i_mlora_lat_ups_wf&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/e2ca5c0c-b5d9-42de-b877-4ed29db81eb9&#34; alt=&#34;aaa_readme_up_00023_&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/414c16d8-231c-422f-8dfc-a93d4b68ffcc&#34;&gt;aaa_readme_up_00024_.webm&lt;/a&gt;&lt;/p&gt; &#xA;&lt;h3&gt;txt2img w/ latent upscale (partial denoise on upscale) - 48 frame animation with 16 context_length (uniform)&lt;/h3&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/a1ebc14e-853e-4cda-9cda-9a7553fa3d85&#34; alt=&#34;t2i_lat_ups_full_wf&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/f7a45f81-e700-4bfe-9fdd-fbcaa4fa8a4e&#34;&gt;aaa_readme_up_00009_.webm&lt;/a&gt;&lt;/p&gt; &#xA;&lt;h3&gt;txt2img w/ latent upscale (full denoise on upscale)&lt;/h3&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/5058f201-3f52-4c48-ac7e-525c3c8f3df3&#34; alt=&#34;t2i_lat_ups_full_wf&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/804610de-18ec-43af-9af2-4a83cf31d16b&#34; alt=&#34;aaa_readme_up_00010_&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/3eb575cf-92dd-434a-b3db-1a2064ff0033&#34;&gt;aaa_readme_up_00012_.webm&lt;/a&gt;&lt;/p&gt; &#xA;&lt;h3&gt;txt2img w/ latent upscale (full denoise on upscale) - 48 frame animation with 16 context_length (uniform)&lt;/h3&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/7b9ec22b-d4e0-4083-9846-5743ed90583e&#34; alt=&#34;t2i_context_lat_ups_wf&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/034aff4c-f814-4b87-b5d1-407b1089af0d&#34;&gt;aaa_readme_up_00014_.webm&lt;/a&gt;&lt;/p&gt; &#xA;&lt;h3&gt;txt2img w/ ControlNet-stabilized latent-upscale (partial denoise on upscale, Scaled Soft ControlNet Weights)&lt;/h3&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/c769c2bd-5aac-48d0-92b7-d73c422d4863&#34; alt=&#34;t2i_lat_ups_softcontrol_wf&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/221954cc-95df-4e0c-8ec9-266d0108dad4&#34; alt=&#34;aaa_readme_up_00017_&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/b562251d-a4fb-4141-94dd-9f8bca9f3ce8&#34;&gt;aaa_readme_up_00019_.webm&lt;/a&gt;&lt;/p&gt; &#xA;&lt;h3&gt;txt2img w/ ControlNet-stabilized latent-upscale (partial denoise on upscale, Scaled Soft ControlNet Weights) 48 frame animation with 16 context_length (uniform)&lt;/h3&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/798567a8-4ef0-4814-aeeb-4f770df8d783&#34; alt=&#34;t2i_context_lat_ups_softcontrol_wf&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/0f57c949-0af3-4da4-b7c4-5c1fb1549927&#34;&gt;aaa_readme_up_00003_.webm&lt;/a&gt;&lt;/p&gt; &#xA;&lt;h3&gt;txt2img w/ Initial ControlNet input (using Normal LineArt preprocessor on first txt2img as an example)&lt;/h3&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/caa7abdf-7ba0-456c-9fa4-547944ea6e72&#34; alt=&#34;t2i_initcn_wf&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/055ef87c-50c6-4bb9-b35e-dd97916b47cc&#34; alt=&#34;aaa_readme_cn_00002_&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/9c9d425d-2378-4af0-8464-2c6c0d1a68bf&#34;&gt;aaa_readme_cn_00003_.webm&lt;/a&gt;&lt;/p&gt; &#xA;&lt;h3&gt;txt2img w/ Initial ControlNet input (using Normal LineArt preprocessor on first txt2img 48 frame as an example) 48 frame animation with 16 context_length (uniform)&lt;/h3&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/f9de2711-dcfd-4fea-8b3b-31e3794fbff9&#34; alt=&#34;t2i_context_initcn_wf&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/6bf14361-5b09-4305-b2a7-f7babad4bd14&#34; alt=&#34;aaa_readme_cn_00005_&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/5d3665b7-c2da-46a1-88d8-ab43ba8eb0c6&#34;&gt;aaa_readme_cn_00006_.webm&lt;/a&gt;&lt;/p&gt; &#xA;&lt;h3&gt;txt2img w/ Initial ControlNet input (using OpenPose images) + latent upscale w/ full denoise&lt;/h3&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/306a40c4-0591-496d-a320-c33f0fc4b3d2&#34; alt=&#34;t2i_openpose_upscale_wf&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;(open_pose images provided courtesy of toyxyz)&lt;/p&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff/assets/7365912/23291941-864d-495a-8ba8-d02e05756396&#34; alt=&#34;AA_openpose_cn_gif_00001_&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/621a2ca6-2f08-4ed1-96ad-8e6635303173&#34; alt=&#34;aaa_readme_cn_00032_&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/c5df09a5-8c64-4811-9ecf-57ac73d82377&#34;&gt;aaa_readme_cn_00033_.webm&lt;/a&gt;&lt;/p&gt; &#xA;&lt;h3&gt;txt2img w/ Initial ControlNet input (using OpenPose images) + latent upscale w/ full denoise, 48 frame animation with 16 context_length (uniform)&lt;/h3&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/a931af6f-bf6a-40d3-bd55-1d7bad32e665&#34; alt=&#34;t2i_context_openpose_upscale_wf&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;(open_pose images provided courtesy of toyxyz)&lt;/p&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/028a1e9e-37b5-477d-8665-0e8723306d65&#34; alt=&#34;aaa_readme_preview_00002_&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved/assets/7365912/8f4c840c-06a2-4c64-b97e-568dd5ff6f46&#34;&gt;aaa_readme_cn_00024_.webm&lt;/a&gt;&lt;/p&gt; &#xA;&lt;h3&gt;img2img&lt;/h3&gt; &#xA;&lt;p&gt;TODO: fill this out with a few useful ways, some using control net tile. I&#39;m sorry there is nothing here right now, I have a lot of code to write. I&#39;ll try to fill this section out + Advance ControlNet use piece by piece.&lt;/p&gt; &#xA;&lt;h2&gt;Known Issues&lt;/h2&gt; &#xA;&lt;h3&gt;Some motion models have visible watermark on resulting images (especially when using mm_sd_v15)&lt;/h3&gt; &#xA;&lt;p&gt;Training data used by the authors of the AnimateDiff paper contained Shutterstock watermarks. Since mm_sd_v15 was finetuned on finer, less drastic movement, the motion module attempts to replicate the transparency of that watermark and does not get blurred away like mm_sd_v14. Using other motion modules, or combinations of them using Advanced KSamplers should alleviate watermark issues.&lt;/p&gt;</summary>
  </entry>
</feed>