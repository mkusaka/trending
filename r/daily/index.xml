<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom">
  <title>GitHub R Daily Trending</title>
  <id>http://mshibanami.github.io/GitHubTrendingRSS</id>
  <updated>2022-07-12T01:54:31Z</updated>
  <subtitle>Daily Trending of R in GitHub</subtitle>
  <link href="http://mshibanami.github.io/GitHubTrendingRSS"></link>
  <entry>
    <title>MarekProkop/sreality</title>
    <updated>2022-07-12T01:54:31Z</updated>
    <id>tag:github.com,2022-07-12:/MarekProkop/sreality</id>
    <link href="https://github.com/MarekProkop/sreality" rel="alternate"></link>
    <summary type="html">&lt;p&gt;Functions in R for downloading real estate data from sreality.cz.&lt;/p&gt;&lt;hr&gt;&lt;h1&gt;sreality&lt;/h1&gt; &#xA;&lt;!-- badges: start --&gt; &#xA;&lt;!-- badges: end --&gt; &#xA;&lt;p&gt;With the functions from this repository you can create your personal database of property offers from the Sreality website, update their status and analyse their history. You need some knowledge of R to do this.&lt;/p&gt; &#xA;&lt;h2&gt;How to use&lt;/h2&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;Clone this repo, or create a new project in RStudio and copy the R folder.&lt;/li&gt; &#xA; &lt;li&gt;Create subfolders &lt;code&gt;data&lt;/code&gt; and &lt;code&gt;images&lt;/code&gt;.&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;h3&gt;Load packages and functions&lt;/h3&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;library(tidyverse)&#xA;library(httr)&#xA;library(jsonlite)&#xA;&#xA;source(&#34;R/sreality-funcs.R&#34;)&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h3&gt;Add property&lt;/h3&gt; &#xA;&lt;p&gt;Adds the property with the given URL to the &lt;code&gt;data/my_properties.rds&lt;/code&gt; file. If you specify the &lt;code&gt;img_dir&lt;/code&gt; parameter, a small preview image is downloaded and saved in this folder under the name &lt;em&gt;id_property.jpg&lt;/em&gt;&lt;/p&gt; &#xA;&lt;p&gt;If a property with the given id already exists in the file, an error will occur.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;add_property(&#xA;  data_path = &#34;data/my_properties.rds&#34;,&#xA;  img_dir = &#34;images/&#34;,&#xA;  url = &#34;https://www.sreality.cz/detail/prodej/dum/rodinny/melnik-melnik-namesti-miru/3960968780&#34;&#xA;)&#xA;#&amp;gt; Warning in add_property(data_path = &#34;data/my_properties.rds&#34;, img_dir =&#xA;#&amp;gt; &#34;images/&#34;, : File data/my_properties.rdsdoesn&#39;t exist. Creating a new one.&#xA;#&amp;gt; # A tibble: 1 × 8&#xA;#&amp;gt;   id         status checked             location  name   price description url  &#xA;#&amp;gt;   &amp;lt;chr&amp;gt;      &amp;lt;chr&amp;gt;  &amp;lt;dttm&amp;gt;              &amp;lt;chr&amp;gt;     &amp;lt;chr&amp;gt;  &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt;       &amp;lt;chr&amp;gt;&#xA;#&amp;gt; 1 3960968780 init   2022-07-07 09:43:11 náměstí … Prod… 1.30e7 Rodinný dů… http…&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Adds multiple properties to the &lt;code&gt;data/my_properties.rds&lt;/code&gt; file. If any property id already exists in the file, an error will occur.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;add_property(&#xA;  data_path = &#34;data/my_properties.rds&#34;,&#xA;  img_dir = &#34;images/&#34;,&#xA;  url = c(&#xA;    &#34;https://www.sreality.cz/detail/prodej/dum/rodinny/vernerice-rychnov-/2752723036&#34;,&#xA;    &#34;https://www.sreality.cz/detail/prodej/dum/rodinny/tabor-tabor-provaznicka/3936430428&#34;&#xA;  )&#xA;)&#xA;#&amp;gt; # A tibble: 2 × 8&#xA;#&amp;gt;   id         status checked             location  name   price description url  &#xA;#&amp;gt;   &amp;lt;chr&amp;gt;      &amp;lt;chr&amp;gt;  &amp;lt;dttm&amp;gt;              &amp;lt;chr&amp;gt;     &amp;lt;chr&amp;gt;  &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt;       &amp;lt;chr&amp;gt;&#xA;#&amp;gt; 1 2752723036 init   2022-07-07 09:43:11 Verneřic… Prod… 5.79e6 Rodinný dů… http…&#xA;#&amp;gt; 2 3936430428 init   2022-07-07 09:43:12 Provazni… Prod… 9.7 e6 Rodinný dů… http…&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h3&gt;Update properties&lt;/h3&gt; &#xA;&lt;p&gt;Fetches all properties in the &lt;code&gt;data/my_properties.rds&lt;/code&gt; file from Sreality and appends their current data to the end of the file.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;update_properties(rds_path = &#34;data/my_properties.rds&#34;)&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h3&gt;List archived data&lt;/h3&gt; &#xA;&lt;h4&gt;Full content of the archive&lt;/h4&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;read_rds(&#34;data/my_properties.rds&#34;)&#xA;#&amp;gt; # A tibble: 6 × 8&#xA;#&amp;gt;   id         status checked             location  name   price description url  &#xA;#&amp;gt;   &amp;lt;chr&amp;gt;      &amp;lt;chr&amp;gt;  &amp;lt;dttm&amp;gt;              &amp;lt;chr&amp;gt;     &amp;lt;chr&amp;gt;  &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt;       &amp;lt;chr&amp;gt;&#xA;#&amp;gt; 1 3960968780 init   2022-07-07 09:43:11 náměstí … Prod… 1.30e7 Rodinný dů… http…&#xA;#&amp;gt; 2 2752723036 init   2022-07-07 09:43:11 Verneřic… Prod… 5.79e6 Rodinný dů… http…&#xA;#&amp;gt; 3 3936430428 init   2022-07-07 09:43:12 Provazni… Prod… 9.7 e6 Rodinný dů… http…&#xA;#&amp;gt; 4 3960968780 live   2022-07-07 09:43:12 náměstí … Prod… 1.30e7 Rodinný dů… &amp;lt;NA&amp;gt; &#xA;#&amp;gt; 5 2752723036 live   2022-07-07 09:43:12 Verneřic… Prod… 5.79e6 Rodinný dů… &amp;lt;NA&amp;gt; &#xA;#&amp;gt; 6 3936430428 live   2022-07-07 09:43:13 Provazni… Prod… 9.7 e6 Rodinný dů… &amp;lt;NA&amp;gt;&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h4&gt;Current state of properties&lt;/h4&gt; &#xA;&lt;p&gt;Displays the current state of all properties in the &lt;code&gt;data/my_properties.rds&lt;/code&gt; file.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;list_properies(&#34;data/my_properties.rds&#34;)&#xA;#&amp;gt; # A tibble: 3 × 11&#xA;#&amp;gt;   id         status checked_0           checked_last        dur   location name &#xA;#&amp;gt;   &amp;lt;chr&amp;gt;      &amp;lt;chr&amp;gt;  &amp;lt;dttm&amp;gt;              &amp;lt;dttm&amp;gt;              &amp;lt;drt&amp;gt; &amp;lt;chr&amp;gt;    &amp;lt;chr&amp;gt;&#xA;#&amp;gt; 1 2752723036 live   2022-07-07 09:43:11 2022-07-07 09:43:12 1.18… Verneři… Prod…&#xA;#&amp;gt; 2 3936430428 live   2022-07-07 09:43:12 2022-07-07 09:43:13 1.07… Provazn… Prod…&#xA;#&amp;gt; 3 3960968780 live   2022-07-07 09:43:11 2022-07-07 09:43:12 1.37… náměstí… Prod…&#xA;#&amp;gt; # … with 4 more variables: price_0 &amp;lt;dbl&amp;gt;, price_last &amp;lt;dbl&amp;gt;, description &amp;lt;chr&amp;gt;,&#xA;#&amp;gt; #   url &amp;lt;chr&amp;gt;&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;You can filter the previous dataframe by status (only valid: &lt;code&gt;status %in% c(&#34;init&#34;, &#34;live&#34;)&lt;/code&gt; or only removed: &lt;code&gt;status == &#34;gone&#34;&lt;/code&gt;), by price change (&lt;code&gt;price_last != price_0&lt;/code&gt;), etc.&lt;/p&gt; &#xA;&lt;h4&gt;List of properties using the {gt} package&lt;/h4&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;list_properies(&#34;data/my_properties.rds&#34;) |&amp;gt; &#xA;  mutate(&#xA;    name = paste0(&#34;[&#34;, name, &#34;](&#34;, url, &#34;)&#34;),&#xA;    name = map(name, gt::md)&#xA;  ) |&amp;gt; &#xA;  select(name, location, price_last) |&amp;gt; &#xA;  gt::gt() |&amp;gt; &#xA;  gt::cols_label(price_last = &#34;price&#34;) |&amp;gt; &#xA;  gt::fmt_number(price_last, decimals = 0, suffixing = &#34;K&#34;) |&amp;gt; &#xA;  gt::as_raw_html()&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;table style=&#34;font-family: -apple-system, BlinkMacSystemFont, &#39;Segoe UI&#39;, Roboto, Oxygen, Ubuntu, Cantarell, &#39;Helvetica Neue&#39;, &#39;Fira Sans&#39;, &#39;Droid Sans&#39;, Arial, sans-serif; display: table; border-collapse: collapse; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3;&#34;&gt; &#xA; &lt;thead style=&#34;border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3;&#34;&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;th style=&#34;color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; text-align: center;&#34; rowspan=&#34;1&#34; colspan=&#34;1&#34;&gt;name&lt;/th&gt; &#xA;   &lt;th style=&#34;color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; text-align: left;&#34; rowspan=&#34;1&#34; colspan=&#34;1&#34;&gt;location&lt;/th&gt; &#xA;   &lt;th style=&#34;color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; text-align: right; font-variant-numeric: tabular-nums;&#34; rowspan=&#34;1&#34; colspan=&#34;1&#34;&gt;price&lt;/th&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/thead&gt; &#xA; &lt;tbody style=&#34;border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3;&#34;&gt; &#xA;  &lt;tr&gt;&#xA;   &lt;td style=&#34;padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; text-align: center;&#34;&gt;&lt;a href=&#34;https://www.sreality.cz/detail/prodej/dum/rodinny/vernerice-rychnov-/2752723036&#34;&gt;Prodej rodinného domu 208 m², pozemek 2 069 m²&lt;/a&gt;&lt;/td&gt; &#xA;   &lt;td style=&#34;padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; text-align: left;&#34;&gt;Verneřice - Rychnov, okres Děčín&lt;/td&gt; &#xA;   &lt;td style=&#34;padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; text-align: right; font-variant-numeric: tabular-nums;&#34;&gt;5,790K&lt;/td&gt;&#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt;&#xA;   &lt;td style=&#34;padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; text-align: center;&#34;&gt;&lt;a href=&#34;https://www.sreality.cz/detail/prodej/dum/rodinny/tabor-tabor-provaznicka/3936430428&#34;&gt;Prodej rodinného domu 231 m², pozemek 107 m²&lt;/a&gt;&lt;/td&gt; &#xA;   &lt;td style=&#34;padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; text-align: left;&#34;&gt;Provaznická, Tábor&lt;/td&gt; &#xA;   &lt;td style=&#34;padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; text-align: right; font-variant-numeric: tabular-nums;&#34;&gt;9,700K&lt;/td&gt;&#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt;&#xA;   &lt;td style=&#34;padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; text-align: center;&#34;&gt;&lt;a href=&#34;https://www.sreality.cz/detail/prodej/dum/rodinny/melnik-melnik-namesti-miru/3960968780&#34;&gt;Prodej rodinného domu 150 m², pozemek 250 m²&lt;/a&gt;&lt;/td&gt; &#xA;   &lt;td style=&#34;padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; text-align: left;&#34;&gt;náměstí Míru, Mělník&lt;/td&gt; &#xA;   &lt;td style=&#34;padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; text-align: right; font-variant-numeric: tabular-nums;&#34;&gt;12,990K&lt;/td&gt;&#xA;  &lt;/tr&gt; &#xA; &lt;/tbody&gt; &#xA;&lt;/table&gt; &#xA;&lt;p&gt;You can also add images to the listing.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;list_properies(&#34;data/my_properties.rds&#34;) |&amp;gt; &#xA;  mutate(&#xA;    title = paste0(location, &#34;\n\n&#34;, replace_na(name, &#34;&#34;)),&#xA;    title = map(title, gt::md)&#xA;  ) |&amp;gt; &#xA;  select(id, title, price_last) |&amp;gt;&#xA;  gt::gt() |&amp;gt; &#xA;  gt::cols_label(price_last = &#34;price&#34;) |&amp;gt; &#xA;  gt::fmt_number(price_last, decimals = 0, suffixing = &#34;K&#34;) |&amp;gt; &#xA;  gt::text_transform(&#xA;    locations = gt::cells_body(columns = id),&#xA;    fn = function(x) {&#xA;      map_chr(x, function(x) {&#xA;        img_path &amp;lt;- here::here(&#34;images&#34;, paste0(x, &#34;.jpg&#34;))&#xA;        if (file.exists(img_path)) {&#xA;          gt::local_image(filename = img_path, height = 166)&#xA;        } else {&#xA;          x&#xA;        }&#xA;      })&#xA;    }&#xA;  )&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/MarekProkop/sreality/master/scrrenshot-01.png&#34; alt=&#34;listing preview&#34;&gt;&lt;/p&gt; &#xA;&lt;h2&gt;To-do&lt;/h2&gt; &#xA;&lt;p&gt;Maybe I’ll add those features some day:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Downloading preview images of the property.&lt;/li&gt; &#xA; &lt;li&gt;Shiny app to make it more user-friendly.&lt;/li&gt; &#xA;&lt;/ul&gt;</summary>
  </entry>
</feed>