<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom">
  <title>GitHub R Daily Trending</title>
  <id>http://mshibanami.github.io/GitHubTrendingRSS</id>
  <updated>2022-10-29T01:39:20Z</updated>
  <subtitle>Daily Trending of R in GitHub</subtitle>
  <link href="http://mshibanami.github.io/GitHubTrendingRSS"></link>
  <entry>
    <title>CoryMcCartan/midterms-22</title>
    <updated>2022-10-29T01:39:20Z</updated>
    <id>tag:github.com,2022-10-29:/CoryMcCartan/midterms-22</id>
    <link href="https://github.com/CoryMcCartan/midterms-22" rel="alternate"></link>
    <summary type="html">&lt;p&gt;A dynamic Bayesian model to forecast the 2022 U.S. midterm elections&lt;/p&gt;&lt;hr&gt;&lt;h1&gt;Federal Election Predictions 2022&lt;/h1&gt; &#xA;&lt;h4&gt;Cory McCartan&lt;/h4&gt; &#xA;&lt;img src=&#34;https://raw.githubusercontent.com/CoryMcCartan/midterms-22/main/readme-doc/cover.jpg&#34; alt=&#34;U.S. Capitol at sunset&#34; style=&#34;width: 100%;&#34;&gt; &#xA;&lt;p&gt;A dynamic Bayesian model to forecast the 2022 U.S. midterm elections.&lt;/p&gt; &#xA;&lt;h2&gt;Directory structure&lt;/h2&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Code for all the analyses in &lt;a href=&#34;https://raw.githubusercontent.com/CoryMcCartan/midterms-22/main/R/&#34;&gt;&lt;code&gt;R/&lt;/code&gt;&lt;/a&gt; and &lt;a href=&#34;https://raw.githubusercontent.com/CoryMcCartan/midterms-22/main/stan/&#34;&gt;&lt;code&gt;stan/&lt;/code&gt;&lt;/a&gt;. README files in each subdirectory contain more information.&lt;/li&gt; &#xA; &lt;li&gt;Tracked, processed data are in &lt;a href=&#34;https://raw.githubusercontent.com/CoryMcCartan/midterms-22/main/data/&#34;&gt;&lt;code&gt;data/&lt;/code&gt;&lt;/a&gt;; untracked and raw data are in &lt;a href=&#34;https://raw.githubusercontent.com/CoryMcCartan/midterms-22/main/data-raw/&#34;&gt;&lt;code&gt;data-raw/&lt;/code&gt;&lt;/a&gt;.&lt;/li&gt; &#xA; &lt;li&gt;Model outputs are in &lt;a href=&#34;https://raw.githubusercontent.com/CoryMcCartan/midterms-22/main/docs/&#34;&gt;&lt;code&gt;docs&lt;/code&gt;/&lt;/a&gt;; files for this documentation page are in &lt;a href=&#34;https://raw.githubusercontent.com/CoryMcCartan/midterms-22/main/readme-doc/&#34;&gt;&lt;code&gt;readme-doc/&lt;/code&gt;&lt;/a&gt;.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;Model structure and details&lt;/h2&gt; &#xA;&lt;p&gt;&lt;strong&gt;Jump to: &lt;a href=&#34;https://raw.githubusercontent.com/CoryMcCartan/midterms-22/main/#fundamentals-model&#34;&gt;Fundamentals&lt;/a&gt; • &lt;a href=&#34;https://raw.githubusercontent.com/CoryMcCartan/midterms-22/main/#firm-error-model&#34;&gt;Firms&lt;/a&gt; • &lt;a href=&#34;https://raw.githubusercontent.com/CoryMcCartan/midterms-22/main/#national-intent-model&#34;&gt;National intent&lt;/a&gt; • &lt;a href=&#34;https://raw.githubusercontent.com/CoryMcCartan/midterms-22/main/#outcomes-model&#34;&gt;Outcomes&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-mermaid&#34;&gt;graph TD&#xA;    mod_firms[&amp;lt;font size=5&amp;gt;FIRMS]:::model&#xA;    mod_firms --&amp;gt; |Prior on firm error| mod_natl[&amp;lt;font size=5&amp;gt;NATIONAL INTENT]:::model&#xA;    mod_fund[&amp;lt;font size=5&amp;gt;FUNDAMENTALS]:::model --&amp;gt; |Prior on E-day intent| mod_natl&#xA;    d_ret([Historical&amp;lt;br /&amp;gt;House returns]):::data -.-&amp;gt; mod_race&#xA;    mod_natl --&amp;gt; |Covariate| mod_race[&amp;lt;font size=5&amp;gt;OUTCOMES]:::model&#xA;    d_gen([Historical generic&amp;lt;br /&amp;gt;ballot polling]):::data -.-&amp;gt; mod_firms&#xA;    d_fund([Historical economic&amp;lt;br /&amp;gt;and approval data]):::data -.-&amp;gt; mod_fund&#xA;    d_22([2022 partisanship&amp;lt;br /&amp;gt;and incumbency]):::data -.-&amp;gt; mod_race&#xA;    classDef model fill:#aa2,stroke:#000,font-size:16pt,font-weight:bold&#xA;    classDef data fill:#efeff4,stroke#aaa,line-height:1.5,font-size:9pt&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h3&gt;Fundamentals model&lt;/h3&gt; &#xA;&lt;p&gt;The fundamentals model is Bayesian linear regression of national two-way vote share for the incumbent president’s party on logit retirements; house control (1 if incumbent president’s party controls the House), and presidential control (1 for a Dem. president); an economic indicator; logit presidential approval; and several interactions with polarization, measured as the correlation between House and presidential results in the previous election. The model is fit separately to presidential and midterm years. The economic indicator is the first principal component of three economic indicators: GDP change over the past year, log unemployment rate; and urban CPI change over the past year (inflation). The principal components are calculated only on data from 1948–2006 to allow the weights to be used in predictive models after 2008. To build national two-way vote share, we impute vote share for uncontested House races using a BART model fit on contested House elections from 1976 to 2020. Coefficients are given an &lt;a href=&#34;https://arxiv.org/abs/2111.10718&#34;&gt;R2-D2 prior&lt;/a&gt;. The data are available &lt;a href=&#34;https://raw.githubusercontent.com/CoryMcCartan/midterms-22/main/data/fundamentals.csv&#34;&gt;here&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;p&gt;&lt;strong&gt;Parameter estimates:&lt;/strong&gt; &lt;img src=&#34;https://raw.githubusercontent.com/CoryMcCartan/midterms-22/main/readme-doc/fund_model_est-1.svg?sanitize=true&#34; width=&#34;100%&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;strong&gt;Fundamentals-only prediction for 2022:&lt;/strong&gt; &lt;img src=&#34;https://raw.githubusercontent.com/CoryMcCartan/midterms-22/main/readme-doc/fund_model_pred-1.svg?sanitize=true&#34; width=&#34;100%&#34;&gt;&lt;/p&gt; &#xA;&lt;h3&gt;Firm error model&lt;/h3&gt; &#xA;&lt;p&gt;The firm error model goes hand-in-hand with the firm error component of the national intent model, below. The idea is to use historical firm performance in polling the generic ballot and presidential races as a prior for firm performance this cycle. We can decompose firm error into several components:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Constant year-to-year bias in all firms in polling these races.&lt;/li&gt; &#xA; &lt;li&gt;Year-specific bias shared by all firms.&lt;/li&gt; &#xA; &lt;li&gt;Firm-specific bias.&lt;/li&gt; &#xA; &lt;li&gt;Bias from polling methodology (IVR/online/phone/mixed/unknown).&lt;/li&gt; &#xA; &lt;li&gt;Bias from LV polls. Due to limited data we only code an indicator for if a poll is not an LV poll—we don’t distinguish between RV/A/V polls.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;Given total firm bias from all these sources, firms also vary in how close their results cluster around this bias. If a firm consistently reports numbers 5pp too favorable for Democrats, we can adjust for that. Less consistency means less adjustment is possible. Polling variance is affected by several factors:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Sample size&lt;/li&gt; &#xA; &lt;li&gt;Time to the election&lt;/li&gt; &#xA; &lt;li&gt;LV vs.&amp;nbsp;other polls&lt;/li&gt; &#xA; &lt;li&gt;Firm variance&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;We operationalize this framework with the following model, which is fit to around 5,100 historical polling results.&lt;/p&gt; &#xA;&lt;p&gt;$$ \begin{align*} y_i &amp;amp;\sim \mathcal{N}(\mu_i, \sigma_i^2) \ \mu_i &amp;amp;= \beta_\mu + \alpha_{f[i]}^{(f)} + \alpha_{c[i]}^{(c)} + + \alpha_{u[i]}^{(u)} + \alpha_{c[i]}^{(v)}v[i] \ \sigma_i &amp;amp;= \exp(\beta_\sigma + x_i^\top\gamma_\sigma + \phi_{f[i]}^{(f)}) \ \alpha^{(f)} &amp;amp;\stackrel{iid}{\sim} \mathcal{N}(0, \tau^2_f), \quad \alpha^{(u)} \stackrel{iid}{\sim} \mathcal{N}(0, \tau^2_u), \quad \alpha^{(v)} \stackrel{iid}{\sim} \mathcal{N}(0, \tau^2_v)\ \alpha_{c}^{(c)}&amp;amp; \sim \mathrm{AR1}(\rho), \quad \phi^{(f)} \stackrel{iid}{\sim} \mathcal{N}(0, \tau^2_\phi) \end{align*} $$&lt;/p&gt; &#xA;&lt;p&gt;where $i$ indexes the polls, $f[i]$ is the firm, $c[i]$ is the year/cycle, $u[i]$ is the methodology, $v[i]$ is the survey population indicator (1 if not LV), $m_{f[i]}$ is the herding variable for each firm, and $x_i$ is a vector of poll variance predictors: $\log(N_i)$, $\sqrt{\text{time to elec.}}$, and the not-LV indicator. Further details, including the weakly informative priors on all the parameters, may be found in the &lt;a href=&#34;https://raw.githubusercontent.com/CoryMcCartan/midterms-22/main/stan/firms.stan&#34;&gt;Stan model code&lt;/a&gt; and &lt;a href=&#34;https://raw.githubusercontent.com/CoryMcCartan/midterms-22/main/R/build/firms.R&#34;&gt;fitting code&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;p&gt;We can simulate from the model to get &lt;em&gt;predictive&lt;/em&gt; values of firm bias and variance in hypothetical election-day likely voter polls for the 2022 election. These predictive values are the best way to evaluate each firm’s overall quality for this election. A firm is better—that is, its polls contain more information about the race—if it has lower variance (std. dev.), a lower herding value, and bias closer to 0 (though this will be adjusted for).&lt;/p&gt; &#xA;&lt;p&gt;&lt;strong&gt;Summary of firm performance:&lt;/strong&gt; &lt;img src=&#34;https://raw.githubusercontent.com/CoryMcCartan/midterms-22/main/readme-doc/firm_perf-1.svg?sanitize=true&#34; width=&#34;100%&#34;&gt;&lt;/p&gt; &#xA;&lt;h3&gt;National intent model&lt;/h3&gt; &#xA;&lt;p&gt;The intent model estimates latent national vote intent, which is assumed to evolve as a random walk, with and observation model that is closely related to the firm error model, above.&lt;/p&gt; &#xA;&lt;p&gt;$$ \begin{align*} y_i &amp;amp;\sim \mathcal{N}(\mu_i, \sigma_i^2) \ \mu_i &amp;amp;= x_{t[i]} + \beta_\mu + \alpha_{f[i]}^{(f)} + \alpha^{(c)} + \alpha_{u[i]}^{(u)} + \alpha^{(v)}v[i] \ \sigma_i &amp;amp;= \exp(\beta_\sigma + x_i^\top\gamma_\sigma + \phi_{f[i]}^{(f)}) \ x_t &amp;amp;= x_{t-1} + \delta_t,\quad \delta_t \stackrel{iid}{\sim} \mathrm{t_5}(0, \sigma^2_\delta) \ \alpha^{(f)} &amp;amp;\stackrel{iid}{\sim} \mathcal{N}(0, \tau^2_f), \quad \alpha^{(c)} \sim \mathcal{N}(\rho\alpha_{c_{old}}^{(c)}, \tau^2_c), \quad \alpha^{(u)} \stackrel{iid}{\sim} \mathcal{N}(0, \tau^2_u), \quad \alpha^{(v)} \sim \mathcal{N}(0, \tau^2_v)\ \phi^{(f)} &amp;amp;\stackrel{iid}{\sim} \mathcal{N}(0, \tau^2_\phi), \end{align*} $$&lt;/p&gt; &#xA;&lt;p&gt;where $i$ indexes the polls and $t$ indexes the days before the election, $y$ is the poll outcome, $x$ is the latent intent, $f[i]$ is the firm, $u[i]$ is the methodology, $v[i]$ is the survey population indicator (1 if not LV), and $x_i$ is a vector of poll variance predictors: $\log(N_i)$, $\sqrt{\text{time to elec.}}$, and the not-LV indicator. Priors for most variables are taken from the posterior of the firm error model (above), with some adjustments as noted below. The prior on $x$ for election day is taken from the posterior predictive distribution of the fundamentals model, shown above in the histogram. A relatively strong prior is needed on $\sigma^2_\delta$ to regularize the effect of firms who release panel survey results daily. We also cap the number of polls from any one firm at 100 to further avoid biasing effects from imbalance (which is observed in historical back-testing). Firms with more than 100 polls have a subset of 100 selected at random for inference. Since the random effects $\alpha^{(c)}$ and $\alpha^{(v)}$ are unknown for this particular cycle, they are sampled from their predictive distributions. Further details, including the weakly informative priors on all the parameters, may be found in the &lt;a href=&#34;https://raw.githubusercontent.com/CoryMcCartan/midterms-22/main/stan/intent.stan&#34;&gt;Stan model code&lt;/a&gt;, &lt;a href=&#34;https://raw.githubusercontent.com/CoryMcCartan/midterms-22/main/R/model/intent.R&#34;&gt;fitting code&lt;/a&gt;, and &lt;a href=&#34;https://raw.githubusercontent.com/CoryMcCartan/midterms-22/main/R/build/build_intent.R&#34;&gt;diagnostic code&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;p&gt;Estimates for the 2010–2020 cycles, based only on previous years, are shown below.&lt;/p&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/CoryMcCartan/midterms-22/main/readme-doc/intent_backtest_2010.svg?sanitize=true&#34; alt=&#34;2010 intent estimates&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/CoryMcCartan/midterms-22/main/readme-doc/intent_backtest_2012.svg?sanitize=true&#34; alt=&#34;2012 intent estimates&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/CoryMcCartan/midterms-22/main/readme-doc/intent_backtest_2014.svg?sanitize=true&#34; alt=&#34;2014 intent estimates&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/CoryMcCartan/midterms-22/main/readme-doc/intent_backtest_2016.svg?sanitize=true&#34; alt=&#34;2016 intent estimates&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/CoryMcCartan/midterms-22/main/readme-doc/intent_backtest_2018.svg?sanitize=true&#34; alt=&#34;2018 intent estimates&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/CoryMcCartan/midterms-22/main/readme-doc/intent_backtest_2020.svg?sanitize=true&#34; alt=&#34;2020 intent estimates&#34;&gt;&lt;/p&gt; &#xA;&lt;h3&gt;Outcomes models&lt;/h3&gt; &#xA;&lt;p&gt;The outcomes models maps district partisanship, the national environment, and other district and national factors onto vote shares in each House district and Senate race. We use a multilevel model with a student-t response, as described by the following (&lt;code&gt;brms&lt;/code&gt;) model syntax.&lt;/p&gt; &#xA;&lt;p&gt;&lt;strong&gt;House:&lt;/strong&gt;&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;ldem_seat ~ ldem_seat ~ inc_pres + offset(ldem_pred) + ldem_pres_adj:ldem_gen +&#xA;    polar*(inc_seat + ldem_exp + exp_mis) - polar + region +&#xA;    (1 + edu_o15 | year) + (1 | division:year) + (1 | dem_cand) + (1 | rep_cand)&#xA;    &#xA;sigma ~ polar + I(ldem_pres_adj^2)&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;&lt;strong&gt;Senate:&lt;/strong&gt;&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;ldem_seat ~ ldem_pres_adj * ldem_gen +&#xA;    (midterm + inc_pres + inc_seat)^2 + miss_polls*inc_seatc +&#xA;    (1 + white + edu_o15 + poll_avg | year) + (1 | region) +&#xA;    (1 | cand_dem) + (1 | cand_rep)&#xA;    &#xA;sigma ~ polar + I(ldem_pres_adj^2)&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Here, &lt;code&gt;inc_pres&lt;/code&gt; is the party of the incumbent president, coded as plus or minus 1; &lt;code&gt;inc_seat&lt;/code&gt; is the party of the seat’s incumbent, coded as 1 for a Democrat, -1 for a Republican and 0 if open; &lt;code&gt;ldem_pres_adj&lt;/code&gt; is the logit last presidential result in the district, shifted back to a neutral national environment (i.e., subtracting off the national presidential result); &lt;code&gt;ldem_gen&lt;/code&gt; is the logit generic ballot; &lt;code&gt;ldem_pred&lt;/code&gt; is the sum of these two; &lt;code&gt;polar&lt;/code&gt; measures polarization as the lagged correlation between House and presidential results; &lt;code&gt;ldem_exp&lt;/code&gt; is the logit share of campaign expenditures by the Democrat; &lt;code&gt;exp_mis&lt;/code&gt; codes whether expenditure data are missing for the race (as they unfortunately often are); &lt;code&gt;poll_avg&lt;/code&gt; is the average of polls conducted in the last 30 days, shrunk to &lt;code&gt;ldem_pres_adj&lt;/code&gt; based on the number of polls; &lt;code&gt;miss_polls&lt;/code&gt; is an indicator for no polling being available; and &lt;code&gt;dem_cand&lt;/code&gt; and &lt;code&gt;rep_cand&lt;/code&gt; are the Democratic and Republican candidates, respectively.&lt;/p&gt; &#xA;&lt;p&gt;For the House model, the standard deviation of the year random effects is estimated around 0.05 (on the logit scale); the standard deviation of the division-year random effects is estimated around 0.04. The model is fit to all 2,320 contested House elections from 2010 to 2020. Posterior summaries for all coefficients are shown below. The overall model $R^2$ is around 0.97 for the House model.&lt;/p&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/CoryMcCartan/midterms-22/main/readme-doc/outcomes_model_house_ests.svg?sanitize=true&#34; alt=&#34;House outcome model summary&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;For the Senate model, the standard deviation of the year random effects is estimated around 0.03 (on the logit scale). The model is fit to all 258 contested, two-way Senate elections from 2006 to 2020. Posterior summaries for all coefficients are shown below. The overall model $R^2$ is around 0.89.&lt;/p&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/CoryMcCartan/midterms-22/main/readme-doc/outcomes_model_sen_ests.svg?sanitize=true&#34; alt=&#34;Senate outcome model summary&#34;&gt;&lt;/p&gt; &#xA;&lt;h4&gt;Alaska RCV adjustment&lt;/h4&gt; &#xA;&lt;p&gt;There are two Republican candidates running against a single Democrat in the Alaska at-large district. This poses a challenge to predicting a winner, since the dynamics of rank-choice voting could be determinative. As an ad-hoc adjustment, we simulate hypothetical Alaska at-large elections based on the results of the 2022 special election, with randomness added. We use the results of this simulation to understand the probability of a Democratic win based on the first-round balloting results. We can then translate this into a (random) vote boost to apply to the Democratic candidate in the first round in order to produce a rough approximation of the final rank-choice reallocated vote.&lt;/p&gt;</summary>
  </entry>
</feed>