<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom">
  <title>GitHub Java Daily Trending</title>
  <id>http://mshibanami.github.io/GitHubTrendingRSS</id>
  <updated>2023-09-01T01:34:04Z</updated>
  <subtitle>Daily Trending of Java in GitHub</subtitle>
  <link href="http://mshibanami.github.io/GitHubTrendingRSS"></link>
  <entry>
    <title>redplanetlabs/twitter-scale-mastodon</title>
    <updated>2023-09-01T01:34:04Z</updated>
    <id>tag:github.com,2023-09-01:/redplanetlabs/twitter-scale-mastodon</id>
    <link href="https://github.com/redplanetlabs/twitter-scale-mastodon" rel="alternate"></link>
    <summary type="html">&lt;p&gt;Twitter-scale Mastodon implementation in only 10k lines of code&lt;/p&gt;&lt;hr&gt;&lt;h1&gt;twitter-scale-mastodon&lt;/h1&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/redplanetlabs/twitter-scale-mastodon/master/images/home-timeline-screenshot.png&#34; alt=&#34;Home timeline&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;This project is a production-ready implementation of a Mastodon instance that scales to Twitter-scale (500M users, 700 average fanout, unbalanced social graph, 7k posts / second). It&#39;s only 10k lines of code and can easily be adapted into any Twitter-like social network. It shares no code with the &lt;a href=&#34;https://github.com/mastodon/mastodon&#34;&gt;official Mastodon implementation&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;p&gt;The implementation is built on top of &lt;a href=&#34;https://redplanetlabs.com/&#34;&gt;Rama&lt;/a&gt;, a new programming platform that enables end-to-end scalable backends to be built in their entirety in 100x less code than otherwise. Rama is a generic platform for building any application backend, not just social networks. This project is a demonstration of Rama&#39;s power. We will be starting a &lt;a href=&#34;https://docs.google.com/forms/d/e/1FAIpQLSfrhmBwI0YAeaL8u4XmgfscW4UIUUDp2ZHSs4KmPH_TaDt1QQ/viewform&#34;&gt;private beta&lt;/a&gt; for Rama soon, and a build of Rama is freely available to &lt;a href=&#34;https://redplanetlabs.com/docs/~/downloads-maven-local-dev.html&#34;&gt;try now&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;p&gt;We ran this code on a public instance available for anyone to use from August 15th, 2023 to August 24th, 2023. To demonstrate its scale, we ran the instance with 100M bots posting 3,500 times per second at 403 average fanout. The social graph was extremely unbalanced, with the largest user having 22M followers. During its lifetime the instance processed 2.66B posts and made 1.07T timeline deliveries.&lt;/p&gt; &#xA;&lt;p&gt;Here&#39;s a chart showing the scalability of the implementation:&lt;/p&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/redplanetlabs/twitter-scale-mastodon/master/images/scalability.png&#34; alt=&#34;Scalability&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;You can read a deep-dive exploration of how this instance is implemented in &lt;a href=&#34;https://blog.redplanetlabs.com/2023/08/15/how-we-reduced-the-cost-of-building-twitter-at-twitter-scale-by-100x/&#34;&gt;this blog post&lt;/a&gt;. That post also includes other performance charts.&lt;/p&gt; &#xA;&lt;h2&gt;Implementation overview&lt;/h2&gt; &#xA;&lt;p&gt;The implementation is structured like this:&lt;/p&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/redplanetlabs/twitter-scale-mastodon/master/images/overall-structure.png&#34; alt=&#34;Structure&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;The Mastodon backend is implemented as Rama modules, which handle all the data processing, data indexing, and most of the product logic. On top of that is the implementation of the &lt;a href=&#34;https://docs.joinmastodon.org/api/&#34;&gt;Mastodon API&lt;/a&gt; using Spring/Reactor. For the most part, the API implementation just handles HTTP requests with simple calls to the Rama modules and serves responses as JSON.&lt;/p&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://aws.amazon.com/s3/&#34;&gt;S3&lt;/a&gt; is used only for serving pictures and videos. Though we could serve those from Rama, static content like that is better served via a &lt;a href=&#34;https://en.wikipedia.org/wiki/Content_delivery_network&#34;&gt;CDN&lt;/a&gt;. So we chose to use S3 to mimic that sort of architecture. All other storage is handled by the Rama modules.&lt;/p&gt; &#xA;&lt;p&gt;The backend is implemented in the &lt;a href=&#34;https://raw.githubusercontent.com/redplanetlabs/twitter-scale-mastodon/master/backend&#34;&gt;backend/&lt;/a&gt; folder and contains six modules:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/redplanetlabs/twitter-scale-mastodon/master/backend/src/main/java/com/rpl/mastodon/modules/Relationships.java&#34;&gt;Relationships&lt;/a&gt;: Implements the social graph, follow suggestions, and other relationships between entities.&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/redplanetlabs/twitter-scale-mastodon/master/backend/src/main/java/com/rpl/mastodon/modules/Core.java&#34;&gt;Core&lt;/a&gt;: Implements timelines, profiles, fanout, boosts, favorites, conversations, replies, and the other core parts of the product.&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/redplanetlabs/twitter-scale-mastodon/master/backend/src/main/java/com/rpl/mastodon/modules/Notifications.java&#34;&gt;Notifications&lt;/a&gt;: Implements notification timelines, including favorites/boosts, mentions, poll completion, new followers, and others.&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/redplanetlabs/twitter-scale-mastodon/master/backend/src/main/java/com/rpl/mastodon/modules/TrendsAndHashtags.java&#34;&gt;TrendsAndHashtags&lt;/a&gt;: Implements trending statuses, links, and hashtags, as well as hashtag timelines and other hashtag-oriented features.&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/redplanetlabs/twitter-scale-mastodon/master/backend/src/main/java/com/rpl/mastodon/modules/GlobalTimelines.java&#34;&gt;GlobalTimelines&lt;/a&gt;: Implements local and federated timelines of all statuses.&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/redplanetlabs/twitter-scale-mastodon/master/backend/src/main/java/com/rpl/mastodon/modules/Search.java&#34;&gt;Search&lt;/a&gt;: Implements profile, status, and hashtag search, as well as profile directories.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;The API server is implemented in the &lt;a href=&#34;https://raw.githubusercontent.com/redplanetlabs/twitter-scale-mastodon/master/api&#34;&gt;api/&lt;/a&gt; folder.&lt;/p&gt; &#xA;&lt;p&gt;Federation is implemented in both the API server and the &lt;a href=&#34;https://raw.githubusercontent.com/redplanetlabs/twitter-scale-mastodon/master/backend/src/main/java/com/rpl/mastodon/modules/Core.java&#34;&gt;Core&lt;/a&gt; module.&lt;/p&gt; &#xA;&lt;h2&gt;Running locally&lt;/h2&gt; &#xA;&lt;p&gt;Running the instance locally is very easy. We&#39;ve set up the API server to also be able run an in process cluster with all the modules launched. All you have to do is run this from the &lt;code&gt;api/&lt;/code&gt; folder:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;mvn spring-boot:run&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Since this doesn&#39;t configuring credentials to connect to S3, you&#39;ll see an error about that. That error is ignored and the instance will continue launching.&lt;/p&gt; &#xA;&lt;p&gt;If you look at &lt;a href=&#34;https://raw.githubusercontent.com/redplanetlabs/twitter-scale-mastodon/master/api/src/main/java/com/rpl/mastodonapi/MastodonApiApplication.java&#34;&gt;MastodonApiApplication&lt;/a&gt;, you can see how it also adds some data to the modules. These include users &#34;alice&#34;, &#34;bob&#34;, and &#34;charlie&#34; with passwords &#34;alice&#34;, &#34;bob&#34;, and &#34;charlie&#34; respectively.&lt;/p&gt; &#xA;&lt;p&gt;To run the frontend, you&#39;ll need to run &lt;a href=&#34;https://github.com/redplanetlabs/soapbox&#34;&gt;our fork of Soapbox&lt;/a&gt;. Our fork contains minor tweaks to the official implementation to fix a variety of small issues. From the root of that fork run:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;NODE_ENV=&#34;development&#34; BACKEND_URL=&#34;http://localhost:8080&#34; yarn build&#xA;NODE_ENV=&#34;development&#34; BACKEND_URL=&#34;http://localhost:8080&#34; yarn dev --port 8000&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Once everything finishes launching, you can play with the instance at &lt;a href=&#34;http://localhost:8000&#34;&gt;http://localhost:8000&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;p&gt;Note that the instance can be run locally on macOS or Linux, but it doesn&#39;t currently work on Windows.&lt;/p&gt; &#xA;&lt;h2&gt;Running on a real cluster&lt;/h2&gt; &#xA;&lt;p&gt;Until Rama is publicly available, the only way to get access to the full Rama release is by &lt;a href=&#34;https://docs.google.com/forms/d/e/1FAIpQLSfrhmBwI0YAeaL8u4XmgfscW4UIUUDp2ZHSs4KmPH_TaDt1QQ/viewform&#34;&gt;applying&lt;/a&gt; to our private beta.&lt;/p&gt;</summary>
  </entry>
</feed>