<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom">
  <title>GitHub Java Daily Trending</title>
  <id>http://mshibanami.github.io/GitHubTrendingRSS</id>
  <updated>2023-05-11T01:36:01Z</updated>
  <subtitle>Daily Trending of Java in GitHub</subtitle>
  <link href="http://mshibanami.github.io/GitHubTrendingRSS"></link>
  <entry>
    <title>novicezk/midjourney-proxy</title>
    <updated>2023-05-11T01:36:01Z</updated>
    <id>tag:github.com,2023-05-11:/novicezk/midjourney-proxy</id>
    <link href="https://github.com/novicezk/midjourney-proxy" rel="alternate"></link>
    <summary type="html">&lt;p&gt;代理 MidJourney 的discord频道，实现api形式调用AI绘图&lt;/p&gt;&lt;hr&gt;&lt;h1&gt;midjourney-proxy&lt;/h1&gt; &#xA;&lt;p&gt;代理 MidJourney 的discord频道，实现api形式调用AI绘图&lt;/p&gt; &#xA;&lt;h2&gt;现有功能&lt;/h2&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;支持 Imagine、U、V 操作，绘图完成后回调&lt;/li&gt; &#xA; &lt;li&gt;支持中文 prompt 翻译，需配置百度翻译或 gpt&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;后续计划&lt;/h2&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;input type=&#34;checkbox&#34; disabled&gt; prompt 敏感词判断&lt;/li&gt; &#xA; &lt;li&gt;&lt;input type=&#34;checkbox&#34; disabled&gt; 支持 describe 指令，根据图片生成 prompt&lt;/li&gt; &#xA; &lt;li&gt;&lt;input type=&#34;checkbox&#34; disabled&gt; Imagine 支持垫图&lt;/li&gt; &#xA; &lt;li&gt;&lt;input type=&#34;checkbox&#34; disabled&gt; 添加任务队列，防止提交过多，MidJourney触发限制&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;使用前提&lt;/h2&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;科学上网&lt;/li&gt; &#xA; &lt;li&gt;docker环境&lt;/li&gt; &#xA; &lt;li&gt;注册 MidJourney，创建自己的频道，参考 &lt;a href=&#34;https://docs.midjourney.com/docs/quick-start&#34;&gt;https://docs.midjourney.com/docs/quick-start&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;添加自己的机器人: &lt;a href=&#34;https://raw.githubusercontent.com/novicezk/midjourney-proxy/main/docs/discord-bot.md&#34;&gt;流程说明&lt;/a&gt;&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;h2&gt;快速启动&lt;/h2&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;下载镜像&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;docker pull novicezk/midjourney-proxy:1.3&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;ol start=&#34;2&#34;&gt; &#xA; &lt;li&gt;启动容器，并设置参数&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 复制出 src/main/resources/application.yml，更改配置&#xA;docker run -d --name midjourney-proxy \&#xA; -p 8080:8080 \&#xA; -v /home/xxx/data/application.yml:/home/spring/config/application.yml \&#xA; --restart=always \&#xA; novicezk/midjourney-proxy:1.3&#xA;&#xA;# 或者直接在启动命令中设置参数&#xA;docker run -d --name midjourney-proxy \&#xA; -p 8080:8080 \&#xA; -e mj.discord.guild-id=xxx \&#xA; -e mj.discord.channel-id=xxx \&#xA; -e mj.discord.user-token=xxx \&#xA; -e mj.discord.bot-token=xxx \&#xA; --restart=always \&#xA; novicezk/midjourney-proxy:1.3&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;ol start=&#34;3&#34;&gt; &#xA; &lt;li&gt;访问 &lt;a href=&#34;http://localhost:8080/mj&#34;&gt;http://localhost:8080/mj&lt;/a&gt; 提示 &#34;项目启动成功&#34;&lt;/li&gt; &#xA; &lt;li&gt;检查discord频道中新创建的机器人是否在线&lt;/li&gt; &#xA; &lt;li&gt;调用api接口的根路径为 &lt;code&gt;http://ip:port/mj&lt;/code&gt;，具体API接口见下文&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;h2&gt;注意事项&lt;/h2&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;启动失败请检查全局代理或HTTP代理，排查 &lt;a href=&#34;https://github.com/DV8FromTheWorld/JDA&#34;&gt;JDA&lt;/a&gt; 连接问题&lt;/li&gt; &#xA; &lt;li&gt;若回调通知接口失败，请检查网络设置，容器中的宿主机IP通常为172.17.0.1&lt;/li&gt; &#xA; &lt;li&gt;在 &lt;a href=&#34;https://github.com/novicezk/midjourney-proxy/issues&#34;&gt;Issues&lt;/a&gt; 中提出其他问题或建议&lt;/li&gt; &#xA; &lt;li&gt;感兴趣的朋友也欢迎加入交流群讨论一下&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;img src=&#34;https://raw.githubusercontent.com/novicezk/midjourney-proxy/main/docs/wechat-qrcode.png&#34; width=&#34;300&#34; height=&#34;300&#34; alt=&#34;交流群二维码&#34; align=&#34;center&#34;&gt; &#xA;&lt;h2&gt;配置项&lt;/h2&gt; &#xA;&lt;table&gt; &#xA; &lt;thead&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;th align=&#34;left&#34;&gt;变量名&lt;/th&gt; &#xA;   &lt;th align=&#34;center&#34;&gt;非空&lt;/th&gt; &#xA;   &lt;th align=&#34;left&#34;&gt;描述&lt;/th&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/thead&gt; &#xA; &lt;tbody&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;mj.discord.guild-id&lt;/td&gt; &#xA;   &lt;td align=&#34;center&#34;&gt;是&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;discord服务器ID&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;mj.discord.channel-id&lt;/td&gt; &#xA;   &lt;td align=&#34;center&#34;&gt;是&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;discord频道ID&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;mj.discord.user-token&lt;/td&gt; &#xA;   &lt;td align=&#34;center&#34;&gt;是&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;discord用户Token&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;mj.discord.bot-token&lt;/td&gt; &#xA;   &lt;td align=&#34;center&#34;&gt;是&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;自定义机器人Token&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;mj.discord.mj-bot-name&lt;/td&gt; &#xA;   &lt;td align=&#34;center&#34;&gt;否&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;mj机器人名称，默认 &#34;Midjourney Bot&#34;&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;mj.notify-hook&lt;/td&gt; &#xA;   &lt;td align=&#34;center&#34;&gt;否&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;任务状态变更回调地址&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;mj.task-store.type&lt;/td&gt; &#xA;   &lt;td align=&#34;center&#34;&gt;否&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;任务存储方式，默认in_memory(内存\重启后丢失)，可选redis&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;mj.task-store.timeout&lt;/td&gt; &#xA;   &lt;td align=&#34;center&#34;&gt;否&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;任务过期时间，过期后删除，默认30天&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;mj.translate-way&lt;/td&gt; &#xA;   &lt;td align=&#34;center&#34;&gt;否&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;中文prompt翻译方式，可选null(默认)、baidu、gpt&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;mj.baidu-translate.appid&lt;/td&gt; &#xA;   &lt;td align=&#34;center&#34;&gt;否&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;百度翻译的appid&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;mj.baidu-translate.app-secret&lt;/td&gt; &#xA;   &lt;td align=&#34;center&#34;&gt;否&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;百度翻译的app-secret&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;mj.openai.gpt-api-key&lt;/td&gt; &#xA;   &lt;td align=&#34;center&#34;&gt;否&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;gpt的api-key&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;mj.openai.timeout&lt;/td&gt; &#xA;   &lt;td align=&#34;center&#34;&gt;否&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;openai调用的超时时间，默认30秒&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;mj.openai.model&lt;/td&gt; &#xA;   &lt;td align=&#34;center&#34;&gt;否&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;openai的模型，默认gpt-3.5-turbo&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;mj.openai.max-tokens&lt;/td&gt; &#xA;   &lt;td align=&#34;center&#34;&gt;否&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;返回结果的最大分词数，默认2048&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;mj.openai.temperature&lt;/td&gt; &#xA;   &lt;td align=&#34;center&#34;&gt;否&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;相似度(0-2.0)，默认0&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;spring.redis&lt;/td&gt; &#xA;   &lt;td align=&#34;center&#34;&gt;否&lt;/td&gt; &#xA;   &lt;td align=&#34;left&#34;&gt;任务存储方式设置为redis，需配置redis相关属性&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/tbody&gt; &#xA;&lt;/table&gt; &#xA;&lt;h2&gt;API接口说明&lt;/h2&gt; &#xA;&lt;h3&gt;1. &lt;code&gt;http://ip:port/mj/trigger/submit&lt;/code&gt; 提交任务&lt;/h3&gt; &#xA;&lt;p&gt;POST application/json&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;{&#xA;    // 动作: 必传，IMAGINE（绘图）、UPSCALE（选中放大）、VARIATION（选中变换）&#xA;    &#34;action&#34;:&#34;IMAGINE&#34;,&#xA;    // 绘图参数: IMAGINE时必传&#xA;    &#34;prompt&#34;: &#34;猫猫&#34;,&#xA;    // 任务ID: UPSCALE、VARIATION时必传&#xA;    &#34;taskId&#34;: &#34;1320098173412546&#34;,&#xA;    // 图序号: 1～4，UPSCALE、VARIATION时必传，表示第几张图&#xA;    &#34;index&#34;: 3,&#xA;    // 自定义字符串: 非必传，供回调到业务系统里使用&#xA;    &#34;state&#34;: &#34;test:22&#34;,&#xA;    // 支持每个任务配置不同回调地址，非必传&#xA;    &#34;notifyHook&#34;: &#34;http://localhost:8113/notify&#34;&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;返回 &lt;code&gt;Message&lt;/code&gt;，code=1表示提交成功，其他时description为错误描述&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;{&#xA;  &#34;code&#34;: 1,&#xA;  &#34;description&#34;: &#34;成功&#34;,&#xA;  &#34;result&#34;: &#34;8498455807619990&#34;&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;result: 任务ID，用于后续查询任务或提交变换任务&lt;/p&gt; &#xA;&lt;h3&gt;2. &lt;code&gt;http://ip:port/mj/trigger/submit-uv&lt;/code&gt; 提交选中放大或变换任务&lt;/h3&gt; &#xA;&lt;p&gt;POST application/json&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;{&#xA;    // 自定义参数，非必传&#xA;    &#34;state&#34;: &#34;test:22&#34;,&#xA;    // 任务描述: 选中ID为1320098173412546的第2张图片放大&#xA;    // 放大 U1～U4 ，变换 V1～V4&#xA;    &#34;content&#34;: &#34;1320098173412546 U2&#34;,&#xA;    // 支持每个任务配置不同回调地址，非必传&#xA;    &#34;notifyHook&#34;: &#34;http://localhost:8113/notify&#34;&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;返回结果同 &lt;code&gt;/trigger/submit&lt;/code&gt;&lt;/p&gt; &#xA;&lt;h3&gt;3. &lt;code&gt;http://ip:port/mj/task/{id}/fetch&lt;/code&gt; GET 查询单个任务&lt;/h3&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;{&#xA;    // 动作: IMAGINE（绘图）、UPSCALE（选中放大）、VARIATION（选中变换）&#xA;    &#34;action&#34;:&#34;IMAGINE&#34;,&#xA;    // 任务ID&#xA;    &#34;id&#34;:&#34;8498455807628990&#34;,&#xA;    // 绘图参数&#xA;    &#34;prompt&#34;:&#34;猫猫&#34;,&#xA;    // 翻译后的绘图参数&#xA;    &#34;promptEn&#34;: &#34;Cat&#34;,&#xA;    // 执行的命令&#xA;    &#34;description&#34;:&#34;/imagine 猫猫&#34;,&#xA;    // 自定义参数&#xA;    &#34;state&#34;:&#34;test:22&#34;,&#xA;    // 提交时间&#xA;    &#34;submitTime&#34;:1682473784826,&#xA;    // 结束时间&#xA;    &#34;finishTime&#34;:null,&#xA;    // 生成图片的url, 成功时有值&#xA;    &#34;imageUrl&#34;:&#34;https://cdn.discordapp.com/attachments/xxx/xxx/xxxx_xxxx.png&#34;,&#xA;    // 任务状态: NOT_START（未启动）、IN_PROGRESS（执行中）、FAILURE（失败）、SUCCESS（成功）&#xA;    &#34;status&#34;:&#34;IN_PROGRESS&#34;&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h3&gt;4. &lt;code&gt;http://ip:port/mj/task/list&lt;/code&gt; GET 查询所有任务&lt;/h3&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;[&#xA;  {&#xA;    &#34;action&#34;:&#34;IMAGINE&#34;,&#xA;    &#34;id&#34;:&#34;8498455807628990&#34;,&#xA;    &#34;prompt&#34;:&#34;猫猫&#34;,&#xA;    &#34;promptEn&#34;: &#34;Cat&#34;,&#xA;    &#34;description&#34;:&#34;/imagine 猫猫&#34;,&#xA;    &#34;state&#34;:&#34;test:22&#34;,&#xA;    &#34;submitTime&#34;:1682473784826,&#xA;    &#34;finishTime&#34;:null,&#xA;    &#34;imageUrl&#34;:null,&#xA;    &#34;status&#34;:&#34;IN_PROGRESS&#34;&#xA;  }&#xA;]&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h2&gt;&lt;code&gt;mj.notify-hook&lt;/code&gt; 任务变更回调&lt;/h2&gt; &#xA;&lt;p&gt;POST application/json&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;{&#xA;    &#34;action&#34;:&#34;IMAGINE&#34;,&#xA;    &#34;id&#34;:&#34;8498455807628990&#34;,&#xA;    &#34;prompt&#34;:&#34;猫猫&#34;,&#xA;    &#34;promptEn&#34;: &#34;Cat&#34;,&#xA;    &#34;description&#34;:&#34;/imagine 猫猫&#34;,&#xA;    &#34;state&#34;:&#34;test:22&#34;,&#xA;    &#34;submitTime&#34;:1682473784826,&#xA;    &#34;finishTime&#34;:null,&#xA;    &#34;imageUrl&#34;:null,&#xA;    &#34;status&#34;:&#34;IN_PROGRESS&#34;&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h2&gt;应用项目&lt;/h2&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/novicezk/wechat-midjourney&#34;&gt;wechat-midjourney&lt;/a&gt; : 代理微信客户端，接入MidJourney&lt;/li&gt; &#xA;&lt;/ul&gt;</summary>
  </entry>
</feed>