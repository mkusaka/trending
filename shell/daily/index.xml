<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom">
  <title>GitHub Shell Daily Trending</title>
  <id>http://mshibanami.github.io/GitHubTrendingRSS</id>
  <updated>2022-08-04T01:54:08Z</updated>
  <subtitle>Daily Trending of Shell in GitHub</subtitle>
  <link href="http://mshibanami.github.io/GitHubTrendingRSS"></link>
  <entry>
    <title>syndbg/goenv</title>
    <updated>2022-08-04T01:54:08Z</updated>
    <id>tag:github.com,2022-08-04:/syndbg/goenv</id>
    <link href="https://github.com/syndbg/goenv" rel="alternate"></link>
    <summary type="html">&lt;p&gt;ğŸš™ Like pyenv and rbenv, but for Go.&lt;/p&gt;&lt;hr&gt;&lt;h1&gt;Go Version Management: goenv&lt;/h1&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://travis-ci.org/syndbg/goenv&#34;&gt;&lt;img src=&#34;https://travis-ci.org/syndbg/goenv.svg?branch=master&#34; alt=&#34;Build Status&#34;&gt;&lt;/a&gt;&lt;/p&gt; &#xA;&lt;p&gt;goenv aims to be as simple as possible and follow the already established successful version management model of &lt;a href=&#34;https://github.com/yyuu/pyenv&#34;&gt;pyenv&lt;/a&gt; and &lt;a href=&#34;https://github.com/rbenv/rbenv&#34;&gt;rbenv&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;p&gt;This project was cloned from &lt;a href=&#34;https://github.com/yyuu/pyenv&#34;&gt;pyenv&lt;/a&gt; and modified for Go.&lt;/p&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://asciinema.org/a/17IT3YiQ56hiJsb2iHpGHlJqj&#34;&gt;&lt;img src=&#34;https://asciinema.org/a/17IT3YiQ56hiJsb2iHpGHlJqj.svg?sanitize=true&#34; alt=&#34;asciicast&#34;&gt;&lt;/a&gt;&lt;/p&gt; &#xA;&lt;h3&gt;goenv &lt;em&gt;does...&lt;/em&gt;&lt;/h3&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Let you &lt;strong&gt;change the global Go version&lt;/strong&gt; on a per-user basis.&lt;/li&gt; &#xA; &lt;li&gt;Provide support for &lt;strong&gt;per-project Go versions&lt;/strong&gt;.&lt;/li&gt; &#xA; &lt;li&gt;Allow you to &lt;strong&gt;override the Go version&lt;/strong&gt; with an environment variable.&lt;/li&gt; &#xA; &lt;li&gt;Search commands from &lt;strong&gt;multiple versions of Go at a time&lt;/strong&gt;.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h3&gt;goenv compared to others:&lt;/h3&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/pwoolcoc/goenv&#34;&gt;https://github.com/pwoolcoc/goenv&lt;/a&gt; depends on Python,&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/crsmithdev/goenv&#34;&gt;https://github.com/crsmithdev/goenv&lt;/a&gt; depends on Go,&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/moovweb/gvm&#34;&gt;https://github.com/moovweb/gvm&lt;/a&gt; is a different approach to the problem that&#39;s modeled after &lt;code&gt;nvm&lt;/code&gt;. &lt;code&gt;goenv&lt;/code&gt; is more simplified.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;hr&gt; &#xA;&lt;h2&gt;Links&lt;/h2&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;strong&gt;&lt;a href=&#34;https://raw.githubusercontent.com/syndbg/goenv/master/HOW_IT_WORKS.md&#34;&gt;How It Works&lt;/a&gt;&lt;/strong&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;strong&gt;&lt;a href=&#34;https://raw.githubusercontent.com/syndbg/goenv/master/INSTALL.md&#34;&gt;Installation&lt;/a&gt;&lt;/strong&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;strong&gt;&lt;a href=&#34;https://raw.githubusercontent.com/syndbg/goenv/master/COMMANDS.md&#34;&gt;Command Reference&lt;/a&gt;&lt;/strong&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;strong&gt;&lt;a href=&#34;https://raw.githubusercontent.com/syndbg/goenv/master/ENVIRONMENT_VARIABLES.md&#34;&gt;Environment variables&lt;/a&gt;&lt;/strong&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;strong&gt;&lt;a href=&#34;https://raw.githubusercontent.com/syndbg/goenv/master/CONTRIBUTING.md&#34;&gt;Contributing&lt;/a&gt;&lt;/strong&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;strong&gt;&lt;a href=&#34;https://raw.githubusercontent.com/syndbg/goenv/master/CODE_OF_CONDUCT.md&#34;&gt;Code-of-Conduct&lt;/a&gt;&lt;/strong&gt;&lt;/li&gt; &#xA;&lt;/ul&gt;</summary>
  </entry>
  <entry>
    <title>neargle/my-re0-k8s-security</title>
    <updated>2022-08-04T01:54:08Z</updated>
    <id>tag:github.com,2022-08-04:/neargle/my-re0-k8s-security</id>
    <link href="https://github.com/neargle/my-re0-k8s-security" rel="alternate"></link>
    <summary type="html">&lt;p&gt;[WIP] æ•´ç†è¿‡å»çš„åˆ†äº«ï¼Œä»é›¶å¼€å§‹Kubernetesæ”»é˜² ğŸ§&lt;/p&gt;&lt;hr&gt;&lt;h1&gt;ä»é›¶å¼€å§‹çš„Kubernetesæ”»é˜²&lt;/h1&gt; &#xA;&lt;p&gt;æœ¬ææ–™åŸºäºæˆ‘åŸå…ˆåœ¨è…¾è®¯å‘è¡¨çš„åšå®¢ &lt;strong&gt;ã€Šçº¢è“å¯¹æŠ—ä¸­çš„äº‘åŸç”Ÿæ¼æ´æŒ–æ˜åŠåˆ©ç”¨å®å½•ã€‹&lt;/strong&gt; è¿›è¡ŒæŒç»­æ›´æ–°å’Œå®Œå–„ï¼Œç”¨äºè§£å†³å…¬ä¼—å·æ— æ³•åŠæ—¶å‹˜è¯¯å’Œè°ƒæ•´çš„å±€é™æ€§ï¼›ä¸”ç”±äºKuberneteså®‰å…¨ç‰¹æ€§ã€å®¹å™¨å®‰å…¨ç­‰åœºæ™¯çš„æ”»é˜²æŠ€æœ¯åœ¨ä¸æ–­å‘å±•å’Œæ”¹å˜ï¼Œæ–‡ç« çš„å†…å®¹ä¹Ÿä¼šæŒç»­ä¸æ–­çš„è¿›è¡Œè°ƒæ•´ï¼›å¹¶åœ¨åç»­ä¼šè¡¥å……ä»é›¶å¼€å§‹çš„å®éªŒç¯å¢ƒæ­å»ºã€Kuberneteså®‰å…¨ç‰¹æ€§å¯¹æŠ—ã€å®Œæ•´çº¢è“å¯¹æŠ—æ¡ˆä¾‹ã€EBPFå®‰å…¨ç­‰ç›¸å…³çš„å†…å®¹ã€‚å¸Œæœ›æ•´ç†å’Œå›Šæ‹¬æˆ‘åœ¨Kubeconã€CloudNativeConã€HITBã€BlackHatã€WHCã€CISç­‰ä¼šè®®ä¸Šåˆ†äº«çš„äº‘åŸç”Ÿå®‰å…¨ç›¸å…³çš„è®®é¢˜ï¼Œä»¥åŠæ­¤å‰å†™è¿‡çš„æ‰€æœ‰ç›¸å…³æ–‡ç« ï¼›å¸Œæœ›é‡æ–°æ„å»ºå’Œæ•´ç†è‡ªå·±çš„åœ¨ Kubernetes ä¸Šçš„çŸ¥è¯†ä½“ç³»ã€‚ğŸ‘ &lt;em&gt;ç›¼æœ›èƒ½å¤šç§¯ç´¯å‹˜è¯¯ï¼Œæ²‰æ·€ä¸€äº›çœŸæ­£æœ‰è´¨é‡çš„å†…å®¹ã€‚&lt;/em&gt;&lt;/p&gt; &#xA;&lt;p&gt;æ–‡ä»¶åŒ…æ‹¬[WIP]ï¼š&lt;/p&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/slide/&#34;&gt;SLIDE&lt;/a&gt; - è¿‘æœŸå‘è¡¨çš„è®®é¢˜ææ–™&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/paper/&#34;&gt;PAPER&lt;/a&gt; - è¿‘æœŸå†™çš„æ–‡ç« å’Œç™½çš®ä¹¦æ±‡æ€»&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/gist/&#34;&gt;GIST&lt;/a&gt; - æ–‡ç« å’Œè®®é¢˜æ‰€ç”¨åˆ°çš„ä»£ç &lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;table&gt; &#xA; &lt;thead&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;th&gt;Security Conference&lt;/th&gt; &#xA;   &lt;th&gt;CNCF &amp;amp; Linux Foundation&lt;/th&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/thead&gt; &#xA; &lt;tbody&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/mdimg/20220521123149.png&#34; height=&#34;45&#34;&gt; &lt;img src=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/mdimg/20220521122243.png&#34; height=&#34;45&#34;&gt; &lt;img src=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/mdimg/20220521230036.png&#34; height=&#34;45&#34;&gt; &lt;img src=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/mdimg/20220521225818.png&#34; height=&#34;45&#34;&gt;&lt;/td&gt; &#xA;   &lt;td&gt;&lt;img src=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/mdimg/20220521115419.png&#34; height=&#34;45&#34;&gt;&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA;  &lt;tr&gt; &#xA;   &lt;td&gt;HITBã€ BlackHat (Arsenal)ã€ WHCã€CIS ...&lt;/td&gt; &#xA;   &lt;td&gt;Kubecon &amp;amp; CloudNativeCon ...&lt;/td&gt; &#xA;  &lt;/tr&gt; &#xA; &lt;/tbody&gt; &#xA;&lt;/table&gt; &#xA;&lt;h2&gt;0. ç›®å½•&lt;/h2&gt;&#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/#%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%9A%84kubernetes%E6%94%BB%E9%98%B2&#34;&gt;ä»é›¶å¼€å§‹çš„Kubernetesæ”»é˜²&lt;/a&gt; &#xA;  &lt;ul&gt; &#xA;   &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/#0-%E7%9B%AE%E5%BD%95&#34;&gt;0. ç›®å½•&lt;/a&gt; &#xA;    &lt;ul&gt; &#xA;     &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/#05-%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%E5%BB%BA%E8%AE%AE&#34;&gt;0.5 æµ‹è¯•ç¯å¢ƒå»ºè®®&lt;/a&gt;&lt;/li&gt; &#xA;    &lt;/ul&gt; &lt;/li&gt; &#xA;   &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/#1-%E8%83%8C%E6%99%AF&#34;&gt;1. èƒŒæ™¯&lt;/a&gt;&lt;/li&gt; &#xA;   &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/#2-%E6%94%BB%E9%98%B2%E6%BC%94%E7%BB%83%E4%B8%AD%E7%9A%84%E4%BA%91%E5%8E%9F%E7%94%9F%E5%AE%89%E5%85%A8&#34;&gt;2. æ”»é˜²æ¼”ç»ƒä¸­çš„äº‘åŸç”Ÿå®‰å…¨&lt;/a&gt;&lt;/li&gt; &#xA;   &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/#3-%E5%8D%95%E5%AE%B9%E5%99%A8%E7%8E%AF%E5%A2%83%E5%86%85%E7%9A%84%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86&#34;&gt;3. å•å®¹å™¨ç¯å¢ƒå†…çš„ä¿¡æ¯æ”¶é›†&lt;/a&gt;&lt;/li&gt; &#xA;   &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/#4-%E5%AE%B9%E5%99%A8%E7%BD%91%E7%BB%9C&#34;&gt;4. å®¹å™¨ç½‘ç»œ&lt;/a&gt;&lt;/li&gt; &#xA;   &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/#5-%E5%85%B3%E4%BA%8E%E9%80%83%E9%80%B8%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B&#34;&gt;5. å…³äºé€ƒé€¸çš„é‚£äº›äº‹&lt;/a&gt; &#xA;    &lt;ul&gt; &#xA;     &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/#51-privileged-%E5%AE%B9%E5%99%A8%E5%86%85-mount-device&#34;&gt;5.1. privileged å®¹å™¨å†… mount device&lt;/a&gt;&lt;/li&gt; &#xA;     &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/#52-%E6%94%BB%E5%87%BB-lxcfs&#34;&gt;5.2. æ”»å‡» lxcfs&lt;/a&gt;&lt;/li&gt; &#xA;     &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/#53-%E5%88%9B%E5%BB%BA-cgroup-%E8%BF%9B%E8%A1%8C%E5%AE%B9%E5%99%A8%E9%80%83%E9%80%B8&#34;&gt;5.3. åˆ›å»º cgroup è¿›è¡Œå®¹å™¨é€ƒé€¸&lt;/a&gt;&lt;/li&gt; &#xA;     &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/#54%E7%89%B9%E6%AE%8A%E8%B7%AF%E5%BE%84%E6%8C%82%E8%BD%BD%E5%AF%BC%E8%87%B4%E7%9A%84%E5%AE%B9%E5%99%A8%E9%80%83%E9%80%B8&#34;&gt;5.4.&amp;nbsp;ç‰¹æ®Šè·¯å¾„æŒ‚è½½å¯¼è‡´çš„å®¹å™¨é€ƒé€¸&lt;/a&gt;&lt;/li&gt; &#xA;     &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/#541-docker-in-docker&#34;&gt;5.4.1 Docker in Docker&lt;/a&gt;&lt;/li&gt; &#xA;     &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/#542-%E6%94%BB%E5%87%BB%E6%8C%82%E8%BD%BD%E4%BA%86%E4%B8%BB%E6%9C%BA-proc-%E7%9B%AE%E5%BD%95%E7%9A%84%E5%AE%B9%E5%99%A8&#34;&gt;5.4.2 æ”»å‡»æŒ‚è½½äº†ä¸»æœº /proc ç›®å½•çš„å®¹å™¨&lt;/a&gt;&lt;/li&gt; &#xA;     &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/#55-sys_ptrace-%E5%AE%89%E5%85%A8%E9%A3%8E%E9%99%A9&#34;&gt;5.5. SYS_PTRACE å®‰å…¨é£é™©&lt;/a&gt;&lt;/li&gt; &#xA;     &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/#56-%E5%88%A9%E7%94%A8%E5%A4%A7%E6%9D%83%E9%99%90%E7%9A%84-service-account&#34;&gt;5.6. åˆ©ç”¨å¤§æƒé™çš„ Service Account&lt;/a&gt;&lt;/li&gt; &#xA;     &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/#57-cve-2020-15257-%E5%88%A9%E7%94%A8&#34;&gt;5.7. CVE-2020-15257 åˆ©ç”¨&lt;/a&gt;&lt;/li&gt; &#xA;     &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/#58-runc-cve-2019-5736-%E5%92%8C%E5%AE%B9%E5%99%A8%E7%BB%84%E4%BB%B6%E5%8E%86%E5%8F%B2%E9%80%83%E9%80%B8%E6%BC%8F%E6%B4%9E%E7%BB%BC%E8%BF%B0&#34;&gt;5.8. runc CVE-2019-5736 å’Œå®¹å™¨ç»„ä»¶å†å²é€ƒé€¸æ¼æ´ç»¼è¿°&lt;/a&gt;&lt;/li&gt; &#xA;     &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/#59-%E5%86%85%E6%A0%B8%E6%BC%8F%E6%B4%9E%E6%8F%90%E6%9D%83%E5%92%8C%E9%80%83%E9%80%B8%E6%A6%82%E8%BF%B0&#34;&gt;5.9. å†…æ ¸æ¼æ´ææƒå’Œé€ƒé€¸æ¦‚è¿°&lt;/a&gt;&lt;/li&gt; &#xA;     &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/#510-%E5%86%99-staticpod-%E9%80%83%E9%80%B8%E6%88%96%E6%9D%83%E9%99%90%E7%BB%B4%E6%8C%81&#34;&gt;5.10. å†™ StaticPod é€ƒé€¸æˆ–æƒé™ç»´æŒ&lt;/a&gt;&lt;/li&gt; &#xA;    &lt;/ul&gt; &lt;/li&gt; &#xA;   &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/#6-%E5%AE%B9%E5%99%A8%E7%9B%B8%E5%85%B3%E7%BB%84%E4%BB%B6%E7%9A%84%E5%8E%86%E5%8F%B2%E6%BC%8F%E6%B4%9E&#34;&gt;6. å®¹å™¨ç›¸å…³ç»„ä»¶çš„å†å²æ¼æ´&lt;/a&gt;&lt;/li&gt; &#xA;   &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/#7-%E5%AE%B9%E5%99%A8%E5%AE%B9%E5%99%A8%E7%BC%96%E6%8E%92%E7%BB%84%E4%BB%B6-api-%E9%85%8D%E7%BD%AE%E4%B8%8D%E5%BD%93%E6%88%96%E6%9C%AA%E9%89%B4%E6%9D%83&#34;&gt;7. å®¹å™¨ã€å®¹å™¨ç¼–æ’ç»„ä»¶ API é…ç½®ä¸å½“æˆ–æœªé‰´æƒ&lt;/a&gt; &#xA;    &lt;ul&gt; &#xA;     &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/#71-%E7%BB%84%E4%BB%B6%E5%88%86%E5%B7%A5&#34;&gt;7.1. ç»„ä»¶åˆ†å·¥&lt;/a&gt;&lt;/li&gt; &#xA;     &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/#72apiserver&#34;&gt;7.2.&amp;nbsp;apiserver&lt;/a&gt;&lt;/li&gt; &#xA;     &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/#73-kubelet&#34;&gt;7.3. kubelet&lt;/a&gt;&lt;/li&gt; &#xA;     &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/#74-dashboard&#34;&gt;7.4. dashboard&lt;/a&gt;&lt;/li&gt; &#xA;     &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/#75-etcd&#34;&gt;7.5. etcd&lt;/a&gt;&lt;/li&gt; &#xA;     &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/#76-docker-remote-api&#34;&gt;7.6. docker remote api&lt;/a&gt;&lt;/li&gt; &#xA;     &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/#77-kubectl-proxy&#34;&gt;7.7. kubectl proxy&lt;/a&gt;&lt;/li&gt; &#xA;    &lt;/ul&gt; &lt;/li&gt; &#xA;   &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/#8-%E5%AE%B9%E5%99%A8%E9%95%9C%E5%83%8F%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98&#34;&gt;8. å®¹å™¨é•œåƒå®‰å…¨é—®é¢˜&lt;/a&gt;&lt;/li&gt; &#xA;   &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/#9-%E4%BA%8C%E6%AC%A1%E5%BC%80%E5%8F%91%E6%89%80%E4%BA%A7%E7%94%9F%E7%9A%84%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98&#34;&gt;9. äºŒæ¬¡å¼€å‘æ‰€äº§ç”Ÿçš„å®‰å…¨é—®é¢˜&lt;/a&gt; &#xA;    &lt;ul&gt; &#xA;     &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/#91-%E5%AF%B9-kubernetes-api-%E7%9A%84%E8%AF%B7%E6%B1%82%E8%BD%AC%E5%8F%91%E6%88%96%E6%8B%BC%E6%8E%A5&#34;&gt;9.1. å¯¹ Kubernetes API çš„è¯·æ±‚è½¬å‘æˆ–æ‹¼æ¥&lt;/a&gt;&lt;/li&gt; &#xA;    &lt;/ul&gt; &lt;/li&gt; &#xA;   &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/#10-serverless&#34;&gt;10. Serverless&lt;/a&gt;&lt;/li&gt; &#xA;   &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/#101-%E6%96%87%E4%BB%B6%E9%A9%BB%E7%95%99%E5%AF%BC%E8%87%B4%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C&#34;&gt;10.1. æ–‡ä»¶é©»ç•™å¯¼è‡´å‘½ä»¤æ‰§è¡Œ&lt;/a&gt;&lt;/li&gt; &#xA;   &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/#102-%E6%94%BB%E5%87%BB%E5%85%AC%E7%94%A8%E5%AE%B9%E5%99%A8--%E9%95%9C%E5%83%8F&#34;&gt;10.2. æ”»å‡»å…¬ç”¨å®¹å™¨ / é•œåƒ&lt;/a&gt;&lt;/li&gt; &#xA;   &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/#11-devops&#34;&gt;11. DevOps&lt;/a&gt;&lt;/li&gt; &#xA;   &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/#12-%E4%BA%91%E5%8E%9F%E7%94%9F-api-%E7%BD%91%E5%85%B3&#34;&gt;12. äº‘åŸç”Ÿ API ç½‘å…³&lt;/a&gt;&lt;/li&gt; &#xA;   &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/#121-apisix-%E7%9A%84-rce-%E5%88%A9%E7%94%A8&#34;&gt;12.1. APISIX çš„ RCE åˆ©ç”¨&lt;/a&gt;&lt;/li&gt; &#xA;   &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/#13-%E5%85%B6%E5%AE%83%E5%88%A9%E7%94%A8%E5%9C%BA%E6%99%AF%E5%92%8C%E6%89%8B%E6%B3%95&#34;&gt;13. å…¶å®ƒåˆ©ç”¨åœºæ™¯å’Œæ‰‹æ³•&lt;/a&gt;&lt;/li&gt; &#xA;   &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/#131-%E4%BB%8E-cronjob-%E8%B0%88%E6%8C%81%E4%B9%85%E5%8C%96&#34;&gt;13.1. ä» CronJob è°ˆæŒä¹…åŒ–&lt;/a&gt;&lt;/li&gt; &#xA;   &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/#14-%E8%87%B4%E8%B0%A2&#34;&gt;14. è‡´è°¢&lt;/a&gt;&lt;/li&gt; &#xA;   &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/neargle/my-re0-k8s-security/main/#15-%E5%BC%95%E7%94%A8&#34;&gt;15. å¼•ç”¨&lt;/a&gt;&lt;/li&gt; &#xA;  &lt;/ul&gt; &lt;/li&gt; &#xA;&lt;/ul&gt;&#xA;&lt;h3&gt;0.5 æµ‹è¯•ç¯å¢ƒå»ºè®®&lt;/h3&gt;&#xA;&lt;p&gt;æµ‹è¯•ç¯å¢ƒçš„æ‰€æœ‰é—®é¢˜é’±éƒ½èƒ½è§£å†³ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨äº‘å‚å•†ä¸Šè´­ä¹°ä¸€ä¸ªåŒ…å«å¤šèŠ‚ç‚¹çš„ Kubernetes å®¹å™¨é›†ç¾¤ï¼›ä½†å¦‚æœåªæœ‰ä¸€å°VPSæœåŠ¡å™¨æˆ–é…ç½®æœ‰é™çš„è™šæ‹Ÿæœºç¯å¢ƒï¼Œé‚£ä¹ˆæˆ‘å»ºè®®å¯ä»¥ä½¿ç”¨ minikubeã€kind æˆ– K3s ç­‰å·¥å…·æ¥æ­å»ºä¸€ä¸ª Kubernetes å®¹å™¨é›†ç¾¤è¿›è¡Œæµ‹è¯•ã€‚&lt;/p&gt;&#xA;&lt;h2&gt;1. èƒŒæ™¯&lt;/h2&gt;&#xA;&lt;p&gt;å›é¡¾è¿‘å‡ å¹´æˆ‘åœ¨å®¹å™¨ã€Kubernetesä¸Šçš„æ¢ç´¢å’Œæ²‰æ·€ï¼Œæˆ‘ä»¬åœ¨ 2018 å¹´çš„æ—¶å€™å¼€å§‹æ­£å¼æŠ•å…¥å¯¹ Serverless å’Œå®¹å™¨ç¼–æ’æŠ€æœ¯åœ¨æ”»é˜²åœºæ™¯çš„é¢„ç ”ï¼Œå¹¶æŠŠç›¸å…³çš„æ²‰æ·€æœåŠ¡äºå¤šä¸ªè…¾è®¯åŸºç¡€è®¾æ–½å’Œäº§å“ä¹‹ä¸Šï¼Œè€Œåœ¨è¿‘æœŸå†…å¤–éƒ¨çš„çº¢è“å¯¹æŠ—æ¼”ç»ƒä¸­è…¾è®¯è“å†›ä¹Ÿå¤šæ¬¡ä¾é åœ¨äº‘åŸç”Ÿåœºæ™¯ä¸Šçš„æ¼æ´æŒ–æ˜å’Œæ¼æ´åˆ©ç”¨ï¼Œè¿›è€Œçªç ´é˜²å¾¡è¿›å…¥åˆ°å†…ç½‘æˆ–æ”»ç ´æ ¸å¿ƒé¶æ ‡ã€‚&lt;/p&gt;&#xA;&lt;p&gt;æœ¬ç¯‡æ–‡ç« æˆ‘ä»¬æƒ³èšç„¦äºæ”»é˜²å¯¹æŠ—ä¸­æ‰€æ²‰æ·€ä¸‹æ¥çš„æ¼æ´ï¼Œåˆ†äº«æˆ‘ä»¬åœ¨å¤šå¤„æ”»é˜²åœºæ™¯æ‰€é‡åˆ°çš„äº‘åŸç”Ÿç›¸å…³çš„æ¼æ´æŒ–æ˜å’Œæ¼æ´åˆ©ç”¨å®ä¾‹ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;æ³¨ï¼šæœ¬ææ–™æ‰€æœ‰å†…å®¹ä»…ä¾›å®‰å…¨ç ”ç©¶å’Œä¼ä¸šå®‰å…¨èƒ½åŠ›å»ºè®¾å‚è€ƒï¼Œè¯·å‹¿ç”¨äºæœªæˆæƒæ¸—é€æµ‹è¯•å’Œæ¶æ„å…¥ä¾µæ”»å‡»ã€‚&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;h2&gt;2. æ”»é˜²æ¼”ç»ƒä¸­çš„äº‘åŸç”Ÿå®‰å…¨&lt;/h2&gt;&#xA;&lt;p&gt;CNCFï¼ˆäº‘åŸç”Ÿè®¡ç®—åŸºé‡‘ä¼š &amp;nbsp;Cloud Native Computing Foundationï¼‰åœ¨å¯¹äº‘åŸç”Ÿå®šä¹‰çš„æè¿°ä¸­æåˆ° â€œäº‘åŸç”Ÿçš„ä»£è¡¨æŠ€æœ¯åŒ…æ‹¬å®¹å™¨ã€æœåŠ¡ç½‘æ ¼ã€å¾®æœåŠ¡ã€ä¸å¯å˜åŸºç¡€è®¾æ–½å’Œå£°æ˜å¼ APIâ€ï¼›&lt;/p&gt;&#xA;&lt;p&gt;æˆ‘ä»¬ä»Šå¤©æ‰€èŠåˆ°çš„æ¼æ´å’Œåˆ©ç”¨æ‰‹æ³•ä¹Ÿç´§ç´§å›´ç»•ç€ä¸Šè¿°çš„å‡ ç±»æŠ€æœ¯å’Œç”±äº‘åŸç”Ÿç›¸å…³æŠ€æœ¯æ‰€æ¼”åŒ–å‡ºæ¥çš„å¤šç§æŠ€æœ¯æ¶æ„è¿›è¡Œï¼ŒåŒ…æ‹¬ä½†ä¸é™äºå®¹å™¨ã€æœåŠ¡ç½‘æ ¼ã€å¾®æœåŠ¡ã€ä¸å¯å˜åŸºç¡€è®¾æ–½ã€å£°æ˜å¼ APIã€æ— æœåŠ¡æ¶æ„ã€å‡½æ•°è®¡ç®—ã€DevOps ç­‰ï¼Œå¹¶æ¶‰åŠç ”å‘å›¢é˜Ÿåœ¨ä½¿ç”¨çš„ä¸€äº›äº‘åŸç”Ÿå¼€æºç»„ä»¶å’Œè‡ªç ”ã€äºŒæ¬¡å¼€å‘æ—¶å¸¸è§çš„å®‰å…¨é—®é¢˜ã€‚ä¸åœ¨ â€œäº‘åŸç”Ÿå®‰å…¨â€ è¿™ä¸ªæ¦‚å¿µä¸Šåšè¿‡å¤šçš„å»¶ä¼¸å’Œæ‰©å±•ï¼Œä¸”æåŠæ‰€æœ‰çš„å®‰å…¨æ¼æ´éƒ½åœ¨ â€œè…¾è®¯è“å†›â€ å¯¹å†…å¯¹å¤–çš„æ”»é˜²æ¼”ç»ƒå’Œæ¼æ´æŒ–æ˜ä¸­æœ‰å®é™…çš„åˆ©ç”¨ç»éªŒç§¯ç´¯ã€‚&lt;/p&gt;&#xA;&lt;p&gt;åœ¨å®é™…çš„æ”»é˜²ä¸­æˆ‘ä»¬æ‰€è¿›è¡Œçš„æ”»å‡»è·¯å¾„å¹¶éå®Œå…¨å¥‘åˆåœ¨ CIS2020 ä¸Šæ€»ç»“çš„æ”»å‡»æ¨¡å‹ï¼š&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftBdfO2wkP8CxGyLPo3g9YnEbsMnrYicqc20yEgrxWVmdLEWUwue54Skw/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;å› ä¸ºå¤§éƒ¨åˆ†æƒ…å†µä¸‹æˆ‘ä»¬é‡åˆ°çš„å†…ç½‘å¹¶éå®Œå…¨åŸºäºå®¹å™¨æŠ€æœ¯æ‰€æ„å»ºçš„ï¼Œæ‰€ä»¥å†…ç½‘çš„èµ·ç‚¹å¹¶ä¸ä¸€å®šæ˜¯ä¸€ä¸ªæƒé™å—é™çš„å®¹å™¨ï¼Œä½†æ”»å‡»çš„æ–¹å‘å’Œç›®æ ‡å´å¤§åŒå°å¼‚ï¼šä¸ºäº†è·å–ç‰¹å®šé¶æ ‡çš„æƒé™ã€èµ„é‡‘å’Œæ•°æ®ï¼Œæˆ‘ä»¬ä¸€èˆ¬éœ€è¦æ§åˆ¶æ›´å¤šä¹ƒè‡³å…¨éƒ¨çš„å®¹å™¨ã€ä¸»æœºå’Œé›†ç¾¤ã€‚&lt;/p&gt;&#xA;&lt;p&gt;ä¹Ÿç”±äºä¸šç•Œäº‘åŸç”Ÿå®è·µçš„å‘å±•éå¸¸è¿…é€Ÿï¼Œè™½ç„¶è¿›å…¥å†…ç½‘ä¹‹åæˆ‘ä»¬æ‰€æ¥è§¦çš„ä¸ä¸€å®šæ˜¯å…¨æ˜¯ Kubernetes æ‰€ç¼–æ’ä¸‹çš„å®¹å™¨ç½‘ç»œå’Œæ¶æ„ï¼Œä½†åŸºäºäº‘åŸç”ŸæŠ€æœ¯æ‰€äº§ç”Ÿçš„æ–°æ¼æ´å’Œåˆ©ç”¨æ‰‹æ³•å¾€å¾€èƒ½å¸®è“å†›æ‰“å¼€å±€é¢ã€‚&lt;/p&gt;&#xA;&lt;p&gt;ä¸¾ä¸ªä¾‹å­ï¼Œå½“æˆ‘ä»¬é€šè¿‡è¿œæ§æœ¨é©¬è·å–æŸä¸ªé›†ç¾¤ç®¡ç†å‘˜ PC ä¸Šçš„ kubeconfig æ–‡ä»¶ ï¼ˆä¸€èˆ¬ä½äº ~/.kube/config ç›®å½•ï¼‰ï¼Œæ­¤æ—¶æˆ‘ä»¬å°±æ‹¥æœ‰äº†ç®¡ç† Kubernetes é›†ç¾¤çš„æ‰€æœ‰èƒ½åŠ›äº†ï¼Œå…·ä½“èƒ½åšçš„äº‹æƒ…åé¢ä¼šæœ‰æ›´è¯¦ç»†çš„æ¢è®¨ã€‚&lt;/p&gt;&#xA;&lt;p&gt;å¦‚æœæ­¤æ—¶è¯¥é›†ç¾¤æ²¡æœ‰è®¾ç½®ä¸¥æ ¼çš„ security policy ä¸”ç›®æ ‡ä¼ä¸šçš„ HIDS æ²¡æœ‰é’ˆå¯¹å®¹å™¨ç‰¹æ€§è¿›è¡Œä¸€å®šç­–ç•¥ä¼˜åŒ–çš„è¯ï¼Œé‚£åˆ›å»ºä¸€ä¸ªèƒ½è·å– NODE æƒé™çš„ POD æˆ–è®¸å°±æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œå› ä¸ºåªæœ‰è¿™æ ·è·å–çš„ shell æ‰èƒ½æ›´æ–¹ä¾¿çš„åœ¨å®¹å™¨æ¯æœºä¸Šè¿›è¡Œä¿¡æ¯æ”¶é›†ï¼Œä¾‹å¦‚ strace æ¯æœº sshd è¿›ç¨‹æŠ“å–æˆ‘ä»¬æƒ³è¦çš„ç”¨æˆ·åå’Œå¯†ç ã€ä½¿ç”¨ tcpdump æŠ“å–å†…ç½‘ç³»ç»Ÿçš„ç®¡ç†å‘˜ç™»å½•æ€ç­‰ï¼Œç›®å‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨ä¸€èˆ¬æ˜¯æ²¡æœ‰è¿™äº›æƒé™çš„ã€‚&lt;/p&gt;&#xA;&lt;p&gt;ä»¥ä¸‹æ˜¯è¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬å¸¸ç”¨çš„ POD yaml é…ç½®ï¼š&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftwCHtcUarg5Q2TibAGToyUjjicA79dtZD5WicGABfq5W5Td7yPAaRicHLqg/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;å¦‚æœå¯¹ Kubernetes çš„ POD ä¸ç†Ÿæ‚‰ï¼Œå…¶å®ä¸Šè¿°çš„é…ç½®å°±æ¯”è¾ƒç±»ä¼¼äºåœ¨æƒ³è¦ ROOT æƒé™çš„ä¸šåŠ¡æœåŠ¡å™¨ä¸Šæ‰§è¡Œä»¥ä¸‹ docker å‘½ä»¤:&lt;/p&gt;&#xA;&lt;p&gt;docker -H ${host_docker_sock} run -d -it --name neartest_Kubernetes_hashsubix -v &#34;/proc:/host/proc&#34; -v &#34;/sys:/host/sys&#34; -v &#34;/:/near_sandbox&#34; --network=host --privileged=true --cap-add=ALL alpine:latest /bin/sh -c tail -f /dev/null&lt;/p&gt;&#xA;&lt;p&gt;æ‰§è¡Œçš„ç»“æœå’Œä½œç”¨å¦‚ä¸‹ (æ³¨ï¼šæ‰€æœ‰çš„æŒ‚è½½å’Œé€‰é¡¹å¹¶ééƒ½å¿…é¡»ï¼Œå®æˆ˜ä¸­å¡«å†™éœ€è¦çš„æƒé™å’Œç›®å½•å³å¯ï¼Œæ­¤å¤„æä¾›ä¸€ä¸ªè¾ƒå…¨çš„å‚è€ƒ)ï¼š&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftgtxzp2bHN2wPiclVFXdjiaI3GThc2EllRLEjqhe5VhQNH4FDsz0srf8g/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;å½“ç„¶ä¸Šè¿°å¤§éƒ¨åˆ†é…ç½®éƒ½ä¼šè¢«å¤šç§Ÿæˆ·é›†ç¾¤ä¸‹çš„ Kubernetes Security Policy æ‰€æ‹¦æˆªï¼Œä¸”å¦‚æœç›®å‰ä¸»æœºä¸Šçš„ HIDS æœ‰ä¸€å®šå®¹å™¨å®‰å…¨èƒ½åŠ›çš„è¯ï¼Œè¿™ç±»é…ç½®çš„å®¹å™¨åˆ›å»ºè¡Œä¸ºä¹Ÿæ¯”è¾ƒå®¹æ˜“ä¼šè¢«æ ‡è®°ä¸ºå¼‚å¸¸è¡Œä¸ºã€‚&lt;/p&gt;&#xA;&lt;p&gt;ä¸è¿‡ï¼Œæ˜¾ç„¶æˆ‘ä»¬åœ¨çœŸå®çš„å¯¹æŠ—ä¸­å¦‚æœåªæ˜¯æƒ³è¾¾åˆ°æ‰§è¡Œ strace æŠ“å– sshd çš„ç›®çš„ï¼Œé…ç½®å¯ä»¥æ›´åŠ ç®€åŒ–ä¸€ç‚¹ï¼Œåªéœ€æ·»åŠ  SYS_PTRACE çš„ capabilities å³å¯ï¼Œæˆ‘åœ¨æ¼”ä¹ ä¸­ä¹Ÿæ­£æ˜¯è¿™ä¹ˆåšçš„ã€‚&lt;/p&gt;&#xA;&lt;p&gt;å› ä¸ºå…·æœ‰ SYS_PTRACE æƒé™çš„å®¹å™¨å¹¶ä¸”è¿›è¡Œ kubectl exec çš„è¡Œä¸ºåœ¨å®é™…çš„ç ”å‘è¿ç»´æµç¨‹ä¸­éå¸¸å¸¸è§ï¼Œæ˜¯ HIDS æ¯”è¾ƒä¸å®¹æ˜“å¯Ÿè§‰çš„ç±»ä¸šåŠ¡å‹æ“ä½œï¼›å¦å¤–ä¹Ÿå¯ä»¥å¯»æ‰¾èŠ‚ç‚¹ä¸Šå·²æœ‰è¯¥é…ç½®çš„å®¹å™¨å’Œ POD è¿›è¡Œæ§åˆ¶ï¼ŒåŒæ ·æ˜¯ä¸æ˜“è¢«é˜²å¾¡å›¢é˜Ÿæ‰€å¯Ÿè§‰çš„ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftEhyicH6Zpv2lsLiap7t9dLyM2r8QPyLrLaNvOpkmicQZZxwkltSsIiaaPA/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;æ¥ä¸‹æ¥æˆ‘ä»¬ä¹Ÿä¼šä¸€ä¸ªä¸ªè®¨è®ºè¿™ç±»æ¼æ´å’Œæ‰‹æ³•å’Œæˆ‘ä»¬å®é™…åœ¨å¯¹æŠ—ä¸­é‡åˆ°çš„åœºæ™¯ã€‚åŒæ—¶ï¼Œæ— è®ºæ˜¯åœ¨ CNCF å¯¹äº‘åŸç”Ÿçš„å®šä¹‰é‡Œï¼Œè¿˜æ˜¯å¤§å®¶å¯¹äº‘åŸç”ŸæŠ€æœ¯æœ€ç›´è§‚çš„æ„Ÿå—ï¼Œå¤§éƒ¨åˆ†æŠ€æœ¯åŒå­¦éƒ½ä¼šæƒ³åˆ°å®¹å™¨ä»¥åŠå®¹å™¨ç¼–æ’ç›¸å…³çš„æŠ€æœ¯ï¼Œè¿™é‡Œæˆ‘ä»¬å°±ä»¥å®¹å™¨ä¸ºèµ·å§‹ï¼Œå¼€å¯æˆ‘ä»¬ä»Šå¤©çš„äº‘åŸç”Ÿå®‰å…¨æ¢ç´¢ä¹‹æ—…å§~&lt;/p&gt;&#xA;&lt;h2&gt;3. å•å®¹å™¨ç¯å¢ƒå†…çš„ä¿¡æ¯æ”¶é›†&lt;/h2&gt;&#xA;&lt;p&gt;å½“æˆ‘ä»¬è·å–äº†ä¸€ä¸ªå®¹å™¨çš„ shellï¼Œæˆ–è®¸ cat /proc/1/cgroup æ˜¯æˆ‘ä»¬é¦–è¦è¦æ‰§è¡Œçš„ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftGKIPgDbCSJNK6zfH8HMBPGtTt0A7ofib1Ricj5SMtTmM01ItbDpwn8uA/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;æ¯•ç«Ÿä»å†…æ ¸è§’åº¦çœ‹å®¹å™¨æŠ€æœ¯çš„å…³é”®å°±æ˜¯ CGroup å’Œ Namespaceï¼Œæˆ–è®¸åº”è¯¥å†åŠ ä¸€ä¸ª Capabilitiesã€‚ä» CGroup ä¿¡æ¯ä¸­ï¼Œä¸ä»…å¯ä»¥åˆ¤æ–­æˆ‘ä»¬æ˜¯å¦åœ¨å®¹å™¨å†…ï¼Œä¹Ÿèƒ½å¾ˆæ–¹ä¾¿åˆ¤æ–­å‡ºå½“å‰çš„å®¹å™¨æ˜¯å¦åœ¨ Kubernetes çš„ç¼–æ’ç¯å¢ƒä¸­ã€‚&lt;/p&gt;&#xA;&lt;p&gt;æ²¡ä½¿ç”¨ Kubernetes çš„ docker å®¹å™¨ï¼Œå…¶ cgroup ä¿¡æ¯é•¿è¿™æ ·ï¼š&lt;/p&gt;&#xA;&lt;p&gt;12:hugetlb:/docker/9df9278580c5fc365cb5b5ee9430acc846cf6e3207df1b02b9e35dec85e86c36&lt;/p&gt;&#xA;&lt;p&gt;è€Œ Kubernetes é»˜è®¤çš„ï¼Œé•¿è¿™æ ·ï¼š&lt;/p&gt;&#xA;&lt;p&gt;12:hugetlb:/kubepods/burstable/pod45226403-64fe-428d-a419-1cc1863c9148/e8fb379159f2836dbf990915511a398a0c6f7be1203e60135f1cbdc31b97c197&lt;/p&gt;&#xA;&lt;p&gt;åŒæ—¶ï¼Œè¿™é‡Œçš„ CGroup ä¿¡æ¯ä¹Ÿæ˜¯å®¿ä¸»æœºå†…å½“å‰å®¹å™¨æ‰€å¯¹åº”çš„ CGroup è·¯å¾„ï¼Œåœ¨åç»­çš„å¤šä¸ªé€ƒé€¸åœºæ™¯ä¸­è·å– CGroup çš„è·¯å¾„æ˜¯éå¸¸é‡è¦çš„ã€‚&lt;/p&gt;&#xA;&lt;p&gt;åŒç±»åˆ¤æ–­å½“å‰ shell ç¯å¢ƒæ˜¯å¦æ˜¯å®¹å™¨ï¼Œå¹¶é‡‡é›†å®¹å™¨å†…ä¿¡æ¯çš„è¿˜æœ‰å¾ˆå¤šï¼Œä¸¾ä¸ªä¸å®Œå…¨çš„ä¾‹å­ï¼š&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;ps aux&#xA;&#xA;ls -l .dockerenv&#xA;&#xA;capsh --print&#xA;&#xA;env | grep KUBE&#xA;&#xA;ls -l /run/secrets/Kubernetes.io/&#xA;&#xA;mount&#xA;&#xA;df -h&#xA;&#xA;cat /etc/resolv.conf&#xA;&#xA;cat /etc/mtab&#xA;&#xA;cat /proc/self/status&#xA;&#xA;cat /proc/self/mounts&#xA;&#xA;cat /proc/net/unix&#xA;&#xA;cat /proc/1/mountinfo&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftPaEEMDapm7RgLEpRRPibpPezFWy7K4D44qhOs2UgdRENTicibzaCicFC2g/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;å…¶ä¸­ capsh --print è·å–åˆ°ä¿¡æ¯æ˜¯ååˆ†é‡è¦çš„ï¼Œå¯ä»¥æ‰“å°å‡ºå½“å‰å®¹å™¨é‡Œå·²æœ‰çš„ Capabilities æƒé™ï¼›å†å²ä¸Šï¼Œæˆ‘ä»¬æ›¾ç»ä¸ºäº†ä½¿ç”¨ strace åˆ†æä¸šåŠ¡è¿›ç¨‹ï¼Œè€Œå…ˆè®¾æ³•è¿›è¡Œå®¹å™¨é€ƒé€¸å¿˜è®°çœ‹å½“å‰å®¹å™¨çš„ Capabilities å…¶å®å·²ç»æ‹¥æœ‰äº† ptrace æƒé™ï¼Œç»•äº†ä¸€ä¸ªå¤§å¼¯å­ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftcgCLWayVj5MuKrHtibFOsoIsWrDc7Onr5cTbzIPXpafkq2hjnAv16Jg/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;ä½†æ˜¯ï¼Œå®¹å™¨çš„ SHELL ç¯å¢ƒé‡Œç»å¸¸é‡åˆ°æ— æ³•å®‰è£…æ–°å·¥å…·ï¼Œä¸”å¤§éƒ¨åˆ†å¸¸ç”¨å·¥å…·éƒ½åœ¨é•œåƒé‡Œè¢«ç²¾ç®€æˆ–é˜‰å‰²äº†ã€‚è¿™æ—¶ç†è§£å·¥å…·èƒŒåçš„åŸç†å¹¶æ ¹æ®åŸç†è¾¾åˆ°ç›¸åŒçš„æ•ˆæœå°±å¾ˆé‡è¦ã€‚&lt;/p&gt;&#xA;&lt;p&gt;ä»¥ capsh ä¸ºä¾‹ï¼Œå¹¶éæ‰€æœ‰çš„å®¹å™¨é•œåƒé‡Œéƒ½å¯ä»¥æ‰§è¡Œ capshï¼Œè¿™æ—¶å¦‚æœæƒ³è¦è·å–å½“å‰å®¹å™¨çš„ &amp;nbsp;Capabilities æƒé™ä¿¡æ¯ï¼Œå¯ä»¥å…ˆ cat /proc/1/status è·å–åˆ° Capabilities hex è®°å½•ä¹‹åï¼Œå†ä½¿ç”¨ capsh --decode è§£ç å‡º Capabilities çš„å¯è¯»å­—ç¬¦ä¸²å³å¯ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSft1HBSRN9nBvtlv2iaVEWKYyYdEVx12K1qRjDGeOic5USvFXCaAx23RtvA/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;å…¶ä»–å¦‚ mount, lsof ç­‰å‘½ä»¤ä¹Ÿç±»ä¼¼ã€‚&lt;/p&gt;&#xA;&lt;p&gt;å¦å¤–ä¸€ä¸ªæ¯”è¾ƒå¸¸è§å°±æ˜¯ kubectl å‘½ä»¤çš„åŠŸèƒ½å¤ç°ï¼Œå¾ˆå¤šæƒ…å†µä¸‹æˆ‘ä»¬è™½ç„¶è·å¾—äº†å¯ä»¥è®¿é—® APIServer çš„ç½‘ç»œæƒé™å’Œè¯ä¹¦ï¼ˆåˆæˆ–è€…ä¸éœ€è¦è¯ä¹¦ï¼‰æ‹¥æœ‰äº†æ§åˆ¶é›†ç¾¤èµ„æºçš„æƒé™ï¼Œå´æ— æ³•ä¸‹è½½æˆ–å®‰è£…ä¸€ä¸ª kubectl ç¨‹åºä¾¿æ·çš„å’Œ APIServer é€šä¿¡ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥é…ç½® kubectl çš„ logging ç™»è®°ï¼Œè®°å½•æœ¬åœ° kubectl å’Œæµ‹è¯• APIServer çš„è¯·æ±‚è¯¦æƒ…ï¼Œå¹¶å°†ç›¸åŒçš„è¯·æ±‚åŒ…å‘é€ç»™ç›®æ ‡çš„ APIServer ä»¥å®ç°ç›¸åŒçš„æ•ˆæœã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;code&gt;kubectl create -f cronjob.yaml -v=8&lt;/code&gt;&lt;/p&gt;&#xA;&lt;p&gt;å¦‚æœéœ€è¦æ›´è¯¦ç»†çš„ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥æé«˜ logging level, ä¾‹å¦‚ kubectl -v=10 ç­‰ï¼Œå…¶ä»– Kubernetes ç»„ä»¶ä¹Ÿèƒ½è¾¾åˆ°ç›¸åŒçš„ç›®çš„ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSft3BicWNtm2RTCWS67EMSES3h6thcljtORdUEWb73W5ibvtHZOve5x18bw/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;h2&gt;4. å®¹å™¨ç½‘ç»œ&lt;/h2&gt;&#xA;&lt;p&gt;ä»¥ Kubernetes ä¸ºä¾‹ï¼Œå®¹å™¨ä¸å®¹å™¨ä¹‹é—´çš„ç½‘ç»œæ˜¯æä¸ºç‰¹æ®Šçš„ã€‚è™½ç„¶å¤§éƒ¨åˆ†ç»å…¸ IDC å†…ç½‘çš„æ‰‹æ³•å’ŒæŠ€å·§ä¾ç„¶å¯ä»¥ä½¿ç”¨ï¼Œä½†æ˜¯å®¹å™¨æŠ€æœ¯æ‰€æ„å»ºèµ·æ¥çš„æ˜¯å…¨æ–°çš„å†…ç½‘ç¯å¢ƒï¼Œç‰¹åˆ«æ˜¯å½“ä¼ä¸šå¼•å…¥æœåŠ¡ç½‘æ ¼ç­‰äº‘åŸç”ŸæŠ€æœ¯åšæœåŠ¡æ²»ç†æ—¶ï¼Œæ•´ä¸ªå†…ç½‘å’Œ IDC å†…ç½‘çš„å·®åˆ«å°±éå¸¸å¤§äº†ï¼›å› æ­¤äº†è§£ä¸€ä¸‹ Kubernetes ç½‘ç»œçš„é»˜è®¤è®¾è®¡æ˜¯éå¸¸é‡è¦çš„ï¼Œä¸ºäº†é¿å…å¼•å…¥å¤æ‚çš„ Kubernetes ç½‘ç»œçŸ¥è¯†ï¼Œæˆ‘ä»¬ä»¥æ”»å‡»è€…çš„è§†è§’æ¥ç®€è¿°æ”¾åœ¨è“å†›é¢å‰çš„ Kubernetes ç½‘ç»œã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftcXMH816vZg00WRsgnomrkInQYzToiaJU76Rv4wmF7x2srIEiaOXG4dJQ/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;ä»ä¸Šå›¾å¯ä»¥å¾ˆç›´è§‚çš„çœ‹å‡ºï¼Œå½“æˆ‘ä»¬è·å– Kubernetes é›†ç¾¤å†…æŸä¸ªå®¹å™¨çš„ shellï¼Œé»˜è®¤æƒ…å†µä¸‹æˆ‘ä»¬å¯ä»¥è®¿é—®ä»¥ä¸‹å‡ ä¸ªå†…ç½‘é‡Œçš„ç›®æ ‡ï¼š&lt;/p&gt;&#xA;&lt;ol&gt; &#xA; &lt;li&gt; &lt;p&gt;ç›¸åŒèŠ‚ç‚¹ä¸‹çš„å…¶å®ƒå®¹å™¨å¼€æ”¾çš„ç«¯å£&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;å…¶ä»–èŠ‚ç‚¹ä¸‹çš„å…¶å®ƒå®¹å™¨å¼€æ”¾çš„ç«¯å£&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;å…¶å®ƒèŠ‚ç‚¹å®¿ä¸»æœºå¼€æ”¾çš„ç«¯å£&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;å½“å‰èŠ‚ç‚¹å®¿ä¸»æœºå¼€æ”¾çš„ç«¯å£&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;Kubernetes Service è™šæ‹Ÿå‡ºæ¥çš„æœåŠ¡ç«¯å£&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;å†…ç½‘å…¶å®ƒæœåŠ¡åŠç«¯å£ï¼Œä¸»è¦ç›®æ ‡å¯ä»¥è®¾å®šä¸º APISERVERã€ETCDã€Kubelet ç­‰&lt;/p&gt; &lt;/li&gt; &#xA;&lt;/ol&gt;&#xA;&lt;p&gt;ä¸è€ƒè™‘å¯¹æŠ—å’Œå®‰è£…é—¨æ§›çš„è¯ï¼Œä½¿ç”¨ masscan å’Œ nmap ç­‰å·¥å…·åœ¨æœªå®è¡ŒæœåŠ¡ç½‘æ ¼çš„å®¹å™¨ç½‘ç»œå†…è¿›è¡ŒæœåŠ¡å‘ç°å’Œç«¯å£æ¢æµ‹å’Œåœ¨ä¼ ç»Ÿçš„ IDC ç½‘ç»œé‡ŒåŒºåˆ«ä¸å¤§ï¼›å½“ç„¶ï¼Œå› ä¸º Kubernetes Service è™šæ‹Ÿå‡ºæ¥çš„æœåŠ¡ç«¯å£é»˜è®¤æ˜¯ä¸ä¼šåƒå®¹å™¨ç½‘ç»œä¸€æ ·æœ‰ä¸€ä¸ªè™šæ‹Ÿçš„ veth ç½‘ç»œæ¥å£çš„ï¼Œæ‰€ä»¥å³ä½¿ Kubernetes Service å¯ä»¥ç”¨ IP:PORT çš„å½¢å¼è®¿é—®åˆ°ï¼Œä½†æ˜¯æ˜¯æ²¡åŠæ³•ä»¥ ICMP åè®®åš Service çš„ IP å‘ç°ï¼ˆKubernetes Service çš„ IP æ¢æµ‹æ„ä¹‰ä¹Ÿä¸å¤§ï¼‰ã€‚&lt;/p&gt;&#xA;&lt;p&gt;å¦å¦‚æœ HIDSã€NIDS åœ¨è§£ææ‰«æè¯·æ±‚æ—¶ï¼Œæ²¡æœ‰é’ˆå¯¹ Kubernetes çš„ IPIP Tunnle åšè¿›ä¸€æ­¥çš„è§£æï¼Œå¯èƒ½äº§ç”Ÿä¸€å®šçš„æ¼æŠ¥ã€‚&lt;/p&gt;&#xA;&lt;p&gt;æ³¨ï¼šè‹¥ Kubernetes é›†ç¾¤ä½¿ç”¨äº†æœåŠ¡ç½‘æ ¼ï¼Œå…¶ä¸­æœ€å¸¸è§çš„å°±æ˜¯ istioï¼Œæ­¤æ—¶æœåŠ¡ç½‘æ ¼ä¸‹çš„å†…ç½‘å’Œå†…ç½‘æ¢æµ‹æ‰‹æ³•å˜åŒ–æ˜¯æ¯”è¾ƒå¤§çš„ã€‚å¯ä»¥å‚è€ƒå¼•ç”¨ä¸­ï¼šã€Šè…¾è®¯è“å†›ï¼š CIS2020 - Attack in a Service Meshã€‹ï¼›ç”±äº ISTIO å¤§å®¶æ¥è§¦è¾ƒå°‘ï¼Œæ­¤å¤„ä¸å†å±•å¼€ã€‚&lt;/p&gt;&#xA;&lt;p&gt;ä¹Ÿå› æ­¤å¤šç§Ÿæˆ·é›†ç¾¤ä¸‹çš„é»˜è®¤ç½‘ç»œé…ç½®æ˜¯æˆ‘ä»¬éœ€è¦é‡ç‚¹å…³æ³¨çš„ï¼Œäº‘äº§å“å’Œå¼€æºäº§å“ä½¿ç”¨å®¹å™¨åšå¤šç§Ÿæˆ·é›†ç¾¤ä¸‹çš„éš”ç¦»å’Œèµ„æºé™åˆ¶çš„å®ç°å¹¶ä¸å°‘è§ï¼Œè‘—åçš„äº§å“æœ‰å¦‚ Azure Serverlessã€Kubeless ç­‰ã€‚&lt;/p&gt;&#xA;&lt;p&gt;è‹¥åœ¨è®¾è®¡å¤šç§Ÿæˆ·é›†ç¾¤ä¸‹æä¾›ç»™ç”¨æˆ·ä»£ç æ‰§è¡Œæƒé™å³å®¹å™¨æƒé™çš„äº§å“æ—¶ï¼Œè¿˜ç›´æ¥ä½¿ç”¨ Kubernetes é»˜è®¤çš„ç½‘ç»œè®¾è®¡æ˜¯ä¸åˆç†çš„ä¸”éå¸¸å±é™©ã€‚&lt;/p&gt;&#xA;&lt;p&gt;å¾ˆæ˜æ˜¾ä¸€ç‚¹æ˜¯ï¼Œç”¨æˆ·åˆ›å»ºçš„å®¹å™¨å¯ä»¥ç›´æ¥è®¿é—®å†…ç½‘å’Œ Kubernetes ç½‘ç»œã€‚åœ¨è¿™ä¸ªåœºæ™¯é‡Œï¼Œåˆç†çš„ç½‘ç»œè®¾è®¡åº”è¯¥å’Œäº‘æœåŠ¡å™¨ VPS çš„ç½‘ç»œè®¾è®¡ä¸€è‡´ï¼Œç”¨æˆ·ä¸ç”¨æˆ·ä¹‹é—´çš„å†…ç½‘ç½‘ç»œä¸åº”è¯¥äº’ç›¸è¿é€šï¼Œç”¨æˆ·ç½‘ç»œå’Œä¼ä¸šå†…ç½‘ä¹Ÿåº”è¯¥è¿›è¡Œä¸€å®šç¨‹åº¦çš„éš”ç¦»ï¼Œä¸Šå›¾ä¸­æ‰€æœ‰å¯¹å†…çš„æµé‡è·¯å¾„éƒ½åº”è¯¥è¢«åˆ‡æ–­ã€‚æŠŠæ‰€æœ‰ç”¨æˆ· POD éƒ½æ”¾ç½®åœ¨ä¸€ä¸ª Kubernetes namespace ä¸‹å°±æ›´ä¸åº”è¯¥äº†ã€‚&lt;/p&gt;&#xA;&lt;h2&gt;5. å…³äºé€ƒé€¸çš„é‚£äº›äº‹&lt;/h2&gt;&#xA;&lt;p&gt;è¦æ›´å¥½çš„ç†è§£å®¹å™¨é€ƒé€¸çš„æ‰‹æ³•ï¼Œåº”è¯¥çŸ¥é“æœ¬è´¨ä¸Šå®¹å™¨å†…çš„è¿›ç¨‹åªæ˜¯ä¸€ä¸ªå—é™çš„æ™®é€š Linux è¿›ç¨‹ï¼Œå®¹å™¨å†…éƒ¨è¿›ç¨‹çš„æ‰€æœ‰è¡Œä¸ºå¯¹äºå®¿ä¸»æœºæ¥è¯´æ˜¯é€æ˜çš„ï¼Œè¿™ä¹Ÿæ˜¯ä¼—å¤šå®¹å™¨ EDR äº§å“å¯ä»¥ç›´æ¥åœ¨ä¸»æœºæˆ– SideCar å†…åšå®¹å™¨è¿è¡Œæ—¶å®‰å…¨çš„åŸºç¡€ä¹‹ä¸€ã€‚&lt;/p&gt;&#xA;&lt;p&gt;æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ¨å®¿ä¸»æœºç”¨ ps çœ‹åˆ°å®¹å™¨è¿›ç¨‹ä¿¡æ¯ï¼š&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftq0qxLqTBAK3nWHNkMplc0oMG5sxyGVBhR93gDhEvtwGXKjeAQFuKIA/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;æ‰€ä»¥ï¼Œå®¹å™¨é€ƒé€¸çš„æœ¬è´¨å’Œç¡¬ä»¶è™šæ‹ŸåŒ–é€ƒé€¸çš„æœ¬è´¨æœ‰å¾ˆå¤§çš„ä¸åŒ (ä¸åŒ…å« Kata Containers ç­‰)ï¼Œæˆ‘çš„ç†è§£é‡Œå®¹å™¨é€ƒé€¸çš„è¿‡ç¨‹æ˜¯ä¸€ä¸ªå—é™è¿›ç¨‹è·å–æœªå—é™çš„å®Œæ•´æƒé™ï¼Œåˆæˆ–æŸä¸ªåŸæœ¬å— Cgroup/Namespace é™åˆ¶æƒé™çš„è¿›ç¨‹è·å–æ›´å¤šæƒé™çš„æ“ä½œï¼Œæ›´è¶‹è¿‘äºææƒã€‚&lt;/p&gt;&#xA;&lt;p&gt;è€Œåœ¨å¯¹æŠ—ä¸Šï¼Œä¸å»ºè®®å°†é€ƒé€¸çš„è¡Œä¸ºå½“æˆå¯ä»¥å†™å…¥å®¿ä¸»æœºç‰¹å®šæ–‡ä»¶ (å¦‚ /etc/cron*, /root/.ssh/authorized_keys ç­‰æ–‡ä»¶) çš„è¡Œä¸ºï¼Œåº”è¯¥æ ¹æ®ç›®æ ‡é€‰æ‹©æ›´è¶‹è¿‘ä¸ä¸šåŠ¡è¡Œä¸ºçš„æ‰‹æ³•ï¼Œå®¹å™¨é€ƒé€¸çš„åˆ©ç”¨æ‰‹æ®µä¼šæ¯”å¤§éƒ¨åˆ†æƒ…å†µä¸‹çš„å‘½ä»¤æ‰§è¡Œæ¼æ´åˆ©ç”¨è¦çµæ´»ã€‚&lt;/p&gt;&#xA;&lt;p&gt;ä»¥ç›®æ ‡ â€œè·å–å®¿ä¸»æœºä¸Šçš„é…ç½®æ–‡ä»¶â€ ä¸ºä¾‹ï¼Œä»¥ä¸‹å‡ ç§é€ƒé€¸æ‰‹æ³•åœ¨å®¹æ˜“åœ¨é˜²å¾¡å›¢é˜Ÿä¸­æš´éœ²çš„æ¦‚ç‡ä»å¤§åˆ°å°ï¼Œæ’åºå¦‚ä¸‹(éƒ¨åˆ†å…¸å‹æ‰‹æ³•ä¸¾ä¾‹ï¼Œä¸åŒçš„ EDR æƒ…å†µä¸åŒ)ï¼š&lt;/p&gt;&#xA;&lt;ol&gt; &#xA; &lt;li&gt; &lt;p&gt;mount /etc + write crontab&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;mount /root/.ssh + write authorized_keys&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;old CVE/vulnerability exploit&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;write cgroup notify_on_release&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;write procfs core_pattern&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;volumeMounts: / + chroot&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;remount and rewrite cgroup&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;create ptrace cap container&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;websocket/sock shell + volumeMounts: /path&lt;/p&gt; &lt;/li&gt; &#xA;&lt;/ol&gt;&#xA;&lt;p&gt;æˆ‘ä»¬æ¥ä¸€ä¸€çœ‹ä¸€ä¸‹åˆ©ç”¨åœºæ™¯å’Œæ–¹æ³•ï¼š&lt;/p&gt;&#xA;&lt;h3&gt;5.1. privileged å®¹å™¨å†… mount device&lt;/h3&gt;&#xA;&lt;p&gt;ä½¿ç”¨ privileged ç‰¹æƒå®¹å™¨æ˜¯ä¸šç•Œæœ€å¸¸è§ä»¥åŠæœ€å¹¿ä¸ºäººçŸ¥çš„é€ƒé€¸æ‰‹æ³•ï¼Œå¯¹å®¹å™¨å®‰å…¨æœ‰ä¸€å®šè¦æ±‚çš„äº§å“ä¸€èˆ¬éƒ½ä¼šä¸¥æ ¼é™åˆ¶ç‰¹æƒå®¹å™¨çš„ä½¿ç”¨å’Œç›‘æ§ã€‚ä¸è¿‡ä¾ç„¶ä¼šæœ‰ä¸€äº›è‘—åçš„äº‘äº§å“çŠ¯ç±»ä¼¼çš„ä½çº§é”™è¯¯ï¼Œä¾‹å¦‚å¾®è½¯çš„ Azure å‡ºç°çš„é—®é¢˜ï¼š&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://thehackernews.com/2021/01/new-docker-container-escape-bug-affects.html&#34;&gt;https://thehackernews.com/2021/01/new-docker-container-escape-bug-affects.html&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;privileged ç‰¹æƒå®¹å™¨çš„æƒé™å…¶å®æœ‰å¾ˆå¤šï¼Œæ‰€ä»¥ä¹Ÿæœ‰å¾ˆå¤šä¸åŒçš„é€ƒé€¸æ–¹å¼ï¼ŒæŒ‚è½½è®¾å¤‡è¯»å†™å®¿ä¸»æœºæ–‡ä»¶æ˜¯ç‰¹æƒå®¹å™¨æœ€å¸¸è§çš„é€ƒé€¸æ–¹å¼ä¹‹ä¸€ã€‚&lt;/p&gt;&#xA;&lt;p&gt;å½“ä½ è¿›å…¥ privileged ç‰¹æƒå®¹å™¨å†…éƒ¨æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ &lt;code&gt;fdisk -l&lt;/code&gt; æŸ¥çœ‹å®¿ä¸»æœºçš„ç£ç›˜è®¾å¤‡ï¼š&lt;/p&gt;&#xA;&lt;p&gt;fdisk -l&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftGfNAXmbY6uvBia2ssPzWPZO09zlxyoeQfGY2Et96NickicqVYhYSLgibMA/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;å¦‚æœä¸åœ¨ privileged å®¹å™¨å†…éƒ¨ï¼Œæ˜¯æ²¡æœ‰æƒé™æŸ¥çœ‹ç£ç›˜åˆ—è¡¨å¹¶æ“ä½œæŒ‚è½½çš„ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSft8w0dfp2xjr4r6BWKCfs5uKpR58aj9YqAsJZPR542xnKC56Tdmiczf1A/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;å› æ­¤ï¼Œåœ¨ç‰¹æƒå®¹å™¨é‡Œï¼Œä½ å¯ä»¥æŠŠå®¿ä¸»æœºé‡Œçš„æ ¹ç›®å½• / æŒ‚è½½åˆ°å®¹å™¨å†…éƒ¨ï¼Œä»è€Œå»æ“ä½œå®¿ä¸»æœºå†…çš„ä»»æ„æ–‡ä»¶ï¼Œä¾‹å¦‚ crontab config file, /root/.ssh/authorized_keys, /root/.bashrc ç­‰æ–‡ä»¶ï¼Œè€Œè¾¾åˆ°é€ƒé€¸çš„ç›®çš„ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSft2Q8Gdwwz7Kslf31TXMuUu1pPPnCHYGpCDibcltRdeGczics9V11EiaD5Q/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;å½“ç„¶è¿™ç±»çš„æ–‡ä»¶çš„è¯»å†™æ˜¯ EDR å’Œ HIDS é‡ç‚¹ç›‘æ§çš„å¯¹è±¡ï¼Œæ‰€ä»¥æ˜¯ææ˜“è§¦å‘å‘Šè­¦çš„ï¼›å³ä½¿ HIDS ä¸ä¸€å®šæœ‰é’ˆå¯¹å®¹å™¨å®‰å…¨çš„ç‰¹æ€§è¿›è¡Œä¼˜åŒ–ï¼Œå¯¹æ­¤ç±»çš„é€ƒé€¸è¡Œä¸ºä¾æ—§æœ‰ä¸€äº›æ£€æµ‹èƒ½åŠ›ã€‚&lt;/p&gt;&#xA;&lt;h3&gt;5.2. æ”»å‡» lxcfs&lt;/h3&gt;&#xA;&lt;p&gt;lxcfs çš„åœºæ™¯å’Œæ‰‹æ³•åº”è¯¥æ˜¯ç›®å‰ä¸šç•Œ HIDS è¾ƒå°‘è¿›è¡Œè¦†ç›–çš„ï¼Œæˆ‘ä»¬ç›®å‰ä¹Ÿæœªåœ¨çœŸå®çš„æ”»é˜²åœºæ™¯ä¸­é‡åˆ° lxcfs æ‰€å¯¼è‡´çš„å®¹å™¨é€ƒé€¸åˆ©ç”¨ï¼Œå­¦ä¹ åˆ°è¿™ä¸ªæœ‰è¶£çš„åœºæ™¯ä¸»è¦è¿˜æ˜¯æ¥è‡ªäº @lazydog å¸ˆå‚…åœ¨å¼€æºç¤¾åŒºå’Œç§èŠé‡Œçš„åˆ†äº«ï¼Œä»–åœ¨è‡ªå·±çš„å®é™…è“å†›å·¥ä½œä¸­é‡åˆ°äº† lxcfs çš„åœºæ™¯ï¼Œå¹¶è°ƒç ”æ–‡æ¡£å’Œèµ„æ–™æ„å»ºäº†ä¸€å¥—ç›¸åº”çš„å®¹å™¨é€ƒé€¸æ€è·¯ï¼›ç”±æ­¤å¯è§ï¼Œè¿™ä¸ªåœºæ™¯å’Œæ‰‹æ³•åœ¨å®é™…çš„æ”»é˜²æ¼”ç»ƒä¸­ä¹Ÿæ˜¯éå¸¸æœ‰ä»·å€¼çš„ã€‚&lt;/p&gt;&#xA;&lt;p&gt;lxcfsï¼š &lt;a href=&#34;https://linuxcontainers.org/lxcfs/&#34;&gt;https://linuxcontainers.org/lxcfs/&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;å‡è®¾ä¸šåŠ¡ä½¿ç”¨ lxcfs åŠ å¼ºä¸šåŠ¡å®¹å™¨åœ¨ /proc/ ç›®å½•ä¸‹çš„è™šæ‹ŸåŒ–ï¼Œä»¥æ­¤ä¸ºå‰æï¼Œæˆ‘ä»¬æ„å»ºå‡ºè¿™æ ·çš„ demo pod:&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSft1G5hEGn2nOicDpFookOYNsyicbG6RARkn8o9licXQRlhpNooetfuzqBNA/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;å¹¶ä½¿ç”¨ &lt;code&gt;lxcfs /data/test/lxcfs/&lt;/code&gt; ä¿®æ”¹äº† data ç›®å½•ä¸‹çš„æƒé™ã€‚è‹¥è“å†›é€šè¿‡æ¸—é€æ§åˆ¶çš„æ˜¯è¯¥å®¹å™¨å®ä¾‹ï¼Œåˆ™å°±å¯ä»¥é€šè¿‡ä¸‹è¿°çš„æ‰‹æ³•è¾¾åˆ°é€ƒé€¸è®¿é—®å®¿ä¸»æœºæ–‡ä»¶çš„ç›®çš„ï¼Œè¿™é‡Œç®€è¦æè¿°ä¸€ä¸‹å…³é”®çš„æµç¨‹å’ŒåŸç†ã€‚&lt;/p&gt;&#xA;&lt;p&gt;ï¼ˆ1ï¼‰é¦–å…ˆåœ¨å®¹å™¨å†…ï¼Œè“å†›éœ€è¦åˆ¤æ–­ä¸šåŠ¡æ˜¯å¦ä½¿ç”¨äº† lxcfsï¼Œåœ¨ mount ä¿¡æ¯é‡Œé¢å¯ä»¥è¿›è¡Œç®€å•åˆ¤æ–­ï¼Œå½“ç„¶å®¹å™¨ä¸ä¸€å®šåŒ…å« mount å‘½ä»¤ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ cat /proc/1/mountinfo è·å–&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftqyVYKOTgP0AoQNODZ1K4HIZCmIVEY26jluyICLqtt7KqaJzx2SnpCg/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;ï¼ˆ2ï¼‰æ­¤æ—¶å®¹å™¨å†…ä¼šå‡ºç°ä¸€ä¸ªæ–°çš„è™šæ‹Ÿè·¯å¾„ï¼š&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftv1x875RksBQzoI6fufzz26pmIYOvumjBUg1Lq6NXCCjfgqHn8K4AIw/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;ï¼ˆ3ï¼‰æ›´æœ‰è¶£çš„æ˜¯ï¼Œè¯¥è·¯å¾„ä¸‹ä¼šç»‘å®šå½“å‰å®¹å™¨çš„ devices subsystem cgroup è¿›å…¥å®¹å™¨å†…ï¼Œä¸”åœ¨å®¹å™¨å†…æœ‰æƒé™å¯¹è¯¥ devices subsystem è¿›è¡Œä¿®æ”¹ã€‚&lt;/p&gt;&#xA;&lt;p&gt;ä½¿ç”¨ echo a &amp;gt; devices.allow å¯ä»¥ä¿®æ”¹å½“å‰å®¹å™¨çš„è®¾å¤‡è®¿é—®æƒé™ï¼Œè‡´ä½¿æˆ‘ä»¬åœ¨å®¹å™¨å†…å¯ä»¥è®¿é—®æ‰€æœ‰ç±»å‹çš„è®¾å¤‡ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftlHhr7YzFOqx19KDYSy28icQTXFmWKdeZkjYSCpao7CU3LX63kvSds5g/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;ï¼ˆ4ï¼‰å¦‚æœè·Ÿè¿›è¿‡ CVE-2020-8557 è¿™ä¸ªå…·æœ‰ Kubernetes ç‰¹è‰²çš„æ‹’ç»æœåŠ¡æ¼æ´çš„è¯ï¼Œåº”è¯¥çŸ¥é“&lt;/p&gt;&#xA;&lt;p&gt;/etc/hostsï¼Œ /dev/termination-logï¼Œ/etc/resolv.confï¼Œ /etc/hostname è¿™å››ä¸ªå®¹å™¨å†…æ–‡ä»¶æ˜¯ç”±é»˜è®¤ä»å®¿ä¸»æœºæŒ‚è½½è¿›å®¹å™¨çš„ï¼Œæ‰€ä»¥åœ¨ä»–ä»¬çš„æŒ‚è½½ä¿¡æ¯å†…å¾ˆå®¹æ˜“èƒ½è·å–åˆ°ä¸»è®¾å¤‡å· IDã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftaDwpX3m03LqY7DkaWfzPOFB57iatun8yhuOJODZtXDO1SoR07LYTRKg/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;ï¼ˆ5ï¼‰æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ mknod åˆ›å»ºç›¸åº”çš„è®¾å¤‡æ–‡ä»¶ç›®å½•å¹¶ä½¿ç”¨ debugfs è¿›è¡Œè®¿é—®ï¼Œæ­¤æ—¶æˆ‘ä»¬å°±æœ‰äº†è¯»å†™å®¿ä¸»æœºä»»æ„æ–‡ä»¶çš„æƒé™ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftwacESL1sXDo8ZDKpia4qGyyibXtqtQbcSIh95DCRgjpuXYIoJTIly3Gw/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;è¿™ä¸ªæ‰‹æ³•å’Œåˆ©ç”¨æ–¹å¼ä¸ä»…å¯ä»¥ä½œç”¨äº lxcfs çš„é—®é¢˜ï¼Œå³ä½¿æ²¡æœ‰å®‰è£…å’Œä½¿ç”¨ lxcfsï¼Œå½“å®¹å™¨ä¸º privilegedã€sys_admin ç­‰ç‰¹æ®Šé…ç½®æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ç›¸åŒçš„æ‰‹æ³•è¿›è¡Œé€ƒé€¸ã€‚æˆ‘ä»¬æ›¾ç»å¤šæ¬¡ä½¿ç”¨ç±»ä¼¼çš„æ‰‹æ³•é€ƒé€¸ privilegedã€sys_admin çš„åœºæ™¯ (åœ¨å®¹å™¨å†… CAPABILITIES sys_admin å…¶å®æ˜¯ privileged çš„å­é›†)ï¼Œç›¸è¾ƒä¹‹ä¸‹ä¼šæ›´åŠ éšè”½ã€‚&lt;/p&gt;&#xA;&lt;p&gt;å½“ç„¶è‡ªåŠ¨åŒ–çš„å·¥å…·å¯ä»¥å¸®æˆ‘ä»¬æ›´å¥½çš„åˆ©ç”¨è¿™ä¸ªæ¼æ´å¹¶ä¸”è€ƒè™‘å®¹å™¨å†…çš„æ›´å¤šæƒ…å†µï¼Œè¿™é‡Œè‡ªåŠ¨åŒ– EXP å¯ä»¥ä½¿ç”¨ CDK å·¥å…· (è¯¥å·¥å…·ç”±ç¬”è€… neargle å’Œ CDXY å¸ˆå‚…ä¸€åŒç ”å‘å’Œç»´æŠ¤ï¼Œå¹¶æ­£åœ¨æŒç»­è¿­ä»£ä¸­)ï¼š&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/cdk-team/CDK/wiki/Exploit:-lxcfs-rw&#34;&gt;https://github.com/cdk-team/CDK/wiki/Exploit:-lxcfs-rw&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;é€ƒé€¸ç« èŠ‚æ‰€ä½¿ç”¨çš„æŠ€å·§å¾ˆå¤šéƒ½åœ¨ CDK é‡Œæœ‰è‡ªåŠ¨åŒ–çš„é›†æˆå’Œå®ç°ã€‚&lt;/p&gt;&#xA;&lt;h3&gt;5.3. åˆ›å»º cgroup è¿›è¡Œå®¹å™¨é€ƒé€¸&lt;/h3&gt;&#xA;&lt;p&gt;ä¸Šé¢æåˆ°äº† privileged é…ç½®å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå¾ˆå¤§çš„æƒé™é›†åˆï¼Œå¯ä»¥ç›´æ¥ mount device å¹¶ä¸æ˜¯å®ƒå”¯ä¸€çš„æƒé™å’Œåˆ©ç”¨æ‰‹æ³•ï¼Œå¦å¤–ä¸€ä¸ªæ¯”è¾ƒå‡ºåçš„æ‰‹æ³•å°±æ˜¯åˆ©ç”¨ cgroup release_agent è¿›è¡Œå®¹å™¨é€ƒé€¸ä»¥åœ¨å®¿ä¸»æœºæ‰§è¡Œå‘½ä»¤ï¼Œè¿™ä¸ªæ‰‹æ³•åŒæ ·å¯ä»¥ä½œç”¨äº sys_admin çš„å®¹å™¨ã€‚&lt;/p&gt;&#xA;&lt;p&gt;shell åˆ©ç”¨è„šæœ¬å¦‚ä¸‹ï¼ˆbash è„šæœ¬å‚è€ƒï¼š &lt;a href=&#34;https://github.com/neargle/cloud_native_security_test_case/raw/master/privileged/1-host-ps.sh&#34;&gt;https://github.com/neargle/cloud_native_security_test_case/blob/master/privileged/1-host-ps.sh&lt;/a&gt;ï¼‰ï¼š&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftEWoZ2qyfQR8GX93YnMXf5adbPsONoOGjWgdznasxJdciaib9PNHZVrDQ/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;è¾“å‡ºç¤ºä¾‹ï¼š&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftd0OAOT3fzaDQCAlAaIRQSgEWIol1sKbUxz1Ttg9BxcCMcpLcw46jcA/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;å…¶ä¸­&lt;/p&gt;&#xA;&lt;p&gt;host_path=&lt;code&gt;sed -n &#39;s/.*\perdir=\([^,]*\).*/\1/p&#39; /etc/mtab&lt;/code&gt;&amp;nbsp;&lt;/p&gt;&#xA;&lt;p&gt;çš„åšæ³•ç»å¸¸åœ¨ä¸åŒçš„ Docker å®¹å™¨é€ƒé€¸ EXP è¢«ä½¿ç”¨åˆ°ï¼›å¦‚æœæˆ‘ä»¬åœ¨æ¼æ´åˆ©ç”¨è¿‡ç¨‹ä¸­ï¼Œéœ€è¦åœ¨å®¹å™¨å’Œå®¿ä¸»æœºå†…è¿›è¡Œæ–‡ä»¶æˆ–æ–‡æœ¬å…±äº«ï¼Œè¿™ç§æ–¹å¼æ˜¯éå¸¸æ£’ä¸”éå¸¸é€šç”¨çš„ä¸€ä¸ªåšæ³•ã€‚&lt;/p&gt;&#xA;&lt;p&gt;å…¶æ€è·¯åœ¨äºåˆ©ç”¨ Docker å®¹å™¨é•œåƒåˆ†å±‚çš„æ–‡ä»¶å­˜å‚¨ç»“æ„ (Union FS)ï¼Œä» mount ä¿¡æ¯ä¸­æ‰¾å‡ºå®¿ä¸»æœºå†…å¯¹åº”å½“å‰å®¹å™¨å†…éƒ¨æ–‡ä»¶ç»“æ„çš„è·¯å¾„ï¼›åˆ™å¯¹è¯¥è·¯å¾„ä¸‹çš„æ–‡ä»¶æ“ä½œç­‰åŒäºå¯¹å®¹å™¨æ ¹ç›®å½•çš„æ–‡ä»¶æ“ä½œã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftiauaaBrb6vQiarVSQpAfSdVPiaqxX6ibhHGvFWruakuTM85UIYQ40J6TZQ/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;æ­¤ç±»æ‰‹æ³•å¦‚æœ HIDS å¹¶æœªé’ˆå¯¹å®¹å™¨é€ƒé€¸çš„ç‰¹æ€§åšä¸€å®šä¼˜åŒ–çš„è¯ï¼Œåˆ™ HIDS å¯¹äºé€ƒé€¸åœ¨æ¯æœºä¸­æ‰§è¡Œå‘½ä»¤çš„æ„ŸçŸ¥èƒ½åŠ›å¯èƒ½å°±ä¼šç›¸å¯¹å¼±ä¸€ç‚¹ã€‚ä¸è¿‡ä¸šç•Œçš„ EDR å’Œ HIDS é’ˆå¯¹æ­¤æ‰‹æ³•è¿›è¡Œè§„åˆ™è¦†ç›–çš„è·Ÿè¿›é€Ÿåº¦ä¹Ÿå¾ˆå¿«ï¼Œå·²æœ‰å¤šæ¬¾ HIDS å¯¹æ­¤æœ‰ä¸€å®šçš„æ„ŸçŸ¥èƒ½åŠ›ã€‚&lt;/p&gt;&#xA;&lt;p&gt;å¦å¤–ä¸€ä¸ªæ¯”è¾ƒå°ä¼—æ–¹æ³•æ˜¯å€ŸåŠ©ä¸Šé¢ lxcfs çš„æ€è·¯ï¼Œå¤ç”¨åˆ° sys_admin æˆ–ç‰¹æƒå®¹å™¨çš„åœºæ™¯ä¸Šè¯»å†™æ¯æœºä¸Šçš„æ–‡ä»¶ã€‚ï¼ˆè…¾è®¯è“å†›çš„å…„å¼Ÿä»¬é—®å¾—æœ€å¤šçš„æ‰‹æ³•ä¹‹ä¸€ï¼Œæ¯è¿‡ä¸€æ®µæ—¶é—´å°±æœ‰äººè¿‡æ¥é—®ä¸€æ¬¡ ~ï¼‰&lt;/p&gt;&#xA;&lt;ol&gt; &#xA; &lt;li&gt;é¦–å…ˆæˆ‘ä»¬è¿˜æ˜¯éœ€è¦å…ˆåˆ›å»ºä¸€ä¸ª cgroup ä½†æ˜¯è¿™æ¬¡æ˜¯ device subsystem çš„ã€‚&lt;/li&gt; &#xA;&lt;/ol&gt;&#xA;&lt;p&gt;mkdir /tmp/dev&lt;/p&gt;&#xA;&lt;p&gt;mount -t cgroup -o devices devices /tmp/dev/&lt;/p&gt;&#xA;&lt;ol start=&#34;2&#34;&gt; &#xA; &lt;li&gt;ä¿®æ”¹å½“å‰å·²æ§å®¹å™¨ cgroup çš„ devices.allowï¼Œæ­¤æ—¶å®¹å™¨å†…å·²ç»å¯ä»¥è®¿é—®æ‰€æœ‰ç±»å‹çš„è®¾å¤‡,&amp;nbsp;&lt;/li&gt; &#xA;&lt;/ol&gt;&#xA;&lt;p&gt;å‘½ä»¤ï¼š echo a &amp;gt;&lt;/p&gt;&#xA;&lt;p&gt;/tmp/dev/docker/b76c0b53a9b8fb8478f680503164b37eb27c2805043fecabb450c48eaad10b57/devices.allow&lt;/p&gt;&#xA;&lt;ol start=&#34;3&#34;&gt; &#xA; &lt;li&gt;åŒæ ·çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ mknod åˆ›å»ºç›¸åº”çš„è®¾å¤‡æ–‡ä»¶ç›®å½•å¹¶ä½¿ç”¨ debugfs è¿›è¡Œè®¿é—®ï¼Œæ­¤æ—¶æˆ‘ä»¬å°±æœ‰äº†è¯»å†™å®¿ä¸»æœºä»»æ„æ–‡ä»¶çš„æƒé™ã€‚&lt;/li&gt; &#xA;&lt;/ol&gt;&#xA;&lt;p&gt;mknod near b 252 1&lt;/p&gt;&#xA;&lt;p&gt;debugfs -w near&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSft26N0dJav4icNaXnENfhzLNH3K7R4ODLpCDsEmWyiawlw3HjBaib8Mx8OQ/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;h3&gt;5.4.&amp;nbsp;ç‰¹æ®Šè·¯å¾„æŒ‚è½½å¯¼è‡´çš„å®¹å™¨é€ƒé€¸&lt;/h3&gt;&#xA;&lt;p&gt;è¿™ç±»çš„æŒ‚è½½å¾ˆå¥½ç†è§£ï¼Œå½“ä¾‹å¦‚å®¿ä¸»æœºçš„å†…çš„ /, /etc/, /root/.ssh ç­‰ç›®å½•çš„å†™æƒé™è¢«æŒ‚è½½è¿›å®¹å™¨æ—¶ï¼Œåœ¨å®¹å™¨å†…éƒ¨å¯ä»¥ä¿®æ”¹å®¿ä¸»æœºå†…çš„ /etc/crontabã€/root/.ssh/ã€/root/.bashrc ç­‰æ–‡ä»¶æ‰§è¡Œä»»æ„å‘½ä»¤ï¼Œå°±å¯ä»¥å¯¼è‡´å®¹å™¨é€ƒé€¸ã€‚&lt;/p&gt;&#xA;&lt;p&gt;æ‰§è¡Œä¸‹åˆ—å‘½ä»¤å¯ä»¥å¾ˆå®¹æ˜“æ‹¥æœ‰è¿™æ ·çš„ç¯å¢ƒï¼š&lt;/p&gt;&#xA;&lt;p&gt;âœ &amp;nbsp;~ docker run -it -v /:/tmp/rootfs ubuntu bash&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftatOPnCicAiaV8lXHkvKuPQFT4aUSJicKE5FhfKibxWx3PQVAQAzJpMdxibw/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;h3&gt;5.4.1 Docker in Docker&lt;/h3&gt;&#xA;&lt;p&gt;å…¶ä¸­ä¸€ä¸ªæ¯”è¾ƒç‰¹æ®Šä¸”å¸¸è§çš„åœºæ™¯æ˜¯å½“å®¿ä¸»æœºçš„ /var/run/docker.sock è¢«æŒ‚è½½å®¹å™¨å†…çš„æ—¶å€™ï¼Œå®¹å™¨å†…å°±å¯ä»¥é€šè¿‡ docker.sock åœ¨å®¿ä¸»æœºé‡Œåˆ›å»ºä»»æ„é…ç½®çš„å®¹å™¨ï¼Œæ­¤æ—¶å¯ä»¥ç†è§£ä¸ºå¯ä»¥åˆ›å»ºä»»æ„æƒé™çš„è¿›ç¨‹ï¼›å½“ç„¶ä¹Ÿå¯ä»¥æ§åˆ¶ä»»æ„æ­£åœ¨è¿è¡Œçš„å®¹å™¨ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftw32wVunQaYQ1iczSQ50LvsNLQrqa0rG6mE3Ob2VSHh9gIj8gv5tgdVQ/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;è¿™ç±»çš„è®¾è®¡è¢«ç§°ä¸ºï¼š Docker in Dockerã€‚å¸¸è§äºéœ€è¦å¯¹å½“å‰èŠ‚ç‚¹è¿›è¡Œå®¹å™¨ç®¡ç†çš„ç¼–æ’é€»è¾‘å®¹å™¨é‡Œï¼Œå†å²ä¸Šæˆ‘é‡åˆ°çš„åœºæ™¯ä¸¾ä¾‹ï¼š&lt;/p&gt;&#xA;&lt;p&gt;a. å­˜åœ¨äº Serverless çš„å‰ç½®å…¬å…±å®¹å™¨å†…&lt;/p&gt;&#xA;&lt;p&gt;b. å­˜åœ¨äºæ¯ä¸ªèŠ‚ç‚¹çš„æ—¥å¿—å®¹å™¨å†…&lt;/p&gt;&#xA;&lt;p&gt;å¦‚æœä½ å·²ç»è·å–äº†æ­¤ç±»å®¹å™¨çš„ full tty shell, ä½ å¯ä»¥ç”¨ç±»ä¼¼ä¸‹è¿°çš„å‘½ä»¤åˆ›å»ºä¸€ä¸ªé€šå¾€æ¯æœºçš„ shellã€‚&lt;/p&gt;&#xA;&lt;p&gt;./bin/docker -H unix:///tmp/rootfs/var/run/docker.sock run -d -it --rm --name rshell -v &#34;/proc:/host/proc&#34; -v &#34;/sys:/host/sys&#34; -v &#34;/:/rootfs&#34; --network=host --privileged=true --cap-add=ALL alpine:latest&lt;/p&gt;&#xA;&lt;p&gt;å¦‚æœæƒ³ç°åœ¨ç›´æ¥å°è¯•æ­¤ç±»é€ƒé€¸åˆ©ç”¨çš„é­…åŠ›ï¼Œä¸å¦¨å¯ä»¥è¯•è¯• Google Cloud IDE å¤©ç„¶è‡ªå¸¦çš„å®¹å™¨é€ƒé€¸åœºæ™¯ï¼Œæ‹¥æœ‰ Google è´¦å·å¯ä»¥ç›´æ¥ç‚¹å‡»ä¸‹é¢çš„é“¾æ¥è·å–å®¹å™¨ç¯å¢ƒå’Œåˆ©ç”¨ä»£ç ï¼Œç›´æ¥æ‰§è¡Œåˆ©ç”¨ä»£ç  try_google_cloud/host_root.sh å† chroot åˆ° /rootfs ä½ å°±å¯ä»¥è·å–ä¸€ä¸ªå®Œæ•´çš„å®¿ä¸»æœº shellï¼š&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://ssh.cloud.google.com/cloudshell/editor?cloudshell_git_repo=https://github.com/neargle/cloud_native_security_test_case.git&#34;&gt;https://ssh.cloud.google.com/cloudshell/editor?cloudshell_git_repo=https://github.com/neargle/cloud_native_security_test_case.git&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftJ2vstIzkOJLNRZNzSwMyPUDLiagDBia53jYDqCTFD5Jpy07WbxBJpNhg/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;å½“ç„¶å®¹å™¨å†…éƒ¨ä¸ä¸€å®šæœ‰æ¡ä»¶å®‰è£…æˆ–è¿è¡Œ docker clientï¼Œä¸€èˆ¬è·å–çš„å®¹å™¨ shell å…¶å®¹å™¨é•œåƒæ˜¯å—é™ä¸”ä¸å®Œæ•´çš„ï¼Œä¹Ÿä¸ä¸€å®šèƒ½å®‰è£…æ–°çš„ç¨‹åºï¼Œå³ä½¿æ˜¯ç”¨ pip æˆ– npm å®‰è£…ç¬¬ä¸‰æ–¹ä¾èµ–åŒ…ä¹Ÿå¾ˆå›°éš¾ã€‚&lt;/p&gt;&#xA;&lt;p&gt;æ­¤æ—¶åŸºäº golang ç¼–å†™ç®€æ˜“çš„åˆ©ç”¨ç¨‹åºï¼Œåˆ©ç”¨äº¤å‰ç¼–è¯‘ç¼–è¯‘æˆæ— éœ€ä¾èµ–çš„å•ç‹¬ bin æ–‡ä»¶ä¸‹è½½åˆ°å®¹å™¨å†…æ‰§è¡Œå°±æ˜¯ç»å¸¸ä½¿ç”¨çš„æ–¹æ³•äº†ã€‚&lt;/p&gt;&#xA;&lt;h3&gt;5.4.2 æ”»å‡»æŒ‚è½½äº†ä¸»æœº /proc ç›®å½•çš„å®¹å™¨&lt;/h3&gt;&#xA;&lt;p&gt;å¦ä¸€ä¸ªæ¯”è¾ƒæœ‰è¶£çš„åœºæ™¯å°±æ˜¯æŒ‚è½½äº†ä¸»æœº /proc ç›®å½•çš„å®¹å™¨ï¼Œåœ¨å†å²çš„æ”»é˜²æ¼”ç»ƒä¸­å½“æˆ‘ä»¬é‡åˆ°æŒ‚è½½äº†ä¸»æœº /proc ç›®å½•çš„å®¹å™¨ï¼Œä¸€èˆ¬éƒ½ä¼šæœ‰å…¶å®ƒå¯ä»¥é€ƒé€¸çš„ç‰¹æ€§ï¼Œå¦‚ sys_ptrace æˆ–è€… sys_admin ç­‰ï¼Œä½†æ˜¯å…¶å®æŒ‚è½½äº†ä¸»æœº /proc ç›®å½•è¿™ä¸ªè®¾ç½®æœ¬èº«ï¼Œå°±æ˜¯ä¸€ä¸ªå¯ä»¥é€ƒé€¸åœ¨å®¿ä¸»æœºæ‰§è¡Œå‘½ä»¤çš„ç‰¹æ€§ã€‚&lt;/p&gt;&#xA;&lt;p&gt;æˆ‘ä»¬å¯ä»¥ç®€å•çš„æ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ªå…·æœ‰è¯¥é…ç½®çš„å®¹å™¨å¹¶è·å¾—å…¶ shellï¼š&lt;/p&gt;&#xA;&lt;p&gt;docker run -v /proc:/host_proc --rm -it ubuntu bash&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftAB4cUYkuAw8qAOpVUiclIpDNYUxspI6KP34Zf91eVQ6xwiaNUqjm19hw/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;è¿™é‡Œé€ƒé€¸å¹¶åœ¨å¤–éƒ¨æ‰§è¡Œå‘½ä»¤çš„æ–¹å¼ä¸»è¦æ˜¯åˆ©ç”¨äº† linux çš„ /proc/sys/kernel/core_pattern æ–‡ä»¶ã€‚&lt;/p&gt;&#xA;&lt;p&gt;a. é¦–å…ˆæˆ‘ä»¬éœ€è¦åˆ©ç”¨åœ¨ release_agent ä¸­æåŠçš„æ–¹æ³•ä» mount ä¿¡æ¯ä¸­æ‰¾å‡ºå®¿ä¸»æœºå†…å¯¹åº”å½“å‰å®¹å™¨å†…éƒ¨æ–‡ä»¶ç»“æ„çš„è·¯å¾„ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;code&gt;sed -n &#39;s/.*\perdir=\([^,]*\).*/\1/p&#39; /etc/mtab&lt;/code&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftR3jLLNribmw1DuJ0NO9kjn0fYslX59rhRdZVYMNl1mKYIS8M5gUkbdw/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;b. æ­¤æ—¶æˆ‘ä»¬åœ¨å®¹å™¨å†…çš„ /exp.sh å°±å¯¹åº”äº†å®¿ä¸»æœºçš„ &lt;code&gt;/var/lib/docker/overlay2/a1a1e60a9967d6497f22f5df21b185708403e2af22eab44cfc2de05ff8ae115f/diff/exp.sh&lt;/code&gt; æ–‡ä»¶ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftH6nUncxl6ibtrUumbDmWNOdnibrBCJFwpf3HrTFZ9xFhhvkRa4BCgCjA/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;c. å› ä¸ºå®¿ä¸»æœºå†…çš„ /proc æ–‡ä»¶è¢«æŒ‚è½½åˆ°äº†å®¹å™¨å†…çš„ /host_proc ç›®å½•ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¿®æ”¹ /host_proc/sys/kernel/core_pattern æ–‡ä»¶ä»¥è¾¾åˆ°ä¿®æ”¹å®¿ä¸»æœº /proc/sys/kernel/core_pattern çš„ç›®çš„ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;code&gt;echo -e &#34;|/var/lib/docker/overlay2/a1a1e60a9967d6497f22f5df21b185708403e2af22eab44cfc2de05ff8ae115f/diff/exp.sh \rcore&#34; &amp;gt; /host_proc/sys/kernel/core_pattern&lt;/code&gt;&lt;/p&gt;&#xA;&lt;p&gt;d. æ­¤æ—¶æˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªç¨‹åºåœ¨å®¹å™¨é‡Œæ‰§è¡Œå¹¶è§¦å‘ segmentation fault ä½¿æ¤å…¥çš„ payload å³ exp.sh åœ¨å®¿ä¸»æœºæ‰§è¡Œã€‚&lt;/p&gt;&#xA;&lt;p&gt;è¿™é‡Œæˆ‘ä»¬å‚è€ƒäº† &lt;a href=&#34;https://wohin.me/rong-qi-tao-yi-gong-fang-xi-lie-yi-tao-yi-ji-zhu-gai-lan/#4-2-procfs-&#34;&gt;https://wohin.me/rong-qi-tao-yi-gong-fang-xi-lie-yi-tao-yi-ji-zhu-gai-lan/#4-2-procfs-&lt;/a&gt; é‡Œçš„ c è¯­è¨€ä»£ç å’Œ CDK-TEAM/CDK é‡Œé¢çš„ GO è¯­è¨€ä»£ç ï¼š&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftEOJquTPhAf5XtlOBCEjRNM4qALicMhjMymWib58D2HkicTv7N9OcmpwZw/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;e. å½“ç„¶ä¸èƒ½å¿˜è®°ç»™ exp.sh èµ‹äºˆå¯æ‰§è¡Œæƒé™ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftYW4ibU65yhwJFibysUswDMOdiaSJbEIQkaZNdSusFBShsaHSS81KjZC0g/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;å½“å®¹å™¨å†…çš„ segmentation fault è¢«è§¦å‘æ—¶ï¼Œæˆ‘ä»¬å°±è¾¾åˆ°äº†é€ƒé€¸åˆ°å®¿ä¸»æœºåœ¨å®¹å™¨å¤–æ‰§è¡Œä»»æ„ä»£ç çš„ç›®çš„ã€‚&lt;/p&gt;&#xA;&lt;h3&gt;5.5. SYS_PTRACE å®‰å…¨é£é™©&lt;/h3&gt;&#xA;&lt;p&gt;å½“ docker å®¹å™¨è®¾ç½® --cap-add=SYS_PTRACE æˆ– Kubernetes PODS è®¾ç½® securityContext.capabilities ä¸º SYS_PTRACE é…ç½®ç­‰æŠŠ SYS_PTRACE capabilities æƒé™èµ‹äºˆå®¹å™¨çš„æƒ…å†µï¼Œéƒ½å¯èƒ½å¯¼è‡´å®¹å™¨é€ƒé€¸ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftiatm1LG35dC04AKvK7vbmJibx5iciaena0ptqib9W2xOY9cVTVShyFmBMFQ/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;è¿™ä¸ªåœºæ™¯å¾ˆå¸¸è§ï¼Œå› ä¸ºæ— è®ºæ˜¯ä¸æ˜¯çº¿ä¸Šç¯å¢ƒï¼Œä¸šåŠ¡è¿›è¡Œç¾éš¾é‡è¯•å’Œç¨‹åºè°ƒè¯•éƒ½æ˜¯æ²¡åŠæ³•é¿å…çš„ï¼Œæ‰€ä»¥å®¹å™¨ç»å¸¸è¢«è®¾ç½® ptrace æƒé™ã€‚&lt;/p&gt;&#xA;&lt;p&gt;ä½¿ç”¨ capsh --print å¯ä»¥åˆ¤æ–­å½“å‰å®¹å™¨æ˜¯å¦é™„åŠ äº† ptrace capabilitiesã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftA5xR0WNgNA3DwdiaIoGn2mWmGGTzCwibmeRsejfKo8daibJ3fib6vxMWiaw/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;è¿™é‡Œçš„åˆ©ç”¨æ–¹å¼å’Œè¿›ç¨‹æ³¨å…¥çš„æ–¹å¼å¤§è‡´æ— äºŒï¼Œå¦‚æœæ˜¯ä½¿ç”¨ pupy æˆ– metasploit ç»´æŒå®¹å™¨çš„ shell æƒé™çš„è¯ï¼Œåˆ©ç”¨æ¡†æ¶ç°æœ‰çš„åŠŸèƒ½å°±èƒ½å¾ˆæ–¹ä¾¿çš„è¿›è¡Œæ³¨å…¥å’Œåˆ©ç”¨ã€‚&lt;/p&gt;&#xA;&lt;p&gt;å½“ç„¶ï¼Œå°±å¦‚ä¸Šé¢æ‰€è¿°ï¼Œæ‹¥æœ‰äº†è¯¥æƒé™å°±å¯ä»¥åœ¨å®¹å™¨å†…æ‰§è¡Œ strace å’Œ ptrace ç­‰å·¥å…·ï¼Œè‹¥åªæ˜¯ä¸€äº›å¸¸è§åœºæ™¯çš„ä¿¡æ¯æ”¶é›†ä¹Ÿä¸ä¸€å®šéœ€è¦æ³¨å…¥æ¶æ„ shellcode è¿›è¡Œé€ƒé€¸æ‰å¯ä»¥åšåˆ°ã€‚&lt;/p&gt;&#xA;&lt;h3&gt;5.6. åˆ©ç”¨å¤§æƒé™çš„ Service Account&lt;/h3&gt;&#xA;&lt;p&gt;ä½¿ç”¨ Kubernetes åšå®¹å™¨ç¼–æ’çš„è¯ï¼Œåœ¨ POD å¯åŠ¨æ—¶ï¼ŒKubernetes ä¼šé»˜è®¤ä¸ºå®¹å™¨æŒ‚è½½ä¸€ä¸ª Service Account è¯ä¹¦ã€‚åŒæ—¶ï¼Œé»˜è®¤æƒ…å†µä¸‹ Kubernetes ä¼šåˆ›å»ºä¸€ä¸ªç‰¹æœ‰çš„ Service ç”¨æ¥æŒ‡å‘ ApiServerã€‚&lt;/p&gt;&#xA;&lt;p&gt;æœ‰äº†è¿™ä¸¤ä¸ªæ¡ä»¶ï¼Œæˆ‘ä»¬å°±æ‹¥æœ‰äº†åœ¨å®¹å™¨å†…ç›´æ¥å’Œ APIServer é€šä¿¡å’Œäº¤äº’çš„æ–¹å¼ã€‚&lt;/p&gt;&#xA;&lt;p&gt;Kubernetes Default Service&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftF3icYrbEyoajYW3lxKIYcevm66b3clvlQUIXxneO7LJLVqEibrEhHziaw/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftTvug1uFW0iaib9xCxBAGmXIO0M5xgOpWb3SlNabapWZnkko7SQGf5gOw/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;Default Service Account&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSft7TibDhibGHJ9Hrb2uIPSCEGiaUgacRkL4THkcThMyGmN2gPDUADeJLBzQ/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™ä¸ª Service Account çš„è¯ä¹¦å’Œ token è™½ç„¶å¯ä»¥ç”¨äºå’Œ Kubernetes Default Service çš„ APIServer é€šä¿¡ï¼Œä½†æ˜¯æ˜¯æ²¡æœ‰æƒé™è¿›è¡Œåˆ©ç”¨çš„ã€‚&lt;/p&gt;&#xA;&lt;p&gt;ä½†æ˜¯é›†ç¾¤ç®¡ç†å‘˜å¯ä»¥ä¸º Service Account èµ‹äºˆæƒé™ï¼š&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftKYhULXklPpLiciaR5icMSuVehOY3FTUrkfIyCtvmj9IoiclZkZt5eW5gZA/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;æ­¤æ—¶ç›´æ¥åœ¨å®¹å™¨é‡Œæ‰§è¡Œ kubectl å°±å¯ä»¥é›†ç¾¤ç®¡ç†å‘˜æƒé™ç®¡ç†å®¹å™¨é›†ç¾¤ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftia4aojurXia3vykNrLmzUp1LxDKqalKT9wofHFks3F7f3v9OAjiaKMm4Q/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;å› æ­¤è·å–ä¸€ä¸ªæ‹¥æœ‰ç»‘å®šäº† ClusterRole/cluster-admin Service Account çš„ PODï¼Œå…¶å®å°±ç­‰äºæ‹¥æœ‰äº†é›†ç¾¤ç®¡ç†å‘˜çš„æƒé™ã€‚&lt;/p&gt;&#xA;&lt;p&gt;å®é™…æ”»é˜²æ¼”ç»ƒåˆ©ç”¨è¿‡ç¨‹ä¸­ï¼Œæœ‰å‡ ä¸ªå‘ç‚¹ï¼š&lt;/p&gt;&#xA;&lt;ol&gt; &#xA; &lt;li&gt; &lt;p&gt;è€ç‰ˆæœ¬çš„ kubectl ä¸ä¼šè‡ªåŠ¨å¯»æ‰¾å’Œä½¿ç”¨ Service Account éœ€è¦ç”¨ kubectl config set-cluster cfc è¿›è¡Œç»‘å®šæˆ–ä¸‹è½½ä¸€ä¸ªæ–°ç‰ˆæœ¬çš„ kubectl äºŒè¿›åˆ¶ç¨‹åºï¼›&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;å¦‚æœå½“å‰ç”¨æˆ·çš„ç›®å½•ä¸‹é…ç½®äº† kubeconfig å³ä½¿æ˜¯é”™è¯¯çš„ï¼Œä¹Ÿä¼šä½¿ç”¨ kubeconfig çš„é…ç½®å»è®¿é—®ä¸ä¼šé»˜è®¤ä½¿ç”¨ Service Account ï¼›&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;å†å²ä¸Šæˆ‘ä»¬é‡åˆ°å¾ˆå¤šé›†ç¾¤ä¼šåˆ é™¤ Kubernetes Default Serviceï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨å®¹å™¨å†…çš„èµ„äº§æ¢æµ‹æ‰‹æ³•è¿›è¡Œä¿¡æ¯æ”¶é›†è·å– apiserver çš„åœ°å€ã€‚&lt;/p&gt; &lt;/li&gt; &#xA;&lt;/ol&gt;&#xA;&lt;h3&gt;5.7. CVE-2020-15257 åˆ©ç”¨&lt;/h3&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftkxc6w0j4uicMY3jcHMyYhwBHL3cqqVoavpqlOQMQhLBtUEKmCZW6OUQ/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;æ­¤å‰ containerd ä¿®å¤äº†ä¸€ä¸ªé€ƒé€¸æ¼æ´ï¼Œå½“å®¹å™¨å’Œå®¿ä¸»æœºå…±äº«ä¸€ä¸ª net namespace æ—¶ï¼ˆå¦‚ä½¿ç”¨ --net=host æˆ–è€… Kubernetes è®¾ç½® pod container çš„ .spec.hostNetwork ä¸º trueï¼‰æ”»å‡»è€…å¯å¯¹æ‹¥æœ‰ç‰¹æƒçš„ containerd shim API è¿›è¡Œæ“ä½œï¼Œå¯èƒ½å¯¼è‡´å®¹å™¨é€ƒé€¸è·å–ä¸»æœºæƒé™ã€ä¿®æ”¹ä¸»æœºæ–‡ä»¶ç­‰å±å®³ã€‚&lt;/p&gt;&#xA;&lt;p&gt;å®˜æ–¹å»ºè®®å‡çº§ containerd ä»¥ä¿®å¤å’Œé˜²å¾¡è¯¥æ”»å‡»ï¼›å½“ç„¶ä¸šåŠ¡åœ¨ä½¿ç”¨æ—¶ï¼Œä¹Ÿå»ºè®®å¦‚æ— ç‰¹æ®Šéœ€æ±‚ä¸è¦å°†ä»»ä½• host çš„ namespace å…±äº«ç»™å®¹å™¨ï¼Œå¦‚ Kubernetes PODS è®¾ç½® hostPID: trueã€hostIPC: trueã€hostNetwork: true ç­‰ã€‚&lt;/p&gt;&#xA;&lt;p&gt;æˆ‘ä»¬æµ‹è¯•å‡çº§ containerd å¯èƒ½å¯¼è‡´è¿è¡Œå®¹å™¨é€€å‡ºæˆ–é‡å¯ï¼Œæœ‰çŠ¶æ€å®¹å™¨èŠ‚ç‚¹çš„å‡çº§è¦æä¸ºæ…é‡ã€‚ä¹Ÿå› ä¸ºå¦‚æ­¤ï¼Œä¸šåŠ¡é’ˆå¯¹è¯¥é—®é¢˜è¿›è¡Œ containerd å‡çº§çš„æ¦‚ç‡å¹¶ä¸é«˜ã€‚&lt;/p&gt;&#xA;&lt;p&gt;åˆ©ç”¨ç›®å‰æœ€æ–¹ä¾¿çš„ EXP ä¸ºï¼š&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/cdk-team/CDK/wiki/Exploit:-shim-pwn&#34;&gt;https://github.com/cdk-team/CDK/wiki/Exploit:-shim-pwn&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSft66U7coycRmetNGibBpXjwjN6mjYogWazh856zC1Ajmeq34tC2jXdI0Q/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;h3&gt;5.8. runc CVE-2019-5736 å’Œå®¹å™¨ç»„ä»¶å†å²é€ƒé€¸æ¼æ´ç»¼è¿°&lt;/h3&gt;&#xA;&lt;p&gt;è¿™ä¸ªç”± RUNC å®ç°è€Œå¯¼è‡´çš„é€ƒé€¸æ¼æ´å¤ªå‡ºåäº†ï¼Œå‡ºååˆ°æ¯ä¸€æ¬¡æåŠå®¹å™¨å®‰å…¨èƒ½åŠ›æˆ–å®¹å™¨å®‰å…¨ç ”ç©¶éƒ½ä¼šè¢«æ‹¿å‡ºæ¥å½“åšæ¡ˆä¾‹æˆ– DEMOã€‚ä½†ä¸å¾—ä¸è¯´ï¼Œè¿™é‡Œçš„åˆ©ç”¨æ¡ä»¶åœ¨å®é™…çš„æ”»é˜²åœºæ™¯é‡Œè¿˜æ˜¯è¿‡äºæœ‰é™äº†ï¼›å®é™…åˆ©ç”¨è¿˜æ˜¯éœ€è¦ä¸€äº›ç‰¹å®šçš„åœºæ™¯æ‰èƒ½çœŸçš„æƒ³è¦å»ä½¿ç”¨å’Œåˆ©ç”¨å®ƒã€‚&lt;/p&gt;&#xA;&lt;p&gt;è¿™é‡Œå…¬å¼€çš„ POC å¾ˆå¤šï¼Œä¸åŒçš„ç¯å¢ƒå’Œæ“ä½œç³»ç»Ÿå‘è¡Œç‰ˆæœ¬åˆ©ç”¨èµ·æ¥æœ‰ä¸€å®šçš„å·®å¼‚ï¼Œå¯ä»¥å‚è€ƒè¿›è¡Œåˆ©ç”¨ï¼š&lt;/p&gt;&#xA;&lt;ol&gt; &#xA; &lt;li&gt; &lt;p&gt;github.com/feexd/pocs&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;github.com/twistlock/RunC-CVE-2019-5736&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;github.com/AbsoZed/DockerPwn.py&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;github.com/q3k/cve-2019-5736-poc&lt;/p&gt; &lt;/li&gt; &#xA;&lt;/ol&gt;&#xA;&lt;p&gt;è‡³äºæˆ‘ä»¬å®é™…é‡åˆ°çš„åœºæ™¯å¯ä»¥åœ¨ â€œå®¹å™¨ç›¸å…³ç»„ä»¶çš„å†å²æ¼æ´â€ ä¸€ç« ä¸­æŸ¥çœ‹ã€‚ä»æ”»é˜²è§’åº¦ä¸å¾—ä¸è¯´çš„æ˜¯ï¼Œè¿™ä¸ªæ¼æ´çš„æ€è·¯å’Œ EXP è¿‡äºå‡ºåï¼Œå‡ ä¹æ‰€æœ‰çš„ HIDS éƒ½å·²ç»å…·å¤‡æ£€æµ‹èƒ½åŠ›ï¼Œç”šè‡³å¯¹æŸäº› EXP æ–‡ä»¶åœ¨é™æ€æ–‡ä»¶è§„åˆ™ä¸Šåšäº†æ‹‰é»‘ï¼Œæ‰€ä»¥å¤§éƒ¨åˆ†æƒ…å†µæ˜¯ä½¿ç”¨è¯¥æ–¹æ³•å°±ç­‰äºåœ¨ä¸€å®šç¨‹åº¦ä¸Šæš´éœ²äº†è¡Œè¸ªï¼Œéœ€è¦è°¨æ…ä½¿ç”¨ã€‚&lt;/p&gt;&#xA;&lt;h3&gt;5.9. å†…æ ¸æ¼æ´ææƒå’Œé€ƒé€¸æ¦‚è¿°&lt;/h3&gt;&#xA;&lt;p&gt;å®¹å™¨å…±äº«å®¿ä¸»æœºå†…æ ¸ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®¿ä¸»æœºçš„å†…æ ¸æ¼æ´è¿›è¡Œå®¹å™¨é€ƒé€¸ï¼Œæ¯”å¦‚é€šè¿‡å†…æ ¸æ¼æ´è¿›å…¥å®¿ä¸»æœºå†…æ ¸å¹¶æ›´æ”¹å½“å‰å®¹å™¨çš„ namespaceï¼Œåœ¨å†å²å†…æ ¸æ¼æ´å¯¼è‡´çš„å®¹å™¨é€ƒé€¸å½“ä¸­æœ€å¹¿ä¸ºäººçŸ¥çš„ä¾¿æ˜¯è„ç‰›æ¼æ´ï¼ˆCVE-2016-5195ï¼‰äº†ã€‚&lt;/p&gt;&#xA;&lt;p&gt;åŒæ—¶ï¼Œè¿‘æœŸè¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒå‡ºåçš„å†…æ ¸æ¼æ´æ˜¯ CVE-2020-14386ï¼Œä¹Ÿæ˜¯å¯ä»¥å¯¼è‡´å®¹å™¨é€ƒé€¸çš„å®‰å…¨é—®é¢˜ã€‚&lt;/p&gt;&#xA;&lt;p&gt;è¿™äº›æ¼æ´çš„ POC å’Œ EXP éƒ½å·²ç»å…¬å¼€ï¼Œä¸”ä¸ä¹æœ‰åˆ©ç”¨è¡Œä¸ºï¼Œä½†åŒæ—¶å¤§éƒ¨åˆ†çš„ EDR å’Œ HIDS ä¹Ÿå¯¹ EXP çš„åˆ©ç”¨å…·æœ‰æ£€æµ‹èƒ½åŠ›ï¼Œè¿™ä¹Ÿæ˜¯åˆ©ç”¨å†…æ ¸æ¼æ´è¿›è¡Œå®¹å™¨é€ƒé€¸çš„ç—›ç‚¹ä¹‹ä¸€ã€‚&lt;/p&gt;&#xA;&lt;h3&gt;5.10. å†™ StaticPod é€ƒé€¸æˆ–æƒé™ç»´æŒ&lt;/h3&gt;&#xA;&lt;p&gt;åˆ©ç”¨ Static Pod æ˜¯æˆ‘ä»¬åœ¨å®¹å™¨é€ƒé€¸å’Œè¿œç¨‹ä»£ç æ‰§è¡Œåœºæ™¯æ‰¾åˆ°çš„è§£å†³æ–¹æ¡ˆï¼Œä»–æ˜¯ Kubernetes é‡Œçš„ä¸€ç§ç‰¹æ®Šçš„ Podï¼Œç”±èŠ‚ç‚¹ä¸Š kubelet è¿›è¡Œç®¡ç†ã€‚åœ¨æ¼æ´åˆ©ç”¨ä¸Šæœ‰ä»¥ä¸‹å‡ ç‚¹æ˜æ˜¾çš„ä¼˜åŠ¿ï¼š&lt;/p&gt;&#xA;&lt;p&gt;1ã€ ä»…ä¾èµ–äº kubelet&lt;/p&gt;&#xA;&lt;p&gt;Static Pod ä»…ä¾èµ– kubeletï¼Œå³ä½¿ K8s çš„å…¶ä»–ç»„ä»¶éƒ½å¥”æºƒæ‰çº¿ï¼Œåˆ é™¤ apiserverï¼Œä¹Ÿä¸å½±å“ Static Pod çš„ä½¿ç”¨ã€‚åœ¨ Kubernetes å·²ç»æ˜¯äº‘åŸç”ŸæŠ€æœ¯äº‹å®æ ‡å‡†çš„ç°åœ¨ï¼Œkubelet å‡ ä¹è¿è¡Œä¸æ¯ä¸ªå®¹å™¨æ¯æœºèŠ‚ç‚¹ä¹‹ä¸Šã€‚&lt;/p&gt;&#xA;&lt;p&gt;2ã€ é…ç½®ç›®å½•å›ºå®š&lt;/p&gt;&#xA;&lt;p&gt;Static Pod é…ç½®æ–‡ä»¶å†™å…¥è·¯å¾„ç”± kubelet config çš„ staticPodPath é…ç½®é¡¹ç®¡ç†ï¼Œé»˜è®¤ä¸º /etc/kubernetes/manifests æˆ– /etc/kubelet.d/ï¼Œä¸€èˆ¬æƒ…å†µä¸åšæ›´æ”¹ã€‚&lt;/p&gt;&#xA;&lt;p&gt;3ã€ æ‰§è¡Œé—´éš”æ¯” Cron æ›´çŸ­&lt;/p&gt;&#xA;&lt;p&gt;é€šè¿‡æŸ¥çœ‹ Kubernetes çš„æºç ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç° kubelet ä¼šæ¯ 20 ç§’ç›‘æ§æ–°çš„ POD é…ç½®æ–‡ä»¶å¹¶è¿è¡Œæˆ–æ›´æ–°å¯¹åº”çš„ PODï¼›ç”±&amp;nbsp;&lt;code&gt;c.FileCheckFrequency.Duration = 20 * time.Second&lt;/code&gt;&amp;nbsp;æ§åˆ¶ï¼Œè™½ç„¶ Cron çš„æ¯åˆ†é’Ÿæ‰§è¡Œå·²ç»ç®—æ˜¯éå¸¸åŠæ—¶ï¼Œä½† Static Pod æ˜¾ç„¶å¯ä»¥è®©ç­‰å¾… shell çš„æ—¶é—´æ›´çŸ­æš‚ï¼Œå¯¹æ¯” /etc/cron.daily/* ï¼Œ /etc/cron.hourly/* ï¼Œ /etc/cron.monthly/* ï¼Œ /etc/cron.weekly/* ç­‰ç›®å½•å°±æ›´ä¸ç”¨è¯´äº†ã€‚&lt;/p&gt;&#xA;&lt;p&gt;å¦å¤–ï¼ŒCron çš„åˆ†é’Ÿçº§ä»»åŠ¡ä¹Ÿä¼šé‡åˆ°é‡å¤å¤šæ¬¡æ‰§è¡Œçš„é—®é¢˜ï¼Œå¢åŠ å¤šä½™çš„åŠ¨ä½œæ›´å®¹æ˜“è§¦å‘ IDS å’Œ IPSï¼Œè€Œ Static Pod è‹¥æ‰§è¡ŒæˆåŠŸå°±ä¸å†è°ƒç”¨ï¼Œä¿æŒæ‰§è¡ŒçŠ¶æ€ï¼Œä»…åœ¨ç¨‹åºå¥”æºƒæˆ–å…³é—­æ—¶å¯è‡ªåŠ¨é‡å¯&lt;/p&gt;&#xA;&lt;p&gt;4ã€ è¿›ç¨‹é…ç½®æ›´çµæ´»&lt;/p&gt;&#xA;&lt;p&gt;Static Pod æ”¯æŒ Kubernetes POD çš„æ‰€æœ‰é…ç½®ï¼Œç­‰äºå¯ä»¥è¿è¡Œä»»æ„é…ç½®çš„å®¹å™¨ã€‚ä¸ä»…å¯ä»¥é…ç½®ç‰¹æƒå®¹å™¨å’Œ HostPID ä½¿ç”¨ nscenter ç›´æ¥è·å–å®¹å™¨æ¯æœºæƒé™ï¼›æ›´å¯ä»¥é…ç½®ä¸åŒ namespaceã€capabilitiesã€cgroupã€apparmorã€seccomp ç”¨äºç‰¹æ®Šçš„éœ€æ±‚ã€‚&lt;/p&gt;&#xA;&lt;p&gt;çµæ´»çš„è¿›ç¨‹å‚æ•°å’Œ POD é…ç½®ä½¿å¾— Static Pod æœ‰æ›´å¤šæ–¹æ³•å¯¹æŠ— IDS å’Œ IPSï¼Œå› æ­¤ä¹Ÿå»¶ç”Ÿäº†å¾ˆå¤šæ–°çš„å¯¹æŠ—æ‰‹æ³•ï¼Œè¿™é‡Œå°±ä¸å†åšè¿‡å¤šä»‹ç»ã€‚&lt;/p&gt;&#xA;&lt;p&gt;5ã€ æ£€æµ‹æ–°æ–‡ä»¶æˆ–æ–‡ä»¶å˜åŒ–çš„é€»è¾‘æ›´é€šç”¨&lt;/p&gt;&#xA;&lt;p&gt;æœ€é‡è¦çš„æ˜¯ï¼ŒStatic Pod ä¸ä¾èµ–äº st_mtime é€»è¾‘ï¼Œä¹Ÿæ— éœ€è®¾ç½®å¯æ‰§è¡Œæƒé™ï¼Œæ–°æ–‡ä»¶æ£€æµ‹é€»è¾‘æ›´åŠ é€šç”¨ã€‚&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;func (s *sourceFile) extractFromDir(name string) ([]*v1.Pod, error) {&#xA;    dirents, err := filepath.Glob(filepath.Join(name, &#34;[^.]*&#34;))&#xA;    if err != nil {&#xA;        return nil, fmt.Errorf(&#34;glob failed: %v&#34;, err)&#xA;    }&#xA;    pods := make([]*v1.Pod, 0, len(dirents))&#xA;&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;è€Œæ–‡ä»¶æ›´æ–°æ£€æµ‹æ˜¯åŸºäº kubelet ç»´æŠ¤çš„ POD Hash è¡¨è¿›è¡Œçš„ï¼Œé…ç½®çš„æ›´æ–°å¯ä»¥å¾ˆåŠæ—¶å’Œç¡®åˆ‡çš„å¯¹ POD å®¹å™¨è¿›è¡Œé‡å»ºã€‚Static Pod ç”šè‡³åŒ…å«ç¨³å®šå®Œå–„çš„å¥”æºƒé‡å¯æœºåˆ¶ï¼Œç”± kubelet ç»´æŠ¤ï¼Œå±äº kubelet çš„é»˜è®¤è¡Œä¸ºæ— éœ€æ–°åŠ é…ç½®ã€‚æ“ä½œç³»ç»Ÿå±‚çš„ç—•è¿¹æ¸…ç†åªéœ€åˆ é™¤ Static Pod YAML æ–‡ä»¶å³å¯ï¼Œkubelet ä¼šè‡ªåŠ¨ç§»é™¤å…³é—­è¿è¡Œçš„æ¶æ„å®¹å™¨ã€‚åŒæ—¶ï¼Œå¯¹äºä¸äº†è§£ Static Pod çš„è“é˜Ÿé€‰æ‰‹æ¥è¯´ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨&amp;nbsp;&lt;code&gt;kubectl delete&lt;/code&gt;&amp;nbsp;åˆ é™¤æ¶æ„å®¹å™¨æˆ–ä½¿ç”¨&amp;nbsp;&lt;code&gt;docker stop&lt;/code&gt;&amp;nbsp;å…³é—­å®¹å™¨éƒ½æ— æ³•å®Œå…¨æ¸…é™¤ Static Pod çš„æ¶æ„è¿›ç¨‹ï¼Œkubelet ä¼šå®ˆæŠ¤å¹¶é‡å¯è¯¥ Podã€‚&lt;/p&gt;&#xA;&lt;h2&gt;6. å®¹å™¨ç›¸å…³ç»„ä»¶çš„å†å²æ¼æ´&lt;/h2&gt;&#xA;&lt;p&gt;2020 å¹´æˆ‘ä»¬å’Œè…¾è®¯äº‘çš„åŒå­¦ä¸€èµ·å¤„ç†è·Ÿè¿›åˆ†æäº†å¤šä¸ªå®˜æ–¹å¼€æºåˆ†æ”¯æ‰€æŠ«éœ²çš„å®‰å…¨é—®é¢˜ï¼Œå¹¶åœ¨å…¬å¸å†…å¤–çš„äº‘åŸç”Ÿèƒ½åŠ›ä¸Šè¿›è¡Œå¤ç°ã€åˆ†æï¼Œä»äº§å“å’Œå®‰å…¨ä¸¤ä¸ªè§’åº¦å‡ºå‘æ¢è®¨æ”»å‡»åœºæ™¯ï¼Œä¿éšœäº‘ç”¨æˆ·å’Œä¸šåŠ¡çš„å®‰å…¨ã€‚&lt;/p&gt;&#xA;&lt;p&gt;å…¶ä¸­æŠ•å…¥æ—¶é—´æ¯”è¾ƒå¤šçš„ï¼Œä¸»è¦æ˜¯ä»¥ä¸‹åä¸ªæ¼æ´ï¼Œæ¯ä¸ªéƒ½éå¸¸æœ‰è¶£ï¼Œä¸”éƒ½åœ¨äº‘äº§å“ä¸Šå¾—åˆ°äº†å¦¥å–„çš„è·Ÿè¿›å’Œå®‰å…¨èƒ½åŠ›å»ºè®¾ï¼š&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftfyYibISQBmbTeyibKy0TwkdDMtGJIqoqlCDKkH4vaHxbb2MkzU3W6LRA/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;å®é™…æ”»é˜²åœºæ™¯é‡Œé¢æˆ‘çœŸå®ç”¨è¿‡ä¸”åœ¨å…³é”®è·¯å¾„é‡Œèµ·åˆ°ä½œç”¨çš„ä¹Ÿå°± CVE-2020-15257ï¼Œå…¶å®ƒæ¼æ´çš„ POC éƒ½åªåœ¨æ¼æ´å…¬å¼€æ—¶è‡ªå»ºæµ‹è¯•çš„ç¯å¢ƒå¤ç°å’Œå…¬å¸å†…æœåŠ¡çš„æ¼æ´æŒ–æ˜ç”¨äº†ä¸€ä¸‹ï¼Œæœ‰äº›ç¯å¢ƒè™½ç„¶æœ‰æ¼æ´ï¼Œä½†æ˜¯å®é™…æ‰“çœŸå®ç›®æ ‡å´æ²¡æ€ä¹ˆç”¨å¾—ä¸Šã€‚&lt;/p&gt;&#xA;&lt;p&gt;å€¼å¾—ä¸€æçš„æ˜¯æœ€å¼€å§‹è·Ÿè¿›åˆ†ææ—¶ï¼Œå› ä¸º EXP éœ€è¦é’“é±¼è®©ç®¡ç†å‘˜å»æ‰§è¡Œ docker exec æˆ– kubectl exec æ‰å¯ä»¥è§¦å‘ï¼Œæ‰€ä»¥ä¸æ€ä¹ˆçœ‹å¥½çš„ CVE-2019-5736 RUNC å®¹å™¨é€ƒé€¸æ¼æ´ï¼›åè€Œæ˜¯çœŸçš„é‡åˆ°å‡ ä¸ªæ— äº¤äº’å³å¯è§¦å‘çš„åœºæ™¯ã€‚ä¸»è¦æ˜¯ vscode serverã€jupyter notebookã€container webconsole ç­‰è¿™ç§æä¾›å®¹å™¨å†…äº¤äº’å¼ shell çš„å¤šç§Ÿæˆ·åœºæ™¯åœ¨ä¼ä¸šå†…ç½‘é‡Œå˜å¤šäº†ï¼Œå®¹å™¨é€ƒé€¸ä¹‹åå°±æ˜¯æ–°çš„ç½‘ç»œç¯å¢ƒå’Œä¸»æœºç¯å¢ƒã€‚&lt;/p&gt;&#xA;&lt;h2&gt;7. å®¹å™¨ã€å®¹å™¨ç¼–æ’ç»„ä»¶ API é…ç½®ä¸å½“æˆ–æœªé‰´æƒ&lt;/h2&gt;&#xA;&lt;p&gt;å°±å®‰å…¨é—®é¢˜æ¥è¯´ï¼Œä¸šç•Œæ™®éæ¥è§¦æœ€å¤šã€æœ€é¦–å½“å…¶å†²çš„å°±æ˜¯å®¹å™¨ç»„ä»¶æœåŠ¡çš„æœªé‰´æƒé—®é¢˜ã€‚æˆ‘ä»¬åœ¨ 2019 å¹´çš„æ—¶å€™æ•´ç†äº†ä¸€ä»½ Kubernetes æ¶æ„ä¸‹å¸¸è§çš„å¼€æ”¾æœåŠ¡æŒ‡çº¹ï¼Œæä¾›ç»™åˆ°äº†åœ°è¡¨æœ€å¼ºçš„æ‰«æå™¨æ´çŠ€å›¢é˜Ÿï¼Œå°±ç°åœ¨çœ‹æ¥è¿™ä»½æŒ‡çº¹ä¹Ÿæ˜¯æ¯”è¾ƒå…¨çš„ã€‚&lt;/p&gt;&#xA;&lt;ol&gt; &#xA; &lt;li&gt; &lt;p&gt;kube-apiserver: 6443, 8080&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;kubectl proxy: 8080, 8081&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;kubelet: 10250, 10255, 4149&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;dashboard: 30000&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;docker api: 2375&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;etcd: 2379, 2380&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;kube-controller-manager: 10252&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;kube-proxy: 10256, 31442&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;kube-scheduler: 10251&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;weave: 6781, 6782, 6783&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;kubeflow-dashboard: 8080&lt;/p&gt; &lt;/li&gt; &#xA;&lt;/ol&gt;&#xA;&lt;p&gt;å‰å…­ä¸ªæœåŠ¡çš„éåªè¯»æ¥å£æˆ‘ä»¬éƒ½æ›¾ç»åœ¨æ¸—é€æµ‹è¯•é‡Œé‡åˆ°å¹¶åˆ©ç”¨è¿‡ï¼Œéƒ½æ˜¯ä¸€æ—¦è¢«æ§åˆ¶å¯ä»¥ç›´æ¥è·å–ç›¸åº”å®¹å™¨ã€ç›¸åº”èŠ‚ç‚¹ã€é›†ç¾¤æƒé™çš„æœåŠ¡ï¼Œä¹Ÿæ˜¯å¹¿å¤§å…¬ç½‘è •è™«çš„å¿…äº‰ä¹‹åœ°ã€‚&lt;/p&gt;&#xA;&lt;h3&gt;7.1. ç»„ä»¶åˆ†å·¥&lt;/h3&gt;&#xA;&lt;p&gt;å„ä¸ªç»„ä»¶æœªé‰´æƒæ‰€èƒ½é€ æˆçš„é£é™©ï¼Œå…¶å®ä»å®ƒä»¬åœ¨ Kubernetes é›†ç¾¤ç¯å¢ƒé‡Œæ‰€èƒ½èµ·åˆ°çš„ä½œç”¨å°±èƒ½å¾ˆæ˜æ˜¾çš„åˆ¤æ–­å‡ºæ¥ï¼Œå¦‚ APIServer æ˜¯æ‰€æœ‰åŠŸèƒ½çš„ä¸»å…¥å£ï¼Œåˆ™æ§åˆ¶ APIServer åŸºæœ¬ä¸Šç­‰åŒæ§åˆ¶é›†ç¾¤çš„æ‰€æœ‰åŠŸèƒ½ï¼›è€Œ kubelet æ˜¯å•ä¸ªèŠ‚ç‚¹ç”¨äºè¿›è¡Œå®¹å™¨ç¼–æ’çš„ Agentï¼Œæ‰€ä»¥æ§åˆ¶ kubelet ä¸»è¦æ˜¯å¯¹å•ä¸ªèŠ‚ç‚¹ä¸‹çš„å®¹å™¨èµ„æºè¿›è¡Œæ§åˆ¶ã€‚&lt;/p&gt;&#xA;&lt;p&gt;ç»„ä»¶åˆ†å·¥ä¸Šè¾ƒä¸ºå®Œæ•´çš„å›¾ä¾‹å¯å‚è€ƒï¼š&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftdtJiaulxvzaFwvM2qeOiatjO2G11dHW3xZmiaicBunCZiazicZKPH7gZYhpg/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;æƒ³å¿…è¿™æ ·ä¹Ÿç›¸å¯¹æ™¦æ¶©éš¾æ‡‚ï¼Œæˆ‘ç®€åŒ–äº†ä¸€ä¸‹ï¼Œå‡å¦‚ç”¨æˆ·æƒ³åœ¨é›†ç¾¤é‡Œé¢æ–°å»ºä¸€ä¸ªå®¹å™¨é›†åˆå•å…ƒï¼Œé‚£å„ä¸ªç»„ä»¶ä»¥æ­¤ä¼šç›¸ç»§åšä»€ä¹ˆäº‹æƒ…å‘¢ï¼Ÿ&lt;/p&gt;&#xA;&lt;ol&gt; &#xA; &lt;li&gt; &lt;p&gt;ç”¨æˆ·ä¸ kubectl æˆ–è€… Kubernetes Dashboard è¿›è¡Œäº¤äº’ï¼Œæäº¤éœ€æ±‚ã€‚ï¼ˆä¾‹: kubectl create -f pod.yamlï¼‰;&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;kubectl ä¼šè¯»å– ~/.kube/config é…ç½®ï¼Œå¹¶ä¸ apiserver è¿›è¡Œäº¤äº’ï¼Œåè®®ï¼šhttp/https;&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;apiserver ä¼šååŒ ETCD ç­‰ç»„ä»¶å‡†å¤‡ä¸‹å‘æ–°å»ºå®¹å™¨çš„é…ç½®ç»™åˆ°èŠ‚ç‚¹ï¼Œåè®®ï¼šhttp/httpsï¼ˆé™¤ ETCD å¤–è¿˜æœ‰ä¾‹å¦‚ kube-controller-manager, scheduler ç­‰ç»„ä»¶ç”¨äºè§„åˆ’å®¹å™¨èµ„æºå’Œå®¹å™¨ç¼–æ’æ–¹å‘ï¼Œæ­¤å¤„ç®€åŒ–çœç•¥ï¼‰;&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;apiserver ä¸ kubelet è¿›è¡Œäº¤äº’ï¼Œå‘ŠçŸ¥å…¶å®¹å™¨åˆ›å»ºçš„éœ€æ±‚ï¼Œåè®®ï¼šhttp/httpsï¼›&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;kubelet ä¸ Docker ç­‰å®¹å™¨å¼•æ“è¿›è¡Œäº¤äº’ï¼Œåˆ›å»ºå®¹å™¨ï¼Œåè®®ï¼šhttp/unix socket.&lt;/p&gt; &lt;/li&gt; &#xA;&lt;/ol&gt;&#xA;&lt;p&gt;è‡³æ­¤æˆ‘ä»¬çš„å®¹å™¨å·²ç„¶åœ¨é›†ç¾¤èŠ‚ç‚¹ä¸Šåˆ›å»ºæˆåŠŸï¼Œåˆ›å»ºçš„æµç¨‹æ¶‰åŠ ETCDã€apiserverã€kubeletã€dashboardã€docker remote api ç­‰ç»„ä»¶ï¼Œå¯è§æ¯ä¸ªç»„ä»¶è¢«æ§åˆ¶ä¼šé€ æˆçš„é£é™©å’Œå±å®³ï¼Œä»¥åŠç›¸åº”çš„åˆ©ç”¨æ–¹å‘ï¼›&lt;/p&gt;&#xA;&lt;p&gt;å¯¹äºè¿™äº›ç»„ä»¶çš„å®‰å…¨æ€§ï¼Œé™¤äº†ä¸åŒç»„ä»¶ä¸ä¸€æ ·çš„é‰´æƒè®¾è®¡ä»¥å¤–ï¼Œç½‘ç»œéš”ç¦»ä¹Ÿæ˜¯éå¸¸å¿…è¦çš„ï¼Œå¸¸è§„çš„ iptables è®¾ç½®å’Œè§„åˆ’ä¹Ÿå¯ä»¥åœ¨å®¹å™¨ç½‘ç»œä¸­èµ·åˆ°ä½œç”¨ï¼ˆå®¹å™¨ç½‘ç»œçš„å¾ˆå¤šèƒ½åŠ›ä¹Ÿæ˜¯åŸºäº iptables å®ç°çš„ï¼‰ã€‚&lt;/p&gt;&#xA;&lt;p&gt;å¦å¤–æ¯”è¾ƒæœ‰å®¹å™¨ç‰¹è‰²çš„æ–¹æ¡ˆå°±æ˜¯ Network Policy çš„è§„åˆ’å’ŒæœåŠ¡ç½‘æ ¼çš„ä½¿ç”¨ï¼Œèƒ½ä»å®¹å™¨ã€PODã€æœåŠ¡çš„ç»´åº¦æ›´åŠ ä¼˜é›…çš„ç®¡ç†å’Œæ²»ç†å®¹å™¨ç½‘ç»œä»¥åŠé›†ç¾¤å†…æµé‡ã€‚è¿™äº›ç»„ä»¶çš„èµ„æ–™å’Œå¯¹åº”æ¸—é€æ‰‹æ³•ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸€ä¸€ä»‹ç»ä¸€ä¸‹:&lt;/p&gt;&#xA;&lt;h3&gt;7.2.&amp;nbsp;apiserver&lt;/h3&gt;&#xA;&lt;p&gt;å¦‚æœæƒ³è¦æ”»å‡» apiserver, ä¸‹è½½ kubectl æ˜¯å¿…ç»ä¹‹è·¯ã€‚&lt;/p&gt;&#xA;&lt;p&gt;curl -LO &#34;&lt;a href=&#34;https://dl.Kubernetes.io/release/$(curl&#34;&gt;https://dl.Kubernetes.io/release/$(curl&lt;/a&gt; -L -s &lt;a href=&#34;https://dl.Kubernetes.io/release/stable.txt)/bin/linux/amd64/kubectl&#34;&gt;https://dl.Kubernetes.io/release/stable.txt)/bin/linux/amd64/kubectl&lt;/a&gt;&#34;&lt;/p&gt;&#xA;&lt;p&gt;é»˜è®¤æƒ…å†µä¸‹ï¼Œapiserver éƒ½æ˜¯æœ‰é‰´æƒçš„ï¼š&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftM9oEyDHU4pstSLynedSxPkZn3uuzJ4VXzdHrnUh00cljFu0UOibnc3Q/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;å½“ç„¶ä¹Ÿæœ‰æœªé‰´æƒçš„é…ç½®ï¼škube-apiserver --insecure-bind-address=0.0.0.0 --insecure-port=8080ï¼Œæ­¤æ—¶è¯·æ±‚æ¥å£çš„ç»“æœå¦‚ä¸‹ï¼š&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftibmOReZolOmwMr0YkrznWE9ZJ0BN3sE1QOlw5LSgMWpUv8c2znbNAiag/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;å¯¹äºè¿™ç±»çš„æœªé‰´æƒçš„è®¾ç½®æ¥è¯´ï¼Œè®¿é—®åˆ° apiserver ä¸€èˆ¬æƒ…å†µä¸‹å°±è·å–äº†é›†ç¾¤çš„æƒé™ï¼š&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftqK18Uoe76DboIH9ffRN54PjPXaYDheClyBAEZ37ib7v0ibzZ792oNNNg/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;å¯èƒ½è¿˜æœ‰åŒå­¦ä¸çŸ¥é“ apiserver åœ¨ Kubernetes / å®¹å™¨ç¼–æ’é›†ç¾¤é‡Œçš„é‡è¦åœ°ä½ï¼Œè¿™é‡Œç®€å•ä»‹ç»ä¸€ä¸‹ï¼šåœ¨è“å†›çœ¼ä¸­çš„ Kubernetes APIServer å…¶é‡è¦æ€§ï¼Œå¦‚ä¸‹å›¾:&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftXeGING1DWkTWc8UOib0eJabJvib590vZU3o9LhrKW8ZZFXHdLInRAq3g/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;æ‰€ä»¥ï¼Œå¯¹äºé’ˆå¯¹ Kubernetes é›†ç¾¤çš„æ”»å‡»æ¥è¯´ï¼Œè·å– admin kubeconfig å’Œ apiserver æ‰€åœ¨çš„ master node æƒé™åŸºæœ¬ä¸Šå°±æ˜¯è·å–ä¸»æœºæƒé™è·¯ç¨‹çš„ç»ˆç‚¹ã€‚&lt;/p&gt;&#xA;&lt;p&gt;è‡³äºå¦‚ä½•é€šè¿‡ apiserver è¿›è¡ŒæŒç»­æ¸—é€å’Œæ§åˆ¶ï¼Œå‚è€ƒ kubectl çš„å®˜æ–¹æ–‡æ¡£æ˜¯æœ€å¥½çš„ï¼š&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://Kubernetes.io/docs/reference/generated/kubectl/kubectl-commands&#34;&gt;https://Kubernetes.io/docs/reference/generated/kubectl/kubectl-commands&lt;/a&gt;&lt;/p&gt;&#xA;&lt;h3&gt;7.3. kubelet&lt;/h3&gt;&#xA;&lt;p&gt;æ¯ä¸€ä¸ª Node èŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ª kubelet æœåŠ¡ï¼Œkubelet ç›‘å¬äº† 10250ï¼Œ10248ï¼Œ10255 ç­‰ç«¯å£ã€‚&lt;/p&gt;&#xA;&lt;p&gt;å…¶ä¸­ 10250 ç«¯å£æ˜¯ kubelet ä¸ apiserver è¿›è¡Œé€šä¿¡çš„ä¸»è¦ç«¯å£ï¼Œé€šè¿‡è¯¥ç«¯å£ kubelet å¯ä»¥çŸ¥é“è‡ªå·±å½“å‰åº”è¯¥å¤„ç†çš„ä»»åŠ¡ï¼Œè¯¥ç«¯å£åœ¨æœ€æ–°ç‰ˆ Kubernetes æ˜¯æœ‰é‰´æƒçš„ï¼Œä½†åœ¨å¼€å¯äº†æ¥å—åŒ¿åè¯·æ±‚çš„æƒ…å†µä¸‹ï¼Œä¸å¸¦é‰´æƒä¿¡æ¯çš„è¯·æ±‚ä¹Ÿå¯ä»¥ä½¿ç”¨ 10250 æä¾›çš„èƒ½åŠ›ï¼›å› ä¸º Kubernetes æµè¡Œæ—©æœŸï¼Œå¾ˆå¤šæŒ–çŸ¿æœ¨é©¬åŸºäºè¯¥ç«¯å£è¿›è¡Œä¼ æ’­å’Œåˆ©ç”¨ï¼Œæ‰€ä»¥è¯¥ç»„ä»¶åœ¨å®‰å…¨é¢†åŸŸéƒ¨åˆ†ç¾¤ä½“å†…éƒ¨çš„çŸ¥ååº¦åè€Œä¼šé«˜äº APIServerã€‚&lt;/p&gt;&#xA;&lt;p&gt;åœ¨æ–°ç‰ˆæœ¬ Kubernetes ä¸­å½“ä½¿ç”¨ä»¥ä¸‹é…ç½®æ‰“å¼€åŒ¿åè®¿é—®æ—¶ä¾¿å¯èƒ½å­˜åœ¨ kubelet æœªæˆæƒè®¿é—®æ¼æ´ï¼š&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftjpiaZkeEpJDRXf1GS3Nlm9abfNO8O1dRRxUkfZqZ348GMgcib4JgdkRw/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;å¦‚æœ 10250 ç«¯å£å­˜åœ¨æœªæˆæƒè®¿é—®æ¼æ´ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å…ˆä½¿ç”¨ / pods æ¥å£è·å–é›†ç¾¤çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¦‚ namespaceï¼Œpodsï¼Œcontainers ç­‰&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftza2qbic1CqZm3icSicwqGdQnlEh3tsbyKjicmgeh1jVibjb2gibHLaHDYI4Q/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;ä¹‹åå†é€šè¿‡&lt;/p&gt;&#xA;&lt;p&gt;curl -k &lt;a href=&#34;https://Kubernetes-node-ip:10250/run///&#34;&gt;https://Kubernetes-node-ip:10250/run///&lt;/a&gt; -d â€œcmd=idâ€ çš„æ–¹å¼åœ¨ä»»æ„å®¹å™¨é‡Œæ‰§è¡Œå‘½ä»¤&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftzyicibzfCRmZZVmRdbO0Aibn7LI4132GPk73g7pwkqepME7ekBaZEw7tQ/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;æ­¤æ—¶ï¼Œé€‰æ‹©æˆ‘ä»¬æ‰€æœ‰æ§åˆ¶çš„å®¹å™¨å¿«é€Ÿè¿‡æ»¤å‡ºé«˜æƒé™å¯é€ƒé€¸çš„å®¹å™¨å°±å¾ˆé‡è¦ï¼Œåœ¨ä¸Šè¿° /pods API ä¸­å¯ä»¥è·å–åˆ°æ¯ä¸ª POD çš„é…ç½®ï¼ŒåŒ…æ‹¬äº† host*ã€securityContextã€volumes ç­‰é…ç½®ï¼Œå¯ä»¥æ ¹æ®å®¹å™¨é€ƒé€¸çŸ¥è¯†å¿«é€Ÿè¿‡æ»¤å‡ºç›¸åº”çš„ POD è¿›è¡Œæ§åˆ¶ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSfttdDKiaAdhbeGWsnJzJibwcbfDOwFibRibvylp5hobyicibzG028FENiaF8rbw/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;ç”±äºè¿™é‡Œ 10250 é‰´æƒå½“å‰çš„ Kubernetes è®¾è®¡æ˜¯é»˜è®¤å®‰å…¨çš„ï¼Œæ‰€ä»¥ 10255 çš„å¼€æ”¾å°±å¯èƒ½æ›´åŠ å®¹æ˜“åœ¨çº¢è“å¯¹æŠ—ä¸­èµ·åˆ°è‡³å…³é‡è¦çš„ä½œç”¨ã€‚10255 æœ¬èº«ä¸ºåªè¯»ç«¯å£ï¼Œè™½ç„¶å¼€æ”¾ä¹‹åé»˜è®¤ä¸å­˜åœ¨é‰´æƒèƒ½åŠ›ï¼Œæ— æ³•ç›´æ¥åˆ©ç”¨åœ¨å®¹å™¨ä¸­æ‰§è¡Œå‘½ä»¤ï¼Œä½†æ˜¯å¯ä»¥è·å–ç¯å¢ƒå˜é‡ ENVã€ä¸»è¿›ç¨‹ CMDLINE ç­‰ä¿¡æ¯ï¼Œé‡Œé¢åŒ…å«å¯†ç å’Œç§˜é’¥ç­‰æ•æ„Ÿä¿¡æ¯çš„æ¦‚ç‡æ˜¯å¾ˆé«˜çš„ï¼Œå¯ä»¥å¿«é€Ÿå¸®æˆ‘ä»¬åœ¨å¯¹æŠ—ä¸­æ‰“å¼€å±€é¢ã€‚&lt;/p&gt;&#xA;&lt;h3&gt;7.4. dashboard&lt;/h3&gt;&#xA;&lt;p&gt;dashboard æ˜¯ Kubernetes å®˜æ–¹æ¨å‡ºçš„æ§åˆ¶ Kubernetes çš„å›¾å½¢åŒ–ç•Œé¢ï¼Œåœ¨ Kubernetes é…ç½®ä¸å½“å¯¼è‡´ dashboard æœªæˆæƒè®¿é—®æ¼æ´çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡ dashboard æˆ‘ä»¬å¯ä»¥æ§åˆ¶æ•´ä¸ªé›†ç¾¤ã€‚&lt;/p&gt;&#xA;&lt;p&gt;åœ¨ dashboard ä¸­é»˜è®¤æ˜¯å­˜åœ¨é‰´æƒæœºåˆ¶çš„ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ kubeconfig æˆ–è€… Token ä¸¤ç§æ–¹å¼ç™»å½•ï¼Œå½“ç”¨æˆ·å¼€å¯äº† enable-skip-login æ—¶å¯ä»¥åœ¨ç™»å½•ç•Œé¢ç‚¹å‡» Skip è·³è¿‡ç™»å½•è¿›å…¥ dashboard&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftxutjWrROJS2HetWnJL1wzjMU355bCb7KjSBfu9yCxeVjiaKoKjh2rlw/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;ç„¶è€Œé€šè¿‡ç‚¹å‡» Skip è¿›å…¥ dashboard é»˜è®¤æ˜¯æ²¡æœ‰æ“ä½œé›†ç¾¤çš„æƒé™çš„ï¼Œå› ä¸º Kubernetes ä½¿ç”¨ RBAC(Role-based access control) æœºåˆ¶è¿›è¡Œèº«ä»½è®¤è¯å’Œæƒé™ç®¡ç†ï¼Œä¸åŒçš„ serviceaccount æ‹¥æœ‰ä¸åŒçš„é›†ç¾¤æƒé™ã€‚&lt;/p&gt;&#xA;&lt;p&gt;æˆ‘ä»¬ç‚¹å‡» Skip è¿›å…¥ dashboard å®é™…ä¸Šä½¿ç”¨çš„æ˜¯ Kubernetes-dashboard è¿™ä¸ª ServiceAccountï¼Œå¦‚æœæ­¤æ—¶è¯¥ ServiceAccount æ²¡æœ‰é…ç½®ç‰¹æ®Šçš„æƒé™ï¼Œæ˜¯é»˜è®¤æ²¡æœ‰åŠæ³•è¾¾åˆ°æ§åˆ¶é›†ç¾¤ä»»æ„åŠŸèƒ½çš„ç¨‹åº¦çš„ã€‚&lt;/p&gt;&#xA;&lt;p&gt;ä½†æœ‰äº›å¼€å‘è€…ä¸ºäº†æ–¹ä¾¿æˆ–è€…åœ¨æµ‹è¯•ç¯å¢ƒä¸­ä¼šä¸º Kubernetes-dashboard ç»‘å®š cluster-admin è¿™ä¸ª ClusterRoleï¼ˆcluster-admin æ‹¥æœ‰ç®¡ç†é›†ç¾¤çš„æœ€é«˜æƒé™ï¼‰ã€‚&lt;/p&gt;&#xA;&lt;p&gt;è¿™ä¸ªæå…·å®‰å…¨é£é™©çš„è®¾ç½®ï¼Œå…·ä½“å¦‚ä¸‹ï¼š&lt;/p&gt;&#xA;&lt;ol&gt; &#xA; &lt;li&gt;æ–°å»º dashboard-admin.yaml å†…å®¹å¦‚ä¸‹ï¼ˆè¯¥é…ç½®ä¹Ÿç±»ä¼¼äº â€œåˆ©ç”¨å¤§æƒé™çš„ Service Accountâ€ ä¸€å°èŠ‚çš„é…ç½® ï¼‰&lt;/li&gt; &#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSfticH5NXjL1A5BAceJmkqQHSHL0NcKWevHlFricISGwLaIQiayeuU0RebIQ/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;ol start=&#34;2&#34;&gt; &#xA; &lt;li&gt;æ‰§è¡Œ kubectl create -f dashboard-admin.yaml&lt;/li&gt; &#xA;&lt;/ol&gt;&#xA;&lt;p&gt;æ­¤æ—¶ç”¨æˆ·é€šè¿‡ç‚¹å‡» Skip è¿›å…¥ dashboard å³å¯æ‹¥æœ‰ç®¡ç†é›†ç¾¤çš„æƒé™äº†ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftYmIEUwGXaNtDvxLrYmbMgYp470KFrZEugWXdTdBeVY2dLKVHRFayOQ/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;è¿›å…¥åˆ° dashboard æˆ‘ä»¬å¯ä»¥ç®¡ç† Podsã€CronJobs ç­‰ï¼Œè¿™é‡Œä»‹ç»ä¸‹æˆ‘ä»¬å¦‚ä½•é€šè¿‡åˆ›å»º Pod æ§åˆ¶ node èŠ‚ç‚¹ã€‚&lt;/p&gt;&#xA;&lt;p&gt;æˆ‘ä»¬æ–°å»ºä¸€ä¸ªä»¥ä¸‹é…ç½®çš„ Podï¼Œè¯¥ pod ä¸»è¦æ˜¯å°†å®¿ä¸»æœºæ ¹ç›®å½•æŒ‚è½½åˆ°å®¹å™¨ tmp ç›®å½•ä¸‹ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftXETcKPkAS5r8rm1ZoyACLWGx74PftXkJSs0zBA0unAYMPT9E7bgWBQ/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;ä¹‹åæˆ‘ä»¬ä¾¿å¯ä»¥é€šè¿‡è¯¥å®¹å™¨çš„ tmp ç›®å½•ç®¡ç† node èŠ‚ç‚¹çš„æ–‡ä»¶ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftwota0l4oVnG2gI2D4mS6TlQaaljFHgTcwZ84ujRBibh5OdP5Jz4fzkA/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftOne3a77LTdFNhia8tudS6uo4eXP8wwL83KLGK41ibx4h04fOandVQ0bg/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä¸ºäº†é›†ç¾¤çš„ç¨³å®šæ€§å’Œå®‰å…¨æ€§è¦æ±‚ï¼Œåœ¨ Kubernetes é»˜è®¤è®¾è®¡çš„æƒ…å†µä¸‹ Pod æ˜¯ä¸èƒ½è°ƒåº¦åˆ° master èŠ‚ç‚¹çš„ï¼Œä½†å¦‚æœç”¨æˆ·è‡ªè¡Œè®¾ç½®å…³é—­äº† Master Only çŠ¶æ€ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ master èŠ‚ç‚¹æ–°å»º Pod æ›´ç›´æ¥çš„æ§åˆ¶ master nodeï¼›ä¸è¿‡ç›®å‰å„å¤§ä¸»æµäº‘äº§å•†ä¸Šçš„ Kubernetes é›†ç¾¤æœåŠ¡ï¼Œéƒ½ä¼šé»˜è®¤æ¨èè®© Master èŠ‚ç‚¹ç”±äº‘å‚å•†æ‰˜ç®¡ï¼Œæ›´åŠ åŠ å‰§äº† Master èŠ‚ç‚¹æ¸—é€å’Œæ§åˆ¶çš„éš¾åº¦ ã€‚&lt;/p&gt;&#xA;&lt;h3&gt;7.5. etcd&lt;/h3&gt;&#xA;&lt;p&gt;etcd è¢«å¹¿æ³›ç”¨äºå­˜å‚¨åˆ†å¸ƒå¼ç³»ç»Ÿæˆ–æœºå™¨é›†ç¾¤æ•°æ®ï¼Œå…¶é»˜è®¤ç›‘å¬äº† 2379 ç­‰ç«¯å£ï¼Œå¦‚æœ 2379 ç«¯å£æš´éœ²åˆ°å…¬ç½‘ï¼Œå¯èƒ½é€ æˆæ•æ„Ÿä¿¡æ¯æ³„éœ²ï¼Œæœ¬æ–‡æˆ‘ä»¬ä¸»è¦è®¨è®º Kubernetes ç”±äºé…ç½®é”™è¯¯å¯¼è‡´ etcd æœªæˆæƒè®¿é—®çš„æƒ…å†µã€‚Kubernetes é»˜è®¤ä½¿ç”¨äº† etcd v3 æ¥å­˜å‚¨æ•°æ®ï¼Œå¦‚æœæˆ‘ä»¬èƒ½å¤Ÿæ§åˆ¶ Kubernetes etcd æœåŠ¡ï¼Œä¹Ÿå°±æ‹¥æœ‰äº†æ•´ä¸ªé›†ç¾¤çš„æ§åˆ¶æƒã€‚&lt;/p&gt;&#xA;&lt;p&gt;åœ¨ Kubernetes ä¸­ç”¨æˆ·å¯ä»¥é€šè¿‡é…ç½® / etc/Kubernetes/manifests/etcd.yaml æ›´æ”¹ etcd pod ç›¸å…³çš„é…ç½®ï¼Œå€˜è‹¥ç®¡ç†å‘˜é€šè¿‡ä¿®æ”¹é…ç½®å°† etcd ç›‘å¬çš„ host ä¿®æ”¹ä¸º 0.0.0.0ï¼Œåˆ™é€šè¿‡ ectd è·å– Kubernetes çš„è®¤è¯é‰´æƒ token ç”¨äºæ§åˆ¶é›†ç¾¤å°±æ˜¯è‡ªç„¶è€Œç„¶çš„æ€è·¯äº†ï¼Œæ–¹å¼å¦‚ä¸‹ï¼š&lt;/p&gt;&#xA;&lt;p&gt;é¦–å…ˆè¯»å–ç”¨äºè®¿é—® apiserver çš„ token&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSft9L0VJiaVHwkv7NYMms1GE6x8atYPbJGn3GjMLP8GyoVuialJY8boeg1g/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftSKBkEC7icKASMRq3ccycnKCSaWyEAoK3ib2Q2WDHXDpgGZGcSoicv6wuQ/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;åˆ©ç”¨ token æˆ‘ä»¬å¯ä»¥é€šè¿‡ apiserver ç«¯å£ 6443 æ§åˆ¶é›†ç¾¤ï¼š&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftLhA7tToh4wYcXDpeico3iaTgcaiaQdiaiajQF2jw0aXc6iaDrGdEb0ibB1epA/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;h3&gt;7.6. docker remote api&lt;/h3&gt;&#xA;&lt;p&gt;Docker Engine API æ˜¯ Docker æä¾›çš„åŸºäº HTTP åè®®çš„ç”¨äº Docker å®¢æˆ·ç«¯ä¸ Docker å®ˆæŠ¤è¿›ç¨‹äº¤äº’çš„ APIï¼ŒDocker daemon æ¥æ”¶æ¥è‡ª Docker Engine API çš„è¯·æ±‚å¹¶å¤„ç†ï¼ŒDocker daemon é»˜è®¤ç›‘å¬ 2375 ç«¯å£ä¸”æœªé‰´æƒï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ API æ¥å®Œæˆ Docker å®¢æˆ·ç«¯èƒ½åšçš„æ‰€æœ‰äº‹æƒ…ã€‚&lt;/p&gt;&#xA;&lt;p&gt;Docker daemon æ”¯æŒä¸‰ç§ä¸åŒç±»å‹çš„ socket: unix, tcp, fdã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒDocker daemon ç›‘å¬åœ¨ unix:///var/run/docker.sockï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼æ‰“å¼€ tcp socketï¼Œæ¯”å¦‚ä¿®æ”¹ Docker é…ç½®æ–‡ä»¶å¦‚ / usr/lib/systemd/system/docker.serviceï¼š&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSft5rRHUuRvfdbtVIQT9KvN9jN6fuMMR6DEqkOmQq5Qk7eZjTDAYBFQ7g/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;ä¹‹åä¾æ¬¡æ‰§è¡Œ systemctl daemon-reloadã€systemctl restart docker ä¾¿å¯ä»¥ä½¿ç”¨ docker -H tcp://[HOST]:2375 è¿™ç§æ–¹å¼æ§åˆ¶ç›®æ ‡ docker&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftFYmmUrU7CwrIjs8FWGmjVppvdeq1LsdgFuUDQKsWHUX5zic4rgEwDdQ/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftMyam51E9TJW5XdHt0BR9pfGsRhuITsxFcSqFuR5vjgJDqq31naglFw/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;å› æ­¤å½“ä½ æœ‰è®¿é—®åˆ°ç›®æ ‡ Docker API çš„ç½‘ç»œèƒ½åŠ›æˆ–ä¸»æœºèƒ½åŠ›çš„æ—¶å€™ï¼Œä½ å°±æ‹¥æœ‰äº†æ§åˆ¶å½“å‰æœåŠ¡å™¨çš„èƒ½åŠ›ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ Docker API åœ¨è¿œç¨‹ä¸»æœºä¸Šåˆ›å»ºä¸€ä¸ªç‰¹æƒå®¹å™¨ï¼Œå¹¶ä¸”æŒ‚è½½ä¸»æœºæ ¹ç›®å½•åˆ°å®¹å™¨ï¼Œå¯¹ä¸»æœºè¿›è¡Œè¿›ä¸€æ­¥çš„æ¸—é€ï¼Œæ›´å¤šåˆ©ç”¨æ–¹æ³•å‚è€ƒå®¹å™¨é€ƒé€¸ç« èŠ‚ã€‚&lt;/p&gt;&#xA;&lt;p&gt;æ£€æµ‹ç›®æ ‡æ˜¯å¦å­˜åœ¨ docker api æœªæˆæƒè®¿é—®æ¼æ´çš„æ–¹å¼ä¹Ÿå¾ˆç®€å•ï¼Œè®¿é—® http://[host]:[port]/info è·¯å¾„æ˜¯å¦å«æœ‰ ContainersRunningã€DockerRootDir ç­‰å…³é”®å­—ã€‚&lt;/p&gt;&#xA;&lt;h3&gt;7.7. kubectl proxy&lt;/h3&gt;&#xA;&lt;p&gt;kubectl proxy è¿™ä¸ªå­å‘½ä»¤å¤§å®¶å¯èƒ½é‡åˆ°æ¯”è¾ƒå°‘ï¼Œè¿™é‡Œå•ç‹¬ä»‹ç»ä¸€ä¸‹ï¼›ç”±äºä¸Šè¿°å‡ ä¸ªç»„ä»¶çš„å®‰å…¨é—®é¢˜è¾ƒä¸ºå¸¸è§å’Œå‡ºåï¼Œä¸”åœ¨ç›®å‰å¼€æºåˆ†æ”¯é‡Œå®ƒä»¬åœ¨é‰´æƒè¿™ä¸ªæ–¹é¢éƒ½æ˜¯é»˜è®¤å®‰å…¨çš„ï¼Œæ‰€ä»¥ç›´æ¥å‡ºç°é—®é¢˜çš„å¯èƒ½æ€§è¾ƒå°ï¼Œä¼ä¸šåœ¨å†…å¤–ç½‘ä¹Ÿéƒ½æ”¶æ•›å¾—ä¸é”™ï¼›æ­¤æ—¶ kubectl proxy è¿™ä¸ªå­å‘½ä»¤åè€Œæ˜¯å¦ä¸€ä¸ªå¸¸è§ä¸”è •è™«åˆ©ç”¨èµ·æ¥éå¸¸ç®€å•ç²—æš´çš„é—®é¢˜ã€‚&lt;/p&gt;&#xA;&lt;p&gt;äº†è§£ä½¿ç”¨è¿‡ Kubernetes çš„åŒå­¦åº”è¯¥çŸ¥é“ï¼Œå¦‚æœä½ åœ¨é›†ç¾¤çš„ POD ä¸Šå¼€æ”¾ä¸€ä¸ªç«¯å£å¹¶ç”¨ ClusterIP Service ç»‘å®šåˆ›å»ºä¸€ä¸ªå†…éƒ¨æœåŠ¡ï¼Œå¦‚æœæ²¡æœ‰å¼€æ”¾ NodePort æˆ– LoadBalancer ç­‰ Service çš„è¯ï¼Œä½ æ˜¯æ— æ³•åœ¨é›†ç¾¤å¤–ç½‘è®¿é—®è¿™ä¸ªæœåŠ¡çš„ï¼ˆé™¤éä¿®æ”¹äº† CNI æ’ä»¶ç­‰ï¼‰ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftTo2SWAYNZmQYibibfOa1ur0j4rV4vfytPaVS9yx1C03Sc4xPulcibyG5A/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;å¦‚æœæƒ³ä¸´æ—¶åœ¨æœ¬åœ°å’Œå¤–ç½‘è°ƒè¯•çš„è¯ï¼Œkubectl proxy ä¼¼ä¹æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftMCKwyeAcnN0P2vs5POWIRoAzSCsicLWRiaFaWhOOFI3YkZdCVFwltISA/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;ä½†å…¶å® kubectl proxy è½¬å‘çš„æ˜¯ apiserver æ‰€æœ‰çš„èƒ½åŠ›ï¼Œè€Œä¸”æ˜¯é»˜è®¤ä¸é‰´æƒçš„ï¼Œæ‰€ä»¥ --address=0.0.0.0 å°±æ˜¯æå…¶å±é™©çš„äº†ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSft3OEqmTq1QzrDCBqE9UibQn3hiboicicYHCaMbn3dAjDdJxrt4QHibAqZV9w/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;æ‰€ä»¥è¿™é‡Œçš„åˆ©ç”¨å’Œå±å®³å’Œ APIServer çš„å°èŠ‚æ˜¯ç›¸ä¼¼çš„ã€‚&lt;/p&gt;&#xA;&lt;h2&gt;8. å®¹å™¨é•œåƒå®‰å…¨é—®é¢˜&lt;/h2&gt;&#xA;&lt;p&gt;å®¹å™¨é•œåƒçš„å®‰å…¨æ‰«æèƒ½åŠ›æ˜¯å¾ˆå¤šä¹™æ–¹å•†ä¸šäº§å“å’Œç”²æ–¹å®‰å…¨ç³»ç»Ÿé¦–å…ˆä¼šæ¨è¿›çš„å®¹å™¨å®‰å…¨å»ºè®¾æ–¹å‘ã€‚ä¸åƒå®¹å™¨è¿è¡Œæ—¶å®‰å…¨ç›‘æ§éœ€è¦è¾ƒé«˜çš„æˆæœ¬ã€ç¨³å®šæ€§è¦æ±‚å’ŒæŠ€æœ¯ç§¯ç´¯ï¼Œä¹Ÿæœ‰ä¸šç•Œç›¸å¯¹æˆç†Ÿçš„å¼€æºæ–¹æ¡ˆã€‚&lt;/p&gt;&#xA;&lt;p&gt;å®¹å™¨é•œåƒæ˜¯å®¹å™¨å®‰å…¨éå¸¸å…³é”®ä¸”é‡è¦çš„ä¸€ç¯ï¼Œå½“è·å–åˆ°èŠ‚ç‚¹æƒé™æˆ–ç®¡ç†å‘˜ PC æƒé™æ—¶ï¼Œ~/.docker/config.json æ–‡ä»¶å†…å°±å¯èƒ½å­˜æœ‰é•œåƒä»“åº“è´¦å·å’Œå¯†ç ä¿¡æ¯ï¼Œç”¨æˆ·åå’Œå¯†ç åªç”¨ Base64 ç¼–ç äº†ä¸€ä¸‹ï¼Œå¯¹äºå®‰å…¨äººå‘˜æ¥è¯´å’Œæ²¡æœ‰æ˜¯ä¸€æ ·çš„ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftblRJtmc8ibDkyGhiay04AvRp9kpUbP0urpobAKnXXbcAhGqfDq0YKH0g/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;å¾ˆå¤š POD å’Œçº¿ä¸Šå®¹å™¨åœ¨ä½¿ç”¨é•œåƒæ—¶ï¼Œå¯èƒ½ç”¨ latest æˆ–é»˜è®¤æ²¡æœ‰æŒ‡å®šç‰ˆæœ¬ï¼Œæ‰€ä»¥åŠ«æŒé•œåƒæºä¹‹ååªè¦åœ¨åŸæœ¬çš„ latest ä¹‹ä¸Šæ¤å…¥æ¶æ„ä»£ç å¹¶ push æ–°çš„ç‰ˆæœ¬é•œåƒï¼Œå°±å¯ä»¥åœ¨è·å–é•œåƒæƒé™ä¹‹åè¿›è€Œè·å–çº¿ä¸Šçš„å®¹å™¨æƒé™ã€‚&lt;/p&gt;&#xA;&lt;p&gt;ä¸ä»…åœ¨å®‰å…¨æ”»é˜²é¢†åŸŸï¼Œä½œä¸ºä¸€ä¸ªé•¿æœŸä¾èµ–å®¹å™¨æŠ€æœ¯çš„åŠåŠå­å¼€å‘è€…ï¼Œæˆ‘ä¹Ÿä¸å»ºè®®ç”¨ latest é•œåƒæ ‡ç­¾ä½œä¸ºçº¿ä¸Šç¯å¢ƒçš„é•¿æœŸæ–¹æ¡ˆï¼›ä»ç ”å‘è¿ç»´è§’åº¦çš„æœ€ä½³å®è·µæ¥çœ‹ï¼Œä½¿ç”¨ç‰¹å®šç‰ˆæœ¬çš„ TAG ä¸”å¯ä»¥å’Œä»£ç ç‰ˆæœ¬æ§åˆ¶ç›¸å¯¹åº”æ˜¯æ¯”è¾ƒæ¨èçš„æ–¹æ¡ˆï¼Œåº”è¯¥ä¿éšœæ¯ä¸ªé•œåƒéƒ½æ˜¯å¯è¿½è¸ªæº¯æºçš„ã€‚&lt;/p&gt;&#xA;&lt;p&gt;æ¯”è¾ƒæœ‰è¶£çš„æ˜¯ï¼Œæˆ‘ä»¬æ›¾ç»é‡åˆ°ä¼ä¸šåœ¨åŸºç¡€å®¹å™¨é•œåƒé‡Œæ‰“å…¥ sshd å¹¶ä¸”åœ¨ init.sh ä¸»ç¨‹åºä¸­å¯åŠ¨ sshd ç¨‹åºï¼ˆæ— è®ºæ˜¯å®‰å…¨è¿˜æ˜¯å®¹å™¨æ¶æ„æœ€ä½³å®è·µéƒ½æ˜¯ä¸å»ºè®®çš„ï¼‰ï¼Œå¯¼è‡´æ‰€æœ‰ Kubernetes é›†ç¾¤é‡Œçš„å®¹å™¨éƒ½ä¼šå¼€æ”¾ 22 ç«¯å£å¹¶ä¸”æ‹¥æœ‰ä¸€æ ·çš„ / etc/shadow æ–‡ä»¶å’Œ / root/.ssh/authorized_keysã€‚è¿™å°±ä»£è¡¨æ‰€æœ‰çš„å®¹å™¨éƒ½å¯ä»¥ä½¿ç”¨ä¸€ä¸ªé€šç”¨å¯†ç å’Œ ssh è¯ä¹¦å»ç™»å½•ã€‚å› æ­¤åœ¨é€ƒé€¸è·å–å®¹å™¨çš„å®¿ä¸»æœºæƒé™åï¼Œåˆ†æå®¹å™¨åŸºç¡€é•œåƒçš„é€šç”¨å®‰å…¨é—®é¢˜ç¡®å®å¯ä»¥å¾ˆå¿«æ‰©å¤§å½±å“é¢ã€‚&lt;/p&gt;&#xA;&lt;h2&gt;9. äºŒæ¬¡å¼€å‘æ‰€äº§ç”Ÿçš„å®‰å…¨é—®é¢˜&lt;/h2&gt;&#xA;&lt;h3&gt;9.1. å¯¹ Kubernetes API çš„è¯·æ±‚è½¬å‘æˆ–æ‹¼æ¥&lt;/h3&gt;&#xA;&lt;p&gt;ç†Ÿæ‚‰ Kubernetes æ¶æ„çš„åŒå­¦å¯èƒ½çŸ¥é“ï¼Œç®¡ç†å‘˜ç®¡ç† Kubernetes æ— è®ºæ˜¯ä½¿ç”¨ kubectl æˆ– Kubernetes dashboard çš„ UI åŠŸèƒ½ï¼Œå…¶å®éƒ½æ˜¯é—´æ¥åœ¨å’Œ APIServer åšäº¤äº’ã€‚&lt;/p&gt;&#xA;&lt;p&gt;å‚è€ƒå®˜æ–¹çš„æ¶æ„å›¾ï¼š&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftE9uEUhww0LFR8Tbs7YDicEddrKdZnGEVVqa495YOsUzGODrvj29sVsg/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;é‚£ä¹ˆå¦‚æœéœ€æ±‚éœ€è¦åœ¨ Kubernetes åŸæœ¬çš„èƒ½åŠ›ä¸Šåšå¼€å‘çš„è¯ï¼Œå¾ˆæœ‰å¯èƒ½äº§å“åç«¯å°±æ˜¯è¯·æ±‚äº† APIServer çš„ Rest API å®ç°çš„ã€‚&lt;/p&gt;&#xA;&lt;p&gt;æ”»å‡»è€…ç ´åç¨‹åºåŸæœ¬æƒ³å¯¹ APIServer æ‰€è¡¨è¾¾çš„è¯­ä¹‰ï¼Œæ³¨å…¥æˆ–ä¿®æ”¹ Rest API è¯·æ±‚é‡Œæ‰€è¦è¡¨è¾¾çš„ä¿¡æ¯ï¼Œå°±å¯ä»¥è¾¾åˆ°æ„æƒ³ä¸åˆ°çš„æ•ˆæœã€‚&lt;/p&gt;&#xA;&lt;p&gt;ä¾‹å¦‚ä¸‹é¢çš„ä»£ç ï¼Œç”¨æˆ·ä¼ å…¥ namespaceã€pod å’Œå®¹å™¨åå³å¯è·å–ç›¸åº”å®¹å™¨çš„æ—¥å¿—ï¼š&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftljXMiblpicwPTFm2fiaicCwpxO9s7kz24VWeubW8INcGcu7fHOVjibu2n0Q/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;ç›¸ä¼¼çš„éœ€æ±‚å’Œ API è¿˜æœ‰ä¾‹å¦‚ï¼š&lt;/p&gt;&#xA;&lt;ol&gt; &#xA; &lt;li&gt;åˆ°ç”¨æˆ·è‡ªå·±çš„å®¹å™¨å†…åˆ›å»ºä¸€ä¸ª web console ä¾›ç”¨æˆ·è¿›è¡Œè¿œç¨‹è°ƒè¯•, POST https:/apiserver:&lt;/li&gt; &#xA;&lt;/ol&gt;&#xA;&lt;p&gt;8443/api/v1/namespaces/default/pods/nginx/exec?command=bash&amp;amp;container=nginx&amp;amp;stdin=true&amp;amp;stdout=true&amp;amp;tty=true&lt;/p&gt;&#xA;&lt;ol start=&#34;2&#34;&gt; &#xA; &lt;li&gt;ç»™ç”¨æˆ·é”€æ¯è‡ªå·± POD çš„èƒ½åŠ›ï¼Œ DELETE &lt;a href=&#34;https://apiserver&#34;&gt;https://apiserver&lt;/a&gt;:&lt;/li&gt; &#xA;&lt;/ol&gt;&#xA;&lt;p&gt;8443/api/v1/namespaces/default/pods/sleep-75c6fd99c-g5kss&lt;/p&gt;&#xA;&lt;p&gt;è¿™ç±»å‹çš„éœ€æ±‚åœ¨å¤šç§Ÿæˆ·çš„é›†ç¾¤è®¾è®¡é‡Œæ¯”è¾ƒå¸¸è§ã€‚æ¸—é€æµ‹è¯•é€‰æ‰‹çœ‹åˆ°è¿™æ ·çš„ä»£ç æˆ– APIï¼Œé¦–å…ˆæƒ³åˆ°çš„å°±æ˜¯è¶Šæƒï¼ŒæŠŠ namespaceã€pod å’Œå®¹å™¨åä¿®æ”¹ä¸ºä»–äººçš„ï¼Œå°±å¯ä»¥è®©äºŒæ¬¡å¼€å‘çš„ä»£ç å»åˆ é™¤å…¶ä»–ç”¨æˆ·çš„ PODã€è¿›å…¥å…¶ä»–ç”¨æˆ·çš„å®¹å™¨é‡Œæ‰§è¡Œå‘½ä»¤ã€è·å–å…¶å®ƒ POD çš„æ—¥å¿—ç­‰ã€‚&lt;/p&gt;&#xA;&lt;p&gt;é™¤äº†ä¸Šè¿°çš„åŠŸèƒ½ç‚¹ï¼Œè¿™é‡Œæ¯”è¾ƒå®¹æ˜“å‡ºé—®é¢˜ä¸”å½±å“è¾ƒå¤§çš„åŠŸèƒ½å’Œä¸šåŠ¡é€»è¾‘æ˜¯å¤šç§Ÿæˆ·é›†ç¾¤å¹³å°çš„è‡ªç ” Web Console åŠŸèƒ½ï¼ŒWeb Console çš„è¶Šæƒé—®é¢˜å¯ä»¥ç›´æ¥å¯¼è‡´ä»»æ„å®¹å™¨ç™»å½•å’Œè¿œç¨‹æ§åˆ¶ï¼Œä¹Ÿæ˜¯éå¸¸å€¼å¾—å…³æ³¨çš„ä¸€ä¸ªç‚¹ã€‚&lt;/p&gt;&#xA;&lt;p&gt;å…¶å®æˆ‘ä»¬ç”šè‡³å¯ä»¥ä¿®æ”¹è·å–æ—¥å¿—ã€åˆ é™¤ PODã€æ‰§è¡Œå‘½ä»¤çš„ Rest API è¯­ä¹‰ï¼š&lt;/p&gt;&#xA;&lt;p&gt;ä¾‹å¦‚åœ¨ä¸Šè¿° namespace å‘½åç©ºé—´å¤„æ’å…¥ â€œdefault/configmaps/istio-ca-root-cert?ingore=â€ï¼Œ&lt;/p&gt;&#xA;&lt;p&gt;åŸæœ¬è¯·æ±‚çš„&lt;/p&gt;&#xA;&lt;p&gt;&#34;&lt;a href=&#34;https://apiserver:6443/api/v1/namespaces/istio-dev/pods/service-account-simple/lo&#34;&gt;https://apiserver:6443/api/v1/namespaces/istio-dev/pods/service-account-simple/lo&lt;/a&gt; g?container=test-container&#34;&amp;nbsp;&lt;/p&gt;&#xA;&lt;p&gt;å°±ä¼šè½¬å˜ä¸º&lt;/p&gt;&#xA;&lt;p&gt;&#34;&lt;a href=&#34;https://apiserver:6443/api/v1/namespaces/default/configmaps/istio-ca-root-cert?ingore=/pods/service-account-simple/lo&#34;&gt;https://apiserver:6443/api/v1/namespaces/default/configmaps/istio-ca-root-cert?ingore=/pods/service-account-simple/lo&lt;/a&gt; g?container=test-container&#34;ï¼Œ&lt;/p&gt;&#xA;&lt;p&gt;å®é™…å°±æ˜¯è¯·æ±‚äº†&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://apiserver:6443/api/v1/namespaces/default/configmaps/istio-ca-root-cert%EF%BC%8C%E4%BB%8E%E8%8E%B7%E5%8F%96%E6%97%A5%E5%BF%97%E8%BD%AC%E5%8F%98%E4%BA%86%E4%B8%BA%E8%8E%B7%E5%8F%96&#34;&gt;https://apiserver:6443/api/v1/namespaces/default/configmaps/istio-ca-root-certï¼Œä»è·å–æ—¥å¿—è½¬å˜äº†ä¸ºè·å–&lt;/a&gt; configmapã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftO66YjDQMVGFz5zhTJLiaNA9ySASneO662ARGOsDp7sm4rYkib4E1MyAQ/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;h2&gt;10. Serverless&lt;/h2&gt;&#xA;&lt;p&gt;Serverless è¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒå¤§æ¼æ´æŒ–æ˜çš„æ–¹å‘æ˜¯èµ„æºå ç”¨ï¼Œä¾‹å¦‚é©»ç•™è¿›ç¨‹ï¼Œé©»ç•™æ–‡ä»¶ï¼Œè¿›ç¨‹å·è·‘ï¼Œå¥æŸ„è€—å°½ç­‰æ¡ä»¶ç«äº‰æ¼æ´ï¼Œç”¨äºå½±å“å¤šç§Ÿæˆ·é›†ç¾¤ï¼Œå ç”¨è®¡ç®—èµ„æºç­‰ã€‚æˆ‘ä»¬ä¹‹å‰ä¹Ÿç ”ç©¶è¿‡ç›¸å…³çš„å®‰å…¨æ¼æ´å’Œåˆ©ç”¨æ–¹æ³•ï¼Œä½†å› ä¸ºå’Œä¼ ç»Ÿçš„é»‘å®¢æ”»é˜²å¯¹æŠ—ç›¸å…³æ€§è¾ƒå°‘ï¼Œæ­¤å¤„æš‚ä¸”ä¸è¡¨ã€‚&lt;/p&gt;&#xA;&lt;p&gt;è¿™é‡Œåªæè¿°é‚£äº›ç¡®å®æˆä¸ºå®‰å…¨æ¼”ä¹ å…³é”®è·¯å¾„ä¸€ç¯çš„æ¼æ´ã€‚&lt;/p&gt;&#xA;&lt;h2&gt;10.1. æ–‡ä»¶é©»ç•™å¯¼è‡´å‘½ä»¤æ‰§è¡Œ&lt;/h2&gt;&#xA;&lt;p&gt;æœ‰äº› Serverless å®ç°åœ¨åº”ç”¨ç¨‹åºç”Ÿå‘½å‘¨æœŸç»“æŸä¹‹åï¼Œç¨‹åºæ–‡ä»¶çš„æ¸…ç†ä¸Šè¿›å…¥äº†åƒµå±€ã€‚ä¸€æ–¹é¢å¼€å‘è€…å¸Œæœ›å€ŸåŠ©å®¹å™¨ â€œå¯¹ Linux Cgroup å’Œ Namespace è¿›è¡Œç®¡ç†çš„ç‰¹æ€§â€ ç”¨äºå®ç°é™åˆ¶åº”ç”¨çš„èµ„æºè®¿é—®èƒ½åŠ›å’Œè¿›ç¨‹æƒé™çš„éœ€æ±‚ï¼›åœ¨æ­¤ä¹‹ä¸Šï¼Œå¼€å‘è€…å¸Œæœ›èƒ½æ›´å¿«çš„è¾¾åˆ°ç”¨æˆ·æ–‡ä»¶æ¸…ç†çš„ç›®çš„ï¼Œé¿å…åå¤åˆå§‹åŒ–å®¹å™¨ç¯å¢ƒå¸¦æ¥çš„æ—¶é—´å’Œèµ„æºä¸Šçš„æ¶ˆè€—ï¼Œå¤ç”¨åŒä¸€ä¸ªå®¹å™¨ç¯å¢ƒã€‚&lt;/p&gt;&#xA;&lt;p&gt;è€Œåœ¨è“å†›çš„è§†è§’é‡Œï¼Œè¿™æ ·çš„å¤„ç†æ–¹å¼ä¼šå¯¼è‡´å¤šä¸ªç”¨æˆ·çš„åº”ç”¨ä¼šå­˜åœ¨å¤šä¸ªç”¨æˆ·åœ¨ä¸åŒæ—¶é—´æ®µä½¿ç”¨ä¸€ä¸ªå®¹å™¨ç¯å¢ƒçš„æƒ…å†µï¼Œåœ¨å®‰å…¨æ€§ä¸Šæ˜¯æ¯”è¾ƒéš¾å¾—åˆ°ä¿éšœçš„ã€‚&lt;/p&gt;&#xA;&lt;p&gt;ä»¥é¢å‘ Python å¼€å‘è€…çš„ Serverless æ¶æ„ä¸ºä¾‹ï¼Œå¼€å‘è€…æ‰€æ„æƒ³çš„ç®€åŒ–æ¨¡å‹æ˜¯è¿™æ ·çš„ï¼š&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftrDqh6Mv2jkjXAsnotwCywtqGaNCDdHt7PavrjRInTzUVOY9eUwhdUg/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;ç”¨æˆ·æ–‡ä»¶æ¸…ç†çš„ä»£ç å®ç°ä¸Šï¼Œç®€åŒ–å¯å‚è€ƒï¼š&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftypEhfurOuOClWQrtN3z8IhAL84xibuB2W8ERiaVN8uk2euZViaGvvH2ew/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;åœ¨è¿›è¡ŒåŒ…æ‹¬ä¸Šè¿°æ–‡ä»¶åˆ é™¤åŠ¨ä½œåœ¨å†…çš„ä¸€ç³»åˆ—ç¯å¢ƒæ¸…ç†å·¥ä½œä¹‹åï¼Œå®¹å™¨å†…å¤–çš„ä¸»è°ƒåº¦è¿›ç¨‹ä¼šå†™å…¥å…¶ä»–ç§Ÿæˆ·çš„ä»£ç åˆ°å½“å‰å®¹å™¨å†…ï¼Œæ­¤æ—¶è¿™ä¸ªå®¹å™¨å°±è¿›å…¥äº†ä¸‹ä¸€ä¸ªåº”ç”¨çš„ Serverless ç”Ÿå‘½å‘¨æœŸã€‚&lt;/p&gt;&#xA;&lt;p&gt;è™½ç„¶ï¼Œä¸»æ¡†æ¶ä»£ç å®ç°å†…æœ‰å¾ˆå¤šç±»ä¼¼è°ƒç”¨ç³»ç»Ÿå‘½ä»¤æ‹¼æ¥ç›®å½•ç­‰å‚æ•°è¿›è¡Œæ‰§è¡Œçš„ä»£ç å®ç°ï¼Œä½†æ˜¯ç±»ä¼¼å‘½ä»¤æ³¨å…¥çš„é—®é¢˜å¤§å¤šåªèƒ½å½±å“åˆ°å½“å‰çš„ç”Ÿå‘½å‘¨æœŸï¼›è€Œåˆå› ä¸ºç”¨æˆ·æƒé™çš„é—®é¢˜ï¼Œæˆ‘ä»¬æ²¡åŠæ³•ä¿®æ”¹å…¶ä»–ç›®å½•ä¸‹çš„æ–‡ä»¶ã€‚&lt;/p&gt;&#xA;&lt;p&gt;äºæ˜¯æˆ‘ä»¬æ„å»ºäº†è¿™æ ·ä¸€ä¸ªç›®å½•å’Œæ–‡ä»¶ï¼š&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftuEbNuIjDbKaMYLBwvlAVozHU0ZcicdsnOor5ZND4Hgy3vRn6CXskQFg/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;å½“ç¨‹åºæ‰§è¡Œ rm -rf * æ—¶ï¼Œå› ä¸º bash glob å¯¹ * å·çš„è¿”å›æ˜¯æœ‰é»˜è®¤æ’åºçš„ï¼Œè¿™é‡Œå¯å‚è€ƒä¸‹æ–¹ bash çš„æ–‡æ¡£ï¼Œåªè¦æˆ‘ä»¬ä¸å»ä¿®æ”¹ LC_ALL çš„ç¯å¢ƒå˜é‡ï¼Œæˆ‘ä»¬æ„é€ çš„ --help æ–‡ä»¶ä¼šæ’åˆ—åœ¨æ–‡ä»¶åˆ—è¡¨çš„æœ€å‰æ–¹ï¼Œå¯¼è‡´ rm ä¼šæ‰§è¡Œ rm --help è€Œç»ˆæ­¢ï¼Œæ¶æ„æ–‡ä»¶å¾—ä»¥ä¿ç•™ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;em&gt;Pathname Expansion&lt;/em&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;em&gt;After word splitting, unless the -f option has been set, bash scans each word for the characters *, ?, and [. If one of these characters appears, then the word is regarded as a pattern, and replaced with an alphabetically sorted list of file names matching the pattern.&lt;/em&gt;&lt;/p&gt;&#xA;&lt;p&gt;æˆ‘ä»¬å¯ä»¥ç®€å•åœ¨ bash å†…è¿›è¡ŒéªŒè¯ï¼Œå¯ä»¥çœ‹åˆ° rm -rf * å‘½ä»¤è¢« --help å¼ºè¡Œç»ˆæ­¢ï¼Œæˆ‘ä»¬æ‰€æ¤å…¥çš„æ¶æ„æ–‡ä»¶è¿˜ä¾ç„¶å­˜åœ¨æ²¡æœ‰è¢«æ¸…ç†æ‰ï¼ŒåŒæ—¶ rm --help çš„å‘½ä»¤æ‰§è¡Œè¿”å›ä¸º 0ï¼Œä¸ä¼šäº§ç”Ÿ OS ERROE Codeï¼Œæ¸…ç†è¿›ç¨‹ä¼šè®¤ä¸ºè¿™é‡Œçš„æ¸…é™¤å‘½ä»¤å·²ç»æˆåŠŸæ‰§è¡Œï¼š&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftpjnbtv45r37Ov4icyG36okaRFb5uywHMRbPPmRAiaP1cuk33ORSwhicLg/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;è€Œå®é™…åœ¨ serverless log é‡Œçš„è¿”å›ï¼Œå¯å‚è€ƒï¼š&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftD7gxhR3T4yGxysBJPlceL9wS1Cfvw7kVEgFibFrLqkMGaHfIrcyAOCw/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;æ­¤æ—¶ï¼Œserverless çš„ä¸»è°ƒåº¦ç¨‹åºä¼šä»¥ä¸ºè‡ªå·±å·²ç»æ­£å¸¸æ¸…ç†äº†å®¹å™¨ç¯å¢ƒï¼Œå¹¶å†™å…¥å¦å¤–ä¸€ä¸ªç§Ÿæˆ·çš„æºç åŒ…è¿›è¡Œæ‰§è¡Œï¼Œè€Œå½“å¦å¤–ä¸€ä¸ªç§Ÿæˆ·çš„ä»£ç æ‰§è¡Œè‡³ import requests æ—¶ï¼Œæˆ‘ä»¬é©»ç•™åœ¨åº”ç”¨ç›®å½•ä¸‹çš„ requests.py å†…çš„æ¶æ„ä»£ç å°±ä¼šè¢«æ‰§è¡Œã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftTLwvYdm6tuj1pzCs8k7x3S2aPQ6cYRkUbvs2TADAYX7pQUVJMD4tiag/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;ä¸è¿‡å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå› ä¸º serverless çš„ç”Ÿå‘½å‘¨æœŸä¸€èˆ¬æä¸ºæœ‰é™ï¼Œæ‰€ä»¥æ­¤æ—¶è·å–çš„ shell å¯èƒ½ä¼šåœ¨çŸ­æ—¶é—´ç»“æŸï¼Œè§¦å‘æ–°ä¸€è½®çš„åå¼¹ shellï¼Œä¸” Servless å®¹å™¨ç¯å¢ƒå†…çš„ä¿¡æ¯ç›¸å¯¹å•ä¸€å’Œç®€ä¾¿ã€‚æ‰€ä»¥å®¹å™¨ç¯å¢ƒé‡Œå€¼å¾—æˆ‘ä»¬æ¢ç´¢å’Œç¿»æ‰¾çš„åœ°æ–¹ä¹Ÿä¸å¤šï¼Œä¸€èˆ¬éœ€è¦å…³æ³¨ï¼š]&lt;/p&gt;&#xA;&lt;ol&gt; &#xA; &lt;li&gt; &lt;p&gt;æ–°çš„ä»£ç &lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;ä»£ç å†…éƒ¨é…ç½®&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;ç¯å¢ƒå˜é‡&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;ç§˜é’¥ã€è¯ä¹¦ã€å¯†ç ä¿¡æ¯ç­‰&lt;/p&gt; &lt;/li&gt; &#xA;&lt;/ol&gt;&#xA;&lt;p&gt;ä¸åŒçš„ serverless æ¶æ„å®ç°å¯¹äºå­˜å‚¨å’Œä¼ é€’ç›¸åº”ä¿¡æ¯çš„æ–¹å¼å„æœ‰ä¸åŒã€‚&lt;/p&gt;&#xA;&lt;h2&gt;10.2. æ”»å‡»å…¬ç”¨å®¹å™¨ / é•œåƒ&lt;/h2&gt;&#xA;&lt;p&gt;ç°åœ¨æˆ‘ä»¬çŸ¥é“äº†ï¼Œå¾ˆå¤š Serverless çš„ç”¨æˆ·ä»£ç éƒ½è·‘åœ¨ä¸€ä¸ªä¸ªå®¹å™¨å†…ã€‚ä¸åŒåº”ç”¨çš„ä»£ç è¿è¡Œäºä¸åŒçš„å®¹å™¨ä¹‹ä¸Šï¼Œä¾é å®¹å™¨åŸæœ¬çš„èƒ½åŠ›è¿›è¡Œèµ„æºå›æ”¶å’Œéš”ç¦»ã€‚ç”±äº Serverless åº”ç”¨çš„ä»£ç ä¼šè¿›è¡Œç›¸åº”çš„ç»“æ„åŒ–è§£è€¦ï¼Œä¸”æ¯ä¸ªåº”ç”¨å®¹å™¨çš„åº•å±‚ç¯å¢ƒç›¸å¯¹æ¥è¯´æ˜¯ä¸€è‡´çš„ã€‚æ‰€ä»¥å…¶å®ï¼Œæ ¹æ®åº”ç”¨æ¼æ´è·å–æ›´å¤šåº”ç”¨ç±» Serverless å®¹å™¨ä¸ä»…å›°éš¾è€Œä¸”åœ¨å†…ç½‘æ¸—é€ä¸­ä½œç”¨ç›¸å¯¹è¾ƒä¸ºæœ‰é™ï¼Œèƒ½åšçš„äº‹æƒ…ä¹Ÿç›¸å¯¹è¾ƒå°‘ã€‚&lt;/p&gt;&#xA;&lt;p&gt;ä½†å…¶å®åœ¨ä¸åŒçš„ Serverless æ¶æ„ä¸­ï¼Œéƒ½æœ‰å¤šç±»æŒä¹…åŒ–ä¸”å…¬ç”¨çš„å®¹å™¨ä»¥å®ç°ç¨‹åºè°ƒåº¦ã€ä»£ç é¢„ç¼–è¯‘ã€ä»£ç ä¸‹è½½è¿è¡Œç­‰é€»è¾‘ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftqufjNJKdpiaBRywruibXuUElXU2rDiaicQnIAPcruJ2SLJpPmVOicMQOFWA/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;è¿™ç±»å®¹å™¨ä¸€èˆ¬æ‹¥æœ‰è·å–æ‰€æœ‰ç”¨æˆ·ä»£ç ã€é…ç½®å’Œç¯å¢ƒå˜é‡çš„èƒ½åŠ›ï¼ŒåŒæ—¶ä¹Ÿæ¯”è¾ƒå®¹æ˜“å‡ºç° Docker IN Docker æˆ–å¤§æƒé™ Service Account çš„è®¾è®¡ã€‚&lt;/p&gt;&#xA;&lt;p&gt;å¦‚ä½•æ§åˆ¶è¿™ç±»å‹çš„å®¹å™¨å‘¢ï¼Ÿä»¥ä¸‹æ˜¯æˆ‘ä»¬åœ¨æ”»é˜²è¿‡ç¨‹ä¸­é‡åˆ°çš„åœºæ™¯ï¼š&lt;/p&gt;&#xA;&lt;ol&gt; &#xA; &lt;li&gt;åœ¨ä¸‹è½½æºä»£ç æ—¶ï¼Œä½¿ç”¨ git clone è¿›è¡Œå‘½ä»¤æ‹¼æ¥ï¼Œå¯¼è‡´å­˜åœ¨å‘½ä»¤æ³¨å…¥ï¼›&lt;/li&gt; &#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftWvSD1Tu67qCpVSOavKtibTv8WYEiaKaRbVPOlh1FHPrWLqktY5eRUj2Q/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;ol start=&#34;2&#34;&gt; &#xA; &lt;li&gt;åœ¨å®‰è£… node.js ä¾èµ–åŒ…æ—¶ï¼Œæ„é€ ç‰¹æ®Šçš„ package.json åˆ©ç”¨ preinstall æ§åˆ¶å…¬ç”¨å®¹å™¨ã€‚&lt;/li&gt; &#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftSBprNNstw3ok5GDpMaQbvjmoW0IRy05SzlY72qwKOtblrRVqUrx6Pg/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;ol start=&#34;3&#34;&gt; &#xA; &lt;li&gt;é…ç½®æŒ‡å‘æ¶æ„ç¬¬ä¸‰æ–¹ä»“åº“çš„ pip requirements.txtï¼Œåˆ©ç”¨æ¶æ„ pip åŒ…è·å–ä¾èµ–æ‰“åŒ…å®¹å™¨çš„æƒé™ï¼ŒåŒç±»çš„åˆ©ç”¨æ‰‹æ³•è¿˜å¯ä»¥ä½œç”¨äº nodejsã€ruby ç­‰è¯­è¨€çš„åŒ…ç®¡ç†å™¨ã€‚&lt;/li&gt; &#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSft6kHyR00oTMD2dW0589S9ib2XpiaTUrhLw4ryWKL065aODR2u4FQVhG1Q/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;ol start=&#34;4&#34;&gt; &#xA; &lt;li&gt;å› ä¸ºå®¹å™¨é•œåƒé‡Œçš„æ‰“äº†ä½ç‰ˆæœ¬ gitã€go ç­‰ç¨‹åºï¼Œåœ¨æ‰§è¡Œ git clone, &amp;nbsp;git submodule update(CVE-2019-19604), go get æ—¶æ‰€å¯¼è‡´çš„å‘½ä»¤æ‰§è¡Œï¼Œ&lt;/li&gt; &#xA;&lt;/ol&gt;&#xA;&lt;p&gt;ä¸‹å›¾ä¸º CVE-2018-6574 çš„ POC å¯å‚è€ƒï¼š &lt;a href=&#34;https://github.com/neargle/CVE-2018-6574-POC/raw/master/main.go%E3%80%82&#34;&gt;https://github.com/neargle/CVE-2018-6574-POC/blob/master/main.goã€‚&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSft6DuCaxYUibWhNTmguQic2JNtwZLTibhFjtgRGecfANIlCKoLITr8ap3rQ/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;h2&gt;11. DevOps&lt;/h2&gt;&#xA;&lt;p&gt;æˆ‘ä»¬ä» 2019 å¹´å¼€å§‹ç ”ç©¶ DevOps å®‰å…¨æ”»é˜²å¯¹æŠ—çš„æˆ˜åœºï¼Œä¸ä»…ç ”ç©¶ä¼ä¸šå†…éƒ¨ DevOps å¹³å°å’Œäº§å“çš„å®‰å…¨æ€§ï¼ŒåŒæ—¶ä¹Ÿä¸æ–­åœ¨å†…éƒ¨çš„ç ”å‘æµç¨‹ä¸­ç§¯æå¼•å…¥ DevOps åšè“å†›æ­¦å™¨åŒ–è‡ªåŠ¨åŒ–ç ”å‘çš„æµ‹è¯•ã€å‘å¸ƒã€æ‰“åŒ…å’Œç¼–è¯‘ç­‰æµç¨‹ä¸­ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;ä»è“å†›çš„è§’åº¦ï¼Œåœ¨æˆ‘ä»¬å†å²æ”»é˜²å¯¹æŠ—ä¸­æ¯”è¾ƒå€¼å¾—æ³¨æ„çš„åœºæ™¯æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt; &#xA; &lt;li&gt; &lt;p&gt;ç›®å‰ä¸åŒçš„ DevOps å¹³å°å¯èƒ½ä¼šåŒ…å«ä¸åŒçš„ Low-Code æµæ°´çº¿ç‰¹æ€§ï¼Œéš”ç¦»ä¸Šä¹Ÿä¼šå¤§é‡é‡‡ç”¨æˆ‘ä»¬ä¸Šé¢æåŠçš„å¤šç§Ÿæˆ·å®¹å™¨é›†ç¾¤è®¾è®¡ï¼Œæ‰€ä»¥å¤šç§Ÿæˆ·é›†ç¾¤ä¸‹çš„æ¸—é€æµ‹è¯•æŠ€å·§ä¹Ÿå¤§è‡´æ— äºŒã€‚&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;æ§åˆ¶äº†ä¸Šè¿°çš„å¤šç§Ÿæˆ·å®¹å™¨é›†ç¾¤æ˜¯å¯ä»¥æ§åˆ¶é›†ç¾¤æ‰€ç”¨èŠ‚ç‚¹æœåŠ¡å™¨çš„ï¼Œè¿™äº›æœåŠ¡å™¨çš„ä½œç”¨ä¸€èˆ¬ç”¨äºç¼–è¯‘å’Œæ„å»ºä¸šåŠ¡ä»£ç ï¼Œå¹¶æ¥å…¥ä»£ç ç®¡ç†ç«™ç‚¹å¦‚ Gitlabã€Github ç­‰ï¼Œæ‰€ä»¥ä¸€èˆ¬æ‹¥æœ‰è·å–ä¼ä¸šç¨‹åºå„ä¸šåŠ¡æºç çš„æƒé™ã€‚&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;DevOps åŠå…¶ç›¸å…³çš„å¹³å°å…¶æœ€é‡è¦çš„èƒ½åŠ›ä¹‹ä¸€å°±æ˜¯ CICDï¼Œå› æ­¤æ§åˆ¶ DevOps ä¹Ÿå°±é—´æ¥æ‹¥æœ‰äº†ä»åŠå…¬ç½‘ã€å¼€å‘ç½‘çªç ´è¿›å…¥ç”Ÿäº§ç½‘çš„æ–¹æ³•ï¼›æ§åˆ¶çš„åº”ç”¨æ•°é‡å’Œä¸šåŠ¡ç§ç±»è¶Šå¤šï¼Œä¹Ÿèƒ½æ ¹æ®åº”ç”¨çš„ä¸åŒè¿›å…¥ä¸åŒçš„éš”ç¦»åŒºã€‚&lt;/p&gt; &lt;/li&gt; &#xA;&lt;/ol&gt;&#xA;&lt;p&gt;å¦å¤–åœ¨ DevOps å¹³å°å†…è‹¥é›†æˆäº†æ—¥å¿—ç»„ä»¶ï¼ˆäº‘åŸç”Ÿçš„é‡ç‚¹ä¹‹ä¸€ï¼šå¯è§‚å¯Ÿæ€§ï¼‰çš„è¯ï¼Œé‚£ä¹ˆæ—¥å¿—ç»„ä»¶å’Œ Agent çš„å‡çº§ã€å®‰è£…é—®é¢˜ä¸€èˆ¬ä¼šæ˜¯é‡ä¸­ä¹‹é‡ï¼Œè“å†›å¯ä»¥æ ¹æ®è¿™ä¸ªç‚¹è¾¾åˆ°è·å–å…¬å¸å†…ä»»æ„ä¸»æœºæƒé™çš„ç›®åœ°ã€‚&lt;/p&gt;&#xA;&lt;h2&gt;12. äº‘åŸç”Ÿ API ç½‘å…³&lt;/h2&gt;&#xA;&lt;p&gt;ä½œä¸º API ç½‘å…³ï¼Œå®ƒå…·æœ‰ç®¡ç†é›†ç¾¤å—åŒ—æµé‡çš„åŠŸèƒ½ï¼Œä¸€èˆ¬ä¹Ÿå¯èƒ½ä½œä¸ºé›†ç¾¤æµé‡çš„å…¥å£å’Œå‡ºå£ï¼ˆingress/egressï¼‰ã€‚è€Œä½œä¸ºæ ‡æ¦œäº‘åŸç”Ÿç‰¹æ€§çš„ API ç½‘å…³äº§å“ï¼Œä¼¼ä¹æ— ä¸€ä¾‹å¤–éƒ½ä¼šå…·æœ‰åŠ¨æ€é…ç½®ã€çµæ´»ä¿®æ”¹ã€è¿œç¨‹ç®¡ç†çš„ç‰¹æ€§ï¼Œè€Œè¿™äº›ç‰¹æ€§å¾€å¾€ä»¥ REST API å¯¹å¤–æä¾›æœåŠ¡ã€‚&lt;/p&gt;&#xA;&lt;p&gt;ç„¶è€Œåœ¨è¿œç¨‹é…ç½®é€»è¾‘çš„é‰´æƒèƒ½åŠ›ä¸Šï¼Œèº«ä¸ºç½‘å…³è¿™ç§åŸºç¡€ç½‘ç»œçš„äº§å“ï¼Œå„ä¸ªå—æ¬¢è¿çš„å¼€æºç»„ä»¶åœ¨é»˜è®¤å®‰å…¨çš„å®ç°ä¸Šä¼¼ä¹è¿˜éœ€åŠªåŠ›ã€‚&lt;/p&gt;&#xA;&lt;p&gt;ä»¥ Kong ä¸ºä¾‹ï¼ŒKong API ç½‘å…³ (&lt;a href=&#34;https://github.com/Kong/kong&#34;&gt;https://github.com/Kong/kong&lt;/a&gt;) æ˜¯ç›®å‰æœ€å—æ¬¢è¿çš„äº‘åŸç”Ÿ API ç½‘å…³ä¹‹ä¸€ï¼Œæœ‰å¼€æºç‰ˆå’Œä¼ä¸šç‰ˆä¸¤ä¸ªåˆ†æ”¯ï¼Œè¢«å¹¿æ³›åº”ç”¨äºäº‘åŸç”Ÿã€å¾®æœåŠ¡ã€åˆ†å¸ƒå¼ã€æ— æœåŠ¡äº‘å‡½æ•°ç­‰åœºæ™¯çš„ API æ¥å…¥ä¸­é—´ä»¶ï¼Œä¸ºäº‘åŸç”Ÿåº”ç”¨æä¾›é‰´æƒï¼Œè½¬å‘ï¼Œè´Ÿè½½å‡è¡¡ï¼Œç›‘æ§ç­‰èƒ½åŠ›ã€‚&lt;/p&gt;&#xA;&lt;p&gt;æˆ‘ä»¬æ›¾ç»åœ¨ä¸€æ¬¡æ¸—é€æµ‹è¯•ä¸­ä½¿ç”¨ Kong çš„è¿œç¨‹é…ç½®èƒ½åŠ›çªç ´å¤–ç½‘è¿›å…¥åˆ°å†…ç½‘ç¯å¢ƒä¸­ï¼Œå¯ä»¥å‚è€ƒä¹‹å‰çš„é¢„è­¦æ–‡ç« **ã€Šè…¾è®¯è“å†›å®‰å…¨æé†’ï¼šå¼€æºäº‘åŸç”Ÿ API ç½‘å…³ Kong å¯èƒ½ä¼šæˆä¸ºæ”»å‡»æ–¹è¿›å…¥ä¼ä¸šå†…ç½‘çš„æ–°å…¥å£ã€‹**&lt;/p&gt;&#xA;&lt;p&gt;Kong ä½¿ç”¨ Kong Admin Rest API ä½œä¸ºç®¡ç† Kong Proxy èƒ½åŠ›çš„å…³é”®å…¥å£ï¼Œä»¥æ”¯æŒæœ€å¤§ç¨‹åº¦çš„çµæ´»æ€§ï¼›åœ¨å¼€æºåˆ†æ”¯é‡Œï¼Œè¿™ä¸ªç®¡ç†å…¥å£æ˜¯æ²¡æœ‰é‰´æƒèƒ½åŠ›çš„ (Kong ä¼ä¸šç‰ˆæ”¯æŒå¯¹ Kong Admin Rest API è¿›è¡Œè§’è‰²æ§åˆ¶å’Œé‰´æƒ)ï¼ŒKong å»ºè®®ç”¨æˆ·åœ¨ç½‘ç»œå±‚è¿›è¡Œè®¿é—®æ§åˆ¶ï¼›å½“æ”»å‡»æ–¹å¯ä»¥è®¿é—®åˆ°è¿™ä¸ª APIï¼Œä»–å°±å…·æœ‰äº† Kong Proxy çš„æ‰€æœ‰èƒ½åŠ›ï¼Œå¯ä»¥æŸ¥çœ‹å’Œä¿®æ”¹ä¼ä¸šå½“å‰åœ¨å—åŒ—æµé‡ç®¡ç†ä¸Šçš„é…ç½®ï¼Œå¯ä»¥ç›´æ¥æ§åˆ¶ API ç½‘å…³ä½¿å…¶æˆä¸ºä¸€ä¸ªå¼€æ”¾æ€§çš„æµé‡ä»£ç† (æ¯” SSRF æ›´ä¾¿äºä½¿ç”¨å’Œåˆ©ç”¨)ï¼›ä»æ”»å‡»æ–¹çš„è§’åº¦æ€è€ƒï¼Œæ§åˆ¶äº†è¿™ä¸ª API ç­‰äºæ˜¯æ‹¥æœ‰äº†æ‘¸æ¸…ç½‘ç»œæ¶æ„å’Œæ‰“ç ´ç½‘ç»œè¾¹ç•Œçš„èƒ½åŠ›ã€‚&lt;/p&gt;&#xA;&lt;p&gt;å½“è“å†›å¯ä»¥è®¿é—®åˆ° Kong Admin Rest API &amp;nbsp;å’Œ &amp;nbsp;Kong Proxy æ—¶ï¼Œè“å†›å¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤åˆ›å»ºä¸€ä¸ªé€šå¾€å†…ç½‘çš„ä»£ç†ï¼š&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftiaxerLLF2Lib6bAylq9yJDuxgYKKhEHdljWZRqe0bhoF3mQc3ydxZQZA/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;è‡³æ­¤ï¼Œè“å†›ä»å¤–ç½‘å‘å¾€ Kong Proxy çš„æµé‡åªè¦ host å¤´å¸¦æœ‰ target.com å°±ä¼šè½¬å‘åˆ°å†…ç½‘çš„ target.com:443 ä¸­ï¼Œå®é™…åˆ©ç”¨æ‰‹æ³•ä¼šæ ¹æ®å†…ç½‘å’Œç›®æ ‡ç«™ç‚¹é…ç½®çš„ä¸åŒè€Œå˜åŒ–ã€‚&lt;/p&gt;&#xA;&lt;p&gt;è€Œç›®å‰ Kong çš„å¼€æºåˆ†æ”¯é‡Œæ˜¯ä¸æ”¯æŒç»™ Kong Admin Rest API æ·»åŠ ç›¸åº”çš„é‰´æƒèƒ½åŠ›çš„ï¼Œåªå¯ä»¥æ”¹å˜ç›‘å¬çš„ç½‘å¡ï¼Œæˆ–ä½¿ç”¨è®¾ç½® Network Policyã€ iptablesã€å®‰å…¨ç»„ç­‰æ–¹å¼è¿›è¡Œç½‘ç»œä¸Šéš”ç¦»ã€‚ç°åœ¨æœ€å¸¸è§çš„æ–¹å¼å°±æ˜¯ä¸å¼€æ”¾å¤–ç½‘ï¼Œåªå…è®¸å†…ç½‘è®¿é—®ã€‚ä¹Ÿå› ä¸ºå¦‚æ­¤ï¼Œå¦‚æœå·²ç»è¿›å…¥åˆ°å†…ç½‘ï¼ŒAPI ç½‘å…³çš„ç®¡ç†æ¥å£ä¼šæˆä¸ºæˆ‘é¦–è¦çš„æ”»å‡»ç›®æ ‡ä¹‹ä¸€ï¼Œå€Ÿæ­¤æˆ‘ä»¬å¯ä»¥æ‘¸æ¸…å½“å‰é›†ç¾¤å¯¹å†…å¯¹å¤–æä¾›çš„ç›¸å…³èƒ½åŠ›ï¼Œæ›´æœ‰å¯èƒ½ç›´æ¥è·å–æµé‡å‡ºå…¥å£å®¹å™¨çš„ Shell æƒé™ã€‚&lt;/p&gt;&#xA;&lt;h2&gt;12.1. APISIX çš„ RCE åˆ©ç”¨&lt;/h2&gt;&#xA;&lt;p&gt;å¦å¤–ä¸€ä¸ªå€¼å¾—æ·±å…¥çš„å¼€æºç»„ä»¶å°±æ˜¯ Apache APISIXï¼Œè¿™æ˜¯ä¸€æ¬¾åŸºäº lua è¯­è¨€å¼€å‘ï¼Œæ˜¯ä¸€ä¸ªåŠ¨æ€ã€å®æ—¶ã€é«˜æ€§èƒ½çš„ API ç½‘å…³ï¼Œ æä¾›è´Ÿè½½å‡è¡¡ã€åŠ¨æ€ä¸Šæ¸¸ã€ç°åº¦å‘å¸ƒã€æœåŠ¡ç†”æ–­ã€èº«ä»½è®¤è¯ã€å¯è§‚æµ‹æ€§ç­‰ä¸°å¯Œçš„æµé‡ç®¡ç†åŠŸèƒ½ã€‚&lt;/p&gt;&#xA;&lt;p&gt;APISIX æä¾›äº† REST Admin API åŠŸèƒ½ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨ REST Admin API æ¥ç®¡ç† APISIXï¼Œé»˜è®¤æƒ…å†µä¸‹åªå…è®¸ 127.0.0.1 è®¿é—®ï¼Œç”¨æˆ·å¯ä»¥ä¿®æ”¹ conf/config.yaml ä¸­çš„ allow_admin å­—æ®µï¼ŒæŒ‡å®šå…è®¸è°ƒç”¨ Admin API çš„ ip åˆ—è¡¨ã€‚&lt;/p&gt;&#xA;&lt;p&gt;å½“ç”¨æˆ·å¯¹å¤–å¼€å¯äº† Admin API ä¸”æœªä¿®æ”¹ç¡¬ç¼–ç çš„ç¼ºçœ admin_key çš„æƒ…å†µä¸‹ï¼Œæ”»å‡»è€…å¯ä»¥åˆ©ç”¨è¯¥ admin_key æ‰§è¡Œä»»æ„ lua ä»£ç ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSfto8mHNHeB77LoDPhFESbBegaNiaib0BALNkDWrh3x1EBAdoK89x01Hq1w/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;æ ¹æ® apisix å®˜æ–¹æ–‡æ¡£å¯ä»¥çŸ¥é“ï¼Œåœ¨åˆ›å»ºè·¯ç”±æ—¶ç”¨æˆ·å¯ä»¥å®šä¹‰ä¸€ä¸ª filter_func å‚æ•°ç”¨äºå¤„ç†è¯·æ±‚ï¼Œfilter_func çš„å†…å®¹å¯ä»¥æ˜¯ä»»æ„çš„ lua ä»£ç ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftIfSbPDUz124AichVhhvGTaueXiba0Ja0E4ZyFYZRQWOp9yfsRCpRDlAA/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;é‚£ä¹ˆæˆ‘ä»¬ä¾¿å¯ä»¥ä½¿ç”¨é»˜è®¤çš„ admin_key åˆ›å»ºæ¶æ„çš„ route å¹¶è®¿é—®ä»¥è§¦å‘ lua ä»£ç æ‰§è¡Œï¼Œè¾¾åˆ° rce çš„ç›®çš„ï¼Œä¸‹é¢æ˜¯å…·ä½“æ­¥éª¤ï¼š&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;ï¼ˆ1ï¼‰åˆ›å»ºå¯ç”¨çš„ services:&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftst9v4ibA2LYdvG3nqMhTHDicGqXvKq7PmofK2tK15SPF6DNVMLWf8BJw/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;ï¼ˆ2ï¼‰åˆ›å»ºæ¶æ„çš„ route:&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftLVN26q4XLteqAicQINLQ2bBY9jmnP0Jp3hCf5Jn9WriaXiagfaibMYLl8A/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;æœ€åè®¿é—®&amp;nbsp;&lt;a href=&#34;http://127.0.0.1:9080/api/tforce_test&#34;&gt;http://127.0.0.1:9080/api/tforce_test&lt;/a&gt; å³å¯è§¦å‘é¢„å®šä¹‰çš„ lua ä»£ç æ‰§è¡Œã€‚&lt;/p&gt;&#xA;&lt;p&gt;å› æ­¤ï¼Œåœ¨å†…ç½‘é‡Œæ”»å‡»äº‘åŸç”Ÿ API ç½‘å…³æ˜¯æ¯”è¾ƒå®¹æ˜“æ‰“å¼€ä¸€å®šå±€é¢çš„ã€‚&lt;/p&gt;&#xA;&lt;h2&gt;13. å…¶å®ƒåˆ©ç”¨åœºæ™¯å’Œæ‰‹æ³•&lt;/h2&gt;&#xA;&lt;h2&gt;13.1. ä» CronJob è°ˆæŒä¹…åŒ–&lt;/h2&gt;&#xA;&lt;p&gt;å› ä¸º CronJob çš„è®¾è®¡å’Œ Linux CronTab è¿‡äºç›¸ä¼¼ï¼Œæ‰€ä»¥å¾ˆå¤šäººéƒ½ä¼šæŠŠå…¶å¼•ç”³ä¸ºåœ¨ Kubernetes é›†ç¾¤æ”»å‡»çš„ä¸€äº›æŒä¹…åŒ–æ€è·¯ã€‚&lt;/p&gt;&#xA;&lt;p&gt;å®˜æ–¹æ–‡æ¡£&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://Kubernetes.io/docs/concepts/workloads/controllers/cron-jobs/&#34;&gt;https://Kubernetes.io/docs/concepts/workloads/controllers/cron-jobs/&lt;/a&gt; é‡Œä¹Ÿè°ˆåŠäº† CronJob å’Œ CronTab çš„å¯¹æ¯”ï¼Œ è¿™ä¸ªæŠ€æœ¯ä¹Ÿç¡®å®å¯ä»¥å’Œ CronTab ä¸€æ ·ä¸€å®šç¨‹åº¦ä¸Šå¯ä»¥æ»¡è¶³æŒä¹…åŒ–çš„åœºæ™¯ã€‚&lt;/p&gt;&#xA;&lt;p&gt;è¿™é‡Œæœ‰ä¸€ä¸ªæˆ‘ä»¬é¢„ç ”æ—¶ä½¿ç”¨çš„ &amp;nbsp;CronJob é…ç½®ï¼š&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftrrCeuxvK2FlC1SVIZx0jOQOrVfgibPg7Acwq8xadYojuKht8HvebhyQ/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftWJSdjSw4orHiagibFcg9JWAE78DBABCVudY6DVfAHKs6ibbKQntYicsjFQ/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;æ­¤å¤„çš„é…ç½®ä¼šéš”æ¯åˆ†é’Ÿåˆ›å»ºä¸€ä¸ªå…·æœ‰ç”Ÿå‘½å‘¨æœŸçš„ PODï¼ŒåŒæ—¶è¿™äº›å®¹å™¨ä¹Ÿå¯ä»¥ä½¿ç”¨ç‰¹æƒå®¹å™¨ï¼ˆå¦‚ä¸Šè¿°é…ç½®ï¼‰ã€æŒ‚è½½å¤§ç›®å½•ç­‰è®¾ç½®ï¼Œæ­¤æ—¶æŒä¹…åŒ–åˆ›å»ºçš„ POD å°±å¯ä»¥æ‹¥æœ‰ç‰¹æƒå’Œè®¿é—®å®¿ä¸»æœºæ ¹ç›®å½•æ–‡ä»¶çš„æƒé™ã€‚&lt;/p&gt;&#xA;&lt;p&gt;ä¸è¿‡å®é™…å¯¹æŠ—è¿‡ç¨‹ä¸­ï¼Œè™½ç„¶æˆ‘ä»¬ä¹Ÿä¼šå¯¹æ¶æ„çš„ POD å’Œå®¹å™¨åšä¸€å®šçš„æŒä¹…åŒ–ï¼Œä½†æ˜¯ç›´æ¥ä½¿ç”¨ CronJob çš„æ¦‚ç‡å´ä¸é«˜ã€‚åœ¨åˆ›å»ºåé—¨ POD çš„æ—¶å€™ï¼Œç›´æ¥ä½¿ç”¨ restartPolicy: Always å°±å¯ä»¥æ–¹ä¾¿ä¼˜é›…çš„è¿›è¡Œåé—¨è¿›ç¨‹çš„é‡å¯å’Œç»´æŒï¼Œæ‰€ä»¥å¯¹ CronJob çš„éœ€æ±‚åè€Œæ²¡é‚£ä¹ˆé«˜ã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://mmbiz.qpic.cn/mmbiz_png/JMH1pEQ7qP5lIovB8NLL2Anic3icVltSftVUtO0jicZWfyBIVotbJ1D2uhQ3slMibqowUq21tdNoPlZeHQciauJN0Fw/640?wx_fmt=png&#34; alt=&#34;å›¾ç‰‡&#34;&gt;&lt;/p&gt;&#xA;&lt;h2&gt;14. è‡´è°¢&lt;/h2&gt;&#xA;&lt;p&gt;[WIP]&lt;/p&gt;&#xA;&lt;p&gt;ä¹Ÿæ„Ÿè°¢æ‚¨è¯»åˆ°ç°åœ¨ï¼Œè¿™ç¯‡æ–‡ç« åŒ†å¿™æ„æˆè‚¯å®šæœ‰ä¸å‘¨åˆ°æˆ–æè¿°ä¸æ­£ç¡®çš„åœ°æ–¹ï¼ŒæœŸå¾…ä¸šç•Œå¸ˆå‚…ä»¬ç”¨å„ç§æ–¹å¼æŒ‡æ­£å‹˜è¯¯ã€‚&lt;/p&gt;&#xA;&lt;h2&gt;15. å¼•ç”¨&lt;/h2&gt;&#xA;&lt;ol&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/cdk-team/CDK/&#34;&gt;https://github.com/cdk-team/CDK/&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://force.tencent.com/docs/CIS2020-Attack-in-a-Service-Mesh-Public.pdf?v=1&#34;&gt;https://force.tencent.com/docs/CIS2020-Attack-in-a-Service-Mesh-Public.pdf?v=1&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/cncf/toc/raw/master/DEFINITION.md&#34;&gt;https://github.com/cncf/toc/blob/master/DEFINITION.md&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://www.cncf.io/blog/2017/04/26/service-mesh-critical-component-cloud-native-stack/&#34;&gt;https://www.cncf.io/blog/2017/04/26/service-mesh-critical-component-cloud-native-stack/&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/lxc/lxcfs&#34;&gt;https://github.com/lxc/lxcfs&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/cdr/code-server&#34;&gt;https://github.com/cdr/code-server&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://Kubernetes.io/docs/reference/generated/kubectl/kubectl-commands&#34;&gt;https://Kubernetes.io/docs/reference/generated/kubectl/kubectl-commands&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://thehackernews.com/2021/01/new-docker-container-escape-bug-affects.html&#34;&gt;https://thehackernews.com/2021/01/new-docker-container-escape-bug-affects.html&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://medium.com/jorgeacetozi/Kubernetes-master-components-etcd-api-server-controller-manager-and-scheduler-3a0179fc8186&#34;&gt;https://medium.com/jorgeacetozi/Kubernetes-master-components-etcd-api-server-controller-manager-and-scheduler-3a0179fc8186&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://wohin.me/rong-qi-tao-yi-gong-fang-xi-lie-yi-tao-yi-ji-zhu-gai-lan/#4-2-procfs-&#34;&gt;https://wohin.me/rong-qi-tao-yi-gong-fang-xi-lie-yi-tao-yi-ji-zhu-gai-lan/#4-2-procfs-&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://security.tencent.com/index.php/announcement/msg/193&#34;&gt;https://security.tencent.com/index.php/announcement/msg/193&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://www.freebuf.com/vuls/196993.html&#34;&gt;https://www.freebuf.com/vuls/196993.html&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://Kubernetes.io/docs/concepts/workloads/controllers/cron-jobs/&#34;&gt;https://Kubernetes.io/docs/concepts/workloads/controllers/cron-jobs/&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://Kubernetes.io/zh/docs/reference/command-line-tools-reference/kubelet/&#34;&gt;https://Kubernetes.io/zh/docs/reference/command-line-tools-reference/kubelet/&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://www.cdxy.me/?p=827&#34;&gt;https://www.cdxy.me/?p=827&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://medium.com/jorgeacetozi/kubernetes-master-components-etcd-api-server-controller-manager-and-scheduler-3a0179fc8186&#34;&gt;https://medium.com/jorgeacetozi/kubernetes-master-components-etcd-api-server-controller-manager-and-scheduler-3a0179fc8186&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/neargle/CVE-2018-6574-POC&#34;&gt;https://github.com/neargle/CVE-2018-6574-POC&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://www.serverless.com/blog/serverless-faas-vs-containers/&#34;&gt;https://www.serverless.com/blog/serverless-faas-vs-containers/&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands&#34;&gt;https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://kubernetes.io/docs/concepts/workloads/controllers/cron-jobs/&#34;&gt;https://kubernetes.io/docs/concepts/workloads/controllers/cron-jobs/&lt;/a&gt;&lt;/li&gt; &#xA;&lt;/ol&gt;&#xA;&lt;table&gt;                                                                                                                                                                                                                                                                                                                                                                                                                                                &#xA;&lt;/table&gt;</summary>
  </entry>
  <entry>
    <title>skywind3000/awesome-cheatsheets</title>
    <updated>2022-08-04T01:54:08Z</updated>
    <id>tag:github.com,2022-08-04:/skywind3000/awesome-cheatsheets</id>
    <link href="https://github.com/skywind3000/awesome-cheatsheets" rel="alternate"></link>
    <summary type="html">&lt;p&gt;è¶…çº§é€ŸæŸ¥è¡¨ - ç¼–ç¨‹è¯­è¨€ã€æ¡†æ¶å’Œå¼€å‘å·¥å…·çš„é€ŸæŸ¥è¡¨ï¼Œå•ä¸ªæ–‡ä»¶åŒ…å«ä¸€åˆ‡ä½ éœ€è¦çŸ¥é“çš„ä¸œè¥¿ âš¡&lt;/p&gt;&lt;hr&gt;&lt;blockquote&gt; &#xA; &lt;p&gt;è¶…çº§é€ŸæŸ¥è¡¨ - ç¼–ç¨‹è¯­è¨€ã€æ¡†æ¶å’Œå¼€å‘å·¥å…·çš„é€ŸæŸ¥è¡¨ï¼Œå•ä¸ªæ–‡ä»¶åŒ…å«ä¸€åˆ‡ä½ éœ€è¦çŸ¥é“çš„ä¸œè¥¿ &lt;span&gt;âš¡&lt;/span&gt;&lt;/p&gt; &#xA;&lt;/blockquote&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/skywind3000/awesome-cheatsheets&#34;&gt;&lt;img src=&#34;https://cdn.rawgit.com/sindresorhus/awesome/d7305f38d29fed78fa85652e3a63e154dd8e8829/media/badge.svg?sanitize=true&#34; alt=&#34;Awesome&#34;&gt;&lt;/a&gt; &lt;a href=&#34;https://github.com/skywind3000/awesome-cheatsheets/raw/master/LICENSE&#34;&gt;&lt;img src=&#34;https://img.shields.io/badge/license-MIT-blue.svg?sanitize=true&#34; alt=&#34;GitHub license&#34;&gt;&lt;/a&gt; &lt;a href=&#34;https://raw.githubusercontent.com/skywind3000/awesome-cheatsheets/master/#backers&#34;&gt;&lt;img src=&#34;https://opencollective.com/awesome-cheatsheets/backers/badge.svg?sanitize=true&#34; alt=&#34;Backers on Open Collective&#34;&gt;&lt;/a&gt; &lt;a href=&#34;https://raw.githubusercontent.com/skywind3000/awesome-cheatsheets/master/#sponsors&#34;&gt;&lt;img src=&#34;https://opencollective.com/awesome-cheatsheets/sponsors/badge.svg?sanitize=true&#34; alt=&#34;Sponsors on Open Collective&#34;&gt;&lt;/a&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/skywind3000/awesome-cheatsheets&#34;&gt;&lt;img src=&#34;https://raw.githubusercontent.com/skywind3000/awesome-cheatsheets/master/awesome.png&#34; alt=&#34;&#34;&gt;&lt;/a&gt; â€‹&lt;/p&gt; &#xA;&lt;h2&gt;æœ€å¥½ç”¨çš„ä¸­æ–‡é€ŸæŸ¥è¡¨ï¼ˆCheatsheetï¼‰&lt;/h2&gt; &#xA;&lt;p&gt;å½“å¹´å­¦ä¹  Linux æ—¶å°±æ˜¯é ç€ä¸€å¼ å¸¸ç”¨å‘½ä»¤å°å¡ç‰‡ï¼Œæ•²å•¥å‘½ä»¤å¿˜è®°äº†ï¼Œç»å¸¸æ‹¿èµ·æ¥çœ‹çœ‹ï¼Œåæ¥çŸ¥é“è¿™ç©æ„å„¿å«åšé€ŸæŸ¥è¡¨ï¼ˆCheatsheetï¼‰ï¼Œäºæ˜¯å¼€å§‹æœ‰æ„è¯†æ”¶é›†å’Œæ•´ç†å„ç§å¸¸ç”¨çš„é€ŸæŸ¥è¡¨ã€‚å¯¹äºå¾ˆå¤šå·¥å…·æ¥è¯´ï¼Œçœ‹ä¹¦å’Œå¤§ç¯‡å¤§ç¯‡çš„æ–‡ç« éƒ½å¤ªæµªè´¹æ—¶é—´äº†ï¼Œå…¶å®å¤§éƒ¨åˆ†æ—¶å€™ï¼Œä½ åªéœ€è¦ä¸€å¼ å°å·§çš„è¡¨æ ¼å°±å¤Ÿäº†ã€‚&lt;/p&gt; &#xA;&lt;p&gt;æœ€è¿‘çœ‹ LeCoupa çš„ &lt;a href=&#34;https://github.com/LeCoupa/awesome-cheatsheets&#34;&gt;LeCoupa/awesome-cheatsheets&lt;/a&gt; é¡¹ç›®æœ‰æ‰€å¯å‘ï¼Œæ„Ÿäºç½‘ä¸Šä¸­æ–‡èµ„æ–™åŒ®ä¹ï¼Œä¸”è´¨é‡å‚å·®ä¸é½ï¼Œå†³å®šåšä¸€ä¸ªä¸­æ–‡çš„ Cheatsheet é¡¹ç›®ï¼Œæ”¶é›†æ•´ç†å¸¸ç”¨çš„ï¼šç¼–ç¨‹è¯­è¨€ã€æ¡†æ¶å’Œå¼€å‘å·¥å…·çš„ Cheatsheet è¿›è¡Œæ”¶é›†å’Œæ•´ç†ã€‚æ•°é‡ä¸æ±‚å¤šï¼Œä½†æ¯ä¸ªè¡¨éƒ½å¾—åšå¥½åšé€ï¼Œè®©ä½ ä¸ç”¨å†ç½‘ä¸Šæ¼«æ— ç›®æ ‡çš„æœç´¢æ–‡ç« ï¼Œä¸€ä¸ªç®€å•çš„ Cheatsheet æ–‡ä»¶å°±å½»åº•æ»¡è¶³ä½ ã€‚&lt;/p&gt; &#xA;&lt;h2&gt;&lt;span&gt;âš¡&lt;/span&gt;å†…å®¹ç´¢å¼•&lt;/h2&gt; &#xA;&lt;h3&gt;&lt;span&gt;ğŸ“ƒ&lt;/span&gt;ç¼–ç¨‹è¯­è¨€&lt;/h3&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/skywind3000/awesome-cheatsheets/master/languages/bash.sh&#34;&gt;Bash&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/skywind3000/awesome-cheatsheets/master/languages/javascript.md&#34;&gt;JavaScript&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/skywind3000/awesome-cheatsheets/master/languages/golang.go&#34;&gt;Go&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/skywind3000/awesome-cheatsheets/master/languages/php.php&#34;&gt;PHP&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/skywind3000/awesome-cheatsheets/master/languages/vimscript.md&#34;&gt;VimScript&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/skywind3000/awesome-cheatsheets/master/languages/python.md&#34;&gt;Python&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/skywind3000/awesome-cheatsheets/master/languages/lua.lua&#34;&gt;Lua&lt;/a&gt;&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h3&gt;&lt;span&gt;ğŸ”§&lt;/span&gt;å¼€å‘å·¥å…·&lt;/h3&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/skywind3000/awesome-cheatsheets/master/tools/gdb.txt&#34;&gt;Gdb&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/skywind3000/awesome-cheatsheets/master/tools/adb.txt&#34;&gt;Adb&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/skywind3000/awesome-cheatsheets/master/tools/tmux.txt&#34;&gt;Tmux&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/skywind3000/awesome-cheatsheets/master/tools/git.txt&#34;&gt;Git&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/skywind3000/awesome-cheatsheets/master/tools/ffmpeg.sh&#34;&gt;FFmpeg&lt;/a&gt;&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h3&gt;&lt;span&gt;ğŸ“&lt;/span&gt;æ–‡æœ¬ç¼–è¾‘&lt;/h3&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/skywind3000/awesome-cheatsheets/master/editors/vim.txt&#34;&gt;VIM&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/skywind3000/awesome-cheatsheets/master/editors/nano.txt&#34;&gt;Nano&lt;/a&gt;&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;&lt;span&gt;ğŸ™&lt;/span&gt;æ„Ÿè°¢è´¡çŒ®&lt;/h2&gt; &#xA;&lt;p&gt;æœ¬é¡¹ç›®çš„å­˜åœ¨ï¼Œç¦»ä¸å¼€å‚ä¸è´¡çŒ®çš„ç½‘å‹ä»¬ï¼Œæ„Ÿè°¢ï¼š&lt;/p&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/skywind3000/awesome-cheatsheets/graphs/contributors&#34;&gt;&lt;img src=&#34;https://opencollective.com/awesome-cheatsheets/contributors.svg?width=890&amp;amp;button=false&#34;&gt;&lt;/a&gt;&lt;/p&gt; &#xA;&lt;p&gt;å¸Œæœ›æŠŠä½ çš„åå­—å’Œå¤´åƒåˆ—åœ¨è¿™é‡Œä¹ˆï¼Ÿæ¬¢è¿æŠŠä½ ç†Ÿæ‚‰çš„ç¼–ç¨‹è¯­è¨€ã€æ¡†æ¶å’Œå·¥å…·çš„å¸¸ç”¨çŸ¥è¯†ç‚¹åšæˆ cheatsheet ç”¨ PR å‘è¿‡æ¥ã€‚&lt;/p&gt; &#xA;&lt;!--&#xA;&#xA;### æ”¯æŒè€…ä»¬&#xA;&#xA;æ„Ÿè°¢æ”¯æŒè€… ğŸ™ [[æˆä¸ºæ”¯æŒè€…](https://opencollective.com/awesome-cheatsheets#backer)]&#xA;&#xA;&lt;a href=&#34;https://opencollective.com/awesome-cheatsheets#backers&#34; target=&#34;_blank&#34;&gt;&lt;img src=&#34;https://opencollective.com/awesome-cheatsheets/backers.svg?width=890&#34;&gt;&lt;/a&gt;&#xA;&#xA;--&gt; &#xA;&lt;p&gt;æ”¯æŒæœ¬é¡¹ç›®ï¼Œé™¤äº†è´¡çŒ®ä»£ç ï¼Œè¿˜èƒ½æˆä¸ºä¸€å sponsorï¼Œä½ çš„å›¾æ ‡ä¼šæ˜¾ç¤ºåœ¨è¿™é‡Œï¼Œç‚¹å‡»å¯ä»¥è·³è½¬åˆ°ä½ çš„ä¸»é¡µ [&lt;a href=&#34;https://opencollective.com/awesome-cheatsheets#sponsor&#34;&gt;æˆä¸ºèµåŠ©è€…&lt;/a&gt;]&lt;/p&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://opencollective.com/awesome-cheatsheets/sponsor/0/website&#34; target=&#34;_blank&#34;&gt;&lt;img src=&#34;https://opencollective.com/awesome-cheatsheets/sponsor/0/avatar.svg?sanitize=true&#34;&gt;&lt;/a&gt; &lt;a href=&#34;https://opencollective.com/awesome-cheatsheets/sponsor/1/website&#34; target=&#34;_blank&#34;&gt;&lt;img src=&#34;https://opencollective.com/awesome-cheatsheets/sponsor/1/avatar.svg?sanitize=true&#34;&gt;&lt;/a&gt; &lt;a href=&#34;https://opencollective.com/awesome-cheatsheets/sponsor/2/website&#34; target=&#34;_blank&#34;&gt;&lt;img src=&#34;https://opencollective.com/awesome-cheatsheets/sponsor/2/avatar.svg?sanitize=true&#34;&gt;&lt;/a&gt; &lt;a href=&#34;https://opencollective.com/awesome-cheatsheets/sponsor/3/website&#34; target=&#34;_blank&#34;&gt;&lt;img src=&#34;https://opencollective.com/awesome-cheatsheets/sponsor/3/avatar.svg?sanitize=true&#34;&gt;&lt;/a&gt; &lt;a href=&#34;https://opencollective.com/awesome-cheatsheets/sponsor/4/website&#34; target=&#34;_blank&#34;&gt;&lt;img src=&#34;https://opencollective.com/awesome-cheatsheets/sponsor/4/avatar.svg?sanitize=true&#34;&gt;&lt;/a&gt; &lt;a href=&#34;https://opencollective.com/awesome-cheatsheets/sponsor/5/website&#34; target=&#34;_blank&#34;&gt;&lt;img src=&#34;https://opencollective.com/awesome-cheatsheets/sponsor/5/avatar.svg?sanitize=true&#34;&gt;&lt;/a&gt; &lt;a href=&#34;https://opencollective.com/awesome-cheatsheets/sponsor/6/website&#34; target=&#34;_blank&#34;&gt;&lt;img src=&#34;https://opencollective.com/awesome-cheatsheets/sponsor/6/avatar.svg?sanitize=true&#34;&gt;&lt;/a&gt; &lt;a href=&#34;https://opencollective.com/awesome-cheatsheets/sponsor/7/website&#34; target=&#34;_blank&#34;&gt;&lt;img src=&#34;https://opencollective.com/awesome-cheatsheets/sponsor/7/avatar.svg?sanitize=true&#34;&gt;&lt;/a&gt; &lt;a href=&#34;https://opencollective.com/awesome-cheatsheets/sponsor/8/website&#34; target=&#34;_blank&#34;&gt;&lt;img src=&#34;https://opencollective.com/awesome-cheatsheets/sponsor/8/avatar.svg?sanitize=true&#34;&gt;&lt;/a&gt; &lt;a href=&#34;https://opencollective.com/awesome-cheatsheets/sponsor/9/website&#34; target=&#34;_blank&#34;&gt;&lt;img src=&#34;https://opencollective.com/awesome-cheatsheets/sponsor/9/avatar.svg?sanitize=true&#34;&gt;&lt;/a&gt;&lt;/p&gt;</summary>
  </entry>
</feed>