<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom">
  <title>GitHub Shell Daily Trending</title>
  <id>http://mshibanami.github.io/GitHubTrendingRSS</id>
  <updated>2023-05-26T01:43:55Z</updated>
  <subtitle>Daily Trending of Shell in GitHub</subtitle>
  <link href="http://mshibanami.github.io/GitHubTrendingRSS"></link>
  <entry>
    <title>patte/fly-tailscale-exit</title>
    <updated>2023-05-26T01:43:55Z</updated>
    <id>tag:github.com,2023-05-26:/patte/fly-tailscale-exit</id>
    <link href="https://github.com/patte/fly-tailscale-exit" rel="alternate"></link>
    <summary type="html">&lt;p&gt;Run a VPN with global exit nodes with fly.io, tailscale and github!&lt;/p&gt;&lt;hr&gt;&lt;h2&gt;fly-tailscale-exit&lt;/h2&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://github.com/patte/fly-tailscale-exit/actions/workflows/auto-update-tailscale.yml/badge.svg?sanitize=true&#34; alt=&#34;Action Status: auto update tailscale version&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;This repo shows how to run tailscale on fly, specifically to run exit nodes. If you want to add tailscale to a fly.io application, follow this guide instead: &lt;a href=&#34;https://tailscale.com/kb/1132/flydotio/&#34;&gt;https://tailscale.com/kb/1132/flydotio/&lt;/a&gt;&lt;/p&gt; &#xA;&lt;p&gt;Did you ever need a wormhole to another place in the internet? But you didn&#39;t trust the shady VPN providers with ads all over YouTube? Well, why not run it &#34;yourself&#34;? This guide helps you to set up a globally distributed and easily sharable VPN service for you and your friends.&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Instantly scale up or down nodes around the planet&lt;/li&gt; &#xA; &lt;li&gt;Choose where your traffic exits to the internet from &lt;a href=&#34;https://fly.io/docs/reference/regions/&#34;&gt;30+ locations&lt;/a&gt;.&lt;/li&gt; &#xA; &lt;li&gt;Enjoy solid connections worldwide&lt;/li&gt; &#xA; &lt;li&gt;Bonus: the setup and the first 160GB of traffic each month are gratis. &lt;em&gt;Update&lt;/em&gt;: a dedicated IPv4 to enable P2P communication (not via DERP) now &lt;a href=&#34;https://fly.io/docs/about/pricing/#anycast-ip-addresses&#34;&gt;costs $2/mo&lt;/a&gt;&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;Sounds too good to be true. Well that&#39;s probably because it is. I compiled this setup as an excercise while exploring the capabilities of fly.io and tailscale. This is probably not what you should use as a serious VPN replacement. Go to one of the few trustworthy providers. For the reasons why this is a bad idea, read &lt;a href=&#34;https://raw.githubusercontent.com/patte/fly-tailscale-exit/main/#user-content-why-this-probably-is-a-bad-idea&#34;&gt;below&lt;/a&gt;.&lt;/p&gt; &#xA;&lt;p&gt;Checkout gbraad&#39;s fork if you want to include squid, dante and gitpod &lt;a href=&#34;https://github.com/spotsnel/tailscale-tailwings&#34;&gt;https://github.com/spotsnel/tailscale-tailwings&lt;/a&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://user-images.githubusercontent.com/3500621/129452513-52133b60-02b8-4ec8-9605-0a6e3a089f9e.png&#34; alt=&#34;Screenshot&#34;&gt;&lt;/p&gt; &#xA;&lt;details&gt; &#xA; &lt;summary&gt;Video of tailscale on iOS changing exit nodes.&lt;/summary&gt; &#xA; &lt;br&gt; https://user-images.githubusercontent.com/3500621/129452512-616e7642-5a03-4037-9dc1-f6be96ca1e30.mp4 &#xA;&lt;/details&gt; &#xA;&lt;h2&gt;Setup&lt;/h2&gt; &#xA;&lt;h4&gt;1. Have a GitHub account&lt;/h4&gt; &#xA;&lt;p&gt;Create a GitHub account if you don&#39;t have one already: &lt;a href=&#34;https://github.com/signup&#34;&gt;https://github.com/signup&lt;/a&gt;&lt;/p&gt; &#xA;&lt;h4&gt;2. Have a GitHub organization&lt;/h4&gt; &#xA;&lt;p&gt;Let&#39;s create a new github org for your network: &lt;a href=&#34;https://github.com/organizations/plan&#34;&gt;https://github.com/organizations/plan&lt;/a&gt;&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Choose a name for your network: eg. &lt;code&gt;banana-bender-net&lt;/code&gt;&lt;/li&gt; &#xA; &lt;li&gt;Plan: free&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h4&gt;3. Have tailscale&lt;/h4&gt; &#xA;&lt;p&gt;Install tailscale on your machine(s):&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Instal it on your notebook and mobile phone: &lt;a href=&#34;https://tailscale.com/download&#34;&gt;https://tailscale.com/download&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;Login with github, choose the github organization created before (eg. &lt;code&gt;banana-bender-net&lt;/code&gt;).&lt;/li&gt; &#xA; &lt;li&gt;Check your network and keep this tab around: &lt;a href=&#34;https://login.tailscale.com/admin/machines&#34;&gt;https://login.tailscale.com/admin/machines&lt;/a&gt;&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h4&gt;4. Setup DNS in tailscale&lt;/h4&gt; &#xA;&lt;p&gt;In order to use tailscale for exit traffic you need to configure a public DNS. Go to &lt;a href=&#34;https://login.tailscale.com/admin/dns&#34;&gt;https://login.tailscale.com/admin/dns&lt;/a&gt; and add the nameservers of your choice (eg. cloudflare: &lt;code&gt;1.1.1.1, 1.0.0.1, 2606:4700:4700::1111, 2606:4700:4700::1001&lt;/code&gt;)&lt;/p&gt; &#xA;&lt;h4&gt;5. Create a tailscale auth key&lt;/h4&gt; &#xA;&lt;p&gt;Create a reusable auth key in tailscale: &lt;a href=&#34;https://login.tailscale.com/admin/settings/authkeys&#34;&gt;https://login.tailscale.com/admin/settings/authkeys&lt;/a&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;em&gt;A ephemeral key would be better for our use case, but it&#39;s restricted to IPv6 only by tailscale, which doesn&#39;t work so well as a VPN exit node.&lt;/em&gt;&lt;/p&gt; &#xA;&lt;h4&gt;6. Have a fly.io account and cli&lt;/h4&gt; &#xA;&lt;p&gt;Install the fly-cli to your machine and login with github: &lt;a href=&#34;https://fly.io/docs/hands-on/installing/&#34;&gt;https://fly.io/docs/hands-on/installing/&lt;/a&gt;&lt;/p&gt; &#xA;&lt;h4&gt;7. Have a fly.io organization&lt;/h4&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Create an org on fly (technically there is no requirement to name it the same). &lt;code&gt;flyctl orgs create banana-bender-net&lt;/code&gt;&lt;/li&gt; &#xA; &lt;li&gt;Go and enter your credit card at &lt;a href=&#34;https://fly.io/organizations&#34;&gt;https://fly.io/organizations/banana-bender-net&lt;/a&gt;. It&#39;s only going to be charged if you use more than the &lt;a href=&#34;https://fly.io/docs/about/pricing/&#34;&gt;free resources&lt;/a&gt;.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h4&gt;8. Setup fly&lt;/h4&gt; &#xA;&lt;p&gt;Give the app the name you want. Don&#39;t deploy yet.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;git clone https://github.com/patte/fly-tailscale-exit.git&#xA;&#xA;cd fly-tailscale-exit&#xA;&#xA;flyctl launch&#xA;&#xA;? fly.toml file already exits would you like copy its configuration : (yes/no) yes&#xA;&#xA;? App Name (leave blank to use an auto-generated name) tailwings&#xA;&#xA;? Select organization: banana-bender-net-test (banana-bender-net-test)&#xA;&#xA;? would you like to deploy postgressql for the app: (yes/no) no&#xA;&#xA;? would you like to deploy now : (yes/no) no&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h4&gt;9. Set the tailscale auth key in fly&lt;/h4&gt; &#xA;&lt;pre&gt;&lt;code&gt;flyctl secrets set TAILSCALE_AUTH_KEY=[see step 4]&#xA;Secrets are staged for the first deployment&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h4&gt;10 Deploy (and IP and scale)&lt;/h4&gt; &#xA;&lt;pre&gt;&lt;code&gt;flyctl  deploy&#xA;? Would you like to allocate a dedicated ipv4 address now? Yes&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;&lt;em&gt;Update&lt;/em&gt;: fly.io does &lt;a href=&#34;https://community.fly.io/t/announcement-shared-anycast-ipv4/9384&#34;&gt;not automatically allocate a dedicated IPv4 per app on the first deployment anymore&lt;/a&gt;. You want a dedicated IPv4 to be able to expose the UDP port on it and thus enable peer-to-peer connections (not via tailscale DERP). You have three options:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Say yes during the initial deploy.&lt;/li&gt; &#xA; &lt;li&gt;Run the command &lt;code&gt;flyctl ips allocate-v4&lt;/code&gt; to add a dedicated IPv4 later&lt;/li&gt; &#xA; &lt;li&gt;Run &lt;code&gt;flyctl ips allocate-v6&lt;/code&gt;. Direct connections to the node will only work if your local machine has a global IPv6. (not tested)&lt;/li&gt; &#xA; &lt;li&gt;Remove the &lt;code&gt;services.ports&lt;/code&gt; section from fly.toml. This has the disadvantage that your node is never going to be directly reachable and all your traffic is routed via tailscale DERP servers.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;At the time of writing fly deploys two machines per default. For this setup you probably want 1 machine per region. Run the following to remove the second machine:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;flyctl scale count 1&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h4&gt;11. Enable exit node in tailscale&lt;/h4&gt; &#xA;&lt;p&gt;Wait for the node to appear in the tailscale machine overview. Enable exit routing for the nodes &lt;a href=&#34;https://login.tailscale.com/admin/machines&#34;&gt;https://login.tailscale.com/admin/machines&lt;/a&gt; (see &lt;a href=&#34;https://tailscale.com/kb/1103/exit-nodes/#step-2-allow-the-exit-node-from-the-admin-panel&#34;&gt;tailscale docs&lt;/a&gt; on how to do it)&lt;/p&gt; &#xA;&lt;h4&gt;12. Connect with your local machine or smartphone&lt;/h4&gt; &#xA;&lt;p&gt;On iOS, choose &#34;use exit node&#34; and there you go.&lt;/p&gt; &#xA;&lt;p&gt;On linux, just run&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;tailscale up --use-exit-node=fly-fra&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h4&gt;13. Regions&lt;/h4&gt; &#xA;&lt;p&gt;To add or remove regions just type:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;flyctl scale count 1 --region hkg&#xA;flyctl scale count 1 --region fra&#xA;&#xA;or:&#xA;flyctl scale count 3 --region hkg,fra,ams&#xA;&#xA;or remove a machine explicitly:&#xA;fly status&#xA;fly machine stop $(machine_id)&#xA;fly machine destroy $(machine_id)&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Wait for the node to appear in tailscale, confirm it to be a legit exit node (step 11), choose it in your client boom! In less than 5 minutes you access the internet from another place.&lt;br&gt; Note: See the [fly docs about scaling] for further info: &lt;a href=&#34;https://fly.io/docs/apps/scale-count/&#34;&gt;https://fly.io/docs/apps/scale-count/&lt;/a&gt; &lt;br&gt; Note: Scaling up also reinitializes the existing nodes. Just use the newly created one and delete the old.&lt;br&gt; Note: It seems that not all fly ips are correctly geo located or that not all fly regions have their own exit routers and some use another for egress traffic. This needs further investigation. See this &lt;a href=&#34;https://news.ycombinator.com/item?id=36064854&#34;&gt;HN discussion&lt;/a&gt;&amp;nbsp;about it.&lt;/p&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://user-images.githubusercontent.com/3500621/129452587-7ff90cd2-5e6d-4e39-9a91-548c498636f5.mp4&#34;&gt;https://user-images.githubusercontent.com/3500621/129452587-7ff90cd2-5e6d-4e39-9a91-548c498636f5.mp4&lt;/a&gt;&lt;/p&gt; &#xA;&lt;h4&gt;14. halt&lt;/h4&gt; &#xA;&lt;p&gt;In case you want to stop:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;sudo systemctl stop tailscaled&#xA;flyctl suspend&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h4&gt;15. remove&lt;/h4&gt; &#xA;&lt;p&gt;In case you want to tear it down:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;flyctl orgs delete banana-bender-net&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;I think there is no way to delete a tailscale org.&lt;/p&gt; &#xA;&lt;h2&gt;Invite your friends&lt;/h2&gt; &#xA;&lt;p&gt;All you need to do to invite friends into your network is to invite them to the github organization, have them install tailscale and login with github. They immediately see the available exit nodes and can use whichever they please. Easiest VPN setup ever!!&lt;/p&gt; &#xA;&lt;h2&gt;Why this probably is a bad idea&lt;/h2&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt; &lt;p&gt;Dirty egress traffic for fly.io.&lt;br&gt; Usually traffic exiting fly machines is upstream API traffic not dirty users surfing the web. If too many people do this and use it for scraping or worse fly&#39;s traffic reputation might suffer.&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;Increased traffic on tailscale derp servers.&lt;br&gt; Usually tailscale is used for internal networks. If everybody uses this as their everyday VPN the traffic the derp servers might increase beyond what&#39;s forseen.&lt;/p&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;Tailscale teams is supposed to cost money.&lt;br&gt; &lt;del&gt;Tailscale lists teams to &lt;a href=&#34;https://tailscale.com/pricing/&#34;&gt;cost $5 per user per month&lt;/a&gt; but creating and using a github org in the way described above doesn&#39;t count as team but as personal account. I didn&#39;t find a way to upgrade an org created this way into a paying org. Please let me pay ;)&lt;/del&gt; It seems you can pay at tailscale for a github team now, so go there and do that if you use this together with others: &lt;a href=&#34;https://login.tailscale.com/admin/settings/billing/plans&#34;&gt;https://login.tailscale.com/admin/settings/billing/plans&lt;/a&gt; This makes this VPN approach being fully paid.&lt;/p&gt; &lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;blockquote&gt; &#xA; &lt;p&gt;You’ll never be stopped from spinning up more devices or subnet routers, or trying out ACL rules. We encourage you to play around, find what works best for you, and update your payment settings after-the-fact.&lt;/p&gt; &#xA;&lt;/blockquote&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://tailscale.com/blog/2021-06-new-pricing/&#34;&gt;source&lt;/a&gt; Kudos to tailscale for using soft-limit, IMHO this makes for a great user experience and I&#39;d expect it to simplify some code parts as well.&lt;/p&gt; &#xA;&lt;h2&gt;Love Letter&lt;/h2&gt; &#xA;&lt;p&gt;Just enjoy the magnificence, the crazyness of the house of cards that the modern cloud is. I seriously enjoyed setting this up with fly and tailscale. I think both are mind blowingly awesome.&lt;/p&gt; &#xA;&lt;p&gt;I mean tailscale... just look at it. The already awesome wireguard set up to a &lt;a href=&#34;https://tailscale.com/blog/how-tailscale-works/&#34;&gt;mesh&lt;/a&gt; by an open-source &lt;a href=&#34;https://github.com/tailscale/tailscale&#34;&gt;client&lt;/a&gt; that does &lt;a href=&#34;https://tailscale.com/blog/how-nat-traversal-works/&#34;&gt;all sorts of NAT wizardry&lt;/a&gt;, provided servers to route through if P2P doesn&#39;t work and a nice web-ui. It&#39;s just great. If I could wish for anything it would be to be able to run the server part myself (I know about &lt;a href=&#34;https://github.com/juanfont/headscale&#34;&gt;headscale&lt;/a&gt; and I&#39;ll give it a try next) . Not because I don&#39;t want to pay the company money, the contrary is the case, but because I just don&#39;t feel comfortable having my (bare-metal) machines trusting a network interface for which I can&#39;t fully control who is connected to the other end. Tailscale could auth a machine into my network and I&#39;d have no possibility to reliably find out.&lt;/p&gt; &#xA;&lt;p&gt;What gets me most about fly is the approach to turn Dockerfiles into microVMs. Imagine docker but with &lt;code&gt;--privileged --net=host&lt;/code&gt;. This is what makes this example so simple in comparison to &lt;a href=&#34;https://tailscale.com/kb/guides/&#34;&gt;other cloud providers&lt;/a&gt;: Just a neat Dockerfile and start script but you can use tailscale as if it would run on a real linux host, because it does. No need to &lt;a href=&#34;https://tailscale.com/kb/1107/heroku/&#34;&gt;run tailscaled with&lt;/a&gt; &lt;code&gt;--tun=userspace-networking --socks5-server=localhost:1055&lt;/code&gt;, the tailscale interface get&#39;s added to the VM and everything just works. This includes that the &lt;a href=&#34;https://fly.io/docs/reference/metrics/&#34;&gt;metrics gathered by fly&lt;/a&gt; automatically include the &lt;code&gt;tailscale0&lt;/code&gt; interface and you can view it&#39;s traffic chart in grafana easily.&lt;/p&gt; &#xA;&lt;p&gt;&lt;img src=&#34;https://user-images.githubusercontent.com/3500621/129463128-0572ced3-13b7-4908-8477-6bb04049a658.png&#34; alt=&#34;Screenshot from 2021-08-14 19-17-34&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;This plus anycast, interapp vpn, persistent storage, locations all over the world, an open-source &lt;a href=&#34;https://github.com/superfly/flyctl&#34;&gt;client&lt;/a&gt; and being a chatty crew with the mindset &lt;a href=&#34;https://fly.io/blog/ssh-and-user-mode-ip-wireguard/&#34;&gt;&#34;Go Nuts&#34;&lt;/a&gt; have me left in awe.&lt;/p&gt;</summary>
  </entry>
  <entry>
    <title>bl4ck44/Nextcloud</title>
    <updated>2023-05-26T01:43:55Z</updated>
    <id>tag:github.com,2023-05-26:/bl4ck44/Nextcloud</id>
    <link href="https://github.com/bl4ck44/Nextcloud" rel="alternate"></link>
    <summary type="html">&lt;p&gt;Script en bash para configurar tu propia nube con nextcloud.&lt;/p&gt;&lt;hr&gt;&lt;h1&gt;Nextcloud&lt;/h1&gt; &#xA;&lt;p align=&#34;center&#34;&gt; &lt;img src=&#34;https://raw.githubusercontent.com/bl4ck44/Nextcloud/master/Logotipo.png&#34; width=&#34;540px&#34; height=&#34;350px&#34;&gt; &lt;/p&gt; &#xA;&lt;p&gt;Nextcloud es una plataforma de almacenamiento y colaboración de código abierto que permite a los usuarios gestionar y compartir archivos, colaborar en documentos, organizar calendarios y tareas, y más. Desarrollado inicialmente como un fork de ownCloud, Nextcloud se ha convertido en una solución popular y confiable utilizada por individuos, organizaciones y empresas para satisfacer sus necesidades de gestión de datos en la nube&lt;/p&gt; &#xA;&lt;p&gt;Con este script podras configurar tu porpia nube.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;git clone https://github.com/bl4ck44/Nextcloud.git&#xA;&#xA;cd Nextcloud&#xA;&#xA;chmod +x setup.sh&#xA;&#xA;sudo bash setup.sh&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;br&gt; &#xA;&lt;p&gt;&lt;strong&gt;NOTA:&lt;/strong&gt; En el script de configuracion puedes editar el usuario y contraseña de la base de datos.&lt;/p&gt; &#xA;&lt;p align=&#34;center&#34;&gt; &lt;img src=&#34;https://raw.githubusercontent.com/bl4ck44/Nextcloud/master/Img/muestra.png&#34;&gt; &lt;/p&gt; &#xA;&lt;p&gt;Para cambiar la contraseña del usuario root:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;mysql -e &#34;ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED WITH mysql_native_password by &#39;Password444@&#39;;&#34;&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Aqui creamos el usuario, contraseña y nombre de la base de datos:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;mysql -u root -p -e &#34;CREATE USER &#39;nextcloud&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;Password444@&#39;;&#34;&#xA;mysql -u root -p -e &#34;CREATE DATABASE nextcloud;&#34;&#xA;mysql -u root -p -e &#34;GRANT ALL PRIVILEGES ON nextcloud.* TO &#39;nextcloud&#39;@&#39;localhost&#39;;&#34;&#xA;mysql -u root -p -e &#34;FLUSH PRIVILEGES;&#34;&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;&lt;strong&gt;NOTA:&lt;/strong&gt; Te pedirá varias veces la contraseña deberes ingresar la contraseña que cambiaste en el archivo de configuración.&lt;/p&gt;</summary>
  </entry>
</feed>