<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom">
  <title>GitHub Ruby Daily Trending</title>
  <id>http://mshibanami.github.io/GitHubTrendingRSS</id>
  <updated>2022-09-06T01:38:00Z</updated>
  <subtitle>Daily Trending of Ruby in GitHub</subtitle>
  <link href="http://mshibanami.github.io/GitHubTrendingRSS"></link>
  <entry>
    <title>elastic/ansible-beats</title>
    <updated>2022-09-06T01:38:00Z</updated>
    <id>tag:github.com,2022-09-06:/elastic/ansible-beats</id>
    <link href="https://github.com/elastic/ansible-beats" rel="alternate"></link>
    <summary type="html">&lt;p&gt;Ansible Beats Role&lt;/p&gt;&lt;hr&gt;&lt;h1&gt;ARCHIVED&lt;/h1&gt; &#xA;&lt;p&gt;This project is no longer maintained. For alternative getting started experiences, you may want to try one of these options:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Start a &lt;a href=&#34;https://www.elastic.co/cloud/elasticsearch-service/signup&#34;&gt;free trial on Elastic Cloud&lt;/a&gt;, our hosted service.&lt;/li&gt; &#xA; &lt;li&gt;Take a look at &lt;a href=&#34;https://elastic.co/guide/en/cloud-on-k8s/current/k8s-quickstart.html&#34;&gt;Elastic Cloud on Kubernetes (ECK)&lt;/a&gt; for launching the stack via Kubernetes.&lt;/li&gt; &#xA; &lt;li&gt;Read our &lt;a href=&#34;https://www.elastic.co/guide/en/elastic-stack-get-started/current/get-started-docker.html&#34;&gt;Running the Elastic Stack on Docker&lt;/a&gt; guide.&lt;/li&gt; &#xA; &lt;li&gt;Take a look at the &lt;a href=&#34;https://github.com/elastic/terraform-provider-elasticstack&#34;&gt;Elastic Stack Terraform provider.&lt;/a&gt;&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h1&gt;ansible-beats&lt;/h1&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://devops-ci.elastic.co/job/elastic+ansible-beats+main/&#34;&gt;&lt;img src=&#34;https://img.shields.io/jenkins/s/https/devops-ci.elastic.co/job/elastic+ansible-beats+main.svg?sanitize=true&#34; alt=&#34;Build Status&#34;&gt;&lt;/a&gt; &lt;a href=&#34;https://galaxy.ansible.com/elastic/beats/&#34;&gt;&lt;img src=&#34;https://img.shields.io/badge/ansible--galaxy-elastic.beats-blue.svg?sanitize=true&#34; alt=&#34;Ansible Galaxy&#34;&gt;&lt;/a&gt;&lt;/p&gt; &#xA;&lt;p&gt;This role provides a generic means of installing Elastic supported Beats&lt;/p&gt; &#xA;&lt;p&gt;&lt;strong&gt;Tested Beats&lt;/strong&gt;&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Filebeat&lt;/li&gt; &#xA; &lt;li&gt;MetricBeat (TopBeat in 1.x)&lt;/li&gt; &#xA; &lt;li&gt;Packetbeat&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;&lt;strong&gt;Tested Versions&lt;/strong&gt;&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;7.x&lt;/li&gt; &#xA; &lt;li&gt;6.x&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;&lt;strong&gt;Tested Platforms&lt;/strong&gt;&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Ubuntu 16.04&lt;/li&gt; &#xA; &lt;li&gt;Ubuntu 18.04&lt;/li&gt; &#xA; &lt;li&gt;Ubuntu 20.04&lt;/li&gt; &#xA; &lt;li&gt;Debian 8&lt;/li&gt; &#xA; &lt;li&gt;Debian 9&lt;/li&gt; &#xA; &lt;li&gt;Debian 10&lt;/li&gt; &#xA; &lt;li&gt;CentOS 7&lt;/li&gt; &#xA; &lt;li&gt;Amazon Linux 2&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;Usage&lt;/h2&gt; &#xA;&lt;p&gt;Create your Ansible playbook with your own tasks, and include the role beats. You will have to have this repository accessible within the context of playbook.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;ansible-galaxy install elastic.beats,v7.17.0&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Then create your playbook yaml adding the role beats. The application of the beats role results in the installation of a node on a host.&lt;/p&gt; &#xA;&lt;p&gt;The simplest configuration therefore consists of:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;  hosts: localhost&#xA;  roles:&#xA;    - role: elastic.beats&#xA;  vars:&#xA;    beats_version: 7.17.0&#xA;    beat: filebeat&#xA;    beat_conf:&#xA;      filebeat:&#xA;        inputs:&#xA;          - type: log&#xA;            enabled: true&#xA;            paths:&#xA;              - /var/log/*.log&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;The above installs Filebeat 7.17.0 on the hosts &#39;localhost&#39;.&lt;/p&gt; &#xA;&lt;p&gt;&lt;strong&gt;Notes&lt;/strong&gt;:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Beats default version is described in &lt;a href=&#34;https://github.com/elastic/ansible-beats/raw/main/defaults/main.yml#L4&#34;&gt;&lt;code&gt;beats_version&lt;/code&gt;&lt;/a&gt;. You can override this variable in your playbook to install another version. While we are testing this role only with one 7.x and one 6.x version (respectively &lt;a href=&#34;https://github.com/elastic/ansible-beats/raw/main/defaults/main.yml#L4&#34;&gt;7.17.0&lt;/a&gt; and &lt;a href=&#34;https://github.com/elastic/ansible-beats/raw/main/test/integration/standard-6x.yml#L7&#34;&gt;6.8.23&lt;/a&gt; at the time of writing), this role should work with others version also in most cases.&lt;/li&gt; &#xA; &lt;li&gt;Beat product is described in &lt;code&gt;beat&lt;/code&gt; variable. While currently tested Beats are Filebeat, Metricbeat &amp;amp; Packetbeat, this role should work also with other member of &lt;a href=&#34;https://www.elastic.co/products/beats&#34;&gt;The Beats Family&lt;/a&gt; in most cases.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;Testing&lt;/h2&gt; &#xA;&lt;p&gt;This playbook uses &lt;a href=&#34;https://kitchen.ci/&#34;&gt;Kitchen&lt;/a&gt; for CI and local testing.&lt;/p&gt; &#xA;&lt;h3&gt;Requirements&lt;/h3&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Ruby&lt;/li&gt; &#xA; &lt;li&gt;Bundler&lt;/li&gt; &#xA; &lt;li&gt;Docker&lt;/li&gt; &#xA; &lt;li&gt;Make&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h3&gt;Running the tests&lt;/h3&gt; &#xA;&lt;p&gt;To converge an Ubuntu 18.04 host&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ make converge&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;To run the tests&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ make verify&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;To list all of the different test suits&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ make list&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;The default test suite is Ubuntu 18.04. If you want to test another suite you can override this with the &lt;code&gt;PATTERN&lt;/code&gt; variable&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ make converge PATTERN=standard-centos-7&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;The &lt;code&gt;PATTERN&lt;/code&gt; is a kitchen pattern which can match multiple suites. To run all tests for CentOS&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ make converge PATTERN=centos-7&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;When you are finished testing you can clean up everything with&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ make destroy-all&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h3&gt;Basic Beats configuration&lt;/h3&gt; &#xA;&lt;p&gt;All Beats configuration parameters are supported. This is achieved using a configuration map parameter &lt;code&gt;beat_conf&lt;/code&gt; which is serialized into the &lt;code&gt;${beat}.yml&lt;/code&gt; file. The use of a map ensures the Ansible playbook does not need to be updated to reflect new/deprecated/plugin configuration parameters.&lt;/p&gt; &#xA;&lt;p&gt;In addition to the &lt;code&gt;beat_conf&lt;/code&gt; map, several other parameters are supported for additional functions e.g. script installation. These can be found in the role&#39;s &lt;code&gt;defaults/main.yml&lt;/code&gt; file.&lt;/p&gt; &#xA;&lt;p&gt;The following illustrates applying configuration parameters to Packetbeat instance.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;- name: Example playbook for installing packetbeat&#xA;  hosts: localhost&#xA;  roles:&#xA;    - { role: beats, beat: &#34;packetbeat&#34;,&#xA;        beat_conf: {&#xA;          &#34;interfaces&#34;: {&#34;device&#34;:&#34;any&#34;},&#xA;          &#34;protocols&#34;: {&#xA;            &#34;dns&#34;: {&#xA;              &#34;ports&#34;: [53],&#xA;              &#34;include_authorities&#34;:true&#xA;            },&#xA;            &#34;http&#34;: {&#xA;              &#34;ports&#34;: [80, 8080, 8000, 5000, 8002]&#xA;            },&#xA;            &#34;memcache&#34;: {&#xA;              &#34;ports&#34;: [11211]&#xA;            },&#xA;            &#34;mysql&#34;: {&#xA;              &#34;ports&#34;: [3306]&#xA;            },&#xA;            &#34;pgsql&#34;: {&#xA;              &#34;ports&#34;: [5432]&#xA;            },&#xA;            &#34;redis&#34;: {&#xA;              &#34;ports&#34;: [6379]&#xA;            },&#xA;            &#34;thrift&#34;: {&#xA;              &#34;ports&#34;: [9090]&#xA;            },&#xA;            &#34;mongodb&#34;: {&#xA;              &#34;ports&#34;: [27017]&#xA;            }&#xA;          }&#xA;        },&#xA;        output_conf : {&#xA;          &#34;elasticsearch&#34;: {&#xA;            &#34;hosts&#34;: [&#34;localhost:9200&#34;]&#xA;          }&#xA;        }&#xA;    }&#xA;  vars:&#xA;    use_repository: &#34;true&#34;&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h3&gt;Additional Configuration&lt;/h3&gt; &#xA;&lt;p&gt;Supported variables are as follows:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;strong&gt;beat&lt;/strong&gt; (&lt;em&gt;MANDATORY&lt;/em&gt;): Beat product. Supported values are: &#34;filebeat&#34;, &#34;metricbeat&#34; &amp;amp; &#34;packetbeat&#34; (others beats from &lt;a href=&#34;https://www.elastic.co/products/beats&#34;&gt;The Beats Family&lt;/a&gt; should work in most cases but aren&#39;t currently tested).&lt;/li&gt; &#xA; &lt;li&gt;&lt;strong&gt;beat_conf&lt;/strong&gt; (&lt;em&gt;MANDATORY&lt;/em&gt;): Beat Configuration. Should be defined as a map.&lt;/li&gt; &#xA; &lt;li&gt;&lt;strong&gt;beats_version&lt;/strong&gt; (&lt;em&gt;Defaults to &lt;code&gt;7.17.0&lt;/code&gt;&lt;/em&gt;): Beats version.&lt;/li&gt; &#xA; &lt;li&gt;&lt;strong&gt;version_lock&lt;/strong&gt; (&lt;em&gt;Defaults to &lt;code&gt;false&lt;/code&gt;&lt;/em&gt;): Locks the installed version if set to true, thus preventing other processes from updating. This will not impact the roles ability to update the beat on subsequent runs (it unlocks and re-locks if required).&lt;/li&gt; &#xA; &lt;li&gt;&lt;strong&gt;use_repository&lt;/strong&gt; (&lt;em&gt;Defaults to &lt;code&gt;true&lt;/code&gt;&lt;/em&gt;): Use elastic repo for yum or apt if true. If false, a custom custom_package_url must be provided.&lt;/li&gt; &#xA; &lt;li&gt;&lt;strong&gt;beats_add_repository&lt;/strong&gt; (&lt;em&gt;Defaults to &lt;code&gt;{use_repository}&lt;/code&gt;&lt;/em&gt;): Install elastic repo for yum or apt if true. If false, the present repositories will be used. Useful if you already have beats packages in your repo.&lt;/li&gt; &#xA; &lt;li&gt;&lt;strong&gt;start_service&lt;/strong&gt; (&lt;em&gt;Defaults to &lt;code&gt;true&lt;/code&gt;&lt;/em&gt;): service will be started if true, false otherwise.&lt;/li&gt; &#xA; &lt;li&gt;&lt;strong&gt;restart_on_change&lt;/strong&gt; (&lt;em&gt;Defaults to &lt;code&gt;true&lt;/code&gt;&lt;/em&gt;): Changes to configuration or installed versions, will result in a restart if true.&lt;/li&gt; &#xA; &lt;li&gt;&lt;strong&gt;daemon_args&lt;/strong&gt; (&lt;em&gt;Applicable to version 1.x of beats&lt;/em&gt;): Allows run time params to be passed to beats.&lt;/li&gt; &#xA; &lt;li&gt;&lt;strong&gt;logging_conf&lt;/strong&gt; (&lt;em&gt;Defaults to &lt;code&gt;{&#34;files&#34;:{&#34;rotateeverybytes&#34;:10485760}}&lt;/code&gt;&lt;/em&gt;): Logging configuration. Should be defined as a map. Map is serialized into logging section of beat config.&lt;/li&gt; &#xA; &lt;li&gt;&lt;strong&gt;shipper_conf&lt;/strong&gt; (&lt;em&gt;Applicable to version 1.x of beats&lt;/em&gt;): Shipper configuration. Should be defined as a map . Map is serialized into shipper section of beat config.&lt;/li&gt; &#xA; &lt;li&gt;&lt;strong&gt;output_conf&lt;/strong&gt; (&lt;em&gt;Defaults to &lt;code&gt;{&#34;elasticsearch&#34;:{&#34;hosts&#34;:[&#34;localhost:9200&#34;]}}&lt;/code&gt;&lt;/em&gt;): Output configuration. Map is serialized into output section of beat config.&lt;/li&gt; &#xA; &lt;li&gt;&lt;strong&gt;beats_pid_dir&lt;/strong&gt; (&lt;em&gt;Defaults to &lt;code&gt;/var/run&lt;/code&gt;&lt;/em&gt;): Location of beats pid file.&lt;/li&gt; &#xA; &lt;li&gt;&lt;strong&gt;beats_conf_dir&lt;/strong&gt; (&lt;em&gt;Defaults to &lt;code&gt;/etc/{beat}&lt;/code&gt;&lt;/em&gt;): Location of conf directory for beats configuration file.&lt;/li&gt; &#xA; &lt;li&gt;&lt;strong&gt;default_ilm_policy&lt;/strong&gt; (&lt;em&gt;Defaults undefined&lt;/em&gt;): local path to default policy if any custom one is defined&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h3&gt;Focus on ILM&lt;/h3&gt; &#xA;&lt;p&gt;By default, &lt;em&gt;beat&lt;/em&gt; will create a default policy defined as part of the beat being deployed. You can override default ILM setup by defining ILM conf as part of &lt;em&gt;beat_conf&lt;/em&gt;. For example:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;- role: ansible-beats&#xA;  beat: metricbeat&#xA;  beat_conf:&#xA;    setup:&#xA;      ilm:&#xA;        policy_file: /etc/filebeat/policies/my-default-metricbeat.json&#xA;        overwrite: true&#xA;      metricbeat.modules:&#xA;        ...&#xA;  default_ilm_policy: conf/my-default-metricbeat.json&#xA;  become: yes&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;This will copy &lt;em&gt;conf/my-default-filebeat.json&lt;/em&gt; to &lt;em&gt;/etc/filebeat/policies/my-default-filebeat.json&lt;/em&gt;. This policy will be used as default one for this beat.&lt;/p&gt; &#xA;&lt;h2&gt;License&lt;/h2&gt; &#xA;&lt;p&gt;Apache 2.0&lt;/p&gt; &#xA;&lt;h2&gt;Limitations&lt;/h2&gt; &#xA;&lt;p&gt;Multiple instances of the same beat cannot be installed on the same target server.&lt;/p&gt; &#xA;&lt;h2&gt;Questions on Usage&lt;/h2&gt; &#xA;&lt;p&gt;We welcome questions on how to use the role. However, in order to keep the GitHub issues list focused on &#34;issues&#34; we ask the community to raise questions at &lt;a href=&#34;https://discuss.elastic.co/c/beats&#34;&gt;https://discuss.elastic.co/c/beats&lt;/a&gt;. This is monitored by the maintainers.&lt;/p&gt; &#xA;&lt;p&gt;Community Contributions always appreciated and welcome! Please ensure all contributions include tests as appropriate.&lt;/p&gt;</summary>
  </entry>
</feed>