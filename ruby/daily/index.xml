<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom">
  <title>GitHub Ruby Daily Trending</title>
  <id>http://mshibanami.github.io/GitHubTrendingRSS</id>
  <updated>2024-10-01T01:34:31Z</updated>
  <subtitle>Daily Trending of Ruby in GitHub</subtitle>
  <link href="http://mshibanami.github.io/GitHubTrendingRSS"></link>
  <entry>
    <title>charlotte-ruby/impressionist</title>
    <updated>2024-10-01T01:34:31Z</updated>
    <id>tag:github.com,2024-10-01:/charlotte-ruby/impressionist</id>
    <link href="https://github.com/charlotte-ruby/impressionist" rel="alternate"></link>
    <summary type="html">&lt;p&gt;Rails Plugin that tracks impressions and page views&lt;/p&gt;&lt;hr&gt;&lt;p&gt;&lt;img src=&#34;https://github.com/charlotte-ruby/impressionist/raw/master/logo.png&#34; alt=&#34;Impressionist Logo&#34;&gt;&lt;/p&gt; &#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/charlotte-ruby/impressionist/actions/workflows/main.yml&#34;&gt;&lt;img src=&#34;https://github.com/charlotte-ruby/impressionist/actions/workflows/main.yml/badge.svg?sanitize=true&#34; alt=&#34;Main&#34;&gt;&lt;/a&gt; &lt;a href=&#34;https://codeclimate.com/github/charlotte-ruby/impressionist&#34;&gt;&lt;img src=&#34;https://codeclimate.com/github/charlotte-ruby/impressionist.png&#34; alt=&#34;Code Climate&#34;&gt;&lt;/a&gt;&lt;/p&gt; &#xA;&lt;h1&gt;WE ARE LOOKING FOR MAINTAINERS. CONTACT @johnmcaliley IF YOU ARE INTERESTED IN HELPING&lt;/h1&gt; &#xA;&lt;h1&gt;impressionist&lt;/h1&gt; &#xA;&lt;p&gt;A lightweight plugin that logs impressions per action or manually per model&lt;/p&gt; &#xA;&lt;hr&gt; &#xA;&lt;h2&gt;What does this thing do?&lt;/h2&gt; &#xA;&lt;p&gt;Logs an impression... and I use that term loosely. It can log page impressions (technically action impressions), but it is not limited to that. You can log impressions multiple times per request. And you can also attach it to a model. The goal of this project is to provide customizable stats that are immediately accessible in your application as opposed to using Google Analytics and pulling data using their API. You can attach custom messages to impressions. No reporting yet.. this thingy just creates the data.&lt;/p&gt; &#xA;&lt;h2&gt;What about bots?&lt;/h2&gt; &#xA;&lt;p&gt;They are ignored. 1200 known bots have been added to the ignore list as of February 1, 2011. Impressionist uses this list: &lt;a href=&#34;http://www.user-agents.org/allagents.xml&#34;&gt;http://www.user-agents.org/allagents.xml&lt;/a&gt;&lt;/p&gt; &#xA;&lt;h2&gt;Installation&lt;/h2&gt; &#xA;&lt;p&gt;Add it to your Gemfile&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;#rails 6&#xA;gem &#39;impressionist&#39;&#xA;&#xA;#rails 5 or lower&#xA;gem &#39;impressionist&#39;, &#39;~&amp;gt;1.6.1&#39;&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Install with Bundler&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;bundle install&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Generate the impressions table migration&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;rails g impressionist&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Run the migration&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;rake db:migrate&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;The following fields are provided in the migration:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;t.string   &#34;impressionable_type&#34;  # model type: Widget&#xA;t.integer  &#34;impressionable_id&#34;    # model instance ID: @widget.id&#xA;t.integer  &#34;user_id&#34;              # automatically logs @current_user.id&#xA;t.string   &#34;controller_name&#34;      # logs the controller name&#xA;t.string   &#34;action_name&#34;          # logs the action_name&#xA;t.string   &#34;view_name&#34;            # TODO: log individual views (as well as partials and nested partials)&#xA;t.string   &#34;request_hash&#34;         # unique ID per request, in case you want to log multiple impressions and group them&#xA;t.string   &#34;session_hash&#34;         # logs the rails session&#xA;t.string   &#34;ip_address&#34;           # request.remote_ip&#xA;t.text     &#34;params&#34;               # request.params, except action name, controller name and resource id&#xA;t.string   &#34;referrer&#34;             # request.referer&#xA;t.string   &#34;message&#34;              # custom message you can add&#xA;t.datetime &#34;created_at&#34;           # I am not sure what this is.... Any clue?&#xA;t.datetime &#34;updated_at&#34;           # never seen this one before either....  Your guess is as good as mine?? ;-)&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h2&gt;Usage&lt;/h2&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt; &lt;p&gt;Log all actions in a controller&lt;/p&gt; &lt;pre&gt;&lt;code&gt; WidgetsController &amp;lt; ApplicationController&#xA;   impressionist&#xA; end&#xA;&lt;/code&gt;&lt;/pre&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;Specify actions you want logged in a controller&lt;/p&gt; &lt;pre&gt;&lt;code&gt; WidgetsController &amp;lt; ApplicationController&#xA;   impressionist :actions=&amp;gt;[:show,:index]&#xA; end&#xA;&lt;/code&gt;&lt;/pre&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;Make your models impressionable. This allows you to attach impressions to an AR model instance. Impressionist will automatically log the Model name (based on action_name) and the id (based on params[:id]), but in order to get the count of impressions (example: @widget.impression_count), you will need to make your model impressionable&lt;/p&gt; &lt;pre&gt;&lt;code&gt; class Widget &amp;lt; ActiveRecord::Base&#xA;   is_impressionable&#xA; end&#xA;&lt;/code&gt;&lt;/pre&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;Log an impression per model instance in your controller. Note that it is not necessary to specify &#34;impressionist&#34; (usage #1) in the top of you controller if you are using this method. If you add &#34;impressionist&#34; to the top of your controller and also use this method in your action, it will result in 2 impressions being logged (but associated with one request_hash). If you&#39;re using &lt;a href=&#34;https://github.com/norman/friendly_id&#34;&gt;friendly_id&lt;/a&gt; be sure to log impressionist this way, as params[:id] will return a string(url slug) while impressionable_id is a Integer column in database. Also note that you have to take step #3 for the Widget model for this to work.&lt;/p&gt; &lt;pre&gt;&lt;code&gt; def show&#xA;   @widget = Widget.find&#xA;   impressionist(@widget, &#34;message...&#34;) # 2nd argument is optional&#xA; end&#xA;&lt;/code&gt;&lt;/pre&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;Get unique impression count from a model. This groups impressions by request_hash, so if you logged multiple impressions per request, it will only count them one time. This unique impression count will not filter out unique users, only unique requests&lt;/p&gt; &lt;pre&gt;&lt;code&gt; @widget.impressionist_count&#xA; @widget.impressionist_count(:start_date=&amp;gt;&#34;2011-01-01&#34;,:end_date=&amp;gt;&#34;2011-01-05&#34;)&#xA; @widget.impressionist_count(:start_date=&amp;gt;&#34;2011-01-01&#34;)  #specify start date only, end date = now&#xA;&lt;/code&gt;&lt;/pre&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;Get the unique impression count from a model filtered by IP address. This in turn will give you impressions with unique request_hash, since rows with the same request_hash will have the same IP address.&lt;/p&gt; &lt;pre&gt;&lt;code&gt; @widget.impressionist_count(:filter=&amp;gt;:ip_address)&#xA;&lt;/code&gt;&lt;/pre&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;Get the unique impression count from a model filtered by params. This in turn will give you impressions with unique params.&lt;/p&gt; &lt;pre&gt;&lt;code&gt; @widget.impressionist_count(:filter =&amp;gt; :params)&#xA;&lt;/code&gt;&lt;/pre&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;Get the unique impression count from a model filtered by session hash. Same as #6 regarding request hash. This may be more desirable than filtering by IP address depending on your situation, since filtering by IP may ignore visitors that use the same IP. The downside to this filtering is that a user could clear session data in their browser and skew the results.&lt;/p&gt; &lt;pre&gt;&lt;code&gt; @widget.impressionist_count(:filter=&amp;gt;:session_hash)&#xA;&lt;/code&gt;&lt;/pre&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;Get total impression count. This may return more than 1 impression per http request, depending on how you are logging impressions&lt;/p&gt; &lt;pre&gt;&lt;code&gt; @widget.impressionist_count(:filter=&amp;gt;:all)&#xA;&lt;/code&gt;&lt;/pre&gt; &lt;/li&gt; &#xA; &lt;li&gt; &lt;p&gt;Get impression count by message. This only counts impressions of the given message.&lt;/p&gt; &lt;pre&gt;&lt;code&gt;@widget.impressionist_count(:message=&amp;gt;&#34;pageview&#34;, :filter=&amp;gt;:all)&#xA;&lt;/code&gt;&lt;/pre&gt; &lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;p&gt;Logging impressions for authenticated users happens automatically. If you have a current_user helper or use @current_user in your before_filter (or before_action in Rails &amp;gt;= 5.0) to set your authenticated user, current_user.id will be written to the user_id field in the impressions table.&lt;/p&gt; &#xA;&lt;h2&gt;Adding a counter cache&lt;/h2&gt; &#xA;&lt;p&gt;Impressionist makes it easy to add a &lt;code&gt;counter_cache&lt;/code&gt; column to your model. The most basic configuration looks like:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;is_impressionable :counter_cache =&amp;gt; true&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;This will automatically increment the &lt;code&gt;impressions_count&lt;/code&gt; column in the included model. &lt;b&gt;Note: You&#39;ll need to add that column to your model. If you&#39;d like specific a different column name, you can:&lt;/b&gt;&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;is_impressionable :counter_cache =&amp;gt; true, :column_name =&amp;gt; :my_column_name&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;If you&#39;d like to include only unique impressions in your count:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;# default will be filtered by ip_address&#xA;is_impressionable :counter_cache =&amp;gt; true, :column_name =&amp;gt; :my_column_name, :unique =&amp;gt; true&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;If you&#39;d like to specify what sort of unique impression you&#39;d like to save? Fear not, Any option you pass to unique, impressionist_count will use it as its filter to update_counters based on that unique option.&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;# options are any column in the impressions&#39; table.&#xA;is_impressionable :counter_cache =&amp;gt; true, :column_name =&amp;gt; :my_column_name, :unique =&amp;gt; :request_hash&#xA;is_impressionable :counter_cache =&amp;gt; true, :column_name =&amp;gt; :my_column_name, :unique =&amp;gt; :all&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h2&gt;Adding column to model&lt;/h2&gt; &#xA;&lt;p&gt;It is as simple as this:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;t.integer :my_column_name, :default =&amp;gt; 0&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;If you want to use the typical Rails 4 migration generator, you can:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;rails g migration AddImpressionsCountToBook impressions_count:int&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h2&gt;What if I only want to record unique impressions?&lt;/h2&gt; &#xA;&lt;p&gt;Maybe you only care about unique impressions and would like to avoid unnecessary database records. You can specify conditions for recording impressions in your controller:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;# only record impression if the request has a unique combination of type, id, and session&#xA;impressionist :unique =&amp;gt; [:impressionable_type, :impressionable_id, :session_hash]&#xA;&#xA;# only record impression if the request has a unique combination of controller, action, and session&#xA;impressionist :unique =&amp;gt; [:controller_name, :action_name, :session_hash]&#xA;&#xA;# only record impression if session is unique&#xA;impressionist :unique =&amp;gt; [:session_hash]&#xA;&#xA;# only record impression if param is unique&#xA;impressionist :unique =&amp;gt; [:params]&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Or you can use the &lt;code&gt;impressionist&lt;/code&gt; method directly:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;impressionist(impressionable, &#34;some message&#34;, :unique =&amp;gt; [:session_hash])&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h2&gt;Are you using Mongoid?&lt;/h2&gt; &#xA;&lt;p&gt;Execute this command on your terminal/console:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;rails g impressionist --orm mongoid&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;This command create a file &lt;code&gt;impression.rb&lt;/code&gt; on &lt;code&gt;config/initializer&lt;/code&gt; folder. Add &lt;code&gt;config.orm = :mongoid&lt;/code&gt; to this file:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code&gt;# Use this hook to configure impressionist parameters&#xA;Impressionist.setup do |config|&#xA;  # Define ORM. Could be :active_record (default), :mongo_mapper or :mongoid&#xA;  # config.orm = :active_record&#xA;  config.orm = :mongoid&#xA;end&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;h2&gt;Contributing to impressionist&lt;/h2&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;Check out the latest master to make sure the feature hasn&#39;t been implemented or the bug hasn&#39;t been fixed yet&lt;/li&gt; &#xA; &lt;li&gt;Check out the issue tracker to make sure someone already hasn&#39;t requested it and/or contributed it&lt;/li&gt; &#xA; &lt;li&gt;Fork the project&lt;/li&gt; &#xA; &lt;li&gt;Start a feature/bugfix branch&lt;/li&gt; &#xA; &lt;li&gt;Commit and push until you are happy with your contribution&lt;/li&gt; &#xA; &lt;li&gt;Make sure to add rpsec tests for it. Patches or features without tests will be ignored. Also, try to write better tests than I do ;-)&lt;/li&gt; &#xA; &lt;li&gt;If adding engine controller or view functionality, use HAML and Inherited Resources.&lt;/li&gt; &#xA; &lt;li&gt;All testing is done inside a small Rails app (test_app). You will find specs within this app.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;Want to run the tests? Ok mummy&lt;/h2&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;bundle install&lt;/li&gt; &#xA; &lt;li&gt;rails g impressionist&lt;/li&gt; &#xA; &lt;li&gt;rake db:migrate &amp;amp;&amp;amp; rake db:test:prepare&lt;/li&gt; &#xA; &lt;li&gt;Run rake or rspec spec inside test_app dir&lt;/li&gt; &#xA; &lt;li&gt;nothing else.&lt;/li&gt; &#xA; &lt;li&gt;:wq&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;Contributors&lt;/h2&gt; &#xA;&lt;p&gt;WE ARE CURRENTLY LOOKING FOR SOMEONE TO HELP MAINTAIN THIS REPOSITORY. IF YOU ARE INTERESTED, MESSAGE @johnmcaliley.&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/johnmcaliley&#34;&gt;johnmcaliley - creator&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/jgrau&#34;&gt;jgrau&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/acnalesso&#34;&gt;acnalesso&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/coryschires&#34;&gt;coryschires&lt;/a&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;a href=&#34;https://github.com/georgmittendorfer&#34;&gt;georgmittendorfer&lt;/a&gt;&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;Copyright (c) 2011 John McAliley. See LICENSE.txt for further details.&lt;/p&gt;</summary>
  </entry>
</feed>