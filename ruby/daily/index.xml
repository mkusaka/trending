<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom">
  <title>GitHub Ruby Daily Trending</title>
  <id>http://mshibanami.github.io/GitHubTrendingRSS</id>
  <updated>2024-09-02T01:33:43Z</updated>
  <subtitle>Daily Trending of Ruby in GitHub</subtitle>
  <link href="http://mshibanami.github.io/GitHubTrendingRSS"></link>
  <entry>
    <title>nickthecook/archyve</title>
    <updated>2024-09-02T01:33:43Z</updated>
    <id>tag:github.com,2024-09-02:/nickthecook/archyve</id>
    <link href="https://github.com/nickthecook/archyve" rel="alternate"></link>
    <summary type="html">&lt;p&gt;&lt;/p&gt;&lt;hr&gt;&lt;h1&gt;README&lt;/h1&gt; &#xA;&lt;p&gt;Archyve is a web app that makes pretrained LLMs aware of a user&#39;s documents, while keeping those documents on the user&#39;s own devices and infrastructure.&lt;/p&gt; &#xA;&lt;h2&gt;Overview&lt;/h2&gt; &#xA;&lt;p&gt;Archyve enables Retrieval-Augmented Generation (RAG) by providing an API to query the user&#39;s docs for relevant context. The Archyve client provides Archyve with the prompt the user entered, and Archyve will return relevant text chunks that the client can include in its prompt to an LLM server.&lt;/p&gt; &#xA;&lt;p&gt;Archyve has an &lt;strong&gt;experimental&lt;/strong&gt; Knowledge Graph feature (a.k.a &#34;Graph RAG&#34;).&lt;/p&gt; &#xA;&lt;p&gt;Archyve provides:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;a document upload and ingest UI, where the user can upload documents and test similarity searches against them&lt;/li&gt; &#xA; &lt;li&gt;a built-in LLM chat UI, so the user can test the effectiveness of their documents with an LLM&lt;/li&gt; &#xA; &lt;li&gt;an API, so the user can provide Archyve search results in dedicated LLM chat UIs&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;For LLM servers, Archyve supports:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;strong&gt;Ollama&lt;/strong&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;strong&gt;Azure OpenAI&lt;/strong&gt; (not plain OpenAI - yet)&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;The Getting Started section will walk you through setting up Archyve for use with Ollama.&lt;/p&gt; &#xA;&lt;h2&gt;Screenshots&lt;/h2&gt; &#xA;&lt;h3&gt;Chat UI&lt;/h3&gt; &#xA;&lt;img width=&#34;640&#34; alt=&#34;image&#34; src=&#34;https://github.com/user-attachments/assets/748aed85-c43b-4d95-ae15-483746edb978&#34;&gt; &#xA;&lt;h3&gt;Documents UI&lt;/h3&gt; &#xA;&lt;img width=&#34;640&#34; alt=&#34;image&#34; src=&#34;https://github.com/user-attachments/assets/cde552eb-4c71-4741-966b-79c98ac46601&#34;&gt; &#xA;&lt;h3&gt;Graph database view&lt;/h3&gt; &#xA;&lt;img width=&#34;640&#34; alt=&#34;image&#34; src=&#34;https://github.com/user-attachments/assets/8f023566-43eb-4e8b-8fa7-6bb02a7c03e3&#34;&gt; &#xA;&lt;h2&gt;Concepts&lt;/h2&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;strong&gt;Collections&lt;/strong&gt; are collections of documents that the user can search; use a separate Collection for each subject you want your LLM server to handle questions about&lt;/li&gt; &#xA; &lt;li&gt;The &lt;strong&gt;Knowledge Graph&lt;/strong&gt; is an in-progress feature of Archyve that extracts entities and relationships from documents, generates summaries of entities, and then provides those summaries as context for LLM prompts.&lt;/li&gt; &#xA; &lt;li&gt;&lt;strong&gt;Model Servers&lt;/strong&gt; are LLM servers; Archyve can be configured to know about multiple Model Servers, and an admin can switch Archyve from one Model Server to another at runtime&lt;/li&gt; &#xA; &lt;li&gt;The &lt;strong&gt;Admin UI&lt;/strong&gt; is a portion of the Archyve web interface that is only available to Users with the &lt;code&gt;admin&lt;/code&gt; attribute set to &lt;code&gt;true&lt;/code&gt;; you can break things in there, but right now that is the way to configure settings that control Archyve&#39;s behaviour&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h2&gt;Getting started&lt;/h2&gt; &#xA;&lt;h3&gt;Running an Archyve container&lt;/h3&gt; &#xA;&lt;p&gt;To run Archyve, use &lt;code&gt;docker compose&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;blockquote&gt; &#xA; &lt;p&gt;Podman compose will work as well, if you edit the compose file so that Archyve can connect to ollama on &lt;code&gt;localhost&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;/blockquote&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;Clone this repo&lt;/li&gt; &#xA; &lt;li&gt;&lt;code&gt;cp dotenv_template local.env&lt;/code&gt;&lt;/li&gt; &#xA; &lt;li&gt;Run &lt;code&gt;openssl rand -hex 64&lt;/code&gt; and put the value in the &lt;code&gt;SECRET_KEY_BASE&lt;/code&gt; variable in your &lt;code&gt;local.env&lt;/code&gt; file&lt;/li&gt; &#xA; &lt;li&gt;Run the container&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;docker compose up --build&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;blockquote&gt; &#xA; &lt;p&gt;If you see &#34;âœ˜ archyve-worker Error&#34;, don&#39;t worry about it. Docker will build the image and run it.&lt;/p&gt; &#xA;&lt;/blockquote&gt; &#xA;&lt;ol start=&#34;5&#34;&gt; &#xA; &lt;li&gt;Browse to &lt;a href=&#34;http://127.0.0.1:3300&#34;&gt;http://127.0.0.1:3300&lt;/a&gt; and log in with &lt;code&gt;admin@archyve.io&lt;/code&gt; / &lt;code&gt;password&lt;/code&gt; (you can change these values by setting &lt;code&gt;USERNAME&lt;/code&gt; and &lt;code&gt;PASSWORD&lt;/code&gt; in your &lt;code&gt;local.env&lt;/code&gt; file and restarting the container)&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;blockquote&gt; &#xA; &lt;p&gt;&lt;strong&gt;WARNING&lt;/strong&gt;: The container will write a file with local encryption keys into &lt;code&gt;config/local&lt;/code&gt;. &lt;strong&gt;If you lose this file&lt;/strong&gt;, the application will not be able to decrypt sensitive data within the database (e.g. passwords or API keys), and the database will need to be reset, &lt;strong&gt;losing all data&lt;/strong&gt;.&lt;/p&gt; &#xA; &lt;p&gt;If you want to migrate your database elsewhere, migrate this file along with it.&lt;/p&gt; &#xA;&lt;/blockquote&gt; &#xA;&lt;h3&gt;Running Archyve directly on your host machine&lt;/h3&gt; &#xA;&lt;p&gt;This section is about running Archyve directly on your host machine.&lt;/p&gt; &#xA;&lt;p&gt;If you want to develop Archyve you probably want the app runing directly on your host, rather than in a container, to reduce the time it takes to try your changes.&lt;/p&gt; &#xA;&lt;h4&gt;Installing dependencies on a Mac&lt;/h4&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;Ensure that you have &lt;a href=&#34;https://brew.sh&#34;&gt;brew&lt;/a&gt; installed&lt;/li&gt; &#xA; &lt;li&gt;Ensure that you have &lt;code&gt;docker&lt;/code&gt; set up and a &#34;machine&#34; configured and ready to pull and run container images&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;blockquote&gt; &#xA; &lt;p&gt;You can use Docker Desktop, Podman Machine, Rancher Desktop, or anything else that provides OCI capability. The &lt;code&gt;compose.yml&lt;/code&gt; file in this repo assumes you&#39;re using Docker, but the only difference when using Podman is that you may need to use different YAML to make your Ollama port on the host available to the containers.&lt;/p&gt; &#xA;&lt;/blockquote&gt; &#xA;&lt;ol start=&#34;3&#34;&gt; &#xA; &lt;li&gt;Ensure you have &lt;a href=&#34;https://github.com/nickthecook/crops?tab=readme-ov-file#installation&#34;&gt;ops&lt;/a&gt; installed:&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;p&gt;&lt;code&gt;brew install nickthecook/crops/ops&lt;/code&gt;&lt;/p&gt; &#xA;&lt;ol start=&#34;4&#34;&gt; &#xA; &lt;li&gt;Install &lt;a href=&#34;https://ollama.com/&#34;&gt;Ollama&lt;/a&gt; and make sure you&#39;re running &lt;code&gt;ollama serve&lt;/code&gt; and that you have the minimum models installed (see section on Ollama further below).&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;h4&gt;Installing dependencies on Linux&lt;/h4&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;Ensure that you have Docker or Podman and the appropriate &lt;code&gt;compose&lt;/code&gt; plugins installed&lt;/li&gt; &#xA; &lt;li&gt;Ensure you have &lt;a href=&#34;https://github.com/nickthecook/crops?tab=readme-ov-file#installation&#34;&gt;ops&lt;/a&gt; installed (download the binary for your platform).&lt;/li&gt; &#xA; &lt;li&gt;Install &lt;a href=&#34;https://ollama.com/&#34;&gt;Ollama&lt;/a&gt; and make sure you&#39;re running &lt;code&gt;ollama serve&lt;/code&gt; and that you have the minimum models installed (see section on Ollama further below).&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;h4&gt;Running Archyve&lt;/h4&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;Clone this repo&lt;/li&gt; &#xA; &lt;li&gt;&lt;code&gt;cp config/dev/config.sample.json config/dev/config.json&lt;/code&gt;&lt;/li&gt; &#xA; &lt;li&gt;Edit &lt;code&gt;config/dev/config.json&lt;/code&gt;, running the given commands and replacing them in the file with their output&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;only put secrets in this file for dev - use &lt;code&gt;config/dev/secrets.ejson&lt;/code&gt; for any real environment&lt;/li&gt; &#xA; &lt;li&gt;you can change the auto-configured models here if you want; model &#34;name&#34; is for display in Archyve, model &#34;model&#34; is what is sent to the LLM server when making a request&lt;/li&gt; &#xA; &lt;li&gt;you must have at least one model with &lt;code&gt;embedding: true&lt;/code&gt; and one without &lt;code&gt;embedding&lt;/code&gt; set (or &lt;code&gt;embedding: false&lt;/code&gt;)&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;ol start=&#34;4&#34;&gt; &#xA; &lt;li&gt;&lt;code&gt;ops up&lt;/code&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;code&gt;ops rails db:setup&lt;/code&gt; (after the initial setup)&lt;/li&gt; &#xA; &lt;li&gt;&lt;code&gt;ops rails neo4j:migrate&lt;/code&gt;&lt;/li&gt; &#xA; &lt;li&gt;&lt;code&gt;ops server&lt;/code&gt;&lt;/li&gt; &#xA; &lt;li&gt;Open &lt;code&gt;http://127.0.0.1:3300/&lt;/code&gt; in a browser and you can login using &lt;code&gt;admin@archyve.io&lt;/code&gt; and &lt;code&gt;password&lt;/code&gt;.&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;blockquote&gt; &#xA; &lt;p&gt;&lt;code&gt;ops&lt;/code&gt; loads environment variables from &lt;code&gt;config/dev/config.json&lt;/code&gt; and &lt;code&gt;config/dev/secrets.ejson&lt;/code&gt;. It loads actions and dependencies from &lt;code&gt;ops.yml&lt;/code&gt; in your working directory. It will save you time.&lt;/p&gt; &#xA; &lt;p&gt;You may want to &lt;code&gt;alias rails=&#34;ops rails&#34;&lt;/code&gt; if you&#39;re a Rails dev, and the &lt;code&gt;rails ...&lt;/code&gt; muscle memory is hard to change.&lt;/p&gt; &#xA;&lt;/blockquote&gt; &#xA;&lt;h2&gt;Deploying Archyve&lt;/h2&gt; &#xA;&lt;p&gt;This section contains information for people deploying Archyve in a production environment.&lt;/p&gt; &#xA;&lt;h3&gt;Provisioning ModelServers and ModelConfigs&lt;/h3&gt; &#xA;&lt;p&gt;To configure Archyve with a ModelServer (an LLM server with an API), set the environment variable &lt;code&gt;PROVISIONED_MODEL_SERVERS&lt;/code&gt; to an array like this:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;[&#xA;  {&#xA;    &#34;name&#34;: &#34;localhost&#34;,&#xA;    &#34;url&#34;: &#34;http://localhost:11434&#34;,&#xA;    &#34;provider&#34;: &#34;ollama&#34;&#xA;  }&#xA;]&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;&lt;code&gt;ollama&lt;/code&gt; is currently the only supported provider.&lt;/p&gt; &#xA;&lt;p&gt;To configure Archyve with a ModelConfig (a particular LLM), set the environment variable &lt;code&gt;PROVISIONED_MODEL_CONFIGS&lt;/code&gt; to an array like this:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;[&#xA;  {&#xA;    &#34;name&#34;: &#34;mistral:instruct&#34;,&#xA;    &#34;model&#34;: &#34;mistral:instruct&#34;,&#xA;    &#34;temperature&#34;: 0.1&#xA;  },&#xA;  {&#xA;    &#34;name&#34;: &#34;nomic-embed-text&#34;,&#xA;    &#34;model&#34;: &#34;nomic-embed-text&#34;,&#xA;    &#34;embedding&#34;: true&#xA;  }&#xA;]&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;If you don&#39;t provision at least one model with &lt;code&gt;embedding: true&lt;/code&gt; and one model without an &lt;code&gt;embedding&lt;/code&gt; setting, Archyve won&#39;t work. However, you can configure these in the Admin UI after starting the app.&lt;/p&gt; &#xA;&lt;h3&gt;Scheduled jobs&lt;/h3&gt; &#xA;&lt;p&gt;Archyve will schedule some jobs by default. If you want to disable these jobs, set &lt;code&gt;CONFIGURE_DEFAULT_JOBS&lt;/code&gt; to &lt;code&gt;false&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;p&gt;To schedule additional jobs, or override any of the default schedules, set &lt;code&gt;SIDEKIQ_CRON&lt;/code&gt; to a hash like this:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;{&#xA;  &#34;clean_api_calls&#34;: {&#xA;    &#34;cron&#34;: &#34;3 * * * *&#34;,&#xA;    &#34;class&#34;: &#34;CleanApiCallsJob&#34;,&#xA;    &#34;args&#34;: [],&#xA;    &#34;description&#34;: &#34;Remove ApiCalls older than 14 days from the database&#34;,&#xA;    &#34;status&#34;: &#34;enabled&#34;&#xA;  }&#xA;}&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;Jobs defined in the &lt;code&gt;SIDEKIQ_CRON&lt;/code&gt; environment variable will override any default jobs with the same key (e.g. &lt;code&gt;clean_api_calls&lt;/code&gt; in this example).&lt;/p&gt; &#xA;&lt;p&gt;In general, you shouldn&#39;t need to set any of these except in development.&lt;/p&gt; &#xA;&lt;h2&gt;Using Archyve&lt;/h2&gt; &#xA;&lt;p&gt;Archyve provides a web interface with a few different areas, focused on different things:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;strong&gt;Documents&lt;/strong&gt; (the default page when logged in) allows you to upload, process, and test searching your document collections&lt;/li&gt; &#xA; &lt;li&gt;&lt;strong&gt;Chat&lt;/strong&gt; lets you chat with an LLM, using Archyve&#39;s prompt augmentation to pull relevant information from your document collections&lt;/li&gt; &#xA; &lt;li&gt;&lt;strong&gt;Admin&lt;/strong&gt; is available only to Users with the &lt;code&gt;admin&lt;/code&gt; attribute set to &lt;code&gt;true&lt;/code&gt;, and allows admins to manage all aspects of Archyve&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;blockquote&gt; &#xA; &lt;p&gt;You can &lt;strong&gt;break things&lt;/strong&gt; in the admin UI. When starting out, it&#39;s best just to use it to configure ModelServers, ModelConfigs, and Settings.&lt;/p&gt; &#xA;&lt;/blockquote&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;strong&gt;Sidekiq&lt;/strong&gt; shows the interface for managing background jobs&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;h3&gt;Document ingest&lt;/h3&gt; &#xA;&lt;p&gt;Documents uploaded to any Collection go through a few stages:&lt;/p&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;Chunking (splitting the document into chunks of 1000 characters)&lt;/li&gt; &#xA; &lt;li&gt;Embedding (vectorizing the chunks using an embedding model)&lt;/li&gt; &#xA; &lt;li&gt;Storing in the vector database (ChromaDB)&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;p&gt;If a stage takes longer than a second, the progress is shown in the UI. Once a document is in the &lt;code&gt;Embedded&lt;/code&gt; state, you can test searching it to see what chunks would be returned for a given chat prompt.&lt;/p&gt; &#xA;&lt;p&gt;When the Collection has the Knowledge Graph feature enabled, Documents also go through:&lt;/p&gt; &#xA;&lt;ol start=&#34;4&#34;&gt; &#xA; &lt;li&gt;Entity extraction (having an LLM identify entities and relationships from the text)&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;p&gt;Then the Collection will go through a few stages:&lt;/p&gt; &#xA;&lt;ol start=&#34;5&#34;&gt; &#xA; &lt;li&gt;Entity summarization (creating a summary for each entity based on references found in the text during stage 4)&lt;/li&gt; &#xA; &lt;li&gt;Vectorization (vectorizing the summary using an embedding model and storing in ChromaDB)&lt;/li&gt; &#xA; &lt;li&gt;Graphing (pushing entities and relationships to Neo4j)&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;h3&gt;Viewing extracted entities&lt;/h3&gt; &#xA;&lt;p&gt;Once you have a document in the &lt;code&gt;Extracted&lt;/code&gt; state, you can view the most commonly references entities that were extracted from Documents in a Collection. Click the &#34;Top 10 entities by occurrences&#34; tab on the Collection page to see the 10 entities in that Collection that appeared more often in Documents than any others.&lt;/p&gt; &#xA;&lt;blockquote&gt; &#xA; &lt;p&gt;Relationships are not yet visible in the Archyve UI, although you are presented with a count of the number of relationships each entity has.&lt;/p&gt; &#xA;&lt;/blockquote&gt; &#xA;&lt;h3&gt;Viewing the Knowledge Graph&lt;/h3&gt; &#xA;&lt;p&gt;Once you have a Collection in the &lt;code&gt;Graphed&lt;/code&gt; state, you can view the knowledge graph in the Neo4j web interface:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;a href=&#34;http://localhost:7474&#34;&gt;http://localhost:7474&lt;/a&gt; (credentials are neo4j/password by default)&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;You can query the graph using Cypher queries. E.g., for a Collection called &#34;Greek Mythology&#34;, use this query to show the complete graph, with all relationships:&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;match (n:&lt;/code&gt;Nodes::Entity&lt;code&gt; {collection_name: &#34;Greek Mythology&#34;}) return (n)&lt;/code&gt;&lt;/p&gt; &#xA;&lt;blockquote&gt; &#xA; &lt;p&gt;Archyve doesn&#39;t do anything with data once it&#39;s in Neo4j, but it will, and the Neo4j interface can be useful in assessing the quality of entity extraction.&lt;/p&gt; &#xA;&lt;/blockquote&gt; &#xA;&lt;h2&gt;API&lt;/h2&gt; &#xA;&lt;blockquote&gt; &#xA; &lt;p&gt;See &lt;a href=&#34;https://archyve.io&#34;&gt;archyve.io&lt;/a&gt; for details on the ReST API.&lt;/p&gt; &#xA;&lt;/blockquote&gt; &#xA;&lt;h3&gt;Authentication&lt;/h3&gt; &#xA;&lt;p&gt;Archyve provides a ReST API. To use it, you must have:&lt;/p&gt; &#xA;&lt;ol&gt; &#xA; &lt;li&gt;a Client ID (goes in the &lt;code&gt;X-Client-Id&lt;/code&gt; header in all API requests)&lt;/li&gt; &#xA; &lt;li&gt;an API key (goes in the &lt;code&gt;Authorization&lt;/code&gt; header after &lt;code&gt;Bearer &lt;/code&gt;)&lt;/li&gt; &#xA;&lt;/ol&gt; &#xA;&lt;p&gt;&lt;em&gt;TODO: add this to the UI&lt;/em&gt;&lt;/p&gt; &#xA;&lt;p&gt;If you are running the app on your host, you can set the &lt;code&gt;DEFAULT_API_KEY&lt;/code&gt; and &lt;code&gt;DEFAULT_CLIENT_ID&lt;/code&gt; environment variables. On startup, Archyve will ensure that a client with these credentials exists in its database.&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;&lt;code&gt;DEFAULT_API_KEY&lt;/code&gt; must be a 48-byte value encoded in base64. Generate a key with &lt;code&gt;openssl rand -base64 48&lt;/code&gt;.&lt;/li&gt; &#xA; &lt;li&gt;&lt;code&gt;DEFAULT_CLIENT_ID&lt;/code&gt; can be any string, but it should be unique to your app. A UUID is recommended.&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;blockquote&gt; &#xA; &lt;p&gt;If you are running the app via &lt;code&gt;docker compose&lt;/code&gt; or &lt;code&gt;podman compose&lt;/code&gt;, set the above two environment variables in your &lt;code&gt;local.env&lt;/code&gt; file and restart the containers.&lt;/p&gt; &#xA;&lt;/blockquote&gt; &#xA;&lt;blockquote&gt; &#xA; &lt;p&gt;If you are running the app on your host, set the two above environment variables in &lt;code&gt;config/dev/config.json&lt;/code&gt; and run &lt;code&gt;rails db:seed&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;/blockquote&gt; &#xA;&lt;h4&gt;Sending authenticated requests&lt;/h4&gt; &#xA;&lt;p&gt;You should be able to send API requests like this:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;curl -v localhost:3300/v1/collections \&#xA;  -H &#34;Accept: application/json&#34; \&#xA;  -H &#34;Authorization: Bearer &amp;lt;YOUR_API_KEY&amp;gt;&#34; \&#xA;  -H &#34;X-Client-Id: &amp;lt;YOUR_CLIENT_ID&amp;gt;&#34;&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;See &lt;a href=&#34;https://archyve.io&#34;&gt;archyve.io&lt;/a&gt; for more information on the API.&lt;/p&gt; &#xA;&lt;p&gt;See the next section for setting up Ollama for use by Archyve or &lt;strong&gt;document uploads and chat will fail&lt;/strong&gt;.&lt;/p&gt; &#xA;&lt;p&gt;If you are running Archyve directly on your host, you will have &lt;code&gt;ops&lt;/code&gt; set up and you can use &lt;code&gt;ops request&lt;/code&gt; to send requests to the Archyve API. E.g.:&lt;/p&gt; &#xA;&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;$ ops request search `q=hello`&#xA;$ ops request collections/1/entities/1&#xA;$ ops request version&#xA;&lt;/code&gt;&lt;/pre&gt; &#xA;&lt;p&gt;It will handle setting the authorization header for you.&lt;/p&gt; &#xA;&lt;h2&gt;Dependency details&lt;/h2&gt; &#xA;&lt;h3&gt;Ollama&lt;/h3&gt; &#xA;&lt;blockquote&gt; &#xA; &lt;p&gt;You can run a dedicated instance of Ollama in a container by adding it to the &lt;code&gt;compose.yaml&lt;/code&gt; file, but it takes a while to pull a chat model, so the default here is to assume you already have an Ollama instance.&lt;/p&gt; &#xA;&lt;/blockquote&gt; &#xA;&lt;p&gt;Archyve will use a local instance of &lt;a href=&#34;https://ollama.com/&#34;&gt;Ollama&lt;/a&gt; by default. Ensure you have Ollama installed and running (with &lt;code&gt;ollama serve&lt;/code&gt;) and then run the following commands to set up your Ollama instance for Archyve:&lt;/p&gt; &#xA;&lt;ul&gt; &#xA; &lt;li&gt;embedding model: &lt;code&gt;ollama pull nomic-embed-text&lt;/code&gt;&lt;/li&gt; &#xA; &lt;li&gt;chat model: &lt;code&gt;ollama pull llama3.1:8b&lt;/code&gt;&lt;/li&gt; &#xA; &lt;li&gt;chat summarization model: &lt;code&gt;ollama pull phi3:latest&lt;/code&gt;&lt;/li&gt; &#xA;&lt;/ul&gt; &#xA;&lt;p&gt;You can change which models Archyve will use in the Admin UI (&lt;code&gt;/admin&lt;/code&gt;) under Settings in the menu on the left.&lt;/p&gt; &#xA;&lt;blockquote&gt; &#xA; &lt;p&gt;Keep in mind that whatever models you have Archyve use, you will need to pull those models in Ollama yourself (for now).&lt;/p&gt; &#xA;&lt;/blockquote&gt; &#xA;&lt;h3&gt;Embedding model&lt;/h3&gt; &#xA;&lt;p&gt;Archyve uses the &lt;code&gt;nomic-embed-text&lt;/code&gt; model for all embeddings. Please make sure it is present in your Ollama server.&lt;/p&gt; &#xA;&lt;blockquote&gt; &#xA; &lt;p&gt;Changing the embedding model means you will &lt;strong&gt;need to delete all your Collections&lt;/strong&gt; and re-ingest them, as all the embeddings will have changed and similarity search will not function. Archyve has not been testing with embedding models other than &lt;code&gt;nomic-embed-text&lt;/code&gt;.&lt;/p&gt; &#xA;&lt;/blockquote&gt; &#xA;&lt;h3&gt;Summarization model&lt;/h3&gt; &#xA;&lt;p&gt;The summarization model is the model Archyve will use to summarize chats so it can set a brief title for each one, based on the first message in the chat.&lt;/p&gt; &#xA;&lt;p&gt;&lt;code&gt;phi3&lt;/code&gt; is fast and usually decent at this, but you can change this model in the Admin UI (&lt;code&gt;/admin&lt;/code&gt;) under Settings -&amp;gt; &#34;summarization_model&#34;.&lt;/p&gt; &#xA;&lt;h3&gt;Entity extraction model&lt;/h3&gt; &#xA;&lt;p&gt;If you enable the Knowledge Graph for any Collections, Archyve will default to using &lt;code&gt;llama3.1:8b&lt;/code&gt; as the entity extraction model. If you change this, you may get poor results from the KG. However, I&#39;d be very interested to hear your experience if you do try another model!&lt;/p&gt; &#xA;&lt;h2&gt;Admin UI&lt;/h2&gt; &#xA;&lt;p&gt;There is an admin UI running at &lt;a href=&#34;http://127.0.0.1:3300/admin&#34;&gt;http://127.0.0.1:3300/admin&lt;/a&gt;. There, you can view and change Settings, ModelConfigs, and ModelServers if you are logged in as an admin.&lt;/p&gt; &#xA;&lt;p&gt;There is a link to it in the bottom of the side bar if you are logged into Archyve as an admin.&lt;/p&gt; &#xA;&lt;h2&gt;Jobs&lt;/h2&gt; &#xA;&lt;p&gt;Archyve uses a jobs framework called Sidekiq. It has a web UI that you can access at &lt;a href=&#34;http://127.0.0.1/sidekiq&#34;&gt;http://127.0.0.1/sidekiq&lt;/a&gt; if you are logged in as an admin.&lt;/p&gt; &#xA;&lt;h2&gt;Knowledge Graph&lt;/h2&gt; &#xA;&lt;blockquote&gt; &#xA; &lt;p&gt;Archyve uses the term &#34;Knowledge Graph&#34; instead of Graph RAG because &#34;RAG&#34; is ambiguous. Everything is &#34;retrieved&#34; from somwhere.&lt;/p&gt; &#xA;&lt;/blockquote&gt; &#xA;&lt;p&gt;Archyve has an &lt;strong&gt;experimental&lt;/strong&gt; Knowledge Graph (KG) feature (a.k.a. &#34;Graph RAG&#34;). The user enables the feature per-Collection. It is safe to use, but will generate orders of magnitude more calls to your LLM server than not using it.&lt;/p&gt; &#xA;&lt;blockquote&gt; &#xA; &lt;p&gt;If you enable KG in any Collections, it is &lt;strong&gt;highly recommended&lt;/strong&gt; that you use &lt;code&gt;llama3.1&lt;/code&gt; as your &lt;code&gt;entity_extraction_model&lt;/code&gt;. Many other models are simply not able to extract entities in a meaningful way with the prompts used by Archyve.&lt;/p&gt; &#xA;&lt;/blockquote&gt; &#xA;&lt;p&gt;This feature is a work-in-progress, but it seems effective at providing relevant context at the moment. It will extract entities and the relationships between those entities from the text of your documents. It will then create a summary of each entity and store that in the vector database. These entity summaries will be returned by Archyve API &lt;code&gt;search&lt;/code&gt; along with relevant chunks of your document.&lt;/p&gt; &#xA;&lt;p&gt;If a Collection has KG enabled, chatting with Archyve about that Collection will use the KG to augment your prompts.&lt;/p&gt; &#xA;&lt;p&gt;Archyve KG is based on Microsoft&#39;s &lt;a href=&#34;https://github.com/microsoft/graphrag&#34;&gt;Graph RAG project&lt;/a&gt;. Archyve is as far as extracting entities and relationships from uploaded documents, but does not perform community detection or entity deduplication yet.&lt;/p&gt;</summary>
  </entry>
</feed>